import{g as ro,i as uc,l as dc,s as ve,b as J,t as Q,d as jt,e as Or,j as ms,f as so}from"./disclose-version.DFkSA_UT.js";import{b as fc,h as Ur,H as oo,c as lc,e as io,ao as hc,av as pc,at as bc,K as yc,ap as gc,d as mc,aA as wc,u as vc,Y as xc,p as ct,l as st,k as D,i as Ve,m as H,v as q,t as Fe,j as ut,o as Ec,A as Z,C as $,ah as X,V as ye,f as Pc}from"./index-client.DspN_BWi.js";import{_ as ai,i as re,p as Ge}from"./preload-helper.SRvT0oMi.js";import{r as $t,s as jr}from"./app.D7T5SLwN.js";import{d as ao,g as Ue,w as br}from"./index.Dd4GrStr.js";function ci(e,t,n,r,s){var o=e,i="",a;fc(()=>{if(i===(i=t()??"")){Ur&&oo();return}a!==void 0&&(mc(a),a=void 0),i!==""&&(a=lc(()=>{if(Ur){io.data;for(var c=oo(),u=c;c!==null&&(c.nodeType!==8||c.data!=="");)u=c,c=hc(c);if(c===null)throw pc(),bc;ro(io,u),o=yc(c);return}var f=i+"",d=uc(f);ro(gc(d),d.lastChild),o.before(d)}))})}function kt(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function St(e,t,n=t){var r=wc();dc(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=yr(e)?gr(o):o,n(o),r&&o!==(o=t())){var i=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(a,e.value.length))}}),(Ur&&e.defaultValue!==e.value||vc(t)==null&&e.value)&&n(yr(e)?gr(e.value):e.value),xc(()=>{var s=t();yr(e)&&s===gr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function yr(e){var t=e.type;return t==="number"||t==="range"}function gr(e){return e===""?null:+e}const Ac=!0,Vp=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ac},Symbol.toStringTag,{value:"Module"}));function Bc(){return window.location.hash.slice(1)}const Ic="1.0.7";let Pe=class Dr extends Error{constructor(t,n={}){const r=n.cause instanceof Dr?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Dr&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Ic}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function dt(e,t){return e.exec(t)?.groups}const ui=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,di=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,fi=/^\(.+?\).*?$/,co=/^tuple(?<array>(\[(\d*)\])*)$/;function Gr(e){let t=e.type;if(co.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=Gr(o),s<n-1&&(t+=", ")}const r=dt(co,e.type);return t+=`)${r?.array??""}`,Gr({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Jt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Gr(s),r!==n-1&&(t+=", ")}return t}function Tc(e){return e.type==="function"?`function ${e.name}(${Jt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Jt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Jt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Jt(e.inputs)})`:e.type==="constructor"?`constructor(${Jt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const li=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function $c(e){return li.test(e)}function kc(e){return dt(li,e)}const hi=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Sc(e){return hi.test(e)}function Cc(e){return dt(hi,e)}const pi=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function _c(e){return pi.test(e)}function Nc(e){return dt(pi,e)}const bi=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function yi(e){return bi.test(e)}function Fc(e){return dt(bi,e)}const gi=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Mc(e){return gi.test(e)}function Rc(e){return dt(gi,e)}const Lc=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function zc(e){return Lc.test(e)}const Oc=/^receive\(\) external payable$/;function Uc(e){return Oc.test(e)}const jc=new Set(["indexed"]),Hr=new Set(["calldata","memory","storage"]);class Dc extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Gc extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Hc extends Pe{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class qc extends Pe{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Vc extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Kc extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Zc extends Pe{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class en extends Pe{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Wc extends Pe{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Yc extends Pe{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Jc extends Pe{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Xc extends Pe{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Qc(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const mr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function eu(e,t={}){if(_c(e)){const n=Nc(e);if(!n)throw new en({signature:e,type:"function"});const r=Be(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(lt(r[a],{modifiers:Hr,structs:t,type:"function"}));const i=[];if(n.returns){const a=Be(n.returns),c=a.length;for(let u=0;u<c;u++)i.push(lt(a[u],{modifiers:Hr,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}if(Sc(e)){const n=Cc(e);if(!n)throw new en({signature:e,type:"event"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(lt(r[i],{modifiers:jc,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if($c(e)){const n=kc(e);if(!n)throw new en({signature:e,type:"error"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(lt(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(Mc(e)){const n=Rc(e);if(!n)throw new en({signature:e,type:"constructor"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(lt(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(zc(e))return{type:"fallback"};if(Uc(e))return{type:"receive",stateMutability:"payable"};throw new Wc({signature:e})}const tu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,nu=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ru=/^u?int$/;function lt(e,t){const n=Qc(e,t?.type,t?.structs);if(mr.has(n))return mr.get(n);const r=fi.test(e),s=dt(r?nu:tu,e);if(!s)throw new Hc({param:e});if(s.name&&ou(s.name))throw new qc({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const d=Be(s.type),l=[],h=d.length;for(let y=0;y<h;y++)l.push(lt(d[y],{structs:a}));u={components:l}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(ru.test(s.type))c=`${s.type}256`;else if(c=s.type,t?.type!=="struct"&&!mi(c))throw new Gc({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new Vc({param:e,type:t?.type,modifier:s.modifier});if(Hr.has(s.modifier)&&!iu(c,!!s.array))throw new Kc({param:e,type:t?.type,modifier:s.modifier})}const f={type:`${c}${s.array??""}`,...o,...i,...u};return mr.set(n,f),f}function Be(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],a=e.slice(o+1);switch(i){case",":return r===0?Be(a,[...t,n.trim()]):Be(a,t,`${n}${i}`,r);case"(":return Be(a,t,`${n}${i}`,r+1);case")":return Be(a,t,`${n}${i}`,r-1);default:return Be(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new Xc({current:n,depth:r});return t.push(n.trim()),t}function mi(e){return e==="address"||e==="bool"||e==="function"||e==="string"||ui.test(e)||di.test(e)}const su=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ou(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||ui.test(e)||di.test(e)||su.test(e)}function iu(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function au(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!yi(a))continue;const c=Fc(a);if(!c)throw new en({signature:a,type:"struct"});const u=c.properties.split(";"),f=[],d=u.length;for(let l=0;l<d;l++){const y=u[l].trim();if(!y)continue;const b=lt(y,{type:"struct"});f.push(b)}if(!f.length)throw new Yc({signature:a});t[c.name]=f}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];r[a]=wi(c,t)}return r}const cu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function wi(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(fi.test(i.type))r.push(i);else{const c=dt(cu,i.type);if(!c?.type)throw new Zc({abiParameter:i});const{array:u,type:f}=c;if(f in t){if(n.has(f))throw new Jc({type:f});r.push({...i,type:`tuple${u??""}`,components:wi(t[f]??[],t,new Set([...n,f]))})}else if(mi(f))r.push(i);else throw new Dc({type:f})}}return r}function vi(e){const t=au(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];yi(o)||n.push(eu(o,t))}return n}function G(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function Ke(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new xu(e.type);return`${e.name}(${qn(e.inputs,{includeName:t})})`}function qn(e,{includeName:t=!1}={}){return e?e.map(n=>uu(n,{includeName:t})).join(t?", ":","):""}function uu(e,{includeName:t}){return e.type.startsWith("tuple")?`(${qn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function Me(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function te(e){return Me(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const xi="2.21.57";let wr={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${xi}`};class I extends Error{constructor(t,n={}){const r=n.cause instanceof I?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof I&&n.cause.docsPath||n.docsPath,o=wr.getDocsUrl?.({...n,docsPath:s}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...wr.version?[`Version: ${wr.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=xi}walk(t){return Ei(this,t)}}function Ei(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Ei(e.cause,t):t?null:e}class du extends I{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class uo extends I{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Pi extends I{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${qn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Vn extends I{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class fu extends I{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class lu extends I{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${te(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class hu extends I{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Ai extends I{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class pu extends I{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Bi extends I{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class fo extends I{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Dn extends I{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class bu extends I{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class yu extends I{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Ke(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Ke(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class gu extends I{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class nn extends I{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${qn(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class Kn extends I{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ke(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class mu extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class wu extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class vu extends I{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class xu extends I{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Eu extends I{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class Ii extends I{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Ti extends I{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}class lo extends I{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Dt(e,{dir:t,size:n=32}={}){return typeof e=="string"?nt(e,{dir:t,size:n}):Pu(e,{dir:t,size:n})}function nt(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Ti({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Pu(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Ti({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}class $i extends I{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Au extends I{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Bu extends I{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class Iu extends I{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Ie(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function $e(e,{size:t}){if(te(e)>t)throw new Iu({givenSize:te(e),maxSize:t})}function ot(e,t={}){const{signed:n}=t;t.size&&$e(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Tu(e,t={}){let n=e;if(t.size&&($e(n,{size:t.size}),n=Ie(n)),Ie(n)==="0x00")return!1;if(Ie(n)==="0x01")return!0;throw new Bu(n)}function Re(e,t={}){return Number(ot(e,t))}const $u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function K(e,t={}){return typeof e=="number"||typeof e=="bigint"?V(e,t):typeof e=="string"?Nt(e,t):typeof e=="boolean"?ki(e,t):se(e,t)}function ki(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?($e(n,{size:t.size}),Dt(n,{size:t.size})):n}function se(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=$u[e[s]];const r=`0x${n}`;return typeof t.size=="number"?($e(r,{size:t.size}),Dt(r,{dir:"right",size:t.size})):r}function V(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const c=typeof e=="bigint"?"n":"";throw new $i({max:o?`${o}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Dt(a,{size:r}):a}const ku=new TextEncoder;function Nt(e,t={}){const n=ku.encode(e);return se(n,t)}const Su=new TextEncoder;function Gt(e,t={}){return typeof e=="number"||typeof e=="bigint"?_u(e,t):typeof e=="boolean"?Cu(e,t):Me(e)?Te(e,t):bt(e,t)}function Cu(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?($e(n,{size:t.size}),Dt(n,{size:t.size})):n}const Le={zero:48,nine:57,A:65,F:70,a:97,f:102};function ho(e){if(e>=Le.zero&&e<=Le.nine)return e-Le.zero;if(e>=Le.A&&e<=Le.F)return e-(Le.A-10);if(e>=Le.a&&e<=Le.f)return e-(Le.a-10)}function Te(e,t={}){let n=e;t.size&&($e(n,{size:t.size}),n=Dt(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let i=0,a=0;i<s;i++){const c=ho(r.charCodeAt(a++)),u=ho(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new I(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);o[i]=c*16+u}return o}function _u(e,t){const n=V(e,t);return Te(n)}function bt(e,t={}){const n=Su.encode(e);return typeof t.size=="number"?($e(n,{size:t.size}),Dt(n,{dir:"right",size:t.size})):n}function po(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Nu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ws(e,...t){if(!Nu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Gn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Si(e,t){ws(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Mn=BigInt(2**32-1),bo=BigInt(32);function Fu(e,t=!1){return t?{h:Number(e&Mn),l:Number(e>>bo&Mn)}:{h:Number(e>>bo&Mn)|0,l:Number(e&Mn)|0}}function Mu(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:i}=Fu(e[s],t);[n[s],r[s]]=[o,i]}return[n,r]}const Ru=(e,t,n)=>e<<n|t>>>32-n,Lu=(e,t,n)=>t<<n|e>>>32-n,zu=(e,t,n)=>t<<n-32|e>>>64-n,Ou=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uu=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),vr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Se=(e,t)=>e<<32-t|e>>>t,yo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,ju=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function go(e){for(let t=0;t<e.length;t++)e[t]=ju(e[t])}function Du(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function vs(e){return typeof e=="string"&&(e=Du(e)),ws(e),e}let Ci=class{clone(){return this._cloneInto()}};function _i(e){const t=r=>e().update(vs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Ni=[],Fi=[],Mi=[],Gu=BigInt(0),Xt=BigInt(1),Hu=BigInt(2),qu=BigInt(7),Vu=BigInt(256),Ku=BigInt(113);for(let e=0,t=Xt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ni.push(2*(5*r+n)),Fi.push((e+1)*(e+2)/2%64);let s=Gu;for(let o=0;o<7;o++)t=(t<<Xt^(t>>qu)*Ku)%Vu,t&Hu&&(s^=Xt<<(Xt<<BigInt(o))-Xt);Mi.push(s)}const[Zu,Wu]=Mu(Mi,!0),mo=(e,t,n)=>n>32?zu(e,t,n):Ru(e,t,n),wo=(e,t,n)=>n>32?Ou(e,t,n):Lu(e,t,n);function Yu(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],f=n[c+1],d=mo(u,f,1)^n[a],l=wo(u,f,1)^n[a+1];for(let h=0;h<50;h+=10)e[i+h]^=d,e[i+h+1]^=l}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=Fi[i],c=mo(s,o,a),u=wo(s,o,a),f=Ni[i];s=e[f],o=e[f+1],e[f]=c,e[f+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Zu[r],e[1]^=Wu[r]}n.fill(0)}class xs extends Ci{constructor(t,n,r,s=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,po(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Uu(this.state)}keccak(){yo||go(this.state32),Yu(this.state32,this.rounds),yo||go(this.state32),this.posOut=0,this.pos=0}update(t){Gn(this);const{blockLen:n,state:r}=this;t=vs(t);const s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Gn(this,!1),ws(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return po(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Si(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new xs(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Ju=(e,t,n)=>_i(()=>new xs(t,e,n)),Xu=Ju(1,136,256/8);function ae(e,t){const n=t||"hex",r=Xu(Me(e,{strict:!1})?Gt(e):e);return n==="bytes"?r:K(r)}const Qu=e=>ae(Gt(e));function ed(e){return Qu(e)}function td(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new I("Unable to normalize signature.");return s}const nd=e=>{const t=typeof e=="string"?e:Tc(e);return td(t)};function Ri(e){return ed(nd(e))}const Zn=Ri;class le extends I{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class Wn extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const xr=new Wn(8192);function En(e,t){if(xr.has(`${e}.${t}`))return xr.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=ae(bt(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());const o=`0x${s.join("")}`;return xr.set(`${e}.${t}`,o),o}function Li(e,t){if(!oe(e,{strict:!1}))throw new le({address:e});return En(e,t)}const rd=/^0x[a-fA-F0-9]{40}$/,Er=new Wn(8192);function oe(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Er.has(r))return Er.get(r);const s=rd.test(e)?e.toLowerCase()===e?!0:n?En(e)===e:!0:!1;return Er.set(r,s),s}function Ze(e){return typeof e[0]=="string"?Ye(e):sd(e)}function sd(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Ye(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function rn(e,t,n,{strict:r}={}){return Me(e,{strict:!1})?ji(e,t,n,{strict:r}):Ui(e,t,n,{strict:r})}function zi(e,t){if(typeof t=="number"&&t>0&&t>te(e)-1)throw new Ii({offset:t,position:"start",size:te(e)})}function Oi(e,t,n){if(typeof t=="number"&&typeof n=="number"&&te(e)!==n-t)throw new Ii({offset:n,position:"end",size:te(e)})}function Ui(e,t,n,{strict:r}={}){zi(e,t);const s=e.slice(t,n);return r&&Oi(s,t,n),s}function ji(e,t,n,{strict:r}={}){zi(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Oi(s,t,n),s}const od=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Di=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ht(e,t){if(e.length!==t.length)throw new hu({expectedLength:e.length,givenLength:t.length});const n=id({params:e,values:t}),r=Ps(n);return r.length===0?"0x":r}function id({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Es({param:e[r],value:t[r]}));return n}function Es({param:e,value:t}){const n=As(e.type);if(n){const[r,s]=n;return cd(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return hd(t,{param:e});if(e.type==="address")return ad(t);if(e.type==="bool")return dd(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=Di.exec(e.type)??[];return fd(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return ud(t,{param:e});if(e.type==="string")return ld(t);throw new mu(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ps(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=te(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(V(t+s,{size:32})),r.push(a),s+=te(a)):n.push(a)}return Ze([...n,...r])}function ad(e){if(!oe(e))throw new le({address:e});return{dynamic:!1,encoded:nt(e.toLowerCase())}}function cd(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new vu(e);if(!r&&e.length!==t)throw new fu({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let i=0;i<e.length;i++){const a=Es({param:n,value:e[i]});a.dynamic&&(s=!0),o.push(a)}if(r||s){const i=Ps(o);if(r){const a=V(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Ze([a,i]):a}}if(s)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:Ze(o.map(({encoded:i})=>i))}}function ud(e,{param:t}){const[,n]=t.type.split("bytes"),r=te(e);if(!n){let s=e;return r%32!==0&&(s=nt(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Ze([nt(V(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new lu({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:nt(e,{dir:"right"})}}function dd(e){if(typeof e!="boolean")throw new I(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:nt(ki(e))}}function fd(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new $i({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:V(e,{size:32,signed:t})}}function ld(e){const t=Nt(e),n=Math.ceil(te(t)/32),r=[];for(let s=0;s<n;s++)r.push(nt(rn(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ze([nt(V(te(t),{size:32})),...r])}}function hd(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],i=Array.isArray(e)?s:o.name,a=Es({param:o,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ps(r):Ze(r.map(({encoded:s})=>s))}}function As(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Bs=e=>rn(Ri(e),0,4);function Pn(e){const{abi:t,args:n=[],name:r}=e,s=Me(r,{strict:!1}),o=t.filter(a=>s?a.type==="function"?Bs(a)===r:a.type==="event"?Zn(a)===r:!1:"name"in a&&a.name===r);if(o.length===0)return;if(o.length===1)return o[0];let i;for(const a of o){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,f)=>{const d="inputs"in a&&a.inputs[f];return d?qr(u,d):!1})){if(i&&"inputs"in i&&i.inputs){const u=Gi(a.inputs,i.inputs,n);if(u)throw new yu({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||o[0]}function qr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return oe(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>qr(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>qr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Gi(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Gi(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?oe(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?oe(n[r],{strict:!1}):!1)return i}}const vo="/docs/contract/encodeEventTopics";function An(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=Pn({abi:t,name:n});if(!c)throw new fo(n,{docsPath:vo});s=c}if(s.type!=="event")throw new fo(void 0,{docsPath:vo});const o=Ke(s),i=Zn(o);let a=[];if(r&&"inputs"in s){const c=s.inputs?.filter(f=>"indexed"in f&&f.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(f=>r[f.name])??[]:[];u.length>0&&(a=c?.map((f,d)=>Array.isArray(u[d])?u[d].map((l,h)=>xo({param:f,value:u[d][h]})):u[d]?xo({param:f,value:u[d]}):null)??[])}return[i,...a]}function xo({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return ae(Gt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Eu(e.type);return Ht([e],[t])}function Yn(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:i})=>{o==="success"&&t===r&&(n[s]=i.request)}),r=>n[r]||e.request}async function Hi(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:a,toBlock:c}=t,u=Yn(e,{method:"eth_newFilter"}),f=o?An({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?V(i):i,toBlock:typeof c=="bigint"?V(c):c,topics:f}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!a,type:"event"}}function xe(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const Eo="/docs/contract/encodeFunctionData";function pd(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=Pn({abi:t,args:n,name:r});if(!o)throw new Dn(r,{docsPath:Eo});s=o}if(s.type!=="function")throw new Dn(void 0,{docsPath:Eo});return{abi:[s],functionName:Bs(Ke(s))}}function Je(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:pd(e),s=n[0],o=r,i="inputs"in s&&s.inputs?Ht(s.inputs,t??[]):void 0;return Ye([o,i??"0x"])}const qi={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},bd={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},yd={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Po extends I{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Vi extends I{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class gd extends I{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const md={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new gd({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Vi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Po({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Po({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Is(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(md);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function wd(e,t={}){typeof t.size<"u"&&$e(e,{size:t.size});const n=se(e,t);return ot(n,t)}function vd(e,t={}){let n=e;if(typeof t.size<"u"&&($e(n,{size:t.size}),n=Ie(n)),n.length>1||n[0]>1)throw new Au(n);return!!n[0]}function He(e,t={}){typeof t.size<"u"&&$e(e,{size:t.size});const n=se(e,t);return Re(n,t)}function xd(e,t={}){let n=e;return typeof t.size<"u"&&($e(n,{size:t.size}),n=Ie(n,{dir:"right"})),new TextDecoder().decode(n)}function Jn(e,t){const n=typeof t=="string"?Te(t):t,r=Is(n);if(te(n)===0&&e.length>0)throw new Vn;if(te(t)&&te(t)<32)throw new Pi({data:typeof t=="string"?t:se(t),params:e,size:te(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(s);const[c,u]=Ct(r,a,{staticPosition:0});s+=u,o.push(c)}return o}function Ct(e,t,{staticPosition:n}){const r=As(t.type);if(r){const[s,o]=r;return Pd(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return Td(e,t,{staticPosition:n});if(t.type==="address")return Ed(e);if(t.type==="bool")return Ad(e);if(t.type.startsWith("bytes"))return Bd(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Id(e,t);if(t.type==="string")return $d(e,{staticPosition:n});throw new wu(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ao=32,Vr=32;function Ed(e){const t=e.readBytes(32);return[En(se(Ui(t,-20))),32]}function Pd(e,t,{length:n,staticPosition:r}){if(!n){const i=He(e.readBytes(Vr)),a=r+i,c=a+Ao;e.setPosition(a);const u=He(e.readBytes(Ao)),f=sn(t);let d=0;const l=[];for(let h=0;h<u;++h){e.setPosition(c+(f?h*32:d));const[y,b]=Ct(e,t,{staticPosition:c});d+=b,l.push(y)}return e.setPosition(r+32),[l,32]}if(sn(t)){const i=He(e.readBytes(Vr)),a=r+i,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[f]=Ct(e,t,{staticPosition:a});c.push(f)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[a,c]=Ct(e,t,{staticPosition:r+s});s+=c,o.push(a)}return[o,s]}function Ad(e){return[vd(e.readBytes(32),{size:32}),32]}function Bd(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=He(e.readBytes(32));e.setPosition(n+i);const a=He(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[se(c),32]}return[se(e.readBytes(Number.parseInt(s),32)),32]}function Id(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?wd(s,{signed:n}):He(s,{signed:n}),32]}function Td(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(sn(t)){const i=He(e.readBytes(Vr)),a=n+i;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+o);const[f,d]=Ct(e,u,{staticPosition:a});o+=d,s[r?c:u?.name]=f}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=Ct(e,a,{staticPosition:n});s[r?i:a?.name]=c,o+=u}return[s,o]}function $d(e,{staticPosition:t}){const n=He(e.readBytes(32)),r=t+n;e.setPosition(r);const s=He(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=xd(Ie(o));return e.setPosition(t+32),[i,32]}function sn(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(sn);const n=As(e.type);return!!(n&&sn({...e,type:n[1]}))}function kd(e){const{abi:t,data:n}=e,r=rn(n,0,4);if(r==="0x")throw new Vn;const o=[...t||[],bd,yd].find(i=>i.type==="error"&&r===Bs(Ke(i)));if(!o)throw new Ai(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Jn(o.inputs,rn(n,4)):void 0,errorName:o.name}}const de=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Ki({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?de(t[o]):t[o]}`).join(", ")})`}const Zi={gwei:9,wei:18},Sd={ether:-9,wei:9};function Wi(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function Xn(e,t="wei"){return Wi(e,Zi[t])}function ge(e,t="wei"){return Wi(e,Sd[t])}class Cd extends I{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class _d extends I{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Bo(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Nd(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Bo(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Bo(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Bn(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Fd extends I{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Md extends I{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Rd extends I{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Bn(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ld extends I{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class zd extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){const h=Bn({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof l<"u"&&`${Xn(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ge(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ge(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ge(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Yi extends I{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Ji extends I{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Od extends I{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Ud=e=>e,Ts=e=>e;class Xi extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:d,value:l,stateOverride:h}){const y=n?xe(n):void 0;let b=Bn({from:y?.address,to:d,value:typeof l<"u"&&`${Xn(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ge(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ge(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ge(u)} gwei`,nonce:f});h&&(b+=`
${Nd(h)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class jd extends I{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:a}){const c=Pn({abi:n,args:r,name:i}),u=c?Ki({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=c?Ke(c,{includeName:!0}):void 0,d=Bn({address:s&&Ud(s),function:f,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=a}}class Kr extends I{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,a,c;if(n&&n!=="0x")try{i=kd({abi:t,data:n});const{abiItem:f,errorName:d,args:l}=i;if(d==="Error")c=l[0];else if(d==="Panic"){const[h]=l;c=qi[h]}else{const h=f?Ke(f,{includeName:!0}):void 0,y=f&&l?Ki({abiItem:f,args:l,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",y&&y!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(f){o=f}else s&&(c=s);let u;o instanceof Ai&&(u=o.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.reason=c,this.signature=u}}class Dd extends I{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Gd extends I{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class $s extends I{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class tn extends I{constructor({body:t,cause:n,details:r,headers:s,status:o,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Ts(i)}`,t&&`Request body: ${de(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=i}}class ks extends I{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Ts(r)}`,`Request body: ${de(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Io extends I{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ts(n)}`,`Request body: ${de(t)}`],name:"TimeoutError"})}}const Hd=-1;class me extends I{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:s||t?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof ks?t.code:n??Hd}}class qt extends me{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class on extends me{constructor(t){super(t,{code:on.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(on,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class an extends me{constructor(t){super(t,{code:an.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class cn extends me{constructor(t,{method:n}={}){super(t,{code:cn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class un extends me{constructor(t){super(t,{code:un.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class mt extends me{constructor(t){super(t,{code:mt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class wt extends me{constructor(t){super(t,{code:wt.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class dn extends me{constructor(t){super(t,{code:dn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class fn extends me{constructor(t){super(t,{code:fn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ln extends me{constructor(t){super(t,{code:ln.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class hn extends me{constructor(t,{method:n}={}){super(t,{code:hn.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not implemented.`})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ft extends me{constructor(t){super(t,{code:Ft.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class pn extends me{constructor(t){super(t,{code:pn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class _t extends qt{constructor(t){super(t,{code:_t.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(_t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class bn extends qt{constructor(t){super(t,{code:bn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class yn extends qt{constructor(t,{method:n}={}){super(t,{code:yn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class gn extends qt{constructor(t){super(t,{code:gn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class mn extends qt{constructor(t){super(t,{code:mn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class wn extends qt{constructor(t){super(t,{code:wn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class qd extends me{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Vd=3;function Mt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const a=e instanceof $s?e:e instanceof I?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:f,message:d,shortMessage:l}=a,h=e instanceof Vn?new Dd({functionName:o}):[Vd,mt.code].includes(c)&&(u||f||d||l)?new Kr({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:a instanceof ks?f:l??d}):e;return new jd(h,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function Qi(e){const t=ae(`0x${e.substring(4)}`).substring(26);return En(`0x${t}`)}async function Kd({hash:e,signature:t}){const n=Me(e)?e:K(e),{secp256k1:r}=await ai(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>rh);return{secp256k1:i}},void 0,import.meta.url);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:d,yParity:l}=t,h=Number(l??d),y=To(h);return new r.Signature(ot(u),ot(f)).addRecoveryBit(y)}const i=Me(t)?t:K(t),a=Re(`0x${i.slice(130)}`),c=To(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function To(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function ea({hash:e,signature:t}){return Qi(await Kd({hash:e,signature:t}))}function vt(e,t="hex"){const n=ta(e),r=Is(new Uint8Array(n.length));return n.encode(r),t==="hex"?se(r.bytes):r.bytes}function ta(e){return Array.isArray(e)?Zd(e.map(t=>ta(t))):Wd(e)}function Zd(e){const t=e.reduce((s,o)=>s+o.length,0),n=na(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function Wd(e){const t=typeof e=="string"?Te(e):e,n=na(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function na(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new I("Length is too large.")}function ra(e){const{chainId:t,contractAddress:n,nonce:r,to:s}=e,o=ae(Ye(["0x05",vt([t?V(t):"0x",n,r?V(r):"0x"])]));return s==="bytes"?Te(o):o}async function sa(e){const{authorization:t,signature:n}=e;return ea({hash:ra(t),signature:n??t})}class Yd extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){const h=Bn({from:n?.address,to:d,value:typeof l<"u"&&`${Xn(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${ge(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ge(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ge(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class It extends I{constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(It,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class xt extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ge(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(xt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Zr extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ge(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Zr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Wr extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Wr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Yr extends I{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Yr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Jr extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Jr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Xr extends I{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Xr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Qr extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Qr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class es extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(es,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ts extends I{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ts,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class vn extends I{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ge(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ge(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(vn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Qn extends I{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function Ss(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof I?e.walk(s=>s?.code===It.code):e;return r instanceof I?new It({cause:e,message:r.details}):It.nodeMessage.test(n)?new It({cause:e,message:e.details}):xt.nodeMessage.test(n)?new xt({cause:e,maxFeePerGas:t?.maxFeePerGas}):Zr.nodeMessage.test(n)?new Zr({cause:e,maxFeePerGas:t?.maxFeePerGas}):Wr.nodeMessage.test(n)?new Wr({cause:e,nonce:t?.nonce}):Yr.nodeMessage.test(n)?new Yr({cause:e,nonce:t?.nonce}):Jr.nodeMessage.test(n)?new Jr({cause:e,nonce:t?.nonce}):Xr.nodeMessage.test(n)?new Xr({cause:e}):Qr.nodeMessage.test(n)?new Qr({cause:e,gas:t?.gas}):es.nodeMessage.test(n)?new es({cause:e,gas:t?.gas}):ts.nodeMessage.test(n)?new ts({cause:e}):vn.nodeMessage.test(n)?new vn({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Qn({cause:e})}function Jd(e,{docsPath:t,...n}){const r=(()=>{const s=Ss(e,n);return s instanceof Qn?e:s})();return new Yd(r,{docsPath:t,...n})}function Cs(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const a of i)a in e&&(n[a]=e[a]),o[a]&&typeof o[a]=="object"&&!Array.isArray(o[a])&&r(o[a])}const s=t(e||{});return r(s),n}const Xd={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function er(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Qd(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>se(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=V(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=V(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=V(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=V(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=V(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=V(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Xd[e.type]),typeof e.value<"u"&&(t.value=V(e.value)),t}function Qd(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:V(t.chainId),nonce:V(t.nonce),...typeof t.yParity<"u"?{yParity:V(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:V(t.v)}:{}}))}function $o(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new lo({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new lo({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function ef(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=V(t)),n!==void 0&&(i.nonce=V(n)),r!==void 0&&(i.state=$o(r)),s!==void 0){if(i.state)throw new _d;i.stateDiff=$o(s)}return i}function oa(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!oe(n,{strict:!1}))throw new le({address:n});if(t[n])throw new Cd({address:n});t[n]=ef(r)}return t}const tr=2n**256n-1n;function In(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,i=t?xe(t):void 0;if(i&&!oe(i.address))throw new le({address:i.address});if(o&&!oe(o))throw new le({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Fd;if(r&&r>tr)throw new xt({maxFeePerGas:r});if(s&&r&&s>r)throw new vn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class tf extends I{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class _s extends I{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class nf extends I{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ge(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ia extends I{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const aa={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ca(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Re(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Re(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?aa[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=rf(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function rf(e){return e.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function sf(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:ca(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Ne(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){const o=r??"latest",i=s??!1,a=n!==void 0?V(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[a||o,i]},{dedupe:!!a}),!c)throw new ia({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||sf)(c)}async function Ns(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function of(e,t){return ua(e,t)}async function ua(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const a=n||await G(e,Ne,"getBlock")({}),c=await o({block:a,client:e,request:s});if(c===null)throw new Error;return c}if(typeof o<"u")return o;const i=await e.request({method:"eth_maxPriorityFeePerGas"});return ot(i)}catch{const[o,i]=await Promise.all([n?Promise.resolve(n):G(e,Ne,"getBlock")({}),G(e,Ns,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new _s;const a=i-o.baseFeePerGas;return a<0n?0n:a}}async function af(e,t){return ns(e,t)}async function ns(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new tf;const c=10**(i.toString().split(".")[1]?.length??0),u=l=>l*BigInt(Math.ceil(i*c))/BigInt(c),f=n||await G(e,Ne,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const l=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(l!==null)return l}if(o==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new _s;const l=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await ua(e,{block:f,chain:r,request:s}),h=u(f.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??h+l,maxPriorityFeePerGas:l}}return{gasPrice:s?.gasPrice??u(await G(e,Ns,"getGasPrice")({}))}}async function da(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?V(r):n]},{dedupe:!!r});return Re(s)}function Fs(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>Te(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>se(o))}function Ms(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>Te(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>Te(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const a=r[i],c=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?o:o.map(i=>se(i))}function cf(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}const uf=(e,t,n)=>e&t^~e&n,df=(e,t,n)=>e&t^e&n^t&n;let ff=class extends Ci{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=vr(this.buffer)}update(t){Gn(this);const{view:n,buffer:r,blockLen:s}=this;t=vs(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=vr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gn(this),Si(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;cf(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=vr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,f[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=i,s%n&&t.buffer.set(r),t}};const lf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qe=new Uint32Array(64);let hf=class extends ff{constructor(){super(64,32,8,!1),this.A=Xe[0]|0,this.B=Xe[1]|0,this.C=Xe[2]|0,this.D=Xe[3]|0,this.E=Xe[4]|0,this.F=Xe[5]|0,this.G=Xe[6]|0,this.H=Xe[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Qe[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=Qe[d-15],h=Qe[d-2],y=Se(l,7)^Se(l,18)^l>>>3,b=Se(h,17)^Se(h,19)^h>>>10;Qe[d]=b+Qe[d-7]+y+Qe[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){const l=Se(a,6)^Se(a,11)^Se(a,25),h=f+l+uf(a,c,u)+lf[d]+Qe[d]|0,b=(Se(r,2)^Se(r,13)^Se(r,22))+df(r,s,o)|0;f=u,u=c,c=a,a=i+h|0,i=o,o=s,s=r,r=h+b|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,o,i,a,c,u,f)}roundClean(){Qe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const pf=_i(()=>new hf);function bf(e,t){return pf(Me(e,{strict:!1})?Gt(e):e)}function yf(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=bf(t);return s.set([n],0),r==="bytes"?s:se(s)}function fa(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(yf({commitment:o,to:r,version:n}));return s}const ko=6,la=32,Rs=4096,ha=la*Rs,So=ha*ko-1-1*Rs*ko,pa=1;class gf extends I{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class ba extends I{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class mf extends I{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class wf extends I{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${pa}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function vf(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?Te(e.data):e.data,r=te(n);if(!r)throw new ba;if(r>So)throw new gf({maxSize:So,size:r});const s=[];let o=!0,i=0;for(;o;){const a=Is(new Uint8Array(ha));let c=0;for(;c<Rs;){const u=n.slice(i,i+(la-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),o=!1;break}c++,i+=31}s.push(a)}return t==="bytes"?s.map(a=>a.bytes):s.map(a=>se(a.bytes))}function ya(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??vf({data:t,to:r}),o=e.commitments??Fs({blobs:s,kzg:n,to:r}),i=e.proofs??Ms({blobs:s,commitments:o,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:o[c],proof:i[c]});return a}function ga(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Rd({transaction:e})}async function Tn(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Re(t)}const ma=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function nr(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:i,nonce:a,nonceManager:c,parameters:u=ma,type:f}=t,d=n&&xe(n),l={...t,...d?{from:d?.address}:{}};let h;async function y(){return h||(h=await G(e,Ne,"getBlock")({blockTag:"latest"}),h)}let b;async function p(){return b||(s?s.id:typeof t.chainId<"u"?t.chainId:(b=await G(e,Tn,"getChainId")({}),b))}if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&i){const g=Fs({blobs:r,kzg:i});if(u.includes("blobVersionedHashes")){const m=fa({commitments:g,to:"hex"});l.blobVersionedHashes=m}if(u.includes("sidecars")){const m=Ms({blobs:r,commitments:g,kzg:i}),w=ya({blobs:r,commitments:g,proofs:m,to:"hex"});l.sidecars=w}}if(u.includes("chainId")&&(l.chainId=await p()),u.includes("nonce")&&typeof a>"u"&&d)if(c){const g=await p();l.nonce=await c.consume({address:d.address,chainId:g,client:e})}else l.nonce=await G(e,da,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("fees")||u.includes("type"))&&typeof f>"u")try{l.type=ga(l)}catch{const g=await y();l.type=typeof g?.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(u.includes("fees"))if(l.type!=="legacy"&&l.type!=="eip2930"){if(typeof l.maxFeePerGas>"u"||typeof l.maxPriorityFeePerGas>"u"){const g=await y(),{maxFeePerGas:m,maxPriorityFeePerGas:w}=await ns(e,{block:g,chain:s,request:l});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<w)throw new nf({maxPriorityFeePerGas:w});l.maxPriorityFeePerGas=w,l.maxFeePerGas=m}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new _s;const g=await y(),{gasPrice:m}=await ns(e,{block:g,chain:s,request:l,type:"legacy"});l.gasPrice=m}return u.includes("gas")&&typeof o>"u"&&(l.gas=await G(e,Ls,"estimateGas")({...l,account:d&&{address:d.address,type:"json-rpc"}})),In(l),delete l.parameters,l}async function wa(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?V(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function Ls(e,t){const{account:n=e.account}=t,r=n?xe(n):void 0;try{let _=function(U){const{block:B,request:S,rpcStateOverride:T}=U;return e.request({method:"eth_estimateGas",params:T?[S,B??"latest",T]:B?[S,B]:[S]})};const{accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:f,gas:d,gasPrice:l,maxFeePerBlobGas:h,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:p,value:g,stateOverride:m,...w}=await nr(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),k=(c?V(c):void 0)||u,v=oa(m),E=await(async()=>{if(w.to)return w.to;if(o&&o.length>0)return await sa({authorization:o[0]}).catch(()=>{throw new I("`to` is required. Could not infer from `authorizationList`")})})();In(t);const P=e.chain?.formatters?.transactionRequest?.format,N=(P||er)({...Cs(w,{format:P}),from:r?.address,accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,data:f,gas:d,gasPrice:l,maxFeePerBlobGas:h,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:p,to:E,value:g});let C=BigInt(await _({block:k,request:N,rpcStateOverride:v}));if(o){const U=await wa(e,{address:N.from}),B=await Promise.all(o.map(async S=>{const{contractAddress:T}=S,F=await _({block:k,request:{authorizationList:void 0,data:f,from:r?.address,to:T,value:V(U)},rpcStateOverride:v}).catch(()=>100000n);return 2n*BigInt(F)}));C+=B.reduce((S,T)=>S+T,0n)}return C}catch(s){throw Jd(s,{...t,account:r,chain:e.chain})}}async function xf(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...a}=t,c=Je({abi:n,args:s,functionName:o});try{return await G(e,Ls,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(u){const f=a.account?xe(a.account):void 0;throw Mt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:f?.address})}}function zs(e,t){if(!oe(e,{strict:!1}))throw new le({address:e});if(!oe(t,{strict:!1}))throw new le({address:t});return e.toLowerCase()===t.toLowerCase()}const Co="/docs/contract/decodeEventLog";function Os(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...a]=s;if(!i)throw new pu({docsPath:Co});const c=t.length===1?t[0]:t.find(b=>b.type==="event"&&i===Zn(Ke(b)));if(!(c&&"name"in c)||c.type!=="event")throw new Bi(i,{docsPath:Co});const{name:u,inputs:f}=c,d=f?.some(b=>!("name"in b&&b.name));let l=d?[]:{};const h=f.filter(b=>"indexed"in b&&b.indexed);for(let b=0;b<h.length;b++){const p=h[b],g=a[b];if(!g)throw new Kn({abiItem:c,param:p});l[d?b:p.name||b]=Ef({param:p,value:g})}const y=f.filter(b=>!("indexed"in b&&b.indexed));if(y.length>0){if(n&&n!=="0x")try{const b=Jn(y,n);if(b)if(d)l=[...l,...b];else for(let p=0;p<y.length;p++)l[y[p].name]=b[p]}catch(b){if(o)throw b instanceof Pi||b instanceof Vi?new nn({abiItem:c,data:n,params:y,size:te(n)}):b}else if(o)throw new nn({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function Ef({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:Jn([e],t)[0]}function Us(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{try{const a=t.find(u=>u.type==="event"&&i.topics[0]===Zn(u));if(!a)return null;const c=Os({...i,abi:[a],strict:s});return o&&!o.includes(c.eventName)||!Pf({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...i}}catch(a){let c,u;if(a instanceof Bi)return null;if(a instanceof nn||a instanceof Kn){if(s)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function Pf(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,a){try{return o.type==="address"?zs(i,a):o.type==="string"||o.type==="bytes"?ae(Gt(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const a=n[i];return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const a=n.find(u=>u.name===o);return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,t[o])):!1}):!1}function it(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function js(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:a,strict:c}={}){const u=c??!1,f=i??(o?[o]:void 0);let d=[];f&&(d=[f.flatMap(b=>An({abi:[b],eventName:b.name,args:i?void 0:a}))],o&&(d=d[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?V(r):r,toBlock:typeof s=="bigint"?V(s):s}]});const h=l.map(y=>it(y));return f?Us({abi:f,args:a,logs:h,strict:u}):h}async function va(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,f=i?Pn({abi:n,name:i}):void 0,d=f?void 0:n.filter(l=>l.type==="event");return G(e,js,"getLogs")({address:r,args:s,blockHash:o,event:f,events:d,fromBlock:a,toBlock:c,strict:u})}const Pr="/docs/contract/decodeFunctionResult";function Vt(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const a=Pn({abi:t,args:n,name:r});if(!a)throw new Dn(r,{docsPath:Pr});o=a}if(o.type!=="function")throw new Dn(void 0,{docsPath:Pr});if(!o.outputs)throw new bu(o.name,{docsPath:Pr});const i=Jn(o.outputs,s);if(i.length>1)return i;if(i.length===1)return i[0]}const rs=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xa=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Ea=[...xa,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Af=[...xa,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],_o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],No=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Fo=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Bf="0x82ad56cb",If="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Tf="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",$f="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class ss extends I{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class kf extends I{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} – ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} – ${t.name}`],name:"ChainMismatchError"})}}class Sf extends I{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Pa extends I{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class rr extends I{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Ar="/docs/contract/encodeDeployData";function sr(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new du({docsPath:Ar});if(!("inputs"in s))throw new uo({docsPath:Ar});if(!s.inputs||s.inputs.length===0)throw new uo({docsPath:Ar});const o=Ht(s.inputs,n);return Ye([r,o])}function Kt({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new ss({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new ss({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Cf(e,{docsPath:t,...n}){const r=(()=>{const s=Ss(e,n);return s instanceof Qn?e:s})();return new Xi(r,{docsPath:t,...n})}function Aa(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const Br=new Map;function Ba({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const f=c();i();const d=f.map(({args:l})=>l);d.length!==0&&e(d).then(l=>{s&&Array.isArray(l)&&l.sort(s);for(let h=0;h<f.length;h++){const{resolve:y}=f[h];y?.([l[h],l])}}).catch(l=>{for(let h=0;h<f.length;h++){const{reject:y}=f[h];y?.(l)}})},i=()=>Br.delete(t),a=()=>c().map(({args:f})=>f),c=()=>Br.get(t)||[],u=f=>Br.set(t,[...c(),f]);return{flush:i,async schedule(f){const{promise:d,resolve:l,reject:h}=Aa();return n?.([...a(),f])&&o(),c().length>0?(u({args:f,resolve:l,reject:h}),d):(u({args:f,resolve:l,reject:h}),setTimeout(o,r),d)}}}async function or(e,t){const{account:n=e.account,batch:r=!!e.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:i,blobs:a,code:c,data:u,factory:f,factoryData:d,gas:l,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:p,nonce:g,to:m,value:w,stateOverride:A,...k}=t,v=n?xe(n):void 0;if(c&&(f||d))throw new I("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&m)throw new I("Cannot provide both `code` & `to` as parameters.");const E=c&&u,P=f&&d&&m&&u,x=E||P,N=E?Ff({code:c,data:u}):P?Mf({data:u,factory:f,factoryData:d,to:m}):u;try{In(t);const C=(s?V(s):void 0)||o,U=oa(A),B=e.chain?.formatters?.transactionRequest?.format,T=(B||er)({...Cs(k,{format:B}),from:v?.address,accessList:i,blobs:a,data:N,gas:l,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:p,nonce:g,to:x?void 0:m,value:w});if(r&&_f({request:T})&&!U)try{return await Nf(e,{...T,blockNumber:s,blockTag:o})}catch(z){if(!(z instanceof Pa)&&!(z instanceof ss))throw z}const F=await e.request({method:"eth_call",params:U?[T,C,U]:[T,C]});return F==="0x"?{data:void 0}:{data:F}}catch(_){const C=Rf(_),{offchainLookup:U,offchainLookupSignature:B}=await ai(async()=>{const{offchainLookup:S,offchainLookupSignature:T}=await import("./ccip.BVFFTNSt.js");return{offchainLookup:S,offchainLookupSignature:T}},[],import.meta.url);if(e.ccipRead!==!1&&C?.slice(0,10)===B&&m)return{data:await U(e,{data:C,to:m})};throw x&&C?.slice(0,10)==="0x101bb98d"?new Gd({factory:f}):Cf(_,{...t,account:v,chain:e.chain})}}function _f({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Bf)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Nf(e,t){const{batchSize:n=1024,wait:r=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:i,multicallAddress:a,to:c}=t;let u=a;if(!u){if(!e.chain)throw new Pa;u=Kt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=(s?V(s):void 0)||o,{schedule:l}=Ba({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(b){return b.reduce((g,{data:m})=>g+(m.length-2),0)>n*2},fn:async b=>{const p=b.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),g=Je({abi:rs,args:[p],functionName:"aggregate3"}),m=await e.request({method:"eth_call",params:[{data:g,to:u},d]});return Vt({abi:rs,args:[p],functionName:"aggregate3",data:m||"0x"})}}),[{returnData:h,success:y}]=await l({data:i,to:c});if(!y)throw new $s({data:h});return h==="0x"?{data:void 0}:{data:h}}function Ff(e){const{code:t,data:n}=e;return sr({abi:vi(["constructor(bytes, bytes)"]),bytecode:If,args:[t,n]})}function Mf(e){const{data:t,factory:n,factoryData:r,to:s}=e;return sr({abi:vi(["constructor(address, bytes, address, bytes)"]),bytecode:Tf,args:[s,t,n,r]})}function Rf(e){if(!(e instanceof I))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function We(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,a=Je({abi:n,args:s,functionName:o});try{const{data:c}=await G(e,or,"call")({...i,data:a,to:r});return Vt({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw Mt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Lf(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...a}=t,c=a.account?xe(a.account):e.account,u=Je({abi:n,args:s,functionName:i});try{const{data:f}=await G(e,or,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...a,account:c}),d=Vt({abi:n,args:s,functionName:i,data:f||"0x"}),l=n.filter(h=>"name"in h&&h.name===t.functionName);return{result:d,request:{abi:l,address:r,args:s,dataSuffix:o,functionName:i,...a,account:c}}}catch(f){throw Mt(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}const Ir=new Map,Mo=new Map;let zf=0;function at(e,t,n){const r=++zf,s=()=>Ir.get(e)||[],o=()=>{const f=s();Ir.set(e,f.filter(d=>d.id!==r))},i=()=>{const f=s();if(!f.some(l=>l.id===r))return;const d=Mo.get(e);f.length===1&&d&&d(),o()},a=s();if(Ir.set(e,[...a,{id:r,fns:t}]),a.length>0)return i;const c={};for(const f in t)c[f]=(...d)=>{const l=s();if(l.length!==0)for(const h of l)h.fns[f]?.(...d)};const u=n(c);return typeof u=="function"&&Mo.set(e,u),i}async function os(e){return new Promise(t=>setTimeout(t,e))}function $n(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));const c=await n?.(a)??r;await os(c);const u=async()=>{s&&(await e({unpoll:o}),await os(r),u())};u()})(),o}const Of=new Map,Uf=new Map;function jf(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,Of),r=t(e,Uf);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Df(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=jf(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const Gf=e=>`blockNumber.${e}`;async function kn(e,{cacheTime:t=e.cacheTime}={}){const n=await Df(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Gf(e.uid),cacheTime:t});return BigInt(n)}async function ir(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>it(o));return!("abi"in t)||!t.abi?s:Us({abi:t.abi,logs:s,strict:n})}async function ar(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Hf(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:f,pollingInterval:d=e.pollingInterval,strict:l}=t;return(typeof f<"u"?f:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const p=l??!1,g=de(["watchContractEvent",r,s,o,e.uid,i,d,p,a]);return at(g,{onLogs:u,onError:c},m=>{let w;a!==void 0&&(w=a-1n);let A,k=!1;const v=$n(async()=>{if(!k){try{A=await G(e,Hi,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:p,fromBlock:a})}catch{}k=!0;return}try{let E;if(A)E=await G(e,ir,"getFilterChanges")({filter:A});else{const P=await G(e,kn,"getBlockNumber")({});w&&w<P?E=await G(e,va,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:w+1n,toBlock:P,strict:p}):E=[],w=P}if(E.length===0)return;if(o)m.onLogs(E);else for(const P of E)m.onLogs([P])}catch(E){A&&E instanceof wt&&(k=!1),m.onError?.(E)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await G(e,ar,"uninstallFilter")({filter:A}),v()}})})():(()=>{const p=l??!1,g=de(["watchContractEvent",r,s,o,e.uid,i,d,p]);let m=!0,w=()=>m=!1;return at(g,{onLogs:u,onError:c},A=>((async()=>{try{const k=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(x=>x.config.type==="webSocket");return P?P.value:e.transport}return e.transport})(),v=i?An({abi:n,eventName:i,args:s}):[],{unsubscribe:E}=await k.subscribe({params:["logs",{address:r,topics:v}],onData(P){if(!m)return;const x=P.result;try{const{eventName:N,args:_}=Os({abi:n,data:x.data,topics:x.topics,strict:l}),C=it(x,{args:_,eventName:N});A.onLogs([C])}catch(N){let _,C;if(N instanceof nn||N instanceof Kn){if(l)return;_=N.abiItem.name,C=N.abiItem.inputs?.some(B=>!("name"in B&&B.name))}const U=it(x,{args:C?[]:{},eventName:_});A.onLogs([U])}},onError(P){A.onError?.(P)}});w=E,m||w()}catch(k){c?.(k)}})(),()=>w()))})()}class Sn extends I{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Tr extends I{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Ia({chain:e,currentChainId:t}){if(!e)throw new Sf;if(t!==e.id)throw new kf({chain:e,currentChainId:t})}function qf(e,{docsPath:t,...n}){const r=(()=>{const s=Ss(e,n);return s instanceof Qn?e:s})();return new zd(r,{docsPath:t,...n})}async function Ds(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const $r=new Wn(128);async function Gs(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:h,value:y,...b}=t;if(typeof n>"u")throw new Sn({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?xe(n):null;try{In(t);const g=await(async()=>{if(t.to)return t.to;if(o&&o.length>0)return await sa({authorization:o[0]}).catch(()=>{throw new I("`to` is required. Could not infer from `authorizationList`.")})})();if(p?.type==="json-rpc"||p===null){let m;r!==null&&(m=await G(e,Tn,"getChainId")({}),Ia({currentChainId:m,chain:r}));const w=e.chain?.formatters?.transactionRequest?.format,k=(w||er)({...Cs(b,{format:w}),accessList:s,authorizationList:o,blobs:i,chainId:m,data:a,from:p?.address,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:h,to:g,value:y}),v=$r.get(e.uid),E=v?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:E,params:[k]},{retryCount:0})}catch(P){if(v===!1)throw P;const x=P;if(x.name==="InvalidInputRpcError"||x.name==="InvalidParamsRpcError"||x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(N=>($r.set(e.uid,!0),N)).catch(N=>{const _=N;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?($r.set(e.uid,!1),x):_});throw x}}if(p?.type==="local"){const m=await G(e,nr,"prepareTransactionRequest")({account:p,accessList:s,authorizationList:o,blobs:i,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:l,nonce:h,nonceManager:p.nonceManager,parameters:[...ma,"sidecars"],value:y,...b,to:g}),w=r?.serializers?.transaction,A=await p.signTransaction(m,{serializer:w});return await G(e,Ds,"sendRawTransaction")({serializedTransaction:A})}throw p?.type==="smart"?new Tr({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Tr({docsPath:"/docs/actions/wallet/sendTransaction",type:p?.type})}catch(g){throw g instanceof Tr?g:qf(g,{...t,account:p,chain:t.chain||void 0})}}async function Vf(e,t){const{abi:n,account:r=e.account,address:s,args:o,dataSuffix:i,functionName:a,...c}=t;if(typeof r>"u")throw new Sn({docsPath:"/docs/contract/writeContract"});const u=r?xe(r):null,f=Je({abi:n,args:o,functionName:a});try{return await G(e,Gs,"sendTransaction")({data:`${f}${i?i.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw Mt(d,{abi:n,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:a,sender:u?.address})}}class Kf extends I{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Zf(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,a,c,u,f,d]=await G(e,We,"readContract")({abi:Wf,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:f},extensions:d,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Kf({address:n}):i}}const Wf=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function Yf(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:V(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:i?Object.values(i).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}const is=256;let Rn=is,Ln;function Ta(e=11){if(!Ln||Rn+e>is*2){Ln="",Rn=0;for(let t=0;t<is;t++)Ln+=(256+Math.random()*256|0).toString(16).substring(1)}return Ln.substring(Rn,Rn+++e)}function $a(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:s="base",name:o="Base Client",pollingInterval:i=4e3,type:a="base"}=e,c=e.chain,u=e.account?xe(e.account):void 0,{config:f,request:d,value:l}=e.transport({chain:c,pollingInterval:i}),h={...f,...l},y={account:u,batch:t,cacheTime:n,ccipRead:r,chain:c,key:s,name:o,pollingInterval:i,request:d,transport:h,type:a,uid:Ta()};function b(p){return g=>{const m=g(p);for(const A in y)delete m[A];const w={...p,...m};return Object.assign(w,{extend:b(w)})}}return Object.assign(y,{extend:b(y)})}const zn=new Wn(8192);function Jf(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(zn.get(n))return zn.get(n);const r=e().finally(()=>zn.delete(n));return zn.set(n,r),r}function as(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const i=async({count:a=0}={})=>{const c=async({error:u})=>{const f=typeof t=="function"?t({count:a,error:u}):t;f&&await os(f),i({count:a+1})};try{const u=await e();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});o(u)}};i()})}function Xf(e,t={}){return async(n,r={})=>{const{dedupe:s=!1,retryDelay:o=150,retryCount:i=3,uid:a}={...t,...r},c=s?ae(Nt(`${a}.${de(n)}`)):void 0;return Jf(()=>as(async()=>{try{return await e(n)}catch(u){const f=u;switch(f.code){case on.code:throw new on(f);case an.code:throw new an(f);case cn.code:throw new cn(f,{method:n.method});case un.code:throw new un(f);case mt.code:throw new mt(f);case wt.code:throw new wt(f);case dn.code:throw new dn(f);case fn.code:throw new fn(f);case ln.code:throw new ln(f);case hn.code:throw new hn(f,{method:n.method});case Ft.code:throw new Ft(f);case pn.code:throw new pn(f);case _t.code:throw new _t(f);case bn.code:throw new bn(f);case yn.code:throw new yn(f);case gn.code:throw new gn(f);case mn.code:throw new mn(f);case wn.code:throw new wn(f);case 5e3:throw new _t(f);default:throw u instanceof I?u:new qd(f)}}},{delay:({count:u,error:f})=>{if(f&&f instanceof tn){const d=f?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d)*1e3}return~~(1<<u)*o},retryCount:i,shouldRetry:({error:u})=>Qf(u)}),{enabled:s,id:c})}}function Qf(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Ft.code||e.code===mt.code:e instanceof tn&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function el({key:e,name:t,request:n,retryCount:r=3,retryDelay:s=150,timeout:o,type:i},a){const c=Ta();return{config:{key:e,name:t,request:n,retryCount:r,retryDelay:s,timeout:o,type:i},request:Xf(n,{retryCount:r,retryDelay:s,uid:c}),value:a}}class tl extends I{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function nl(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r?a.abort():o(t)},n)),s(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&o(t),o(a)}finally{clearTimeout(i)}})()})}function rl(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Ro=rl();function sl(e,t={}){return{async request(n){const{body:r,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:i=t.timeout??1e4}=n,a={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:f}=a;try{const d=await nl(async({signal:h})=>{const y={...a,body:Array.isArray(r)?de(r.map(m=>({jsonrpc:"2.0",id:m.id??Ro.take(),...m}))):de({jsonrpc:"2.0",id:r.id??Ro.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:f||(i>0?h:null)},b=new Request(e,y),p=await s?.(b,y)??{...y,url:e};return await fetch(p.url??e,p)},{errorInstance:new Io({body:r,url:e}),timeout:i,signal:!0});o&&await o(d);let l;if(d.headers.get("Content-Type")?.startsWith("application/json"))l=await d.json();else{l=await d.text();try{l=JSON.parse(l||"{}")}catch(h){if(d.ok)throw h;l={error:l}}}if(!d.ok)throw new tn({body:r,details:de(l.error)||d.statusText,headers:d.headers,status:d.status,url:e});return l}catch(d){throw d instanceof tn||d instanceof Io?d:new tn({body:r,cause:d,url:e})}}}}function Lo(e,t={}){const{batch:n,fetchOptions:r,key:s="http",name:o="HTTP JSON-RPC",onFetchRequest:i,onFetchResponse:a,retryDelay:c}=t;return({chain:u,retryCount:f,timeout:d})=>{const{batchSize:l=1e3,wait:h=0}=typeof n=="object"?n:{},y=t.retryCount??f,b=d??t.timeout??1e4,p=u?.rpcUrls.default.http[0];if(!p)throw new tl;const g=sl(p,{fetchOptions:r,onRequest:i,onResponse:a,timeout:b});return el({key:s,name:o,async request({method:m,params:w}){const A={method:m,params:w},{schedule:k}=Ba({id:p,wait:h,shouldSplitBatch(x){return x.length>l},fn:x=>g.request({body:x}),sort:(x,N)=>x.id-N.id}),v=async x=>n?k(x):[await g.request({body:x})],[{error:E,result:P}]=await v(A);if(E)throw new ks({body:A,error:E,url:p});return P},retryCount:y,retryDelay:c,timeout:b,type:"http"},{fetchOptions:r,url:p})}}function Hs(e,t){if(!(e instanceof I))return!1;const n=e.walk(r=>r instanceof Kr);return n instanceof Kr?!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===qi[50]):!1}function ka(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return Me(t)?t:null}function jn(e){let t=new Uint8Array(32).fill(0);if(!e)return se(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=ka(n[r]),o=s?Gt(s):ae(bt(n[r]),"bytes");t=ae(Ze([t,o]),"bytes")}return se(t)}function ol(e){return`[${e.slice(2)}]`}function il(e){const t=new Uint8Array(32).fill(0);return e?ka(e)||ae(bt(e)):se(t)}function cr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=bt(s[o]);i.byteLength>255&&(i=bt(ol(il(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function al(e,{blockNumber:t,blockTag:n,coinType:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Kt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u=Je({abi:No,functionName:"addr",...r!=null?{args:[jn(s),BigInt(r)]}:{args:[jn(s)]}}),f={address:c,abi:Ea,functionName:"resolve",args:[K(cr(s)),u],blockNumber:t,blockTag:n},d=G(e,We,"readContract"),l=o?await d({...f,args:[...f.args,o]}):await d(f);if(l[0]==="0x")return null;const h=Vt({abi:No,args:r!=null?[jn(s),BigInt(r)]:void 0,functionName:"addr",data:l[0]});return h==="0x"||Ie(h)==="0x00"?null:h}catch(u){if(i)throw u;if(Hs(u,"resolve"))return null;throw u}}class cl extends I{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class Qt extends I{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class qs extends I{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class ul extends I{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const dl=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,fl=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,ll=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,hl=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function pl(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function zo(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Sa({uri:e,gatewayUrls:t}){const n=ll.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=zo(t?.ipfs,"https://ipfs.io"),s=zo(t?.arweave,"https://arweave.net"),o=e.match(dl),{protocol:i,subpath:a,target:c,subtarget:u=""}=o?.groups||{},f=i==="ipns:/"||a==="ipns/",d=i==="ipfs:/"||a==="ipfs/"||fl.test(e);if(e.startsWith("http")&&!f&&!d){let h=e;return t?.arweave&&(h=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((f||d)&&c)return{uri:`${r}/${f?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(hl,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new qs({uri:e})}function Ca(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new cl({data:e});return e.image||e.image_url||e.image_data}async function bl({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Vs({gatewayUrls:e,uri:Ca(n)})}catch{throw new qs({uri:t})}}async function Vs({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Sa({uri:t,gatewayUrls:e});if(r||await pl(n))return n;throw new qs({uri:t})}function yl(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[a,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new Qt({reason:"Only EIP-155 supported"});if(!i)throw new Qt({reason:"Chain ID not found"});if(!c)throw new Qt({reason:"Contract address not found"});if(!s)throw new Qt({reason:"Token ID not found"});if(!a)throw new Qt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function gl(e,{nft:t}){if(t.namespace==="erc721")return We(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return We(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new ul({namespace:t.namespace})}async function ml(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?wl(e,{gatewayUrls:t,record:n}):Vs({uri:n,gatewayUrls:t})}async function wl(e,{gatewayUrls:t,record:n}){const r=yl(n),s=await gl(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:a}=Sa({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=a?atob(o.replace("data:application/json;base64,","")):o,f=JSON.parse(u);return Vs({uri:Ca(f),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),bl({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function _a(e,{blockNumber:t,blockTag:n,name:r,key:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Kt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u={address:c,abi:Ea,functionName:"resolve",args:[K(cr(r)),Je({abi:_o,functionName:"text",args:[jn(r),s]})],blockNumber:t,blockTag:n},f=G(e,We,"readContract"),d=o?await f({...u,args:[...u.args,o]}):await f(u);if(d[0]==="0x")return null;const l=Vt({abi:_o,functionName:"text",data:d[0]});return l===""?null:l}catch(u){if(i)throw u;if(Hs(u,"resolve"))return null;throw u}}async function vl(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){const c=await G(e,_a,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:o,strict:i});if(!c)return null;try{return await ml(e,{record:c,gatewayUrls:r})}catch{return null}}async function xl(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Kt({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:a,abi:Af,functionName:"reverse",args:[K(cr(c))],blockNumber:n,blockTag:r},f=G(e,We,"readContract"),[d,l]=s?await f({...u,args:[...u.args,s]}):await f(u);return t.toLowerCase()!==l.toLowerCase()?null:d}catch(u){if(o)throw u;if(Hs(u,"reverse"))return null;throw u}}async function El(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let o=s;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Kt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[i]=await G(e,We,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[K(cr(r))],blockNumber:t,blockTag:n});return i}async function Pl(e){const t=Yn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Na(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:a}={}){const c=s??(r?[r]:void 0),u=Yn(e,{method:"eth_newFilter"});let f=[];c&&(f=[c.flatMap(h=>An({abi:[h],eventName:h.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?V(o):o,toBlock:typeof a=="bigint"?V(a):a,...f.length?{topics:f}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!i,toBlock:a,type:"event"}}async function Fa(e){const t=Yn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Al(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Bl(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?V(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Re(o)}async function Oo(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?V(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}function Il(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function Tl(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=n?V(n):void 0,i=await e.request({method:"eth_feeHistory",params:[V(t),o||r,s]},{dedupe:!!o});return Il(i)}async function $l(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>it(o));return t.abi?Us({abi:t.abi,logs:s,strict:n}):s}function kl(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class Sl extends I{constructor({domain:t}){super(`Invalid domain "${de(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Cl extends I{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class _l extends I{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ma(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:ja({domain:t}),...e.types};Ua({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Nl({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Ra({data:n,primaryType:r,types:s})),ae(Ze(o))}function Nl({domain:e,types:t}){return Ra({data:e,primaryType:"EIP712Domain",types:t})}function Ra({data:e,primaryType:t,types:n}){const r=La({data:e,primaryType:t,types:n});return ae(r)}function La({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[Fl({primaryType:t,types:n})];for(const o of n[t]){const[i,a]=Oa({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(i),s.push(a)}return Ht(r,s)}function Fl({primaryType:e,types:t}){const n=K(Ml({primaryType:e,types:t}));return ae(n)}function Ml({primaryType:e,types:t}){let n="";const r=za({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function za({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])za({primaryType:o.type,types:t},n);return n}function Oa({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},ae(La({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ae(r)];if(n==="string")return[{type:"bytes32"},ae(K(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(i=>Oa({name:t,type:s,types:e,value:i}));return[{type:"bytes32"},ae(Ht(o.map(([i])=>i),o.map(([,i])=>i)))]}return[{type:n},r]}function Rl(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(c,u)=>{const f={...u};for(const d of c){const{name:l,type:h}=d;h==="address"&&(f[l]=f[l].toLowerCase())}return f},i=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},a=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return de({domain:i,message:a,primaryType:r,types:s})}function Ua(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(i,a)=>{for(const c of i){const{name:u,type:f}=c,d=a[u],l=f.match(Di);if(l&&(typeof d=="number"||typeof d=="bigint")){const[b,p,g]=l;V(d,{signed:p==="int",size:Number.parseInt(g)/8})}if(f==="address"&&typeof d=="string"&&!oe(d))throw new le({address:d});const h=f.match(od);if(h){const[b,p]=h;if(p&&te(d)!==Number.parseInt(p))throw new gu({expectedSize:Number.parseInt(p),givenSize:te(d)})}const y=s[f];y&&(Ll(f),o(y,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new Sl({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new Cl({primaryType:r,types:s})}function ja({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},typeof e?.chainId=="number"&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ll(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new _l({type:e})}const zl={"0x0":"reverted","0x1":"success"};function Ol(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>it(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Re(e.transactionIndex):null,status:e.status?zl[e.status]:null,type:e.type?aa[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const Ul=`Ethereum Signed Message:
`;function jl(e){const t=typeof e=="string"?Nt(e):typeof e.raw=="string"?e.raw:se(e.raw),n=Nt(`${Ul}${te(t)}`);return Ze([n,t])}function Ks(e,t){return ae(jl(e),t)}const Da="0x6492649264926492649264926492649264926492649264926492649264926492";function Dl(e){return ji(e,-32)===Da}function Gl(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=Ye([Ht([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Da]);return s==="hex"?o:Te(o)}function Hl(e){const{authorizationList:t}=e;if(t)for(const n of t){const{contractAddress:r,chainId:s}=n;if(!oe(r))throw new le({address:r});if(s<0)throw new rr({chainId:s})}Zs(e)}function ql(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new ba;for(const n of t){const r=te(n),s=Re(rn(n,0,1));if(r!==32)throw new mf({hash:n,size:r});if(s!==pa)throw new wf({hash:n,version:s})}}Zs(e)}function Zs(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new rr({chainId:t});if(s&&!oe(s))throw new le({address:s});if(r&&r>tr)throw new xt({maxFeePerGas:r});if(n&&r&&n>r)throw new vn({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Vl(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new rr({chainId:t});if(o&&!oe(o))throw new le({address:o});if(n||s)throw new I("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>tr)throw new xt({maxFeePerGas:r})}function Kl(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!oe(o))throw new le({address:o});if(typeof t<"u"&&t<=0)throw new rr({chainId:t});if(n||s)throw new I("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>tr)throw new xt({maxFeePerGas:r})}function Zl(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{contractAddress:r,chainId:s,nonce:o,...i}=n;t.push([s?K(s):"0x",r,o?K(o):"0x",...Cn({},i)])}return t}function ur(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Ld({storageKey:s[o]});if(!oe(r,{strict:!1}))throw new le({address:r});t.push([r,s])}return t}function Wl(e,t){const n=ga(e);return n==="eip1559"?Xl(e,t):n==="eip2930"?Ql(e,t):n==="eip4844"?Jl(e,t):n==="eip7702"?Yl(e,t):e0(e,t)}function Yl(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:d}=e;Hl(e);const l=ur(f),h=Zl(n);return Ye(["0x04",vt([K(r),o?K(o):"0x",u?K(u):"0x",c?K(c):"0x",s?K(s):"0x",i??"0x",a?K(a):"0x",d??"0x",l,h,...Cn(e,t)])])}function Jl(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:d}=e;ql(e);let l=e.blobVersionedHashes,h=e.sidecars;if(e.blobs&&(typeof l>"u"||typeof h>"u")){const w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(v=>se(v)),A=e.kzg,k=Fs({blobs:w,kzg:A});if(typeof l>"u"&&(l=fa({commitments:k})),typeof h>"u"){const v=Ms({blobs:w,commitments:k,kzg:A});h=ya({blobs:w,commitments:k,proofs:v})}}const y=ur(f),b=[K(n),s?K(s):"0x",u?K(u):"0x",c?K(c):"0x",r?K(r):"0x",o??"0x",i?K(i):"0x",d??"0x",y,a?K(a):"0x",l??[],...Cn(e,t)],p=[],g=[],m=[];if(h)for(let w=0;w<h.length;w++){const{blob:A,commitment:k,proof:v}=h[w];p.push(A),g.push(k),m.push(v)}return Ye(["0x03",vt(h?[b,p,g,m]:b)])}function Xl(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:f}=e;Zs(e);const d=ur(u),l=[K(n),s?K(s):"0x",c?K(c):"0x",a?K(a):"0x",r?K(r):"0x",o??"0x",i?K(i):"0x",f??"0x",d,...Cn(e,t)];return Ye(["0x02",vt(l)])}function Ql(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:i,value:a,accessList:c,gasPrice:u}=e;Vl(e);const f=ur(c),d=[K(n),o?K(o):"0x",u?K(u):"0x",r?K(r):"0x",i??"0x",a?K(a):"0x",s??"0x",f,...Cn(e,t)];return Ye(["0x01",vt(d)])}function e0(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:i,value:a,gasPrice:c}=e;Kl(e);let u=[o?K(o):"0x",c?K(c):"0x",r?K(r):"0x",i??"0x",a?K(a):"0x",s??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const h=27n+(t.v===27n?0n:1n);if(t.v!==h)throw new Md({v:t.v});return h})(),d=Ie(t.r),l=Ie(t.s);u=[...u,K(f),d==="0x00"?"0x":d,l==="0x00"?"0x":l]}else n>0&&(u=[...u,K(n),"0x","0x"]);return vt(u)}function Cn(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=Ie(n.r),i=Ie(n.s);return[typeof s=="number"?s?K(1):"0x":r===0n?"0x":r===1n?K(1):r===27n?"0x":K(1),o==="0x00"?"0x":o,i==="0x00"?"0x":i]}class t0 extends I{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n0(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new t0({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,i,a]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${i}.${a}`);c>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function r0(e,t="wei"){return n0(e,Zi[t])}function s0(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function o0(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Re(e.nonce):void 0,storageProof:e.storageProof?s0(e.storageProof):void 0}}async function i0(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?V(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,i||o]});return o0(a)}async function a0(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?V(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Ws(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){const i=r||"latest",a=n!==void 0?V(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,V(o)]},{dedupe:!0}):(a||i)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,V(o)]},{dedupe:!!a})),!c)throw new Yi({blockHash:t,blockNumber:n,blockTag:i,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||ca)(c)}async function c0(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([G(e,kn,"getBlockNumber")({}),t?G(e,Ws,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function cs(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ji({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Ol)(n)}async function u0(e,t){const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:o,multicallAddress:i,stateOverride:a}=t,c=t.contracts,u=r??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024);let f=i;if(!f){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");f=Kt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=[[]];let l=0,h=0;for(let p=0;p<c.length;p++){const{abi:g,address:m,args:w,functionName:A}=c[p];try{const k=Je({abi:g,args:w,functionName:A});h+=(k.length-2)/2,u>0&&h>u&&d[l].length>0&&(l++,h=(k.length-2)/2,d[l]=[]),d[l]=[...d[l],{allowFailure:!0,callData:k,target:m}]}catch(k){const v=Mt(k,{abi:g,address:m,args:w,docsPath:"/docs/contract/multicall",functionName:A});if(!n)throw v;d[l]=[...d[l],{allowFailure:!0,callData:"0x",target:m}]}}const y=await Promise.allSettled(d.map(p=>G(e,We,"readContract")({abi:rs,address:f,args:[p],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:a}))),b=[];for(let p=0;p<y.length;p++){const g=y[p];if(g.status==="rejected"){if(!n)throw g.reason;for(let w=0;w<d[p].length;w++)b.push({status:"failure",error:g.reason,result:void 0});continue}const m=g.value;for(let w=0;w<m.length;w++){const{returnData:A,success:k}=m[w],{callData:v}=d[p][w],{abi:E,address:P,functionName:x,args:N}=c[b.length];try{if(v==="0x")throw new Vn;if(!k)throw new $s({data:A});const _=Vt({abi:E,args:N,data:A,functionName:x});b.push(n?{result:_,status:"success"}:_)}catch(_){const C=Mt(_,{abi:E,address:P,args:N,docsPath:"/docs/contract/multicall",functionName:x});if(!n)throw C;b.push({error:C,result:void 0,status:"failure"})}}}if(b.length!==c.length)throw new I("multicall results mismatch");return b}function Uo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function d0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function dr(e,...t){if(!d0(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function f0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Uo(e.outputLen),Uo(e.blockLen)}function Hn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function l0(e,t){dr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const At=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ce=(e,t)=>e<<32-t|e>>>t;function h0(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Ys(e){return typeof e=="string"&&(e=h0(e)),dr(e),e}function p0(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];dr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class Ga{clone(){return this._cloneInto()}}function b0(e){const t=r=>e().update(Ys(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function y0(e=32){if(At&&typeof At.getRandomValues=="function")return At.getRandomValues(new Uint8Array(e));if(At&&typeof At.randomBytes=="function")return At.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function g0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}const m0=(e,t,n)=>e&t^~e&n,w0=(e,t,n)=>e&t^e&n^t&n;class v0 extends Ga{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kr(this.buffer)}update(t){Hn(this);const{view:n,buffer:r,blockLen:s}=this;t=Ys(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=kr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Hn(this),l0(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;g0(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=kr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,f[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=i,s%n&&t.buffer.set(r),t}}const x0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),et=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tt=new Uint32Array(64);class E0 extends v0{constructor(){super(64,32,8,!1),this.A=et[0]|0,this.B=et[1]|0,this.C=et[2]|0,this.D=et[3]|0,this.E=et[4]|0,this.F=et[5]|0,this.G=et[6]|0,this.H=et[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)tt[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=tt[d-15],h=tt[d-2],y=Ce(l,7)^Ce(l,18)^l>>>3,b=Ce(h,17)^Ce(h,19)^h>>>10;tt[d]=b+tt[d-7]+y+tt[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){const l=Ce(a,6)^Ce(a,11)^Ce(a,25),h=f+l+m0(a,c,u)+x0[d]+tt[d]|0,b=(Ce(r,2)^Ce(r,13)^Ce(r,22))+w0(r,s,o)|0;f=u,u=c,c=a,a=i+h|0,i=o,o=s,s=r,r=h+b|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,o,i,a,c,u,f)}roundClean(){tt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const P0=b0(()=>new E0);class Ha extends Ga{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,f0(t);const r=Ys(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return Hn(this),this.iHash.update(t),this}digestInto(t){Hn(this),dr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qa=(e,t,n)=>new Ha(e,t).update(n).digest();qa.create=(e,t)=>new Ha(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fr=BigInt(0),lr=BigInt(1),A0=BigInt(2);function Et(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function _n(e){if(!Et(e))throw new Error("Uint8Array expected")}function Rt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const B0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Lt(e){_n(e);let t="";for(let n=0;n<e.length;n++)t+=B0[e[n]];return t}function Tt(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Js(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?fr:BigInt("0x"+e)}const ze={_0:48,_9:57,A:65,F:70,a:97,f:102};function jo(e){if(e>=ze._0&&e<=ze._9)return e-ze._0;if(e>=ze.A&&e<=ze.F)return e-(ze.A-10);if(e>=ze.a&&e<=ze.f)return e-(ze.a-10)}function zt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=jo(e.charCodeAt(o)),a=jo(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function yt(e){return Js(Lt(e))}function Xs(e){return _n(e),Js(Lt(Uint8Array.from(e).reverse()))}function Ot(e,t){return zt(e.toString(16).padStart(t*2,"0"))}function Qs(e,t){return Ot(e,t).reverse()}function I0(e){return zt(Tt(e))}function Ae(e,t,n){let r;if(typeof t=="string")try{r=zt(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Et(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function xn(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];_n(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function T0(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function $0(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Sr=e=>typeof e=="bigint"&&fr<=e;function hr(e,t,n){return Sr(e)&&Sr(t)&&Sr(n)&&t<=e&&e<n}function gt(e,t,n,r){if(!hr(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Va(e){let t;for(t=0;e>fr;e>>=lr,t+=1);return t}function k0(e,t){return e>>BigInt(t)&lr}function S0(e,t,n){return e|(n?lr:fr)<<BigInt(t)}const eo=e=>(A0<<BigInt(e-1))-lr,Cr=e=>new Uint8Array(e),Do=e=>Uint8Array.from(e);function Ka(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Cr(e),s=Cr(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},a=(...d)=>n(s,r,...d),c=(d=Cr())=>{s=a(Do([0]),d),r=a(),d.length!==0&&(s=a(Do([1]),d),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const l=[];for(;d<t;){r=a();const h=r.slice();l.push(h),d+=r.length}return xn(...l)};return(d,l)=>{i(),c(d);let h;for(;!(h=l(u()));)c();return i(),h}}const C0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Et(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Nn(e,t,n={}){const r=(s,o,i)=>{const a=C0[o];if(typeof a!="function")throw new Error("invalid validator function");const c=e[s];if(!(i&&c===void 0)&&!a(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}const _0=()=>{throw new Error("not implemented")};function us(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const N0=Object.freeze(Object.defineProperty({__proto__:null,aInRange:gt,abool:Rt,abytes:_n,bitGet:k0,bitLen:Va,bitMask:eo,bitSet:S0,bytesToHex:Lt,bytesToNumberBE:yt,bytesToNumberLE:Xs,concatBytes:xn,createHmacDrbg:Ka,ensureBytes:Ae,equalBytes:T0,hexToBytes:zt,hexToNumber:Js,inRange:hr,isBytes:Et,memoized:us,notImplemented:_0,numberToBytesBE:Ot,numberToBytesLE:Qs,numberToHexUnpadded:Tt,numberToVarBytesBE:I0,utf8ToBytes:$0,validateObject:Nn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ue=BigInt(0),ne=BigInt(1),ht=BigInt(2),F0=BigInt(3),ds=BigInt(4),Go=BigInt(5),Ho=BigInt(8);function pe(e,t){const n=e%t;return n>=ue?n:t+n}function M0(e,t,n){if(t<ue)throw new Error("invalid exponent, negatives unsupported");if(n<=ue)throw new Error("invalid modulus");if(n===ne)return ue;let r=ne;for(;t>ue;)t&ne&&(r=r*e%n),e=e*e%n,t>>=ne;return r}function Ee(e,t,n){let r=e;for(;t-- >ue;)r*=r,r%=n;return r}function fs(e,t){if(e===ue)throw new Error("invert: expected non-zero number");if(t<=ue)throw new Error("invert: expected positive modulus, got "+t);let n=pe(e,t),r=t,s=ue,o=ne;for(;n!==ue;){const a=r/n,c=r%n,u=s-o*a;r=n,n=c,s=o,o=u}if(r!==ne)throw new Error("invert: does not exist");return pe(s,t)}function R0(e){const t=(e-ne)/ht;let n,r,s;for(n=e-ne,r=0;n%ht===ue;n/=ht,r++);for(s=ht;s<e&&M0(s,t,e)!==e-ne;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const i=(e+ne)/ds;return function(c,u){const f=c.pow(u,i);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const o=(n+ne)/ht;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,f=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,o),l=a.pow(c,n);for(;!a.eql(l,a.ONE);){if(a.eql(l,a.ZERO))return a.ZERO;let h=1;for(let b=a.sqr(l);h<u&&!a.eql(b,a.ONE);h++)b=a.sqr(b);const y=a.pow(f,ne<<BigInt(u-h-1));f=a.sqr(y),d=a.mul(d,y),l=a.mul(l,f),u=h}return d}}function L0(e){if(e%ds===F0){const t=(e+ne)/ds;return function(r,s){const o=r.pow(s,t);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(e%Ho===Go){const t=(e-Go)/Ho;return function(r,s){const o=r.mul(s,ht),i=r.pow(o,t),a=r.mul(s,i),c=r.mul(r.mul(a,ht),i),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return R0(e)}const z0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function O0(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=z0.reduce((r,s)=>(r[s]="function",r),t);return Nn(e,n)}function U0(e,t,n){if(n<ue)throw new Error("invalid exponent, negatives unsupported");if(n===ue)return e.ONE;if(n===ne)return t;let r=e.ONE,s=t;for(;n>ue;)n&ne&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ne;return r}function j0(e,t){const n=new Array(t.length),r=t.reduce((o,i,a)=>e.is0(i)?o:(n[a]=o,e.mul(o,i)),e.ONE),s=e.inv(r);return t.reduceRight((o,i,a)=>e.is0(i)?o:(n[a]=e.mul(o,n[a]),e.mul(o,i)),s),n}function Za(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Wa(e,t,n=!1,r={}){if(e<=ue)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=Za(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const a=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:eo(s),ZERO:ue,ONE:ne,create:c=>pe(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ue<=c&&c<e},is0:c=>c===ue,isOdd:c=>(c&ne)===ne,neg:c=>pe(-c,e),eql:(c,u)=>c===u,sqr:c=>pe(c*c,e),add:(c,u)=>pe(c+u,e),sub:(c,u)=>pe(c-u,e),mul:(c,u)=>pe(c*u,e),pow:(c,u)=>U0(a,c,u),div:(c,u)=>pe(c*fs(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>fs(c,e),sqrt:r.sqrt||(c=>(i||(i=L0(e)),i(a,c))),invertBatch:c=>j0(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>n?Qs(c,o):Ot(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?Xs(c):yt(c)}});return Object.freeze(a)}function Ya(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ja(e){const t=Ya(e);return t+Math.ceil(t/2)}function D0(e,t,n=!1){const r=e.length,s=Ya(t),o=Ja(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?yt(e):Xs(e),a=pe(i,t-ne)+ne;return n?Qs(a,s):Ot(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt(0),On=BigInt(1);function _r(e,t){const n=t.negate();return e?n:t}function Xa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Nr(e,t){Xa(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function G0(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function H0(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Fr=new WeakMap,Qa=new WeakMap;function Mr(e){return Qa.get(e)||1}function q0(e,t){return{constTimeNegate:_r,hasPrecomputes(n){return Mr(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>qo;)r&On&&(s=s.add(o)),o=o.double(),r>>=On;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Nr(r,t),i=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,i.push(c);for(let f=1;f<o;f++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(n,r,s){const{windows:o,windowSize:i}=Nr(n,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),f=2**n,d=BigInt(n);for(let l=0;l<o;l++){const h=l*i;let y=Number(s&u);s>>=d,y>i&&(y-=f,s+=On);const b=h,p=h+Math.abs(y)-1,g=l%2!==0,m=y<0;y===0?c=c.add(_r(g,r[b])):a=a.add(_r(m,r[p]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,o=e.ZERO){const{windows:i,windowSize:a}=Nr(n,t),c=BigInt(2**n-1),u=2**n,f=BigInt(n);for(let d=0;d<i;d++){const l=d*a;if(s===qo)break;let h=Number(s&c);if(s>>=f,h>a&&(h-=u,s+=On),h===0)continue;let y=r[l+Math.abs(h)-1];h<0&&(y=y.negate()),o=o.add(y)}return o},getPrecomputes(n,r,s){let o=Fr.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Fr.set(r,s(o))),o},wNAFCached(n,r,s){const o=Mr(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=Mr(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){Xa(r,t),Qa.set(n,r),Fr.delete(n)}}}function V0(e,t,n,r){if(G0(n,e),H0(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=Va(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,a=(1<<i)-1,c=new Array(a+1).fill(s),u=Math.floor((t.BITS-1)/i)*i;let f=s;for(let d=u;d>=0;d-=i){c.fill(s);for(let h=0;h<r.length;h++){const y=r[h],b=Number(y>>BigInt(d)&BigInt(a));c[b]=c[b].add(n[h])}let l=s;for(let h=c.length-1,y=s;h>0;h--)y=y.add(c[h]),l=l.add(y);if(f=f.add(l),d!==0)for(let h=0;h<i;h++)f=f.double()}return f}function ec(e){return O0(e.Fp),Nn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Za(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vo(e){e.lowS!==void 0&&Rt("lowS",e.lowS),e.prehash!==void 0&&Rt("prehash",e.prehash)}function K0(e){const t=ec(e);Nn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Z0,hexToBytes:W0}=N0,je={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=je;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Tt(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Tt(s.length/2|128):"";return Tt(e)+o+s+t},decode(e,t){const{Err:n}=je;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)i=i<<8|f;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=je;if(e<De)throw new t("integer: negative integers are not allowed");let n=Tt(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=je;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Z0(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=je,s=typeof e=="string"?W0(e):e;_n(s);const{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=je,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}},De=BigInt(0),ce=BigInt(1);BigInt(2);const Ko=BigInt(3);BigInt(4);function Y0(e){const t=K0(e),{Fp:n}=t,r=Wa(t.n,t.nBitLength),s=t.toBytes||((b,p,g)=>{const m=p.toAffine();return xn(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),o=t.fromBytes||(b=>{const p=b.subarray(1),g=n.fromBytes(p.subarray(0,n.BYTES)),m=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:g,y:m}});function i(b){const{a:p,b:g}=t,m=n.sqr(b),w=n.mul(m,b);return n.add(n.add(w,n.mul(b,p)),g)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(b){return hr(b,ce,t.n)}function c(b){const{allowedPrivateKeyLengths:p,nByteLength:g,wrapPrivateKey:m,n:w}=t;if(p&&typeof b!="bigint"){if(Et(b)&&(b=Lt(b)),typeof b!="string"||!p.includes(b.length))throw new Error("invalid private key");b=b.padStart(g*2,"0")}let A;try{A=typeof b=="bigint"?b:yt(Ae("private key",b,g))}catch{throw new Error("invalid private key, expected hex or "+g+" bytes, got "+typeof b)}return m&&(A=pe(A,w)),gt("private key",A,ce,w),A}function u(b){if(!(b instanceof l))throw new Error("ProjectivePoint expected")}const f=us((b,p)=>{const{px:g,py:m,pz:w}=b;if(n.eql(w,n.ONE))return{x:g,y:m};const A=b.is0();p==null&&(p=A?n.ONE:n.inv(w));const k=n.mul(g,p),v=n.mul(m,p),E=n.mul(w,p);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:k,y:v}}),d=us(b=>{if(b.is0()){if(t.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:p,y:g}=b.toAffine();if(!n.isValid(p)||!n.isValid(g))throw new Error("bad point: x or y not FE");const m=n.sqr(g),w=i(p);if(!n.eql(m,w))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class l{constructor(p,g,m){if(this.px=p,this.py=g,this.pz=m,p==null||!n.isValid(p))throw new Error("x required");if(g==null||!n.isValid(g))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:g,y:m}=p||{};if(!p||!n.isValid(g)||!n.isValid(m))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");const w=A=>n.eql(A,n.ZERO);return w(g)&&w(m)?l.ZERO:new l(g,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const g=n.invertBatch(p.map(m=>m.pz));return p.map((m,w)=>m.toAffine(g[w])).map(l.fromAffine)}static fromHex(p){const g=l.fromAffine(o(Ae("pointHex",p)));return g.assertValidity(),g}static fromPrivateKey(p){return l.BASE.multiply(c(p))}static msm(p,g){return V0(l,r,p,g)}_setWindowSize(p){y.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:g,py:m,pz:w}=this,{px:A,py:k,pz:v}=p,E=n.eql(n.mul(g,v),n.mul(A,w)),P=n.eql(n.mul(m,v),n.mul(k,w));return E&&P}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:g}=t,m=n.mul(g,Ko),{px:w,py:A,pz:k}=this;let v=n.ZERO,E=n.ZERO,P=n.ZERO,x=n.mul(w,w),N=n.mul(A,A),_=n.mul(k,k),C=n.mul(w,A);return C=n.add(C,C),P=n.mul(w,k),P=n.add(P,P),v=n.mul(p,P),E=n.mul(m,_),E=n.add(v,E),v=n.sub(N,E),E=n.add(N,E),E=n.mul(v,E),v=n.mul(C,v),P=n.mul(m,P),_=n.mul(p,_),C=n.sub(x,_),C=n.mul(p,C),C=n.add(C,P),P=n.add(x,x),x=n.add(P,x),x=n.add(x,_),x=n.mul(x,C),E=n.add(E,x),_=n.mul(A,k),_=n.add(_,_),x=n.mul(_,C),v=n.sub(v,x),P=n.mul(_,N),P=n.add(P,P),P=n.add(P,P),new l(v,E,P)}add(p){u(p);const{px:g,py:m,pz:w}=this,{px:A,py:k,pz:v}=p;let E=n.ZERO,P=n.ZERO,x=n.ZERO;const N=t.a,_=n.mul(t.b,Ko);let C=n.mul(g,A),U=n.mul(m,k),B=n.mul(w,v),S=n.add(g,m),T=n.add(A,k);S=n.mul(S,T),T=n.add(C,U),S=n.sub(S,T),T=n.add(g,w);let F=n.add(A,v);return T=n.mul(T,F),F=n.add(C,B),T=n.sub(T,F),F=n.add(m,w),E=n.add(k,v),F=n.mul(F,E),E=n.add(U,B),F=n.sub(F,E),x=n.mul(N,T),E=n.mul(_,B),x=n.add(E,x),E=n.sub(U,x),x=n.add(U,x),P=n.mul(E,x),U=n.add(C,C),U=n.add(U,C),B=n.mul(N,B),T=n.mul(_,T),U=n.add(U,B),B=n.sub(C,B),B=n.mul(N,B),T=n.add(T,B),C=n.mul(U,T),P=n.add(P,C),C=n.mul(F,T),E=n.mul(S,E),E=n.sub(E,C),C=n.mul(S,U),x=n.mul(F,x),x=n.add(x,C),new l(E,P,x)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return y.wNAFCached(this,p,l.normalizeZ)}multiplyUnsafe(p){const{endo:g,n:m}=t;gt("scalar",p,De,m);const w=l.ZERO;if(p===De)return w;if(this.is0()||p===ce)return this;if(!g||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,p,l.normalizeZ);let{k1neg:A,k1:k,k2neg:v,k2:E}=g.splitScalar(p),P=w,x=w,N=this;for(;k>De||E>De;)k&ce&&(P=P.add(N)),E&ce&&(x=x.add(N)),N=N.double(),k>>=ce,E>>=ce;return A&&(P=P.negate()),v&&(x=x.negate()),x=new l(n.mul(x.px,g.beta),x.py,x.pz),P.add(x)}multiply(p){const{endo:g,n:m}=t;gt("scalar",p,ce,m);let w,A;if(g){const{k1neg:k,k1:v,k2neg:E,k2:P}=g.splitScalar(p);let{p:x,f:N}=this.wNAF(v),{p:_,f:C}=this.wNAF(P);x=y.constTimeNegate(k,x),_=y.constTimeNegate(E,_),_=new l(n.mul(_.px,g.beta),_.py,_.pz),w=x.add(_),A=N.add(C)}else{const{p:k,f:v}=this.wNAF(p);w=k,A=v}return l.normalizeZ([w,A])[0]}multiplyAndAddUnsafe(p,g,m){const w=l.BASE,A=(v,E)=>E===De||E===ce||!v.equals(w)?v.multiplyUnsafe(E):v.multiply(E),k=A(this,g).add(A(p,m));return k.is0()?void 0:k}toAffine(p){return f(this,p)}isTorsionFree(){const{h:p,isTorsionFree:g}=t;if(p===ce)return!0;if(g)return g(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:g}=t;return p===ce?this:g?g(l,this):this.multiplyUnsafe(t.h)}toRawBytes(p=!0){return Rt("isCompressed",p),this.assertValidity(),s(l,this,p)}toHex(p=!0){return Rt("isCompressed",p),Lt(this.toRawBytes(p))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,y=q0(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function J0(e){const t=ec(e);return Nn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function X0(e){const t=J0(e),{Fp:n,n:r}=t,s=n.BYTES+1,o=2*n.BYTES+1;function i(B){return pe(B,r)}function a(B){return fs(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=Y0({...t,toBytes(B,S,T){const F=S.toAffine(),z=n.toBytes(F.x),M=xn;return Rt("isCompressed",T),T?M(Uint8Array.from([S.hasEvenY()?2:3]),z):M(Uint8Array.from([4]),z,n.toBytes(F.y))},fromBytes(B){const S=B.length,T=B[0],F=B.subarray(1);if(S===s&&(T===2||T===3)){const z=yt(F);if(!hr(z,ce,n.ORDER))throw new Error("Point is not on curve");const M=f(z);let R;try{R=n.sqrt(M)}catch(W){const Y=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+Y)}const j=(R&ce)===ce;return(T&1)===1!==j&&(R=n.neg(R)),{x:z,y:R}}else if(S===o&&T===4){const z=n.fromBytes(F.subarray(0,n.BYTES)),M=n.fromBytes(F.subarray(n.BYTES,2*n.BYTES));return{x:z,y:M}}else{const z=s,M=o;throw new Error("invalid Point, expected length of "+z+", or uncompressed "+M+", got "+S)}}}),l=B=>Lt(Ot(B,t.nByteLength));function h(B){const S=r>>ce;return B>S}function y(B){return h(B)?i(-B):B}const b=(B,S,T)=>yt(B.slice(S,T));class p{constructor(S,T,F){this.r=S,this.s=T,this.recovery=F,this.assertValidity()}static fromCompact(S){const T=t.nByteLength;return S=Ae("compactSignature",S,T*2),new p(b(S,0,T),b(S,T,2*T))}static fromDER(S){const{r:T,s:F}=je.toSig(Ae("DER",S));return new p(T,F)}assertValidity(){gt("r",this.r,ce,r),gt("s",this.s,ce,r)}addRecoveryBit(S){return new p(this.r,this.s,S)}recoverPublicKey(S){const{r:T,s:F,recovery:z}=this,M=v(Ae("msgHash",S));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const R=z===2||z===3?T+t.n:T;if(R>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=z&1?"03":"02",L=c.fromHex(j+l(R)),W=a(R),Y=i(-M*W),ee=i(F*W),ie=c.BASE.multiplyAndAddUnsafe(L,Y,ee);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return zt(this.toDERHex())}toDERHex(){return je.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zt(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const g={isValidPrivateKey(B){try{return u(B),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const B=Ja(t.n);return D0(t.randomBytes(B),t.n)},precompute(B=8,S=c.BASE){return S._setWindowSize(B),S.multiply(BigInt(3)),S}};function m(B,S=!0){return c.fromPrivateKey(B).toRawBytes(S)}function w(B){const S=Et(B),T=typeof B=="string",F=(S||T)&&B.length;return S?F===s||F===o:T?F===2*s||F===2*o:B instanceof c}function A(B,S,T=!0){if(w(B))throw new Error("first arg must be private key");if(!w(S))throw new Error("second arg must be public key");return c.fromHex(S).multiply(u(B)).toRawBytes(T)}const k=t.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const S=yt(B),T=B.length*8-t.nBitLength;return T>0?S>>BigInt(T):S},v=t.bits2int_modN||function(B){return i(k(B))},E=eo(t.nBitLength);function P(B){return gt("num < 2^"+t.nBitLength,B,De,E),Ot(B,t.nByteLength)}function x(B,S,T=N){if(["recovered","canonical"].some(he=>he in T))throw new Error("sign() legacy options not supported");const{hash:F,randomBytes:z}=t;let{lowS:M,prehash:R,extraEntropy:j}=T;M==null&&(M=!0),B=Ae("msgHash",B),Vo(T),R&&(B=Ae("prehashed msgHash",F(B)));const L=v(B),W=u(S),Y=[P(W),P(L)];if(j!=null&&j!==!1){const he=j===!0?z(n.BYTES):j;Y.push(Ae("extraEntropy",he))}const ee=xn(...Y),ie=L;function ke(he){const we=k(he);if(!d(we))return;const pr=a(we),Wt=c.BASE.multiply(we).toAffine(),ft=i(Wt.x);if(ft===De)return;const Yt=i(pr*i(ie+ft*W));if(Yt===De)return;let Pt=(Wt.x===ft?0:2)|Number(Wt.y&ce),no=Yt;return M&&h(Yt)&&(no=y(Yt),Pt^=1),new p(ft,no,Pt)}return{seed:ee,k2sig:ke}}const N={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function C(B,S,T=N){const{seed:F,k2sig:z}=x(B,S,T),M=t;return Ka(M.hash.outputLen,M.nByteLength,M.hmac)(F,z)}c.BASE._setWindowSize(8);function U(B,S,T,F=_){const z=B;S=Ae("msgHash",S),T=Ae("publicKey",T);const{lowS:M,prehash:R,format:j}=F;if(Vo(F),"strict"in F)throw new Error("options.strict was renamed to lowS");if(j!==void 0&&j!=="compact"&&j!=="der")throw new Error("format must be compact or der");const L=typeof z=="string"||Et(z),W=!L&&!j&&typeof z=="object"&&z!==null&&typeof z.r=="bigint"&&typeof z.s=="bigint";if(!L&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Y,ee;try{if(W&&(Y=new p(z.r,z.s)),L){try{j!=="compact"&&(Y=p.fromDER(z))}catch(Pt){if(!(Pt instanceof je.Err))throw Pt}!Y&&j!=="der"&&(Y=p.fromCompact(z))}ee=c.fromHex(T)}catch{return!1}if(!Y||M&&Y.hasHighS())return!1;R&&(S=t.hash(S));const{r:ie,s:ke}=Y,he=v(S),we=a(ke),pr=i(he*we),Wt=i(ie*we),ft=c.BASE.multiplyAndAddUnsafe(ee,pr,Wt)?.toAffine();return ft?i(ft.x)===ie:!1}return{CURVE:t,getPublicKey:m,getSharedSecret:A,sign:C,verify:U,ProjectivePoint:c,Signature:p,utils:g}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q0(e){return{hash:e,hmac:(t,...n)=>qa(e,t,p0(...n)),randomBytes:y0}}function eh(e,t){const n=r=>X0({...e,...Q0(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),th=BigInt(1),ls=BigInt(2),Wo=(e,t)=>(e+t/ls)/t;function nh(e){const t=tc,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=Ee(f,n,t)*f%t,l=Ee(d,n,t)*f%t,h=Ee(l,ls,t)*u%t,y=Ee(h,s,t)*h%t,b=Ee(y,o,t)*y%t,p=Ee(b,a,t)*b%t,g=Ee(p,c,t)*p%t,m=Ee(g,a,t)*b%t,w=Ee(m,n,t)*f%t,A=Ee(w,i,t)*y%t,k=Ee(A,r,t)*u%t,v=Ee(k,ls,t);if(!hs.eql(hs.sqr(v),e))throw new Error("Cannot find square root");return v}const hs=Wa(tc,void 0,void 0,{sqrt:nh}),Zt=eh({a:BigInt(0),b:BigInt(7),Fp:hs,n:Zo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Zo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-th*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),a=Wo(o*e,t),c=Wo(-r*e,t);let u=pe(e-a*n-c*s,t),f=pe(-a*r-c*o,t);const d=u>i,l=f>i;if(d&&(u=t-u),l&&(f=t-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:l,k2:f}}}},P0);BigInt(0);Zt.ProjectivePoint;const rh=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Zt},Symbol.toStringTag,{value:"Module"}));function nc({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Zt.Signature(ot(e),ot(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:Te(i)}async function to(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,universalSignatureVerifierAddress:a=e.chain?.contracts?.universalSignatureVerifier?.address,...c}=t,u=Me(i)?i:typeof i=="object"&&"r"in i&&"s"in i?nc(i):se(i),f=await(async()=>!r&&!s||Dl(u)?u:Gl({address:r,data:s,signature:u}))();try{const d=a?{to:a,data:Je({abi:Fo,functionName:"isValidSig",args:[n,o,f]}),...c}:{data:sr({abi:Fo,args:[n,o,f],bytecode:$f}),...c},{data:l}=await G(e,or,"call")(d);return Tu(l??"0x0")}catch(d){try{if(zs(Li(n),await ea({hash:o,signature:i})))return!0}catch{}if(d instanceof Xi)return!1;throw d}}async function sh(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const a=Ks(n);return to(e,{address:t,factory:r,factoryData:s,hash:a,signature:o,...i})}async function oh(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:a,types:c,domain:u,...f}=t,d=Ma({message:i,primaryType:a,types:c,domain:u});return to(e,{address:n,factory:r,factoryData:s,hash:d,signature:o,...f})}function rc(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const a=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let c;return a?(()=>{const d=de(["watchBlockNumber",e.uid,t,n,i]);return at(d,{onBlockNumber:r,onError:s},l=>$n(async()=>{try{const h=await G(e,kn,"getBlockNumber")({cacheTime:0});if(c){if(h===c)return;if(h-c>1&&n)for(let y=c+1n;y<h;y++)l.onBlockNumber(y,c),c=y}(!c||h>c)&&(l.onBlockNumber(h,c),c=h)}catch(h){l.onError?.(h)}},{emitOnBegin:t,interval:i}))})():(()=>{const d=de(["watchBlockNumber",e.uid,t,n]);return at(d,{onBlockNumber:r,onError:s},l=>{let h=!0,y=()=>h=!1;return(async()=>{try{const b=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(m=>m.config.type==="webSocket");return g?g.value:e.transport}return e.transport})(),{unsubscribe:p}=await b.subscribe({params:["newHeads"],onData(g){if(!h)return;const m=ot(g.result?.number);l.onBlockNumber(m,c),c=m},onError(g){l.onError?.(g)}});y=p,h||y()}catch(b){s?.(b)}})(),()=>y()})})()}async function ih(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,retryCount:o=6,retryDelay:i=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=de(["waitForTransactionReceipt",e.uid,n]);let u,f,d,l=!1;const{promise:h,resolve:y,reject:b}=Aa(),p=a?setTimeout(()=>b(new Od({hash:n})),a):void 0,g=at(c,{onReplaced:r,resolve:y,reject:b},m=>{const w=G(e,rc,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const k=E=>{clearTimeout(p),w(),E(),g()};let v=A;if(!l)try{if(d){if(t>1&&(!d.blockNumber||v-d.blockNumber+1n<t))return;k(()=>m.resolve(d));return}if(u||(l=!0,await as(async()=>{u=await G(e,Ws,"getTransaction")({hash:n}),u.blockNumber&&(v=u.blockNumber)},{delay:i,retryCount:o}),l=!1),d=await G(e,cs,"getTransactionReceipt")({hash:n}),t>1&&(!d.blockNumber||v-d.blockNumber+1n<t))return;k(()=>m.resolve(d))}catch(E){if(E instanceof Yi||E instanceof Ji){if(!u){l=!1;return}try{f=u,l=!0;const P=await as(()=>G(e,Ne,"getBlock")({blockNumber:v,includeTransactions:!0}),{delay:i,retryCount:o,shouldRetry:({error:_})=>_ instanceof ia});l=!1;const x=P.transactions.find(({from:_,nonce:C})=>_===f.from&&C===f.nonce);if(!x||(d=await G(e,cs,"getTransactionReceipt")({hash:x.hash}),t>1&&(!d.blockNumber||v-d.blockNumber+1n<t)))return;let N="replaced";x.to===f.to&&x.value===f.value?N="repriced":x.from===x.to&&x.value===0n&&(N="cancelled"),k(()=>{m.onReplaced?.({reason:N,replacedTransaction:f,transaction:x,transactionReceipt:d}),m.resolve(d)})}catch(P){k(()=>m.reject(P))}}else k(()=>m.reject(E))}}})});return h}function ah(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),f=i??!1;let d;return u?(()=>{const y=de(["watchBlocks",e.uid,t,n,r,f,c]);return at(y,{onBlock:s,onError:o},b=>$n(async()=>{try{const p=await G(e,Ne,"getBlock")({blockTag:t,includeTransactions:f});if(p.number&&d?.number){if(p.number===d.number)return;if(p.number-d.number>1&&n)for(let g=d?.number+1n;g<p.number;g++){const m=await G(e,Ne,"getBlock")({blockNumber:g,includeTransactions:f});b.onBlock(m,d),d=m}}(!d?.number||t==="pending"&&!p?.number||p.number&&p.number>d.number)&&(b.onBlock(p,d),d=p)}catch(p){b.onError?.(p)}},{emitOnBegin:r,interval:c}))})():(()=>{let y=!0,b=!0,p=()=>y=!1;return(async()=>{try{r&&G(e,Ne,"getBlock")({blockTag:t,includeTransactions:f}).then(w=>{y&&b&&(s(w,void 0),b=!1)});const g=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(A=>A.config.type==="webSocket");return w?w.value:e.transport}return e.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],async onData(w){if(!y)return;const A=await G(e,Ne,"getBlock")({blockNumber:w.blockNumber,includeTransactions:f}).catch(()=>{});y&&(s(A,d),b=!1,d=A)},onError(w){o?.(w)}});p=m,y||p()}catch(g){o?.(g)}})(),()=>p()})()}function ch(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:f=e.pollingInterval,strict:d}){const l=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),h=d??!1;return l?(()=>{const p=de(["watchEvent",t,n,r,e.uid,s,f,i]);return at(p,{onLogs:c,onError:a},g=>{let m;i!==void 0&&(m=i-1n);let w,A=!1;const k=$n(async()=>{if(!A){try{w=await G(e,Na,"createEventFilter")({address:t,args:n,event:s,events:o,strict:h,fromBlock:i})}catch{}A=!0;return}try{let v;if(w)v=await G(e,ir,"getFilterChanges")({filter:w});else{const E=await G(e,kn,"getBlockNumber")({});m&&m!==E?v=await G(e,js,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:m+1n,toBlock:E}):v=[],m=E}if(v.length===0)return;if(r)g.onLogs(v);else for(const E of v)g.onLogs([E])}catch(v){w&&v instanceof wt&&(A=!1),g.onError?.(v)}},{emitOnBegin:!0,interval:f});return async()=>{w&&await G(e,ar,"uninstallFilter")({filter:w}),k()}})})():(()=>{let p=!0,g=()=>p=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const v=e.transport.transports.find(E=>E.config.type==="webSocket");return v?v.value:e.transport}return e.transport})(),w=o??(s?[s]:void 0);let A=[];w&&(A=[w.flatMap(E=>An({abi:[E],eventName:E.name,args:n}))],s&&(A=A[0]));const{unsubscribe:k}=await m.subscribe({params:["logs",{address:t,topics:A}],onData(v){if(!p)return;const E=v.result;try{const{eventName:P,args:x}=Os({abi:w??[],data:E.data,topics:E.topics,strict:h}),N=it(E,{args:x,eventName:P});c([N])}catch(P){let x,N;if(P instanceof nn||P instanceof Kn){if(d)return;x=P.abiItem.name,N=P.abiItem.inputs?.some(C=>!("name"in C&&C.name))}const _=it(E,{args:N?[]:{},eventName:x});c([_])}},onError(v){a?.(v)}});g=k,p||g()}catch(m){a?.(m)}})(),()=>g()})()}function uh(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const u=de(["watchPendingTransactions",e.uid,t,o]);return at(u,{onTransactions:r,onError:n},f=>{let d;const l=$n(async()=>{try{if(!d)try{d=await G(e,Fa,"createPendingTransactionFilter")({});return}catch(y){throw l(),y}const h=await G(e,ir,"getFilterChanges")({filter:d});if(h.length===0)return;if(t)f.onTransactions(h);else for(const y of h)f.onTransactions([y])}catch(h){f.onError?.(h)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await G(e,ar,"uninstallFilter")({filter:d}),l()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(l){if(!u)return;const h=l.result;r([h])},onError(l){n?.(l)}});f=d,u||f()}catch(d){n?.(d)}})(),()=>f()})()}function dh(e){const{scheme:t,statement:n,...r}=e.match(fh)?.groups??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(lh)?.groups??{},f=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const fh=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,lh=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function hh(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||t&&!zs(r.address,t))return!1}catch{return!1}return!0}async function ph(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:a,time:c=new Date,...u}=t,f=dh(s);if(!f.address||!hh({address:n,domain:r,message:f,nonce:o,scheme:i,time:c}))return!1;const l=Ks(s);return to(e,{address:f.address,hash:l,signature:a,...u})}function bh(e){return{call:t=>or(e,t),createBlockFilter:()=>Pl(e),createContractEventFilter:t=>Hi(e,t),createEventFilter:t=>Na(e,t),createPendingTransactionFilter:()=>Fa(e),estimateContractGas:t=>xf(e,t),estimateGas:t=>Ls(e,t),getBalance:t=>wa(e,t),getBlobBaseFee:()=>Al(e),getBlock:t=>Ne(e,t),getBlockNumber:t=>kn(e,t),getBlockTransactionCount:t=>Bl(e,t),getBytecode:t=>Oo(e,t),getChainId:()=>Tn(e),getCode:t=>Oo(e,t),getContractEvents:t=>va(e,t),getEip712Domain:t=>Zf(e,t),getEnsAddress:t=>al(e,t),getEnsAvatar:t=>vl(e,t),getEnsName:t=>xl(e,t),getEnsResolver:t=>El(e,t),getEnsText:t=>_a(e,t),getFeeHistory:t=>Tl(e,t),estimateFeesPerGas:t=>af(e,t),getFilterChanges:t=>ir(e,t),getFilterLogs:t=>$l(e,t),getGasPrice:()=>Ns(e),getLogs:t=>js(e,t),getProof:t=>i0(e,t),estimateMaxPriorityFeePerGas:t=>of(e,t),getStorageAt:t=>a0(e,t),getTransaction:t=>Ws(e,t),getTransactionConfirmations:t=>c0(e,t),getTransactionCount:t=>da(e,t),getTransactionReceipt:t=>cs(e,t),multicall:t=>u0(e,t),prepareTransactionRequest:t=>nr(e,t),readContract:t=>We(e,t),sendRawTransaction:t=>Ds(e,t),simulateContract:t=>Lf(e,t),verifyMessage:t=>sh(e,t),verifySiweMessage:t=>ph(e,t),verifyTypedData:t=>oh(e,t),uninstallFilter:t=>ar(e,t),waitForTransactionReceipt:t=>ih(e,t),watchBlocks:t=>ah(e,t),watchBlockNumber:t=>rc(e,t),watchContractEvent:t=>Hf(e,t),watchEvent:t=>ch(e,t),watchPendingTransactions:t=>uh(e,t)}}function yh(e){const{key:t="public",name:n="Public Client"}=e;return $a({...e,key:t,name:n,type:"publicClient"}).extend(bh)}function gh(e,t){const{abi:n,args:r,bytecode:s,...o}=t,i=sr({abi:n,args:r,bytecode:s});return Gs(e,{...o,data:i})}async function mh(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>En(n))}async function wh(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function vh(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Li(n))}async function xh(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Eh(e,{account:t=e.account,message:n}){if(!t)throw new Sn({docsPath:"/docs/actions/wallet/signMessage"});const r=xe(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Nt(n):n.raw instanceof Uint8Array?K(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Ph(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new Sn({docsPath:"/docs/actions/wallet/signTransaction"});const o=xe(n);In({account:o,...t});const i=await G(e,Tn,"getChainId")({});r!==null&&Ia({currentChainId:i,chain:r});const c=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||er;return o.signTransaction?o.signTransaction({...s,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(s),chainId:V(i),from:o.address}]},{retryCount:0})}async function Ah(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new Sn({docsPath:"/docs/actions/wallet/signTypedData"});const i=xe(n),a={EIP712Domain:ja({domain:r}),...t.types};if(Ua({domain:r,message:s,primaryType:o,types:a}),i.signTypedData)return i.signTypedData({domain:r,message:s,primaryType:o,types:a});const c=Rl({domain:r,message:s,primaryType:o,types:a});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}async function Bh(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:V(t)}]},{retryCount:0})}async function Ih(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Th(e){return{addChain:t=>Yf(e,t),deployContract:t=>gh(e,t),getAddresses:()=>mh(e),getChainId:()=>Tn(e),getPermissions:()=>wh(e),prepareTransactionRequest:t=>nr(e,t),requestAddresses:()=>vh(e),requestPermissions:t=>xh(e,t),sendRawTransaction:t=>Ds(e,t),sendTransaction:t=>Gs(e,t),signMessage:t=>Eh(e,t),signTransaction:t=>Ph(e,t),signTypedData:t=>Ah(e,t),switchChain:t=>Bh(e,t),watchAsset:t=>Ih(e,t),writeContract:t=>Vf(e,t)}}function $h(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return $a({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(Th)}const Rr=kl({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}});function sc(){return K(Zt.utils.randomPrivateKey())}function kh(e){if(typeof e=="string"){if(!oe(e,{strict:!1}))throw new le({address:e});return{address:e,type:"json-rpc"}}if(!oe(e.address,{strict:!1}))throw new le({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}let Sh=!1;async function Fn({hash:e,privateKey:t,to:n="object"}){const{r,s,recovery:o}=Zt.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:Sh}),i={r:V(r,{size:32}),s:V(s,{size:32}),v:o?28n:27n,yParity:o};return n==="bytes"||n==="hex"?nc({...i,to:n}):i}async function Ch(e){const{contractAddress:t,chainId:n,nonce:r,privateKey:s,to:o="object"}=e,i=await Fn({hash:ra({contractAddress:t,chainId:n,nonce:r}),privateKey:s,to:o});return o==="object"?{contractAddress:t,chainId:n,nonce:r,...i}:i}async function _h({message:e,privateKey:t}){return await Fn({hash:Ks(e),privateKey:t,to:"hex"})}async function Nh(e){const{privateKey:t,transaction:n,serializer:r=Wl}=e,s=n.type==="eip4844"?{...n,sidecars:!1}:n,o=await Fn({hash:ae(r(s)),privateKey:t});return r(n,o)}async function Fh(e){const{privateKey:t,...n}=e;return await Fn({hash:Ma(n),privateKey:t,to:"hex"})}function Lr(e,t={}){const{nonceManager:n}=t,r=K(Zt.getPublicKey(e.slice(2),!1)),s=Qi(r);return{...kh({address:s,nonceManager:n,async sign({hash:i}){return Fn({hash:i,privateKey:e,to:"hex"})},async experimental_signAuthorization(i){return Ch({...i,privateKey:e})},async signMessage({message:i}){return _h({message:i,privateKey:e})},async signTransaction(i,{serializer:a}={}){return Nh({privateKey:e,transaction:i,serializer:a})},async signTypedData(i){return Fh({...i,privateKey:e})}}),publicKey:r,source:"privateKey"}}function zr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function oc(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function be(e,...t){if(!oc(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Yo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Mh(e,t){be(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Jo(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const rt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Rh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Lh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lh)throw new Error("Non little-endian hardware is not supported");const zh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xo(e){be(e);let t="";for(let n=0;n<e.length;n++)t+=zh[e[n]];return t}const Oe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Qo(e){if(e>=Oe._0&&e<=Oe._9)return e-Oe._0;if(e>=Oe.A&&e<=Oe.F)return e-(Oe.A-10);if(e>=Oe.a&&e<=Oe.f)return e-(Oe.a-10)}function ei(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Qo(e.charCodeAt(o)),a=Qo(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function ps(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function bs(e){if(typeof e=="string")e=ps(e);else if(oc(e))e=ys(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function Oh(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function Uh(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const jh=(e,t)=>{function n(r,...s){if(be(r),e.nonceLength!==void 0){const f=s[0];if(!f)throw new Error("nonce / iv required");e.varSizeNonce?be(f):be(f,e.nonceLength)}const o=e.tagLength;o&&s[1]!==void 0&&be(s[1]);const i=t(r,...s),a=(f,d)=>{if(d!==void 0){if(f!==2)throw new Error("cipher output not supported");be(d)}};let c=!1;return{encrypt(f,d){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,be(f),a(i.encrypt.length,d),i.encrypt(f,d)},decrypt(f,d){if(be(f),o&&f.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return a(i.decrypt.length,d),i.decrypt(f,d)}}}return Object.assign(n,e),n};function ti(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Dh(t))throw new Error("invalid output, must be aligned");return t}function ni(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=4,u=0;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}function Dh(e){return e.byteOffset%4===0}function ys(e){return Uint8Array.from(e)}function Ut(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const ic=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),Gh=ic("expand 16-byte k"),Hh=ic("expand 32-byte k"),qh=rt(Gh),Vh=rt(Hh);function O(e,t){return e<<t|e>>>32-t}function gs(e){return e.byteOffset%4===0}const Un=64,Kh=16,ac=2**32-1,ri=new Uint32Array;function Zh(e,t,n,r,s,o,i,a){const c=s.length,u=new Uint8Array(Un),f=rt(u),d=gs(s)&&gs(o),l=d?rt(s):ri,h=d?rt(o):ri;for(let y=0;y<c;i++){if(e(t,n,r,f,i,a),i>=ac)throw new Error("arx: counter overflow");const b=Math.min(Un,c-y);if(d&&b===Un){const p=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let g=0,m;g<Kh;g++)m=p+g,h[m]=l[m]^f[g];y+=Un;continue}for(let p=0,g;p<b;p++)g=y+p,o[g]=s[g]^u[p];y+=b}}function Wh(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:i}=Oh({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return zr(s),zr(i),Jo(o),Jo(n),(a,c,u,f,d=0)=>{be(a),be(c),be(u);const l=u.length;if(f===void 0&&(f=new Uint8Array(l)),be(f),zr(d),d<0||d>=ac)throw new Error("arx: counter overflow");if(f.length<l)throw new Error(`arx: output (${f.length}) is shorter than data (${l})`);const h=[];let y=a.length,b,p;if(y===32)h.push(b=ys(a)),p=Vh;else if(y===16&&n)b=new Uint8Array(32),b.set(a),b.set(a,16),p=qh,h.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);gs(c)||h.push(c=ys(c));const g=rt(b);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,g,rt(c.subarray(0,16)),g),c=c.subarray(16)}const m=16-s;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const A=new Uint8Array(12);A.set(c,o?0:12-c.length),c=A,h.push(c)}const w=rt(c);return Zh(e,p,g,w,u,f,d,i),Ut(...h),f}}const fe=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Yh{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=bs(t),be(t,32);const n=fe(t,0),r=fe(t,2),s=fe(t,4),o=fe(t,6),i=fe(t,8),a=fe(t,10),c=fe(t,12),u=fe(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=fe(t,16+2*f)}process(t,n,r=!1){const s=r?0:2048,{h:o,r:i}=this,a=i[0],c=i[1],u=i[2],f=i[3],d=i[4],l=i[5],h=i[6],y=i[7],b=i[8],p=i[9],g=fe(t,n+0),m=fe(t,n+2),w=fe(t,n+4),A=fe(t,n+6),k=fe(t,n+8),v=fe(t,n+10),E=fe(t,n+12),P=fe(t,n+14);let x=o[0]+(g&8191),N=o[1]+((g>>>13|m<<3)&8191),_=o[2]+((m>>>10|w<<6)&8191),C=o[3]+((w>>>7|A<<9)&8191),U=o[4]+((A>>>4|k<<12)&8191),B=o[5]+(k>>>1&8191),S=o[6]+((k>>>14|v<<2)&8191),T=o[7]+((v>>>11|E<<5)&8191),F=o[8]+((E>>>8|P<<8)&8191),z=o[9]+(P>>>5|s),M=0,R=M+x*a+N*(5*p)+_*(5*b)+C*(5*y)+U*(5*h);M=R>>>13,R&=8191,R+=B*(5*l)+S*(5*d)+T*(5*f)+F*(5*u)+z*(5*c),M+=R>>>13,R&=8191;let j=M+x*c+N*a+_*(5*p)+C*(5*b)+U*(5*y);M=j>>>13,j&=8191,j+=B*(5*h)+S*(5*l)+T*(5*d)+F*(5*f)+z*(5*u),M+=j>>>13,j&=8191;let L=M+x*u+N*c+_*a+C*(5*p)+U*(5*b);M=L>>>13,L&=8191,L+=B*(5*y)+S*(5*h)+T*(5*l)+F*(5*d)+z*(5*f),M+=L>>>13,L&=8191;let W=M+x*f+N*u+_*c+C*a+U*(5*p);M=W>>>13,W&=8191,W+=B*(5*b)+S*(5*y)+T*(5*h)+F*(5*l)+z*(5*d),M+=W>>>13,W&=8191;let Y=M+x*d+N*f+_*u+C*c+U*a;M=Y>>>13,Y&=8191,Y+=B*(5*p)+S*(5*b)+T*(5*y)+F*(5*h)+z*(5*l),M+=Y>>>13,Y&=8191;let ee=M+x*l+N*d+_*f+C*u+U*c;M=ee>>>13,ee&=8191,ee+=B*a+S*(5*p)+T*(5*b)+F*(5*y)+z*(5*h),M+=ee>>>13,ee&=8191;let ie=M+x*h+N*l+_*d+C*f+U*u;M=ie>>>13,ie&=8191,ie+=B*c+S*a+T*(5*p)+F*(5*b)+z*(5*y),M+=ie>>>13,ie&=8191;let ke=M+x*y+N*h+_*l+C*d+U*f;M=ke>>>13,ke&=8191,ke+=B*u+S*c+T*a+F*(5*p)+z*(5*b),M+=ke>>>13,ke&=8191;let he=M+x*b+N*y+_*h+C*l+U*d;M=he>>>13,he&=8191,he+=B*f+S*u+T*c+F*a+z*(5*p),M+=he>>>13,he&=8191;let we=M+x*p+N*b+_*y+C*h+U*l;M=we>>>13,we&=8191,we+=B*d+S*f+T*u+F*c+z*a,M+=we>>>13,we&=8191,M=(M<<2)+M|0,M=M+R|0,R=M&8191,M=M>>>13,j+=M,o[0]=R,o[1]=j,o[2]=L,o[3]=W,o[4]=Y,o[5]=ee,o[6]=ie,o[7]=ke,o[8]=he,o[9]=we}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=s,s=t[a]>>>13,t[a]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let o=(s^1)-1;for(let a=0;a<10;a++)r[a]&=o;o=~o;for(let a=0;a<10;a++)t[a]=t[a]&o|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let i=t[0]+n[0];t[0]=i&65535;for(let a=1;a<8;a++)i=(t[a]+n[a]|0)+(i>>>16)|0,t[a]=i&65535;Ut(r)}update(t){Yo(this);const{buffer:n,blockLen:r}=this;t=bs(t);const s=t.length;for(let o=0;o<s;){const i=Math.min(r-this.pos,s-o);if(i===r){for(;r<=s-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ut(this.h,this.r,this.buffer,this.pad)}digestInto(t){Yo(this),Mh(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)t[o++]=r[i]>>>0,t[o++]=r[i]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Jh(e){const t=(r,s)=>e(s).update(bs(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Xh=Jh(e=>new Yh(e));function Qh(e,t,n,r,s,o=20){let i=e[0],a=e[1],c=e[2],u=e[3],f=t[0],d=t[1],l=t[2],h=t[3],y=t[4],b=t[5],p=t[6],g=t[7],m=s,w=n[0],A=n[1],k=n[2],v=i,E=a,P=c,x=u,N=f,_=d,C=l,U=h,B=y,S=b,T=p,F=g,z=m,M=w,R=A,j=k;for(let W=0;W<o;W+=2)v=v+N|0,z=O(z^v,16),B=B+z|0,N=O(N^B,12),v=v+N|0,z=O(z^v,8),B=B+z|0,N=O(N^B,7),E=E+_|0,M=O(M^E,16),S=S+M|0,_=O(_^S,12),E=E+_|0,M=O(M^E,8),S=S+M|0,_=O(_^S,7),P=P+C|0,R=O(R^P,16),T=T+R|0,C=O(C^T,12),P=P+C|0,R=O(R^P,8),T=T+R|0,C=O(C^T,7),x=x+U|0,j=O(j^x,16),F=F+j|0,U=O(U^F,12),x=x+U|0,j=O(j^x,8),F=F+j|0,U=O(U^F,7),v=v+_|0,j=O(j^v,16),T=T+j|0,_=O(_^T,12),v=v+_|0,j=O(j^v,8),T=T+j|0,_=O(_^T,7),E=E+C|0,z=O(z^E,16),F=F+z|0,C=O(C^F,12),E=E+C|0,z=O(z^E,8),F=F+z|0,C=O(C^F,7),P=P+U|0,M=O(M^P,16),B=B+M|0,U=O(U^B,12),P=P+U|0,M=O(M^P,8),B=B+M|0,U=O(U^B,7),x=x+N|0,R=O(R^x,16),S=S+R|0,N=O(N^S,12),x=x+N|0,R=O(R^x,8),S=S+R|0,N=O(N^S,7);let L=0;r[L++]=i+v|0,r[L++]=a+E|0,r[L++]=c+P|0,r[L++]=u+x|0,r[L++]=f+N|0,r[L++]=d+_|0,r[L++]=l+C|0,r[L++]=h+U|0,r[L++]=y+B|0,r[L++]=b+S|0,r[L++]=p+T|0,r[L++]=g+F|0,r[L++]=m+z|0,r[L++]=w+M|0,r[L++]=A+R|0,r[L++]=k+j|0}function ep(e,t,n,r){let s=e[0],o=e[1],i=e[2],a=e[3],c=t[0],u=t[1],f=t[2],d=t[3],l=t[4],h=t[5],y=t[6],b=t[7],p=n[0],g=n[1],m=n[2],w=n[3];for(let k=0;k<20;k+=2)s=s+c|0,p=O(p^s,16),l=l+p|0,c=O(c^l,12),s=s+c|0,p=O(p^s,8),l=l+p|0,c=O(c^l,7),o=o+u|0,g=O(g^o,16),h=h+g|0,u=O(u^h,12),o=o+u|0,g=O(g^o,8),h=h+g|0,u=O(u^h,7),i=i+f|0,m=O(m^i,16),y=y+m|0,f=O(f^y,12),i=i+f|0,m=O(m^i,8),y=y+m|0,f=O(f^y,7),a=a+d|0,w=O(w^a,16),b=b+w|0,d=O(d^b,12),a=a+d|0,w=O(w^a,8),b=b+w|0,d=O(d^b,7),s=s+u|0,w=O(w^s,16),y=y+w|0,u=O(u^y,12),s=s+u|0,w=O(w^s,8),y=y+w|0,u=O(u^y,7),o=o+f|0,p=O(p^o,16),b=b+p|0,f=O(f^b,12),o=o+f|0,p=O(p^o,8),b=b+p|0,f=O(f^b,7),i=i+d|0,g=O(g^i,16),l=l+g|0,d=O(d^l,12),i=i+d|0,g=O(g^i,8),l=l+g|0,d=O(d^l,7),a=a+c|0,m=O(m^a,16),h=h+m|0,c=O(c^h,12),a=a+c|0,m=O(m^a,8),h=h+m|0,c=O(c^h,7);let A=0;r[A++]=s,r[A++]=o,r[A++]=i,r[A++]=a,r[A++]=p,r[A++]=g,r[A++]=m,r[A++]=w}const tp=Wh(Qh,{counterRight:!1,counterLength:8,extendNonceFn:ep,allowShortKeys:!1}),np=new Uint8Array(16),si=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(np.subarray(n))},rp=new Uint8Array(32);function oi(e,t,n,r,s){const o=e(t,n,rp),i=Xh.create(o);s&&si(i,s),si(i,r);const a=new Uint8Array(16),c=Rh(a);ni(c,0,BigInt(s?s.length:0),!0),ni(c,8,BigInt(r.length),!0),i.update(a);const u=i.digest();return Ut(o,a),u}const sp=e=>(t,n,r)=>({encrypt(o,i){const a=o.length;i=ti(a+16,i,!1),i.set(o);const c=i.subarray(0,-16);e(t,n,c,c,1);const u=oi(e,t,n,c,r);return i.set(u,a),Ut(u),i},decrypt(o,i){i=ti(o.length-16,i,!1);const a=o.subarray(0,-16),c=o.subarray(-16),u=oi(e,t,n,a,r);if(!Uh(c,u))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),e(t,n,i,i,1),Ut(u),i}}),ii=jh({blockSize:64,nonceLength:24,tagLength:16},sp(tp)),Bt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function op(e=32){if(Bt&&typeof Bt.getRandomValues=="function")return Bt.getRandomValues(new Uint8Array(e));if(Bt&&typeof Bt.randomBytes=="function")return Bt.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class ip{generateSecurePrivateKey(){return sc()}base64ToHex(t){if(!t)throw new Error("Invalid input: empty string");try{const n=atob(t);let r="";for(let s=0;s<n.length;s++){const o=n.charCodeAt(s).toString(16);r+=o.length===2?o:"0"+o}return r.toLowerCase()}catch{throw new Error("Invalid base64 string")}}base64ToBase10(t){if(!t)throw new Error("Invalid input: empty string");const n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",r=n.length;let s=0;for(const o of t){const i=n.indexOf(o);if(i===-1)throw new Error("Invalid character in string");s=s*r+i}if(s<0)throw new Error("Invalid numeric result");return s}encryptPrivateKey(t,n){if(!this.validatePin(n))throw new Error("Invalid PIN format");if(!t.match(/^0x[a-f0-9]{64}$/i))throw new Error("Invalid private key format");try{const r=ps(n.padEnd(32,"0")),s=op(24),o=ii(r,s),i=ei(t),a=o.encrypt(i),c=new Uint8Array(s.length+a.length);return c.set(s),c.set(a,s.length),Xo(c)}catch{throw new Error("Encryption failed")}}decryptPrivateKey(t,n){if(!this.validatePin(n))throw new Error("Invalid PIN format");if(!t.match(/^0x[a-f0-9]+$/i))throw new Error("Invalid encrypted key format");try{const r=ei(t),s=r.slice(0,24),o=r.slice(24),i=ps(n.padEnd(32,"0")),c=ii(i,s).decrypt(o),u=Xo(c);if(!u.match(/^0x[a-f0-9]{64}$/i))throw new Error("Decrypted key is invalid");return u}catch{throw new Error("Decryption failed")}}parseCardData(t){if(!t)return null;try{const[n,r,s]=t.replace("#","").split(":");if(!n||!r||!s)throw new Error("Missing card data");const o=`0x${this.base64ToHex(n)}`;if(!oe(o))throw new Error("Invalid public address");const i=this.base64ToBase10(s);if(i<0)throw new Error("Invalid card ID");return{pub:o,priv:r,id:i}}catch{return null}}formatCardId(t){if(t<0)throw new Error("Invalid card ID");return t.toString().padStart(4,"0")}validatePin(t){return/^\d{6}$/.test(t)}isValidPrivateKey(t){return/^0x[a-f0-9]{64}$/i.test(t)}}const qe=new ip;class ap{publicClient;walletClient=null;constructor(){this.publicClient=yh({chain:Rr,transport:Lo()}),this.walletClient=$h({chain:Rr,transport:Lo()})}async importPrivateKey(t,n){try{t.startsWith("0x")||(t=`0x${t}`);const r=t,s=Lr(r),o=qe.encryptPrivateKey(r,n),i=await this.getBalance(s.address);return{address:s.address,encryptedKey:o,balance:i}}catch(r){throw r instanceof Error?new Error(`Failed to import private key: ${r.message}`):new Error("Failed to import private key")}}async createAccount(t){const n=sc(),r=Lr(n),s=qe.encryptPrivateKey(n,t);return{address:r.address,encryptedKey:s}}async getBalance(t){const n=await this.publicClient.getBalance({address:t});return Xn(n)}async sendTransaction(t,n,r,s){if(!this.walletClient)throw new Error("Wallet client not initialized");const o=qe.decryptPrivateKey(t,n),i=Lr(o),a=r0(s);return await this.walletClient.sendTransaction({account:i,to:r,value:a,chain:Rr})}async getTransactionReceipt(t){return this.publicClient.getTransactionReceipt({hash:t})}}const pt=new ap;var cp=Q(`// lib/components/card/CardHeader.svelte <div class="p-6 border-b dark:border-gray-700"><div class="flex justify-between items-start"><div><h2 class="text-2xl font-bold dark:text-white"> </h2> <p class="text-sm font-mono mt-2 text-gray-600 dark:text-gray-400 
                select-all cursor-pointer svelte-1xk9rgp"> </p></div> <div class="text-right"><p class="text-xl font-bold dark:text-white"> </p> <p class="text-sm text-gray-600 dark:text-gray-400">Balance</p></div></div></div>`,1);function up(e,t){ct(t,!0),st();var n=cp(),r=D(Ve(n)),s=H(r),o=H(s),i=H(o),a=H(i);q(i);var c=D(i,2),u=H(c,!0);q(c),q(o);var f=D(o,2),d=H(f),l=H(d);q(d),st(2),q(f),q(s),q(r),Fe(()=>{ve(a,`Card #${t.formattedId??""}`),ve(u,t.address),ve(l,`${t.balance??""} MATIC`)}),J(e,n),ut()}var dp=Q('<button class="card-button card-button-primary svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">lock_open</span> <span class="label svelte-1y1bgjs">Unlock</span></button>'),fp=()=>window.dispatchEvent(new CustomEvent("open-payment")),lp=Q('<button class="card-button card-button-primary svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">send</span> <span class="label svelte-1y1bgjs">Send</span></button>'),hp=Q('// lib/components/card/CardActions.svelte <div class="px-6 pb-6"><div class="grid grid-cols-2 gap-4"><!> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">qr_code_2</span> <span class="label svelte-1y1bgjs">QR Code</span></button> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">content_copy</span> <span class="label svelte-1y1bgjs">Copy</span></button> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">open_in_new</span> <span class="label svelte-1y1bgjs">Explorer</span></button></div></div>',1);function pp(e,t){ct(t,!0),st();var n=hp(),r=D(Ve(n)),s=H(r),o=H(s);{var i=d=>{var l=dp();l.__click=function(...h){t.onUnlock?.apply(this,h)},J(d,l)},a=d=>{var l=lp();l.__click=[fp],J(d,l)};re(o,d=>{t.isLocked?d(i):d(a,!1)})}var c=D(o,2);c.__click=function(...d){t.onToggleQR?.apply(this,d)};var u=D(c,2);u.__click=function(...d){t.onCopy?.apply(this,d)};var f=D(u,2);f.__click=function(...d){t.onExplorer?.apply(this,d)},q(s),q(r),J(e,n),ut()}jt(["click"]);var bp=Q(`// lib/components/card/CardQR.svelte <div class="p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-semibold dark:text-white">Scan Address</h3> <button class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700
             transition-colors duration-200"><span class="material-icons text-gray-600 dark:text-gray-300">close</span></button></div> <div class="flex justify-center"><div class="qr-container svelte-wa451t"><!></div></div> <p class="text-center mt-4 text-sm text-gray-600 dark:text-gray-400">Scan this QR code to get the card's address</p></div>`,1);function yp(e,t){ct(t,!0),st();var n=bp(),r=D(Ve(n)),s=H(r),o=D(H(s),2);o.__click=function(...u){t.onClose?.apply(this,u)},q(s);var i=D(s,2),a=H(i),c=H(a);ci(c,()=>children),q(a),q(i),st(2),q(r),J(e,n),ut()}jt(["click"]);function gp(e){return`
    <svg 
      viewBox="0 0 100 100"
      xmlns="http://www.w3.org/2000/svg"
      class="w-full max-w-[200px] mx-auto"
    >
      <rect width="100" height="100" fill="currentColor" class="text-white dark:text-gray-800"/>
      <text
        x="50"
        y="50"
        text-anchor="middle"
        class="text-xs text-gray-800 dark:text-gray-200"
      >
        ${e}
      </text>
    </svg>
  `}var mp=Q('// lib/components/Card.svelte <div class="card bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"><!> <!></div>',1);function wp(e,t){ct(t,!0);let n=X("0"),r=X(!0),s=X(!1),o=X(null);Ec(async()=>{if(t.address)try{Z(n,Ge(await pt.getBalance(t.address)))}catch{Z(o,"Failed to load balance")}});function i(){navigator.clipboard.writeText(t.address)}function a(){window.open(`https://polygonscan.com/address/${t.address}`,"_blank")}function c(){Z(s,!$(s))}st();var u=mp(),f=D(Ve(u)),d=H(f),l=ye(()=>t.isDarkMode??!1);up(d,{get formattedId(){return t.formattedId},get balance(){return $(n)},get address(){return t.address},get isDarkMode(){return $(l)}});var h=D(d,2);{var y=p=>{var g=ye(()=>t.isDarkMode??!1);yp(p,{onClose:c,get isDarkMode(){return $(g)},children:(m,w)=>{var A=Or(),k=Ve(A);ci(k,()=>gp(t.address)),J(m,A)},$$slots:{default:!0}})},b=p=>{var g=ye(()=>t.isDarkMode??!1);pp(p,{get isLocked(){return $(r)},onCopy:i,onExplorer:a,onToggleQR:c,onUnlock:()=>Z(r,!$(r)),get isDarkMode(){return $(g)}})};re(h,p=>{$(s)?p(y):p(b,!1)})}q(f),J(e,u),ut()}var vp=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4"> </div>`),xp=Q('<p class="mt-2 text-sm text-gray-600 dark:text-gray-400"> </p>'),Ep=Q(`// lib/components/modals/PinModal.svelte <div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 
            backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Enter PIN</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300 transition-colors"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label for="pin-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">PIN Code</label> <input id="pin-input" type="password" inputmode="numeric" pattern="\\d*" maxlength="6" placeholder="******" class="input" autocomplete="off"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>`,1);function cc(e,t){ct(t,!0);let n=X(""),r=X(null),s=X(!1),o=ye(()=>qe.validatePin($(n))),i=ye(()=>()=>t.remainingAttempts===void 0?"":`${t.remainingAttempts} attempts remaining`);async function a(P){if(P.preventDefault(),!(!$(o)||$(s))){Z(s,!0),Z(r,null);try{await t.onSubmit($(n)),Z(n,"")}catch(x){Z(r,Ge(x instanceof Error?x.message:"Invalid PIN")),Z(n,"")}finally{Z(s,!1)}}}st();var c=Ep(),u=D(Ve(c)),f=H(u),d=H(f),l=D(H(d),2);l.__click=function(...P){t.onClose?.apply(this,P)},q(d);var h=D(d,2);{var y=P=>{var x=vp(),N=H(x,!0);q(x),Fe(()=>ve(N,$(r))),J(P,x)};re(h,P=>{$(r)&&P(y)})}var b=D(h,2),p=H(b),g=D(H(p),2);$t(g);var m=D(g,2);{var w=P=>{var x=xp(),N=H(x,!0);q(x),Fe(()=>ve(N,$(i))),J(P,x)};re(m,P=>{$(i)&&P(w)})}q(p);var A=D(p,2),k=H(A);k.__click=function(...P){t.onClose?.apply(this,P)};var v=D(k,2),E=H(v,!0);q(v),q(A),q(b),q(f),q(u),Fe(()=>{g.disabled=$(s),kt(g,"error",$(n)&&!$(o)),k.disabled=$(s),v.disabled=!$(o)||$(s),ve(E,$(s)?"Validating...":"Submit")}),ms("submit",b,a),St(g,()=>$(n),P=>Z(n,P)),J(e,c),ut()}jt(["click"]);var Pp=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4"> </div>`),Ap=Q('<p class="form-error">Invalid address format</p>'),Bp=Q('<p class="form-error"><!></p>'),Ip=Q(`// lib/components/Payment.svelte <div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 
            backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Send MATIC</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label class="form-label" for="recipient">Recipient Address</label> <input id="recipient" type="text" placeholder="0x..." class="form-input"> <!></div> <div><label class="form-label" for="amount">Amount (MATIC)</label> <input id="amount" type="number" step="0.000001" min="0" placeholder="0.0" class="form-input"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form> <p class="mt-4 text-sm text-gray-500 dark:text-gray-400"> </p></div></div> <!>`,1);function Tp(e,t){ct(t,!0);let n=X(""),r=X(""),s=X(null),o=X(!1),i=X(!1),a=ye(()=>()=>$(n)?oe($(n)):!1),c=ye(()=>()=>{const R=parseFloat($(r));return!isNaN(R)&&R>0&&R<=parseFloat(t.balance)}),u=ye(()=>()=>$(a)()&&$(c)()&&!$(i));async function f(R){R.preventDefault(),$(u)&&Z(o,!0)}async function d(R){try{Z(i,!0),Z(s,null),await pt.sendTransaction(t.encryptedKey,R,$(n),$(r))&&t.onClose()}catch(j){Z(s,Ge(j instanceof Error?j.message:"Payment failed")),Z(o,!1)}finally{Z(i,!1)}}st();var l=Ip(),h=D(Ve(l)),y=H(h),b=H(y),p=D(H(b),2);p.__click=function(...R){t.onClose?.apply(this,R)},q(b);var g=D(b,2);{var m=R=>{var j=Pp(),L=H(j,!0);q(j),Fe(()=>ve(L,$(s))),J(R,j)};re(g,R=>{$(s)&&R(m)})}var w=D(g,2),A=H(w),k=D(H(A),2);$t(k);var v=D(k,2);{var E=R=>{var j=Ap();J(R,j)};re(v,R=>{$(n)&&!$(a)&&R(E)})}q(A);var P=D(A,2),x=D(H(P),2);$t(x);var N=D(x,2);{var _=R=>{var j=Bp(),L=H(j);{var W=ee=>{var ie=so("Insufficient balance");J(ee,ie)},Y=ee=>{var ie=so("Invalid amount");J(ee,ie)};re(L,ee=>{parseFloat($(r))>parseFloat(t.balance)?ee(W):ee(Y,!1)})}q(j),J(R,j)};re(N,R=>{$(r)&&!$(c)&&R(_)})}q(P);var C=D(P,2),U=H(C);U.__click=function(...R){t.onClose?.apply(this,R)};var B=D(U,2),S=H(B,!0);q(B),q(C),q(w);var T=D(w,2),F=H(T);q(T),q(y),q(h);var z=D(h,2);{var M=R=>{cc(R,{onSubmit:d,onClose:()=>Z(o,!1),remainingAttempts:3})};re(z,R=>{$(o)&&R(M)})}Fe(()=>{k.disabled=$(i),kt(k,"error",$(n)&&!$(a)),jr(x,"max",t.balance),x.disabled=$(i),kt(x,"error",$(r)&&!$(c)),U.disabled=$(i),B.disabled=!$(u),ve(S,$(i)?"Processing...":"Continue"),ve(F,`Available balance: ${t.balance??""} MATIC`)}),ms("submit",w,f),St(k,()=>$(n),R=>Z(n,R)),St(x,()=>$(r),R=>Z(r,R)),J(e,l),ut()}jt(["click"]);var $p=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4" role="alert"> </div>`),kp=Q('<p class="form-error">Invalid private key format</p>'),Sp=Q('<p class="form-error">PIN must be exactly 6 digits</p>'),Cp=Q('<p class="form-error">PINs do not match</p>'),_p=Q(`<div class="mt-4 p-3 bg-green-100 dark:bg-green-900/50 
                  border border-green-400 dark:border-green-800 
                  text-green-700 dark:text-green-100 rounded" role="status"><p class="text-sm font-medium">Successfully imported wallet:</p> <p class="text-xs font-mono mt-1"> </p></div>`),Np=Q(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Import Private Key</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300" aria-label="Close"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label for="private-key" class="form-label">Private Key</label> <input id="private-key" type="password" placeholder="0x..." autocomplete="off" class="form-input"> <!></div> <div><label for="pin" class="form-label">PIN (6 digits)</label> <input id="pin" type="password" inputmode="numeric" maxlength="6" placeholder="******" class="form-input text-center tracking-widest"> <!></div> <div><label for="confirm-pin" class="form-label">Confirm PIN</label> <input id="confirm-pin" type="password" inputmode="numeric" maxlength="6" placeholder="******" class="form-input text-center tracking-widest"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form> <!></div></div>`);function Fp(e,t){ct(t,!0);let n=X(""),r=X(""),s=X(""),o=X(null),i=X(null),a=X(!1),c=ye(()=>qe.isValidPrivateKey($(n))),u=ye(()=>qe.validatePin($(r))),f=ye(()=>$(r)===$(s)),d=ye(()=>$(c)&&$(u)&&$(f)&&!$(a));async function l(L){if(L.preventDefault(),!!$(d))try{Z(a,!0),Z(o,null);const W=await pt.importPrivateKey($(n),$(r));Z(i,Ge(W.address)),t.onImport&&t.onImport(W.address),Z(n,""),Z(r,""),Z(s,""),setTimeout(t.onClose,1500)}catch(W){Z(o,Ge(W instanceof Error?W.message:"Failed to import private key"))}finally{Z(a,!1)}}var h=Np(),y=H(h),b=H(y),p=D(H(b),2);p.__click=function(...L){t.onClose?.apply(this,L)},q(b);var g=D(b,2);{var m=L=>{var W=$p(),Y=H(W,!0);q(W),Fe(()=>ve(Y,$(o))),J(L,W)};re(g,L=>{$(o)&&L(m)})}var w=D(g,2),A=H(w),k=D(H(A),2);$t(k);var v=D(k,2);{var E=L=>{var W=kp();J(L,W)};re(v,L=>{$(n)&&!$(c)&&L(E)})}q(A);var P=D(A,2),x=D(H(P),2);$t(x),jr(x,"pattern","\\d6");var N=D(x,2);{var _=L=>{var W=Sp();J(L,W)};re(N,L=>{$(r)&&!$(u)&&L(_)})}q(P);var C=D(P,2),U=D(H(C),2);$t(U),jr(U,"pattern","\\d6");var B=D(U,2);{var S=L=>{var W=Cp();J(L,W)};re(B,L=>{$(s)&&!$(f)&&L(S)})}q(C);var T=D(C,2),F=H(T);F.__click=function(...L){t.onClose?.apply(this,L)};var z=D(F,2),M=H(z,!0);q(z),q(T),q(w);var R=D(w,2);{var j=L=>{var W=_p(),Y=D(H(W),2),ee=H(Y,!0);q(Y),q(W),Fe(()=>ve(ee,$(i))),J(L,W)};re(R,L=>{$(i)&&L(j)})}q(y),q(h),Fe(()=>{k.disabled=$(a),kt(k,"error",$(n)&&!$(c)),x.disabled=$(a),kt(x,"error",$(r)&&!$(u)),U.disabled=$(a),kt(U,"error",$(s)&&!$(f)),F.disabled=$(a),z.disabled=!$(d),ve(M,$(a)?"Importing...":"Import")}),ms("submit",w,l),St(k,()=>$(n),L=>Z(n,L)),St(x,()=>$(r),L=>Z(r,L)),St(U,()=>$(s),L=>Z(s,L)),J(e,h),ut()}jt(["click"]);function Mp(){const e=br({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),t=br(!1),n=br(0),r=3,s=ao(e,l=>l.address?`${l.address.slice(0,6)}...${l.address.slice(-4)}`:""),o=ao(n,l=>l>=r);async function i(l){try{t.set(!0),e.update(b=>({...b,error:null}));const h=qe.parseCardData(l);if(!h)throw new Error("Invalid card data");const y=await pt.getBalance(h.pub);e.set({id:h.id.toString(),address:h.pub,encryptedKey:h.priv,balance:y,isLocked:!0,error:null,lastTransaction:null})}catch(h){e.update(y=>({...y,error:h instanceof Error?h.message:"Failed to load card"}))}finally{t.set(!1)}}async function a(l,h){try{t.set(!0),e.update(p=>({...p,error:null}));const y=await pt.getBalance(l),b=Date.now().toString();return e.set({id:b,address:l,encryptedKey:h,balance:y,isLocked:!0,error:null,lastTransaction:null}),!0}catch(y){return e.update(b=>({...b,error:y instanceof Error?y.message:"Failed to import wallet"})),!1}finally{t.set(!1)}}async function c(l){if(Ue(o))return e.update(y=>({...y,error:"Too many attempts. Card is blocked."})),!1;const h=Ue(e);if(!h.encryptedKey)return e.update(y=>({...y,error:"No card loaded"})),!1;try{if(!qe.validatePin(l))return n.update(b=>b+1),e.update(b=>({...b,error:`Invalid PIN. ${r-Ue(n)} attempts remaining.`})),!1;try{qe.decryptPrivateKey(h.encryptedKey,l)}catch{return n.update(b=>b+1),e.update(b=>({...b,error:`Invalid PIN. ${r-Ue(n)} attempts remaining.`})),!1}return e.update(b=>({...b,isLocked:!1,error:null})),n.set(0),!0}catch{return e.update(b=>({...b,error:"Failed to validate PIN"})),!1}}async function u(l,h,y){const b=Ue(e);if(b.isLocked||!b.address||!b.encryptedKey)return e.update(p=>({...p,error:"Card is locked or invalid"})),null;try{e.update(g=>({...g,error:null}));const p=await pt.sendTransaction(b.encryptedKey,y,l,h);return await f(),e.update(g=>({...g,lastTransaction:p})),p}catch(p){return e.update(g=>({...g,error:p instanceof Error?p.message:"Transaction failed"})),null}}async function f(){const l=Ue(e);if(l.address)try{const h=await pt.getBalance(l.address);e.update(y=>({...y,balance:h,error:null}))}catch{e.update(y=>({...y,error:"Failed to refresh balance"}))}}function d(){e.set({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),n.set(0)}if(typeof window<"u"){const l=setInterval(()=>{const h=Ue(e);!h.isLocked&&h.address&&f()},3e4);return()=>clearInterval(l)}return{subscribe:e.subscribe,initFromHash:i,importWallet:a,unlock:c,sendTransaction:u,refreshBalance:f,reset:d,isLoading:{subscribe:t.subscribe},isBlocked:{subscribe:o.subscribe},formattedAddress:{subscribe:s.subscribe}}}const _e=Mp();var Rp=(e,t)=>Z(t,!0),Lp=Q('<div class="text-center py-12"><h1 class="text-4xl font-bold mb-4 dark:text-white">Welcome to Tap3</h1> <p class="text-gray-600 dark:text-gray-400 mb-8">Scan your NFC card or import manually</p> <button class="btn btn-primary">Import Wallet</button></div>'),zp=Q('<div class="skeleton" role="status"><div class="animate-pulse space-y-4"><div class="h-40 bg-gray-200 dark:bg-gray-700 rounded-lg"></div></div> <span class="sr-only">Loading...</span></div>'),Op=Q('<div class="alert alert-error" role="alert"> </div>'),Up=Q('<main class="min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4"><div class="max-w-lg mx-auto"><!></div> <!> <!> <!></main>');function Jp(e,t){ct(t,!0);let n=X(!1),r=X(!1),s=X(!1),o=X(null),i=X(!1),a=X(Ge({}));Pc(()=>{if(typeof window<"u"){const v=Bc();v&&c(v)}});async function c(v){try{Z(i,!0),Z(o,null),typeof _e!="function"&&_e.initFromHash&&await _e.initFromHash(v);const E=typeof _e!="function"?Ue(_e):null;E&&Z(a,Ge({address:E.address,formattedId:E.id.padStart(4,"0"),balance:E.balance,encryptedKey:E.encryptedKey}))}catch(E){Z(o,Ge(E instanceof Error?E.message:"Failed to load card"))}finally{Z(i,!1)}}async function u(v){let E=!1;typeof _e!="function"&&_e.unlock&&(E=await _e.unlock(v),E&&Z(s,!1)),E&&Z(s,!1)}async function f(){Z(r,!1);const v=typeof _e!="function"?Ue(_e):null;v&&Z(a,Ge({address:v.address,formattedId:v.id.padStart(4,"0"),balance:v.balance,encryptedKey:v.encryptedKey}))}var d=Up(),l=H(d),h=H(l);{var y=v=>{var E=Lp(),P=D(H(E),4);P.__click=[Rp,r],q(E),J(v,E)},b=v=>{var E=Or(),P=Ve(E);{var x=_=>{var C=zp();J(_,C)},N=_=>{var C=Or(),U=Ve(C);{var B=T=>{var F=Op(),z=H(F,!0);q(F),Fe(()=>ve(z,$(o))),J(T,F)},S=T=>{var F=ye(()=>$(a).formattedId??"");wp(T,{get address(){return $(a).address},get formattedId(){return $(F)}})};re(U,T=>{$(o)?T(B):T(S,!1)},!0)}J(_,C)};re(P,_=>{$(i)?_(x):_(N,!1)})}J(v,E)};re(h,v=>{$(a).address?v(b,!1):v(y)})}q(l);var p=D(l,2);{var g=v=>{var E=ye(()=>$(a).balance??"0");Tp(v,{get address(){return $(a).address},get balance(){return $(E)},get encryptedKey(){return $(a).encryptedKey},onClose:()=>Z(n,!1)})};re(p,v=>{$(n)&&$(a).address&&$(a).encryptedKey&&v(g)})}var m=D(p,2);{var w=v=>{Fp(v,{onClose:()=>Z(r,!1),onImport:f})};re(m,v=>{$(r)&&v(w)})}var A=D(m,2);{var k=v=>{cc(v,{onSubmit:u,onClose:()=>Z(s,!1),remainingAttempts:3})};re(A,v=>{$(s)&&v(k)})}q(d),J(e,d),ut()}jt(["click"]);export{I as B,tn as H,Vp as _,Ze as a,Me as b,or as c,kd as d,Ht as e,Jp as f,Ts as g,zs as i,de as s};
