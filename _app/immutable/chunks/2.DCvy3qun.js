import{d as Hn,w as kt,g as pe}from"./index.Dd4GrStr.js";import{_ as ai,i as re,p as qe}from"./preload-helper.SRvT0oMi.js";import{g as so,i as uc,l as dc,s as xe,b as J,t as Q,d as Dt,e as Ur,j as ws,f as oo}from"./disclose-version.DFkSA_UT.js";import{b as lc,h as jr,H as io,c as fc,e as ao,ao as hc,av as pc,at as bc,K as yc,ap as gc,d as mc,aA as wc,u as vc,Y as xc,p as ut,l as ot,k as D,i as Ke,m as G,v as q,t as Le,j as dt,o as Ec,A as Z,C as k,ah as X,V as ge,f as Pc}from"./index-client.DspN_BWi.js";import{r as $t,s as Dr}from"./app.D7T5SLwN.js";function ci(e,t,n,r,s){var o=e,i="",a;lc(()=>{if(i===(i=t()??"")){jr&&io();return}a!==void 0&&(mc(a),a=void 0),i!==""&&(a=fc(()=>{if(jr){ao.data;for(var c=io(),u=c;c!==null&&(c.nodeType!==8||c.data!=="");)u=c,c=hc(c);if(c===null)throw pc(),bc;so(ao,u),o=yc(c);return}var l=i+"",d=uc(l);so(gc(d),d.lastChild),o.before(d)}))})}function St(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Ct(e,t,n=t){var r=wc();dc(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=gr(e)?mr(o):o,n(o),r&&o!==(o=t())){var i=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(a,e.value.length))}}),(jr&&e.defaultValue!==e.value||vc(t)==null&&e.value)&&n(gr(e)?mr(e.value):e.value),xc(()=>{var s=t();gr(e)&&s===mr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function gr(e){var t=e.type;return t==="number"||t==="range"}function mr(e){return e===""?null:+e}const Ac="1.0.7";let Ae=class Hr extends Error{constructor(t,n={}){const r=n.cause instanceof Hr?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Hr&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Ac}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function lt(e,t){return e.exec(t)?.groups}const ui=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,di=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,li=/^\(.+?\).*?$/,co=/^tuple(?<array>(\[(\d*)\])*)$/;function Gr(e){let t=e.type;if(co.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=Gr(o),s<n-1&&(t+=", ")}const r=lt(co,e.type);return t+=`)${r?.array??""}`,Gr({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Xt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Gr(s),r!==n-1&&(t+=", ")}return t}function Bc(e){return e.type==="function"?`function ${e.name}(${Xt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Xt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Xt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Xt(e.inputs)})`:e.type==="constructor"?`constructor(${Xt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const fi=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Ic(e){return fi.test(e)}function Tc(e){return lt(fi,e)}const hi=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function kc(e){return hi.test(e)}function $c(e){return lt(hi,e)}const pi=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Sc(e){return pi.test(e)}function Cc(e){return lt(pi,e)}const bi=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function yi(e){return bi.test(e)}function _c(e){return lt(bi,e)}const gi=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Nc(e){return gi.test(e)}function Fc(e){return lt(gi,e)}const Mc=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Rc(e){return Mc.test(e)}const Lc=/^receive\(\) external payable$/;function zc(e){return Lc.test(e)}const Oc=new Set(["indexed"]),qr=new Set(["calldata","memory","storage"]);class Uc extends Ae{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class jc extends Ae{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Dc extends Ae{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Hc extends Ae{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Gc extends Ae{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class qc extends Ae{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Vc extends Ae{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class tn extends Ae{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Kc extends Ae{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Zc extends Ae{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Wc extends Ae{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Yc extends Ae{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Jc(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const wr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Xc(e,t={}){if(Sc(e)){const n=Cc(e);if(!n)throw new tn({signature:e,type:"function"});const r=Ie(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(ht(r[a],{modifiers:qr,structs:t,type:"function"}));const i=[];if(n.returns){const a=Ie(n.returns),c=a.length;for(let u=0;u<c;u++)i.push(ht(a[u],{modifiers:qr,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}if(kc(e)){const n=$c(e);if(!n)throw new tn({signature:e,type:"event"});const r=Ie(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{modifiers:Oc,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if(Ic(e)){const n=Tc(e);if(!n)throw new tn({signature:e,type:"error"});const r=Ie(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(Nc(e)){const n=Fc(e);if(!n)throw new tn({signature:e,type:"constructor"});const r=Ie(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(Rc(e))return{type:"fallback"};if(zc(e))return{type:"receive",stateMutability:"payable"};throw new Kc({signature:e})}const Qc=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,eu=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,tu=/^u?int$/;function ht(e,t){const n=Jc(e,t?.type,t?.structs);if(wr.has(n))return wr.get(n);const r=li.test(e),s=lt(r?eu:Qc,e);if(!s)throw new Dc({param:e});if(s.name&&ru(s.name))throw new Hc({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const d=Ie(s.type),f=[],h=d.length;for(let y=0;y<h;y++)f.push(ht(d[y],{structs:a}));u={components:f}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(tu.test(s.type))c=`${s.type}256`;else if(c=s.type,t?.type!=="struct"&&!mi(c))throw new jc({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new Gc({param:e,type:t?.type,modifier:s.modifier});if(qr.has(s.modifier)&&!su(c,!!s.array))throw new qc({param:e,type:t?.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...o,...i,...u};return wr.set(n,l),l}function Ie(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],a=e.slice(o+1);switch(i){case",":return r===0?Ie(a,[...t,n.trim()]):Ie(a,t,`${n}${i}`,r);case"(":return Ie(a,t,`${n}${i}`,r+1);case")":return Ie(a,t,`${n}${i}`,r-1);default:return Ie(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new Yc({current:n,depth:r});return t.push(n.trim()),t}function mi(e){return e==="address"||e==="bool"||e==="function"||e==="string"||ui.test(e)||di.test(e)}const nu=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ru(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||ui.test(e)||di.test(e)||nu.test(e)}function su(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function ou(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!yi(a))continue;const c=_c(a);if(!c)throw new tn({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let f=0;f<d;f++){const y=u[f].trim();if(!y)continue;const b=ht(y,{type:"struct"});l.push(b)}if(!l.length)throw new Zc({signature:a});t[c.name]=l}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];r[a]=wi(c,t)}return r}const iu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function wi(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(li.test(i.type))r.push(i);else{const c=lt(iu,i.type);if(!c?.type)throw new Vc({abiParameter:i});const{array:u,type:l}=c;if(l in t){if(n.has(l))throw new Wc({type:l});r.push({...i,type:`tuple${u??""}`,components:wi(t[l]??[],t,new Set([...n,l]))})}else if(mi(l))r.push(i);else throw new Uc({type:l})}}return r}function vi(e){const t=ou(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];yi(o)||n.push(Xc(o,t))}return n}function H(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function Ze(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new wu(e.type);return`${e.name}(${Kn(e.inputs,{includeName:t})})`}function Kn(e,{includeName:t=!1}={}){return e?e.map(n=>au(n,{includeName:t})).join(t?", ":","):""}function au(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Kn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function ze(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function te(e){return ze(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const xi="2.21.57";let vr={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${xi}`};class I extends Error{constructor(t,n={}){const r=n.cause instanceof I?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof I&&n.cause.docsPath||n.docsPath,o=vr.getDocsUrl?.({...n,docsPath:s}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...vr.version?[`Version: ${vr.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=xi}walk(t){return Ei(this,t)}}function Ei(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Ei(e.cause,t):t?null:e}class cu extends I{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class uo extends I{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Pi extends I{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Kn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Zn extends I{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class uu extends I{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class du extends I{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${te(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class lu extends I{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Ai extends I{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class fu extends I{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Bi extends I{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class lo extends I{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Gn extends I{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class hu extends I{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class pu extends I{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Ze(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Ze(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class bu extends I{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class rn extends I{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Kn(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class Wn extends I{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ze(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class yu extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class gu extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class mu extends I{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class wu extends I{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class vu extends I{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class Ii extends I{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Ti extends I{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}class fo extends I{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ht(e,{dir:t,size:n=32}={}){return typeof e=="string"?rt(e,{dir:t,size:n}):xu(e,{dir:t,size:n})}function rt(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Ti({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function xu(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Ti({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}class ki extends I{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Eu extends I{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Pu extends I{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class Au extends I{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Te(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Se(e,{size:t}){if(te(e)>t)throw new Au({givenSize:te(e),maxSize:t})}function it(e,t={}){const{signed:n}=t;t.size&&Se(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Bu(e,t={}){let n=e;if(t.size&&(Se(n,{size:t.size}),n=Te(n)),Te(n)==="0x00")return!1;if(Te(n)==="0x01")return!0;throw new Pu(n)}function Oe(e,t={}){return Number(it(e,t))}const Iu=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function K(e,t={}){return typeof e=="number"||typeof e=="bigint"?V(e,t):typeof e=="string"?Ft(e,t):typeof e=="boolean"?$i(e,t):se(e,t)}function $i(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Se(n,{size:t.size}),Ht(n,{size:t.size})):n}function se(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Iu[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Se(r,{size:t.size}),Ht(r,{dir:"right",size:t.size})):r}function V(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const c=typeof e=="bigint"?"n":"";throw new ki({max:o?`${o}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ht(a,{size:r}):a}const Tu=new TextEncoder;function Ft(e,t={}){const n=Tu.encode(e);return se(n,t)}const ku=new TextEncoder;function Gt(e,t={}){return typeof e=="number"||typeof e=="bigint"?Su(e,t):typeof e=="boolean"?$u(e,t):ze(e)?$e(e,t):bt(e,t)}function $u(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Se(n,{size:t.size}),Ht(n,{size:t.size})):n}const Ue={zero:48,nine:57,A:65,F:70,a:97,f:102};function ho(e){if(e>=Ue.zero&&e<=Ue.nine)return e-Ue.zero;if(e>=Ue.A&&e<=Ue.F)return e-(Ue.A-10);if(e>=Ue.a&&e<=Ue.f)return e-(Ue.a-10)}function $e(e,t={}){let n=e;t.size&&(Se(n,{size:t.size}),n=Ht(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let i=0,a=0;i<s;i++){const c=ho(r.charCodeAt(a++)),u=ho(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new I(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);o[i]=c*16+u}return o}function Su(e,t){const n=V(e,t);return $e(n)}function bt(e,t={}){const n=ku.encode(e);return typeof t.size=="number"?(Se(n,{size:t.size}),Ht(n,{dir:"right",size:t.size})):n}function po(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Cu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function vs(e,...t){if(!Cu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function qn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Si(e,t){vs(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Rn=BigInt(2**32-1),bo=BigInt(32);function _u(e,t=!1){return t?{h:Number(e&Rn),l:Number(e>>bo&Rn)}:{h:Number(e>>bo&Rn)|0,l:Number(e&Rn)|0}}function Nu(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:i}=_u(e[s],t);[n[s],r[s]]=[o,i]}return[n,r]}const Fu=(e,t,n)=>e<<n|t>>>32-n,Mu=(e,t,n)=>t<<n|e>>>32-n,Ru=(e,t,n)=>t<<n-32|e>>>64-n,Lu=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zu=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),xr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_e=(e,t)=>e<<32-t|e>>>t,yo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Ou=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function go(e){for(let t=0;t<e.length;t++)e[t]=Ou(e[t])}function Uu(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function xs(e){return typeof e=="string"&&(e=Uu(e)),vs(e),e}let Ci=class{clone(){return this._cloneInto()}};function _i(e){const t=r=>e().update(xs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Ni=[],Fi=[],Mi=[],ju=BigInt(0),Qt=BigInt(1),Du=BigInt(2),Hu=BigInt(7),Gu=BigInt(256),qu=BigInt(113);for(let e=0,t=Qt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ni.push(2*(5*r+n)),Fi.push((e+1)*(e+2)/2%64);let s=ju;for(let o=0;o<7;o++)t=(t<<Qt^(t>>Hu)*qu)%Gu,t&Du&&(s^=Qt<<(Qt<<BigInt(o))-Qt);Mi.push(s)}const[Vu,Ku]=Nu(Mi,!0),mo=(e,t,n)=>n>32?Ru(e,t,n):Fu(e,t,n),wo=(e,t,n)=>n>32?Lu(e,t,n):Mu(e,t,n);function Zu(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],l=n[c+1],d=mo(u,l,1)^n[a],f=wo(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[i+h]^=d,e[i+h+1]^=f}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=Fi[i],c=mo(s,o,a),u=wo(s,o,a),l=Ni[i];s=e[l],o=e[l+1],e[l]=c,e[l+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Vu[r],e[1]^=Ku[r]}n.fill(0)}class Es extends Ci{constructor(t,n,r,s=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,po(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zu(this.state)}keccak(){yo||go(this.state32),Zu(this.state32,this.rounds),yo||go(this.state32),this.posOut=0,this.pos=0}update(t){qn(this);const{blockLen:n,state:r}=this;t=xs(t);const s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){qn(this,!1),vs(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return po(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Si(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new Es(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Wu=(e,t,n)=>_i(()=>new Es(t,e,n)),Yu=Wu(1,136,256/8);function ae(e,t){const n=t||"hex",r=Yu(ze(e,{strict:!1})?Gt(e):e);return n==="bytes"?r:K(r)}const Ju=e=>ae(Gt(e));function Xu(e){return Ju(e)}function Qu(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new I("Unable to normalize signature.");return s}const ed=e=>{const t=typeof e=="string"?e:Bc(e);return Qu(t)};function Ri(e){return Xu(ed(e))}const Yn=Ri;class fe extends I{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class Jn extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Er=new Jn(8192);function Pn(e,t){if(Er.has(`${e}.${t}`))return Er.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=ae(bt(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());const o=`0x${s.join("")}`;return Er.set(`${e}.${t}`,o),o}function Li(e,t){if(!oe(e,{strict:!1}))throw new fe({address:e});return Pn(e,t)}const td=/^0x[a-fA-F0-9]{40}$/,Pr=new Jn(8192);function oe(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Pr.has(r))return Pr.get(r);const s=td.test(e)?e.toLowerCase()===e?!0:n?Pn(e)===e:!0:!1;return Pr.set(r,s),s}function We(e){return typeof e[0]=="string"?Je(e):nd(e)}function nd(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Je(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function sn(e,t,n,{strict:r}={}){return ze(e,{strict:!1})?ji(e,t,n,{strict:r}):Ui(e,t,n,{strict:r})}function zi(e,t){if(typeof t=="number"&&t>0&&t>te(e)-1)throw new Ii({offset:t,position:"start",size:te(e)})}function Oi(e,t,n){if(typeof t=="number"&&typeof n=="number"&&te(e)!==n-t)throw new Ii({offset:n,position:"end",size:te(e)})}function Ui(e,t,n,{strict:r}={}){zi(e,t);const s=e.slice(t,n);return r&&Oi(s,t,n),s}function ji(e,t,n,{strict:r}={}){zi(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Oi(s,t,n),s}const rd=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Di=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function qt(e,t){if(e.length!==t.length)throw new lu({expectedLength:e.length,givenLength:t.length});const n=sd({params:e,values:t}),r=As(n);return r.length===0?"0x":r}function sd({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Ps({param:e[r],value:t[r]}));return n}function Ps({param:e,value:t}){const n=Bs(e.type);if(n){const[r,s]=n;return id(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return ld(t,{param:e});if(e.type==="address")return od(t);if(e.type==="bool")return cd(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=Di.exec(e.type)??[];return ud(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return ad(t,{param:e});if(e.type==="string")return dd(t);throw new yu(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function As(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=te(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(V(t+s,{size:32})),r.push(a),s+=te(a)):n.push(a)}return We([...n,...r])}function od(e){if(!oe(e))throw new fe({address:e});return{dynamic:!1,encoded:rt(e.toLowerCase())}}function id(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new mu(e);if(!r&&e.length!==t)throw new uu({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let i=0;i<e.length;i++){const a=Ps({param:n,value:e[i]});a.dynamic&&(s=!0),o.push(a)}if(r||s){const i=As(o);if(r){const a=V(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?We([a,i]):a}}if(s)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:We(o.map(({encoded:i})=>i))}}function ad(e,{param:t}){const[,n]=t.type.split("bytes"),r=te(e);if(!n){let s=e;return r%32!==0&&(s=rt(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:We([rt(V(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new du({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:rt(e,{dir:"right"})}}function cd(e){if(typeof e!="boolean")throw new I(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:rt($i(e))}}function ud(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new ki({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:V(e,{size:32,signed:t})}}function dd(e){const t=Ft(e),n=Math.ceil(te(t)/32),r=[];for(let s=0;s<n;s++)r.push(rt(sn(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:We([rt(V(te(t),{size:32})),...r])}}function ld(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],i=Array.isArray(e)?s:o.name,a=Ps({param:o,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?As(r):We(r.map(({encoded:s})=>s))}}function Bs(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Is=e=>sn(Ri(e),0,4);function An(e){const{abi:t,args:n=[],name:r}=e,s=ze(r,{strict:!1}),o=t.filter(a=>s?a.type==="function"?Is(a)===r:a.type==="event"?Yn(a)===r:!1:"name"in a&&a.name===r);if(o.length===0)return;if(o.length===1)return o[0];let i;for(const a of o){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?Vr(u,d):!1})){if(i&&"inputs"in i&&i.inputs){const u=Hi(a.inputs,i.inputs,n);if(u)throw new pu({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||o[0]}function Vr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return oe(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>Vr(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Vr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Hi(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Hi(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?oe(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?oe(n[r],{strict:!1}):!1)return i}}const vo="/docs/contract/encodeEventTopics";function Bn(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=An({abi:t,name:n});if(!c)throw new lo(n,{docsPath:vo});s=c}if(s.type!=="event")throw new lo(void 0,{docsPath:vo});const o=Ze(s),i=Yn(o);let a=[];if(r&&"inputs"in s){const c=s.inputs?.filter(l=>"indexed"in l&&l.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(l=>r[l.name])??[]:[];u.length>0&&(a=c?.map((l,d)=>Array.isArray(u[d])?u[d].map((f,h)=>xo({param:l,value:u[d][h]})):u[d]?xo({param:l,value:u[d]}):null)??[])}return[i,...a]}function xo({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return ae(Gt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new vu(e.type);return qt([e],[t])}function Xn(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:i})=>{o==="success"&&t===r&&(n[s]=i.request)}),r=>n[r]||e.request}async function Gi(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:a,toBlock:c}=t,u=Xn(e,{method:"eth_newFilter"}),l=o?Bn({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?V(i):i,toBlock:typeof c=="bigint"?V(c):c,topics:l}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!a,type:"event"}}function Ee(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const Eo="/docs/contract/encodeFunctionData";function fd(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=An({abi:t,args:n,name:r});if(!o)throw new Gn(r,{docsPath:Eo});s=o}if(s.type!=="function")throw new Gn(void 0,{docsPath:Eo});return{abi:[s],functionName:Is(Ze(s))}}function Xe(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:fd(e),s=n[0],o=r,i="inputs"in s&&s.inputs?qt(s.inputs,t??[]):void 0;return Je([o,i??"0x"])}const qi={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},hd={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},pd={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Po extends I{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Vi extends I{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class bd extends I{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const yd={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new bd({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Vi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Po({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Po({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Ts(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(yd);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function gd(e,t={}){typeof t.size<"u"&&Se(e,{size:t.size});const n=se(e,t);return it(n,t)}function md(e,t={}){let n=e;if(typeof t.size<"u"&&(Se(n,{size:t.size}),n=Te(n)),n.length>1||n[0]>1)throw new Eu(n);return!!n[0]}function Ve(e,t={}){typeof t.size<"u"&&Se(e,{size:t.size});const n=se(e,t);return Oe(n,t)}function wd(e,t={}){let n=e;return typeof t.size<"u"&&(Se(n,{size:t.size}),n=Te(n,{dir:"right"})),new TextDecoder().decode(n)}function Qn(e,t){const n=typeof t=="string"?$e(t):t,r=Ts(n);if(te(n)===0&&e.length>0)throw new Zn;if(te(t)&&te(t)<32)throw new Pi({data:typeof t=="string"?t:se(t),params:e,size:te(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(s);const[c,u]=_t(r,a,{staticPosition:0});s+=u,o.push(c)}return o}function _t(e,t,{staticPosition:n}){const r=Bs(t.type);if(r){const[s,o]=r;return xd(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return Bd(e,t,{staticPosition:n});if(t.type==="address")return vd(e);if(t.type==="bool")return Ed(e);if(t.type.startsWith("bytes"))return Pd(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Ad(e,t);if(t.type==="string")return Id(e,{staticPosition:n});throw new gu(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ao=32,Kr=32;function vd(e){const t=e.readBytes(32);return[Pn(se(Ui(t,-20))),32]}function xd(e,t,{length:n,staticPosition:r}){if(!n){const i=Ve(e.readBytes(Kr)),a=r+i,c=a+Ao;e.setPosition(a);const u=Ve(e.readBytes(Ao)),l=on(t);let d=0;const f=[];for(let h=0;h<u;++h){e.setPosition(c+(l?h*32:d));const[y,b]=_t(e,t,{staticPosition:c});d+=b,f.push(y)}return e.setPosition(r+32),[f,32]}if(on(t)){const i=Ve(e.readBytes(Kr)),a=r+i,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[l]=_t(e,t,{staticPosition:a});c.push(l)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[a,c]=_t(e,t,{staticPosition:r+s});s+=c,o.push(a)}return[o,s]}function Ed(e){return[md(e.readBytes(32),{size:32}),32]}function Pd(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Ve(e.readBytes(32));e.setPosition(n+i);const a=Ve(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[se(c),32]}return[se(e.readBytes(Number.parseInt(s),32)),32]}function Ad(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?gd(s,{signed:n}):Ve(s,{signed:n}),32]}function Bd(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(on(t)){const i=Ve(e.readBytes(Kr)),a=n+i;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+o);const[l,d]=_t(e,u,{staticPosition:a});o+=d,s[r?c:u?.name]=l}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=_t(e,a,{staticPosition:n});s[r?i:a?.name]=c,o+=u}return[s,o]}function Id(e,{staticPosition:t}){const n=Ve(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ve(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=wd(Te(o));return e.setPosition(t+32),[i,32]}function on(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(on);const n=Bs(e.type);return!!(n&&on({...e,type:n[1]}))}function Td(e){const{abi:t,data:n}=e,r=sn(n,0,4);if(r==="0x")throw new Zn;const o=[...t||[],hd,pd].find(i=>i.type==="error"&&r===Is(Ze(i)));if(!o)throw new Ai(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Qn(o.inputs,sn(n,4)):void 0,errorName:o.name}}const de=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Ki({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?de(t[o]):t[o]}`).join(", ")})`}const Zi={gwei:9,wei:18},kd={ether:-9,wei:9};function Wi(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function er(e,t="wei"){return Wi(e,Zi[t])}function me(e,t="wei"){return Wi(e,kd[t])}class $d extends I{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Sd extends I{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Bo(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Cd(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Bo(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Bo(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function In(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class _d extends I{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Nd extends I{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Fd extends I{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",In(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Md extends I{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class Rd extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){const h=In({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof f<"u"&&`${er(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${me(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${me(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Yi extends I{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Ji extends I{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Ld extends I{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const zd=e=>e,ks=e=>e;class Xi extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:h}){const y=n?Ee(n):void 0;let b=In({from:y?.address,to:d,value:typeof f<"u"&&`${er(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${me(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${me(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:l});h&&(b+=`
${Cd(h)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Od extends I{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:a}){const c=An({abi:n,args:r,name:i}),u=c?Ki({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Ze(c,{includeName:!0}):void 0,d=In({address:s&&zd(s),function:l,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=a}}class Zr extends I{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,a,c;if(n&&n!=="0x")try{i=Td({abi:t,data:n});const{abiItem:l,errorName:d,args:f}=i;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=qi[h]}else{const h=l?Ze(l,{includeName:!0}):void 0,y=l&&f?Ki({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",y&&y!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(l){o=l}else s&&(c=s);let u;o instanceof Ai&&(u=o.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.reason=c,this.signature=u}}class Ud extends I{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class jd extends I{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class $s extends I{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class nn extends I{constructor({body:t,cause:n,details:r,headers:s,status:o,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${ks(i)}`,t&&`Request body: ${de(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=i}}class Ss extends I{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${ks(r)}`,`Request body: ${de(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Io extends I{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${ks(n)}`,`Request body: ${de(t)}`],name:"TimeoutError"})}}const Dd=-1;class we extends I{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:s||t?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof Ss?t.code:n??Dd}}class Vt extends we{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class an extends we{constructor(t){super(t,{code:an.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class cn extends we{constructor(t){super(t,{code:cn.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class un extends we{constructor(t,{method:n}={}){super(t,{code:un.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class dn extends we{constructor(t){super(t,{code:dn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class mt extends we{constructor(t){super(t,{code:mt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class wt extends we{constructor(t){super(t,{code:wt.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ln extends we{constructor(t){super(t,{code:ln.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class fn extends we{constructor(t){super(t,{code:fn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class hn extends we{constructor(t){super(t,{code:hn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class pn extends we{constructor(t,{method:n}={}){super(t,{code:pn.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not implemented.`})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Mt extends we{constructor(t){super(t,{code:Mt.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class bn extends we{constructor(t){super(t,{code:bn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Nt extends Vt{constructor(t){super(t,{code:Nt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class yn extends Vt{constructor(t){super(t,{code:yn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class gn extends Vt{constructor(t,{method:n}={}){super(t,{code:gn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class mn extends Vt{constructor(t){super(t,{code:mn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class wn extends Vt{constructor(t){super(t,{code:wn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class vn extends Vt{constructor(t){super(t,{code:vn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Hd extends we{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Gd=3;function Rt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const a=e instanceof $s?e:e instanceof I?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=a,h=e instanceof Zn?new Ud({functionName:o}):[Gd,mt.code].includes(c)&&(u||l||d||f)?new Zr({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:a instanceof Ss?l:f??d}):e;return new Od(h,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function Qi(e){const t=ae(`0x${e.substring(4)}`).substring(26);return Pn(`0x${t}`)}async function qd({hash:e,signature:t}){const n=ze(e)?e:K(e),{secp256k1:r}=await ai(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>th);return{secp256k1:i}},void 0,import.meta.url);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:l,v:d,yParity:f}=t,h=Number(f??d),y=To(h);return new r.Signature(it(u),it(l)).addRecoveryBit(y)}const i=ze(t)?t:K(t),a=Oe(`0x${i.slice(130)}`),c=To(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function To(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function ea({hash:e,signature:t}){return Qi(await qd({hash:e,signature:t}))}function vt(e,t="hex"){const n=ta(e),r=Ts(new Uint8Array(n.length));return n.encode(r),t==="hex"?se(r.bytes):r.bytes}function ta(e){return Array.isArray(e)?Vd(e.map(t=>ta(t))):Kd(e)}function Vd(e){const t=e.reduce((s,o)=>s+o.length,0),n=na(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function Kd(e){const t=typeof e=="string"?$e(e):e,n=na(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function na(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new I("Length is too large.")}function ra(e){const{chainId:t,contractAddress:n,nonce:r,to:s}=e,o=ae(Je(["0x05",vt([t?V(t):"0x",n,r?V(r):"0x"])]));return s==="bytes"?$e(o):o}async function sa(e){const{authorization:t,signature:n}=e;return ea({hash:ra(t),signature:n??t})}class Zd extends I{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){const h=In({from:n?.address,to:d,value:typeof f<"u"&&`${er(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${me(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${me(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${me(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class It extends I{constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(It,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class xt extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${me(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(xt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Wr extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${me(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Wr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Yr extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Yr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Jr extends I{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Jr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Xr extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Xr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Qr extends I{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Qr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class es extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(es,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ts extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ts,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ns extends I{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ns,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class xn extends I{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${me(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${me(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(xn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class tr extends I{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function Cs(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof I?e.walk(s=>s?.code===It.code):e;return r instanceof I?new It({cause:e,message:r.details}):It.nodeMessage.test(n)?new It({cause:e,message:e.details}):xt.nodeMessage.test(n)?new xt({cause:e,maxFeePerGas:t?.maxFeePerGas}):Wr.nodeMessage.test(n)?new Wr({cause:e,maxFeePerGas:t?.maxFeePerGas}):Yr.nodeMessage.test(n)?new Yr({cause:e,nonce:t?.nonce}):Jr.nodeMessage.test(n)?new Jr({cause:e,nonce:t?.nonce}):Xr.nodeMessage.test(n)?new Xr({cause:e,nonce:t?.nonce}):Qr.nodeMessage.test(n)?new Qr({cause:e}):es.nodeMessage.test(n)?new es({cause:e,gas:t?.gas}):ts.nodeMessage.test(n)?new ts({cause:e,gas:t?.gas}):ns.nodeMessage.test(n)?new ns({cause:e}):xn.nodeMessage.test(n)?new xn({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new tr({cause:e})}function Wd(e,{docsPath:t,...n}){const r=(()=>{const s=Cs(e,n);return s instanceof tr?e:s})();return new Zd(r,{docsPath:t,...n})}function _s(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const a of i)a in e&&(n[a]=e[a]),o[a]&&typeof o[a]=="object"&&!Array.isArray(o[a])&&r(o[a])}const s=t(e||{});return r(s),n}const Yd={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function nr(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Jd(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>se(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=V(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=V(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=V(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=V(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=V(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=V(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Yd[e.type]),typeof e.value<"u"&&(t.value=V(e.value)),t}function Jd(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:V(t.chainId),nonce:V(t.nonce),...typeof t.yParity<"u"?{yParity:V(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:V(t.v)}:{}}))}function ko(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new fo({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new fo({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Xd(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=V(t)),n!==void 0&&(i.nonce=V(n)),r!==void 0&&(i.state=ko(r)),s!==void 0){if(i.state)throw new Sd;i.stateDiff=ko(s)}return i}function oa(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!oe(n,{strict:!1}))throw new fe({address:n});if(t[n])throw new $d({address:n});t[n]=Xd(r)}return t}const rr=2n**256n-1n;function Tn(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,i=t?Ee(t):void 0;if(i&&!oe(i.address))throw new fe({address:i.address});if(o&&!oe(o))throw new fe({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new _d;if(r&&r>rr)throw new xt({maxFeePerGas:r});if(s&&r&&s>r)throw new xn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Qd extends I{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Ns extends I{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class el extends I{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${me(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ia extends I{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const aa={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ca(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Oe(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Oe(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?aa[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=tl(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function tl(e){return e.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function nl(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:ca(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Me(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){const o=r??"latest",i=s??!1,a=n!==void 0?V(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[a||o,i]},{dedupe:!!a}),!c)throw new ia({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||nl)(c)}async function Fs(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function rl(e,t){return ua(e,t)}async function ua(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const a=n||await H(e,Me,"getBlock")({}),c=await o({block:a,client:e,request:s});if(c===null)throw new Error;return c}if(typeof o<"u")return o;const i=await e.request({method:"eth_maxPriorityFeePerGas"});return it(i)}catch{const[o,i]=await Promise.all([n?Promise.resolve(n):H(e,Me,"getBlock")({}),H(e,Fs,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new Ns;const a=i-o.baseFeePerGas;return a<0n?0n:a}}async function sl(e,t){return rs(e,t)}async function rs(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new Qd;const c=10**(i.toString().split(".")[1]?.length??0),u=f=>f*BigInt(Math.ceil(i*c))/BigInt(c),l=n||await H(e,Me,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const f=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(f!==null)return f}if(o==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Ns;const f=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await ua(e,{block:l,chain:r,request:s}),h=u(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??h+f,maxPriorityFeePerGas:f}}return{gasPrice:s?.gasPrice??u(await H(e,Fs,"getGasPrice")({}))}}async function da(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?V(r):n]},{dedupe:!!r});return Oe(s)}function Ms(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>$e(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>se(o))}function Rs(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>$e(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>$e(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const a=r[i],c=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?o:o.map(i=>se(i))}function ol(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}const il=(e,t,n)=>e&t^~e&n,al=(e,t,n)=>e&t^e&n^t&n;let cl=class extends Ci{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xr(this.buffer)}update(t){qn(this);const{view:n,buffer:r,blockLen:s}=this;t=xs(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=xr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qn(this),Si(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;ol(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=xr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=i,s%n&&t.buffer.set(r),t}};const ul=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),et=new Uint32Array(64);let dl=class extends cl{constructor(){super(64,32,8,!1),this.A=Qe[0]|0,this.B=Qe[1]|0,this.C=Qe[2]|0,this.D=Qe[3]|0,this.E=Qe[4]|0,this.F=Qe[5]|0,this.G=Qe[6]|0,this.H=Qe[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)et[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=et[d-15],h=et[d-2],y=_e(f,7)^_e(f,18)^f>>>3,b=_e(h,17)^_e(h,19)^h>>>10;et[d]=b+et[d-7]+y+et[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=_e(a,6)^_e(a,11)^_e(a,25),h=l+f+il(a,c,u)+ul[d]+et[d]|0,b=(_e(r,2)^_e(r,13)^_e(r,22))+al(r,s,o)|0;l=u,u=c,c=a,a=i+h|0,i=o,o=s,s=r,r=h+b|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,o,i,a,c,u,l)}roundClean(){et.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ll=_i(()=>new dl);function fl(e,t){return ll(ze(e,{strict:!1})?Gt(e):e)}function hl(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=fl(t);return s.set([n],0),r==="bytes"?s:se(s)}function la(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(hl({commitment:o,to:r,version:n}));return s}const $o=6,fa=32,Ls=4096,ha=fa*Ls,So=ha*$o-1-1*Ls*$o,pa=1;class pl extends I{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class ba extends I{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class bl extends I{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class yl extends I{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${pa}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function gl(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?$e(e.data):e.data,r=te(n);if(!r)throw new ba;if(r>So)throw new pl({maxSize:So,size:r});const s=[];let o=!0,i=0;for(;o;){const a=Ts(new Uint8Array(ha));let c=0;for(;c<Ls;){const u=n.slice(i,i+(fa-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),o=!1;break}c++,i+=31}s.push(a)}return t==="bytes"?s.map(a=>a.bytes):s.map(a=>se(a.bytes))}function ya(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??gl({data:t,to:r}),o=e.commitments??Ms({blobs:s,kzg:n,to:r}),i=e.proofs??Rs({blobs:s,commitments:o,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:o[c],proof:i[c]});return a}function ga(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Fd({transaction:e})}async function kn(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Oe(t)}const ma=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function sr(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:i,nonce:a,nonceManager:c,parameters:u=ma,type:l}=t,d=n&&Ee(n),f={...t,...d?{from:d?.address}:{}};let h;async function y(){return h||(h=await H(e,Me,"getBlock")({blockTag:"latest"}),h)}let b;async function p(){return b||(s?s.id:typeof t.chainId<"u"?t.chainId:(b=await H(e,kn,"getChainId")({}),b))}if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&i){const g=Ms({blobs:r,kzg:i});if(u.includes("blobVersionedHashes")){const m=la({commitments:g,to:"hex"});f.blobVersionedHashes=m}if(u.includes("sidecars")){const m=Rs({blobs:r,commitments:g,kzg:i}),w=ya({blobs:r,commitments:g,proofs:m,to:"hex"});f.sidecars=w}}if(u.includes("chainId")&&(f.chainId=await p()),u.includes("nonce")&&typeof a>"u"&&d)if(c){const g=await p();f.nonce=await c.consume({address:d.address,chainId:g,client:e})}else f.nonce=await H(e,da,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("fees")||u.includes("type"))&&typeof l>"u")try{f.type=ga(f)}catch{const g=await y();f.type=typeof g?.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const g=await y(),{maxFeePerGas:m,maxPriorityFeePerGas:w}=await rs(e,{block:g,chain:s,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<w)throw new el({maxPriorityFeePerGas:w});f.maxPriorityFeePerGas=w,f.maxFeePerGas=m}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Ns;const g=await y(),{gasPrice:m}=await rs(e,{block:g,chain:s,request:f,type:"legacy"});f.gasPrice=m}return u.includes("gas")&&typeof o>"u"&&(f.gas=await H(e,zs,"estimateGas")({...f,account:d&&{address:d.address,type:"json-rpc"}})),Tn(f),delete f.parameters,f}async function wa(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?V(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function zs(e,t){const{account:n=e.account}=t,r=n?Ee(n):void 0;try{let _=function(U){const{block:B,request:S,rpcStateOverride:T}=U;return e.request({method:"eth_estimateGas",params:T?[S,B??"latest",T]:B?[S,B]:[S]})};const{accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:l,gas:d,gasPrice:f,maxFeePerBlobGas:h,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:p,value:g,stateOverride:m,...w}=await sr(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),$=(c?V(c):void 0)||u,v=oa(m),E=await(async()=>{if(w.to)return w.to;if(o&&o.length>0)return await sa({authorization:o[0]}).catch(()=>{throw new I("`to` is required. Could not infer from `authorizationList`")})})();Tn(t);const P=e.chain?.formatters?.transactionRequest?.format,N=(P||nr)({..._s(w,{format:P}),from:r?.address,accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,data:l,gas:d,gasPrice:f,maxFeePerBlobGas:h,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:p,to:E,value:g});let C=BigInt(await _({block:$,request:N,rpcStateOverride:v}));if(o){const U=await wa(e,{address:N.from}),B=await Promise.all(o.map(async S=>{const{contractAddress:T}=S,F=await _({block:$,request:{authorizationList:void 0,data:l,from:r?.address,to:T,value:V(U)},rpcStateOverride:v}).catch(()=>100000n);return 2n*BigInt(F)}));C+=B.reduce((S,T)=>S+T,0n)}return C}catch(s){throw Wd(s,{...t,account:r,chain:e.chain})}}async function ml(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...a}=t,c=Xe({abi:n,args:s,functionName:o});try{return await H(e,zs,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?Ee(a.account):void 0;throw Rt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:l?.address})}}function Os(e,t){if(!oe(e,{strict:!1}))throw new fe({address:e});if(!oe(t,{strict:!1}))throw new fe({address:t});return e.toLowerCase()===t.toLowerCase()}const Co="/docs/contract/decodeEventLog";function Us(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...a]=s;if(!i)throw new fu({docsPath:Co});const c=t.length===1?t[0]:t.find(b=>b.type==="event"&&i===Yn(Ze(b)));if(!(c&&"name"in c)||c.type!=="event")throw new Bi(i,{docsPath:Co});const{name:u,inputs:l}=c,d=l?.some(b=>!("name"in b&&b.name));let f=d?[]:{};const h=l.filter(b=>"indexed"in b&&b.indexed);for(let b=0;b<h.length;b++){const p=h[b],g=a[b];if(!g)throw new Wn({abiItem:c,param:p});f[d?b:p.name||b]=wl({param:p,value:g})}const y=l.filter(b=>!("indexed"in b&&b.indexed));if(y.length>0){if(n&&n!=="0x")try{const b=Qn(y,n);if(b)if(d)f=[...f,...b];else for(let p=0;p<y.length;p++)f[y[p].name]=b[p]}catch(b){if(o)throw b instanceof Pi||b instanceof Vi?new rn({abiItem:c,data:n,params:y,size:te(n)}):b}else if(o)throw new rn({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function wl({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:Qn([e],t)[0]}function js(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{try{const a=t.find(u=>u.type==="event"&&i.topics[0]===Yn(u));if(!a)return null;const c=Us({...i,abi:[a],strict:s});return o&&!o.includes(c.eventName)||!vl({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...i}}catch(a){let c,u;if(a instanceof Bi)return null;if(a instanceof rn||a instanceof Wn){if(s)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(l=>!("name"in l&&l.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function vl(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,a){try{return o.type==="address"?Os(i,a):o.type==="string"||o.type==="bytes"?ae(Gt(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const a=n[i];return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const a=n.find(u=>u.name===o);return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,t[o])):!1}):!1}function at(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Ds(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:a,strict:c}={}){const u=c??!1,l=i??(o?[o]:void 0);let d=[];l&&(d=[l.flatMap(b=>Bn({abi:[b],eventName:b.name,args:i?void 0:a}))],o&&(d=d[0]));let f;n?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?V(r):r,toBlock:typeof s=="bigint"?V(s):s}]});const h=f.map(y=>at(y));return l?js({abi:l,args:a,logs:h,strict:u}):h}async function va(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,l=i?An({abi:n,name:i}):void 0,d=l?void 0:n.filter(f=>f.type==="event");return H(e,Ds,"getLogs")({address:r,args:s,blockHash:o,event:l,events:d,fromBlock:a,toBlock:c,strict:u})}const Ar="/docs/contract/decodeFunctionResult";function Kt(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const a=An({abi:t,args:n,name:r});if(!a)throw new Gn(r,{docsPath:Ar});o=a}if(o.type!=="function")throw new Gn(void 0,{docsPath:Ar});if(!o.outputs)throw new hu(o.name,{docsPath:Ar});const i=Qn(o.outputs,s);if(i.length>1)return i;if(i.length===1)return i[0]}const ss=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xa=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Ea=[...xa,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],xl=[...xa,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],_o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],No=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Fo=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],El="0x82ad56cb",Pl="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Al="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Bl="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class os extends I{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Il extends I{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id}  ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id}  ${t.name}`],name:"ChainMismatchError"})}}class Tl extends I{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Pa extends I{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class or extends I{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Br="/docs/contract/encodeDeployData";function ir(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new cu({docsPath:Br});if(!("inputs"in s))throw new uo({docsPath:Br});if(!s.inputs||s.inputs.length===0)throw new uo({docsPath:Br});const o=qt(s.inputs,n);return Je([r,o])}function Zt({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new os({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new os({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function kl(e,{docsPath:t,...n}){const r=(()=>{const s=Cs(e,n);return s instanceof tr?e:s})();return new Xi(r,{docsPath:t,...n})}function Aa(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const Ir=new Map;function Ba({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const l=c();i();const d=l.map(({args:f})=>f);d.length!==0&&e(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<l.length;h++){const{resolve:y}=l[h];y?.([f[h],f])}}).catch(f=>{for(let h=0;h<l.length;h++){const{reject:y}=l[h];y?.(f)}})},i=()=>Ir.delete(t),a=()=>c().map(({args:l})=>l),c=()=>Ir.get(t)||[],u=l=>Ir.set(t,[...c(),l]);return{flush:i,async schedule(l){const{promise:d,resolve:f,reject:h}=Aa();return n?.([...a(),l])&&o(),c().length>0?(u({args:l,resolve:f,reject:h}),d):(u({args:l,resolve:f,reject:h}),setTimeout(o,r),d)}}}async function ar(e,t){const{account:n=e.account,batch:r=!!e.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:i,blobs:a,code:c,data:u,factory:l,factoryData:d,gas:f,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:p,nonce:g,to:m,value:w,stateOverride:A,...$}=t,v=n?Ee(n):void 0;if(c&&(l||d))throw new I("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&m)throw new I("Cannot provide both `code` & `to` as parameters.");const E=c&&u,P=l&&d&&m&&u,x=E||P,N=E?Cl({code:c,data:u}):P?_l({data:u,factory:l,factoryData:d,to:m}):u;try{Tn(t);const C=(s?V(s):void 0)||o,U=oa(A),B=e.chain?.formatters?.transactionRequest?.format,T=(B||nr)({..._s($,{format:B}),from:v?.address,accessList:i,blobs:a,data:N,gas:f,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:p,nonce:g,to:x?void 0:m,value:w});if(r&&$l({request:T})&&!U)try{return await Sl(e,{...T,blockNumber:s,blockTag:o})}catch(z){if(!(z instanceof Pa)&&!(z instanceof os))throw z}const F=await e.request({method:"eth_call",params:U?[T,C,U]:[T,C]});return F==="0x"?{data:void 0}:{data:F}}catch(_){const C=Nl(_),{offchainLookup:U,offchainLookupSignature:B}=await ai(async()=>{const{offchainLookup:S,offchainLookupSignature:T}=await import("./ccip.COs61Hkt.js");return{offchainLookup:S,offchainLookupSignature:T}},[],import.meta.url);if(e.ccipRead!==!1&&C?.slice(0,10)===B&&m)return{data:await U(e,{data:C,to:m})};throw x&&C?.slice(0,10)==="0x101bb98d"?new jd({factory:l}):kl(_,{...t,account:v,chain:e.chain})}}function $l({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(El)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Sl(e,t){const{batchSize:n=1024,wait:r=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:i,multicallAddress:a,to:c}=t;let u=a;if(!u){if(!e.chain)throw new Pa;u=Zt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=(s?V(s):void 0)||o,{schedule:f}=Ba({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(b){return b.reduce((g,{data:m})=>g+(m.length-2),0)>n*2},fn:async b=>{const p=b.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),g=Xe({abi:ss,args:[p],functionName:"aggregate3"}),m=await e.request({method:"eth_call",params:[{data:g,to:u},d]});return Kt({abi:ss,args:[p],functionName:"aggregate3",data:m||"0x"})}}),[{returnData:h,success:y}]=await f({data:i,to:c});if(!y)throw new $s({data:h});return h==="0x"?{data:void 0}:{data:h}}function Cl(e){const{code:t,data:n}=e;return ir({abi:vi(["constructor(bytes, bytes)"]),bytecode:Pl,args:[t,n]})}function _l(e){const{data:t,factory:n,factoryData:r,to:s}=e;return ir({abi:vi(["constructor(address, bytes, address, bytes)"]),bytecode:Al,args:[s,t,n,r]})}function Nl(e){if(!(e instanceof I))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function Ye(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,a=Xe({abi:n,args:s,functionName:o});try{const{data:c}=await H(e,ar,"call")({...i,data:a,to:r});return Kt({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw Rt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Fl(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...a}=t,c=a.account?Ee(a.account):e.account,u=Xe({abi:n,args:s,functionName:i});try{const{data:l}=await H(e,ar,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...a,account:c}),d=Kt({abi:n,args:s,functionName:i,data:l||"0x"}),f=n.filter(h=>"name"in h&&h.name===t.functionName);return{result:d,request:{abi:f,address:r,args:s,dataSuffix:o,functionName:i,...a,account:c}}}catch(l){throw Rt(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}const Tr=new Map,Mo=new Map;let Ml=0;function ct(e,t,n){const r=++Ml,s=()=>Tr.get(e)||[],o=()=>{const l=s();Tr.set(e,l.filter(d=>d.id!==r))},i=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=Mo.get(e);l.length===1&&d&&d(),o()},a=s();if(Tr.set(e,[...a,{id:r,fns:t}]),a.length>0)return i;const c={};for(const l in t)c[l]=(...d)=>{const f=s();if(f.length!==0)for(const h of f)h.fns[l]?.(...d)};const u=n(c);return typeof u=="function"&&Mo.set(e,u),i}async function is(e){return new Promise(t=>setTimeout(t,e))}function $n(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));const c=await n?.(a)??r;await is(c);const u=async()=>{s&&(await e({unpoll:o}),await is(r),u())};u()})(),o}const Rl=new Map,Ll=new Map;function zl(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,Rl),r=t(e,Ll);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Ol(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=zl(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const Ul=e=>`blockNumber.${e}`;async function Sn(e,{cacheTime:t=e.cacheTime}={}){const n=await Ol(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Ul(e.uid),cacheTime:t});return BigInt(n)}async function cr(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>at(o));return!("abi"in t)||!t.abi?s:js({abi:t.abi,logs:s,strict:n})}async function ur(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function jl(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:d=e.pollingInterval,strict:f}=t;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const p=f??!1,g=de(["watchContractEvent",r,s,o,e.uid,i,d,p,a]);return ct(g,{onLogs:u,onError:c},m=>{let w;a!==void 0&&(w=a-1n);let A,$=!1;const v=$n(async()=>{if(!$){try{A=await H(e,Gi,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:p,fromBlock:a})}catch{}$=!0;return}try{let E;if(A)E=await H(e,cr,"getFilterChanges")({filter:A});else{const P=await H(e,Sn,"getBlockNumber")({});w&&w<P?E=await H(e,va,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:w+1n,toBlock:P,strict:p}):E=[],w=P}if(E.length===0)return;if(o)m.onLogs(E);else for(const P of E)m.onLogs([P])}catch(E){A&&E instanceof wt&&($=!1),m.onError?.(E)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await H(e,ur,"uninstallFilter")({filter:A}),v()}})})():(()=>{const p=f??!1,g=de(["watchContractEvent",r,s,o,e.uid,i,d,p]);let m=!0,w=()=>m=!1;return ct(g,{onLogs:u,onError:c},A=>((async()=>{try{const $=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(x=>x.config.type==="webSocket");return P?P.value:e.transport}return e.transport})(),v=i?Bn({abi:n,eventName:i,args:s}):[],{unsubscribe:E}=await $.subscribe({params:["logs",{address:r,topics:v}],onData(P){if(!m)return;const x=P.result;try{const{eventName:N,args:_}=Us({abi:n,data:x.data,topics:x.topics,strict:f}),C=at(x,{args:_,eventName:N});A.onLogs([C])}catch(N){let _,C;if(N instanceof rn||N instanceof Wn){if(f)return;_=N.abiItem.name,C=N.abiItem.inputs?.some(B=>!("name"in B&&B.name))}const U=at(x,{args:C?[]:{},eventName:_});A.onLogs([U])}},onError(P){A.onError?.(P)}});w=E,m||w()}catch($){c?.($)}})(),()=>w()))})()}class Cn extends I{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class kr extends I{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Ia({chain:e,currentChainId:t}){if(!e)throw new Tl;if(t!==e.id)throw new Il({chain:e,currentChainId:t})}function Dl(e,{docsPath:t,...n}){const r=(()=>{const s=Cs(e,n);return s instanceof tr?e:s})();return new Rd(r,{docsPath:t,...n})}async function Hs(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const $r=new Jn(128);async function Gs(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,value:y,...b}=t;if(typeof n>"u")throw new Cn({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?Ee(n):null;try{Tn(t);const g=await(async()=>{if(t.to)return t.to;if(o&&o.length>0)return await sa({authorization:o[0]}).catch(()=>{throw new I("`to` is required. Could not infer from `authorizationList`.")})})();if(p?.type==="json-rpc"||p===null){let m;r!==null&&(m=await H(e,kn,"getChainId")({}),Ia({currentChainId:m,chain:r}));const w=e.chain?.formatters?.transactionRequest?.format,$=(w||nr)({..._s(b,{format:w}),accessList:s,authorizationList:o,blobs:i,chainId:m,data:a,from:p?.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:g,value:y}),v=$r.get(e.uid),E=v?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:E,params:[$]},{retryCount:0})}catch(P){if(v===!1)throw P;const x=P;if(x.name==="InvalidInputRpcError"||x.name==="InvalidParamsRpcError"||x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[$]},{retryCount:0}).then(N=>($r.set(e.uid,!0),N)).catch(N=>{const _=N;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?($r.set(e.uid,!1),x):_});throw x}}if(p?.type==="local"){const m=await H(e,sr,"prepareTransactionRequest")({account:p,accessList:s,authorizationList:o,blobs:i,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:p.nonceManager,parameters:[...ma,"sidecars"],value:y,...b,to:g}),w=r?.serializers?.transaction,A=await p.signTransaction(m,{serializer:w});return await H(e,Hs,"sendRawTransaction")({serializedTransaction:A})}throw p?.type==="smart"?new kr({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new kr({docsPath:"/docs/actions/wallet/sendTransaction",type:p?.type})}catch(g){throw g instanceof kr?g:Dl(g,{...t,account:p,chain:t.chain||void 0})}}async function Hl(e,t){const{abi:n,account:r=e.account,address:s,args:o,dataSuffix:i,functionName:a,...c}=t;if(typeof r>"u")throw new Cn({docsPath:"/docs/contract/writeContract"});const u=r?Ee(r):null,l=Xe({abi:n,args:o,functionName:a});try{return await H(e,Gs,"sendTransaction")({data:`${l}${i?i.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw Rt(d,{abi:n,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:a,sender:u?.address})}}class Gl extends I{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ql(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,a,c,u,l,d]=await H(e,Ye,"readContract")({abi:Vl,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Gl({address:n}):i}}const Vl=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function Kl(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:V(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:i?Object.values(i).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}const as=256;let Ln=as,zn;function Ta(e=11){if(!zn||Ln+e>as*2){zn="",Ln=0;for(let t=0;t<as;t++)zn+=(256+Math.random()*256|0).toString(16).substring(1)}return zn.substring(Ln,Ln+++e)}function ka(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:s="base",name:o="Base Client",pollingInterval:i=4e3,type:a="base"}=e,c=e.chain,u=e.account?Ee(e.account):void 0,{config:l,request:d,value:f}=e.transport({chain:c,pollingInterval:i}),h={...l,...f},y={account:u,batch:t,cacheTime:n,ccipRead:r,chain:c,key:s,name:o,pollingInterval:i,request:d,transport:h,type:a,uid:Ta()};function b(p){return g=>{const m=g(p);for(const A in y)delete m[A];const w={...p,...m};return Object.assign(w,{extend:b(w)})}}return Object.assign(y,{extend:b(y)})}const On=new Jn(8192);function Zl(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(On.get(n))return On.get(n);const r=e().finally(()=>On.delete(n));return On.set(n,r),r}function cs(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const i=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof t=="function"?t({count:a,error:u}):t;l&&await is(l),i({count:a+1})};try{const u=await e();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});o(u)}};i()})}function Wl(e,t={}){return async(n,r={})=>{const{dedupe:s=!1,retryDelay:o=150,retryCount:i=3,uid:a}={...t,...r},c=s?ae(Ft(`${a}.${de(n)}`)):void 0;return Zl(()=>cs(async()=>{try{return await e(n)}catch(u){const l=u;switch(l.code){case an.code:throw new an(l);case cn.code:throw new cn(l);case un.code:throw new un(l,{method:n.method});case dn.code:throw new dn(l);case mt.code:throw new mt(l);case wt.code:throw new wt(l);case ln.code:throw new ln(l);case fn.code:throw new fn(l);case hn.code:throw new hn(l);case pn.code:throw new pn(l,{method:n.method});case Mt.code:throw new Mt(l);case bn.code:throw new bn(l);case Nt.code:throw new Nt(l);case yn.code:throw new yn(l);case gn.code:throw new gn(l);case mn.code:throw new mn(l);case wn.code:throw new wn(l);case vn.code:throw new vn(l);case 5e3:throw new Nt(l);default:throw u instanceof I?u:new Hd(l)}}},{delay:({count:u,error:l})=>{if(l&&l instanceof nn){const d=l?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d)*1e3}return~~(1<<u)*o},retryCount:i,shouldRetry:({error:u})=>Yl(u)}),{enabled:s,id:c})}}function Yl(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Mt.code||e.code===mt.code:e instanceof nn&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function Jl({key:e,name:t,request:n,retryCount:r=3,retryDelay:s=150,timeout:o,type:i},a){const c=Ta();return{config:{key:e,name:t,request:n,retryCount:r,retryDelay:s,timeout:o,type:i},request:Wl(n,{retryCount:r,retryDelay:s,uid:c}),value:a}}class Xl extends I{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ql(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r?a.abort():o(t)},n)),s(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&o(t),o(a)}finally{clearTimeout(i)}})()})}function ef(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Ro=ef();function tf(e,t={}){return{async request(n){const{body:r,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:i=t.timeout??1e4}=n,a={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const d=await Ql(async({signal:h})=>{const y={...a,body:Array.isArray(r)?de(r.map(m=>({jsonrpc:"2.0",id:m.id??Ro.take(),...m}))):de({jsonrpc:"2.0",id:r.id??Ro.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(i>0?h:null)},b=new Request(e,y),p=await s?.(b,y)??{...y,url:e};return await fetch(p.url??e,p)},{errorInstance:new Io({body:r,url:e}),timeout:i,signal:!0});o&&await o(d);let f;if(d.headers.get("Content-Type")?.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(h){if(d.ok)throw h;f={error:f}}}if(!d.ok)throw new nn({body:r,details:de(f.error)||d.statusText,headers:d.headers,status:d.status,url:e});return f}catch(d){throw d instanceof nn||d instanceof Io?d:new nn({body:r,cause:d,url:e})}}}}function Lo(e,t={}){const{batch:n,fetchOptions:r,key:s="http",name:o="HTTP JSON-RPC",onFetchRequest:i,onFetchResponse:a,retryDelay:c}=t;return({chain:u,retryCount:l,timeout:d})=>{const{batchSize:f=1e3,wait:h=0}=typeof n=="object"?n:{},y=t.retryCount??l,b=d??t.timeout??1e4,p=u?.rpcUrls.default.http[0];if(!p)throw new Xl;const g=tf(p,{fetchOptions:r,onRequest:i,onResponse:a,timeout:b});return Jl({key:s,name:o,async request({method:m,params:w}){const A={method:m,params:w},{schedule:$}=Ba({id:p,wait:h,shouldSplitBatch(x){return x.length>f},fn:x=>g.request({body:x}),sort:(x,N)=>x.id-N.id}),v=async x=>n?$(x):[await g.request({body:x})],[{error:E,result:P}]=await v(A);if(E)throw new Ss({body:A,error:E,url:p});return P},retryCount:y,retryDelay:c,timeout:b,type:"http"},{fetchOptions:r,url:p})}}function qs(e,t){if(!(e instanceof I))return!1;const n=e.walk(r=>r instanceof Zr);return n instanceof Zr?!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===qi[50]):!1}function $a(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return ze(t)?t:null}function Dn(e){let t=new Uint8Array(32).fill(0);if(!e)return se(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=$a(n[r]),o=s?Gt(s):ae(bt(n[r]),"bytes");t=ae(We([t,o]),"bytes")}return se(t)}function nf(e){return`[${e.slice(2)}]`}function rf(e){const t=new Uint8Array(32).fill(0);return e?$a(e)||ae(bt(e)):se(t)}function dr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=bt(s[o]);i.byteLength>255&&(i=bt(nf(rf(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function sf(e,{blockNumber:t,blockTag:n,coinType:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Zt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u=Xe({abi:No,functionName:"addr",...r!=null?{args:[Dn(s),BigInt(r)]}:{args:[Dn(s)]}}),l={address:c,abi:Ea,functionName:"resolve",args:[K(dr(s)),u],blockNumber:t,blockTag:n},d=H(e,Ye,"readContract"),f=o?await d({...l,args:[...l.args,o]}):await d(l);if(f[0]==="0x")return null;const h=Kt({abi:No,args:r!=null?[Dn(s),BigInt(r)]:void 0,functionName:"addr",data:f[0]});return h==="0x"||Te(h)==="0x00"?null:h}catch(u){if(i)throw u;if(qs(u,"resolve"))return null;throw u}}class of extends I{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class en extends I{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Vs extends I{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class af extends I{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const cf=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,uf=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,df=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,lf=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function ff(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function zo(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Sa({uri:e,gatewayUrls:t}){const n=df.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=zo(t?.ipfs,"https://ipfs.io"),s=zo(t?.arweave,"https://arweave.net"),o=e.match(cf),{protocol:i,subpath:a,target:c,subtarget:u=""}=o?.groups||{},l=i==="ipns:/"||a==="ipns/",d=i==="ipfs:/"||a==="ipfs/"||uf.test(e);if(e.startsWith("http")&&!l&&!d){let h=e;return t?.arweave&&(h=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(lf,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Vs({uri:e})}function Ca(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new of({data:e});return e.image||e.image_url||e.image_data}async function hf({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Ks({gatewayUrls:e,uri:Ca(n)})}catch{throw new Vs({uri:t})}}async function Ks({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Sa({uri:t,gatewayUrls:e});if(r||await ff(n))return n;throw new Vs({uri:t})}function pf(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[a,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new en({reason:"Only EIP-155 supported"});if(!i)throw new en({reason:"Chain ID not found"});if(!c)throw new en({reason:"Contract address not found"});if(!s)throw new en({reason:"Token ID not found"});if(!a)throw new en({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function bf(e,{nft:t}){if(t.namespace==="erc721")return Ye(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ye(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new af({namespace:t.namespace})}async function yf(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?gf(e,{gatewayUrls:t,record:n}):Ks({uri:n,gatewayUrls:t})}async function gf(e,{gatewayUrls:t,record:n}){const r=pf(n),s=await bf(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:a}=Sa({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=a?atob(o.replace("data:application/json;base64,","")):o,l=JSON.parse(u);return Ks({uri:Ca(l),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),hf({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function _a(e,{blockNumber:t,blockTag:n,name:r,key:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Zt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u={address:c,abi:Ea,functionName:"resolve",args:[K(dr(r)),Xe({abi:_o,functionName:"text",args:[Dn(r),s]})],blockNumber:t,blockTag:n},l=H(e,Ye,"readContract"),d=o?await l({...u,args:[...u.args,o]}):await l(u);if(d[0]==="0x")return null;const f=Kt({abi:_o,functionName:"text",data:d[0]});return f===""?null:f}catch(u){if(i)throw u;if(qs(u,"resolve"))return null;throw u}}async function mf(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){const c=await H(e,_a,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:o,strict:i});if(!c)return null;try{return await yf(e,{record:c,gatewayUrls:r})}catch{return null}}async function wf(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Zt({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:a,abi:xl,functionName:"reverse",args:[K(dr(c))],blockNumber:n,blockTag:r},l=H(e,Ye,"readContract"),[d,f]=s?await l({...u,args:[...u.args,s]}):await l(u);return t.toLowerCase()!==f.toLowerCase()?null:d}catch(u){if(o)throw u;if(qs(u,"reverse"))return null;throw u}}async function vf(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let o=s;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Zt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[i]=await H(e,Ye,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[K(dr(r))],blockNumber:t,blockTag:n});return i}async function xf(e){const t=Xn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Na(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:a}={}){const c=s??(r?[r]:void 0),u=Xn(e,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(h=>Bn({abi:[h],eventName:h.name,args:n}))],r&&(l=l[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?V(o):o,toBlock:typeof a=="bigint"?V(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!i,toBlock:a,type:"event"}}async function Fa(e){const t=Xn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Ef(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Pf(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?V(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Oe(o)}async function Oo(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?V(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}function Af(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function Bf(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=n?V(n):void 0,i=await e.request({method:"eth_feeHistory",params:[V(t),o||r,s]},{dedupe:!!o});return Af(i)}async function If(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>at(o));return t.abi?js({abi:t.abi,logs:s,strict:n}):s}function Tf(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class kf extends I{constructor({domain:t}){super(`Invalid domain "${de(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class $f extends I{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Sf extends I{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ma(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:ja({domain:t}),...e.types};Ua({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Cf({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Ra({data:n,primaryType:r,types:s})),ae(We(o))}function Cf({domain:e,types:t}){return Ra({data:e,primaryType:"EIP712Domain",types:t})}function Ra({data:e,primaryType:t,types:n}){const r=La({data:e,primaryType:t,types:n});return ae(r)}function La({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[_f({primaryType:t,types:n})];for(const o of n[t]){const[i,a]=Oa({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(i),s.push(a)}return qt(r,s)}function _f({primaryType:e,types:t}){const n=K(Nf({primaryType:e,types:t}));return ae(n)}function Nf({primaryType:e,types:t}){let n="";const r=za({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function za({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])za({primaryType:o.type,types:t},n);return n}function Oa({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},ae(La({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ae(r)];if(n==="string")return[{type:"bytes32"},ae(K(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(i=>Oa({name:t,type:s,types:e,value:i}));return[{type:"bytes32"},ae(qt(o.map(([i])=>i),o.map(([,i])=>i)))]}return[{type:n},r]}function Ff(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(c,u)=>{const l={...u};for(const d of c){const{name:f,type:h}=d;h==="address"&&(l[f]=l[f].toLowerCase())}return l},i=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},a=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return de({domain:i,message:a,primaryType:r,types:s})}function Ua(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(i,a)=>{for(const c of i){const{name:u,type:l}=c,d=a[u],f=l.match(Di);if(f&&(typeof d=="number"||typeof d=="bigint")){const[b,p,g]=f;V(d,{signed:p==="int",size:Number.parseInt(g)/8})}if(l==="address"&&typeof d=="string"&&!oe(d))throw new fe({address:d});const h=l.match(rd);if(h){const[b,p]=h;if(p&&te(d)!==Number.parseInt(p))throw new bu({expectedSize:Number.parseInt(p),givenSize:te(d)})}const y=s[l];y&&(Mf(l),o(y,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new kf({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new $f({primaryType:r,types:s})}function ja({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},typeof e?.chainId=="number"&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Mf(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Sf({type:e})}const Rf={"0x0":"reverted","0x1":"success"};function Lf(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>at(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Oe(e.transactionIndex):null,status:e.status?Rf[e.status]:null,type:e.type?aa[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const zf=`Ethereum Signed Message:
`;function Of(e){const t=typeof e=="string"?Ft(e):typeof e.raw=="string"?e.raw:se(e.raw),n=Ft(`${zf}${te(t)}`);return We([n,t])}function Zs(e,t){return ae(Of(e),t)}const Da="0x6492649264926492649264926492649264926492649264926492649264926492";function Uf(e){return ji(e,-32)===Da}function jf(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=Je([qt([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Da]);return s==="hex"?o:$e(o)}function Df(e){const{authorizationList:t}=e;if(t)for(const n of t){const{contractAddress:r,chainId:s}=n;if(!oe(r))throw new fe({address:r});if(s<0)throw new or({chainId:s})}Ws(e)}function Hf(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new ba;for(const n of t){const r=te(n),s=Oe(sn(n,0,1));if(r!==32)throw new bl({hash:n,size:r});if(s!==pa)throw new yl({hash:n,version:s})}}Ws(e)}function Ws(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new or({chainId:t});if(s&&!oe(s))throw new fe({address:s});if(r&&r>rr)throw new xt({maxFeePerGas:r});if(n&&r&&n>r)throw new xn({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Gf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new or({chainId:t});if(o&&!oe(o))throw new fe({address:o});if(n||s)throw new I("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>rr)throw new xt({maxFeePerGas:r})}function qf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!oe(o))throw new fe({address:o});if(typeof t<"u"&&t<=0)throw new or({chainId:t});if(n||s)throw new I("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>rr)throw new xt({maxFeePerGas:r})}function Vf(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{contractAddress:r,chainId:s,nonce:o,...i}=n;t.push([s?K(s):"0x",r,o?K(o):"0x",..._n({},i)])}return t}function lr(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Md({storageKey:s[o]});if(!oe(r,{strict:!1}))throw new fe({address:r});t.push([r,s])}return t}function Kf(e,t){const n=ga(e);return n==="eip1559"?Yf(e,t):n==="eip2930"?Jf(e,t):n==="eip4844"?Wf(e,t):n==="eip7702"?Zf(e,t):Xf(e,t)}function Zf(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=e;Df(e);const f=lr(l),h=Vf(n);return Je(["0x04",vt([K(r),o?K(o):"0x",u?K(u):"0x",c?K(c):"0x",s?K(s):"0x",i??"0x",a?K(a):"0x",d??"0x",f,h,..._n(e,t)])])}function Wf(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=e;Hf(e);let f=e.blobVersionedHashes,h=e.sidecars;if(e.blobs&&(typeof f>"u"||typeof h>"u")){const w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(v=>se(v)),A=e.kzg,$=Ms({blobs:w,kzg:A});if(typeof f>"u"&&(f=la({commitments:$})),typeof h>"u"){const v=Rs({blobs:w,commitments:$,kzg:A});h=ya({blobs:w,commitments:$,proofs:v})}}const y=lr(l),b=[K(n),s?K(s):"0x",u?K(u):"0x",c?K(c):"0x",r?K(r):"0x",o??"0x",i?K(i):"0x",d??"0x",y,a?K(a):"0x",f??[],..._n(e,t)],p=[],g=[],m=[];if(h)for(let w=0;w<h.length;w++){const{blob:A,commitment:$,proof:v}=h[w];p.push(A),g.push($),m.push(v)}return Je(["0x03",vt(h?[b,p,g,m]:b)])}function Yf(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:l}=e;Ws(e);const d=lr(u),f=[K(n),s?K(s):"0x",c?K(c):"0x",a?K(a):"0x",r?K(r):"0x",o??"0x",i?K(i):"0x",l??"0x",d,..._n(e,t)];return Je(["0x02",vt(f)])}function Jf(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:i,value:a,accessList:c,gasPrice:u}=e;Gf(e);const l=lr(c),d=[K(n),o?K(o):"0x",u?K(u):"0x",r?K(r):"0x",i??"0x",a?K(a):"0x",s??"0x",l,..._n(e,t)];return Je(["0x01",vt(d)])}function Xf(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:i,value:a,gasPrice:c}=e;qf(e);let u=[o?K(o):"0x",c?K(c):"0x",r?K(r):"0x",i??"0x",a?K(a):"0x",s??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const h=27n+(t.v===27n?0n:1n);if(t.v!==h)throw new Nd({v:t.v});return h})(),d=Te(t.r),f=Te(t.s);u=[...u,K(l),d==="0x00"?"0x":d,f==="0x00"?"0x":f]}else n>0&&(u=[...u,K(n),"0x","0x"]);return vt(u)}function _n(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=Te(n.r),i=Te(n.s);return[typeof s=="number"?s?K(1):"0x":r===0n?"0x":r===1n?K(1):r===27n?"0x":K(1),o==="0x00"?"0x":o,i==="0x00"?"0x":i]}class Qf extends I{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function e0(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Qf({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,i,a]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${i}.${a}`);c>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function t0(e,t="wei"){return e0(e,Zi[t])}function n0(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function r0(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Oe(e.nonce):void 0,storageProof:e.storageProof?n0(e.storageProof):void 0}}async function s0(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?V(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,i||o]});return r0(a)}async function o0(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?V(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Ys(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){const i=r||"latest",a=n!==void 0?V(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,V(o)]},{dedupe:!0}):(a||i)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,V(o)]},{dedupe:!!a})),!c)throw new Yi({blockHash:t,blockNumber:n,blockTag:i,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||ca)(c)}async function i0(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([H(e,Sn,"getBlockNumber")({}),t?H(e,Ys,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function us(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ji({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Lf)(n)}async function a0(e,t){const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:o,multicallAddress:i,stateOverride:a}=t,c=t.contracts,u=r??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024);let l=i;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=Zt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=[[]];let f=0,h=0;for(let p=0;p<c.length;p++){const{abi:g,address:m,args:w,functionName:A}=c[p];try{const $=Xe({abi:g,args:w,functionName:A});h+=($.length-2)/2,u>0&&h>u&&d[f].length>0&&(f++,h=($.length-2)/2,d[f]=[]),d[f]=[...d[f],{allowFailure:!0,callData:$,target:m}]}catch($){const v=Rt($,{abi:g,address:m,args:w,docsPath:"/docs/contract/multicall",functionName:A});if(!n)throw v;d[f]=[...d[f],{allowFailure:!0,callData:"0x",target:m}]}}const y=await Promise.allSettled(d.map(p=>H(e,Ye,"readContract")({abi:ss,address:l,args:[p],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:a}))),b=[];for(let p=0;p<y.length;p++){const g=y[p];if(g.status==="rejected"){if(!n)throw g.reason;for(let w=0;w<d[p].length;w++)b.push({status:"failure",error:g.reason,result:void 0});continue}const m=g.value;for(let w=0;w<m.length;w++){const{returnData:A,success:$}=m[w],{callData:v}=d[p][w],{abi:E,address:P,functionName:x,args:N}=c[b.length];try{if(v==="0x")throw new Zn;if(!$)throw new $s({data:A});const _=Kt({abi:E,args:N,data:A,functionName:x});b.push(n?{result:_,status:"success"}:_)}catch(_){const C=Rt(_,{abi:E,address:P,args:N,docsPath:"/docs/contract/multicall",functionName:x});if(!n)throw C;b.push({error:C,result:void 0,status:"failure"})}}}if(b.length!==c.length)throw new I("multicall results mismatch");return b}function Uo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function c0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function fr(e,...t){if(!c0(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function u0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Uo(e.outputLen),Uo(e.blockLen)}function Vn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function d0(e,t){fr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const At=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ne=(e,t)=>e<<32-t|e>>>t;function l0(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Js(e){return typeof e=="string"&&(e=l0(e)),fr(e),e}function f0(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];fr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class Ha{clone(){return this._cloneInto()}}function h0(e){const t=r=>e().update(Js(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function p0(e=32){if(At&&typeof At.getRandomValues=="function")return At.getRandomValues(new Uint8Array(e));if(At&&typeof At.randomBytes=="function")return At.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function b0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}const y0=(e,t,n)=>e&t^~e&n,g0=(e,t,n)=>e&t^e&n^t&n;class m0 extends Ha{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Sr(this.buffer)}update(t){Vn(this);const{view:n,buffer:r,blockLen:s}=this;t=Js(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=Sr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vn(this),d0(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;b0(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=Sr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=i,s%n&&t.buffer.set(r),t}}const w0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nt=new Uint32Array(64);class v0 extends m0{constructor(){super(64,32,8,!1),this.A=tt[0]|0,this.B=tt[1]|0,this.C=tt[2]|0,this.D=tt[3]|0,this.E=tt[4]|0,this.F=tt[5]|0,this.G=tt[6]|0,this.H=tt[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)nt[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=nt[d-15],h=nt[d-2],y=Ne(f,7)^Ne(f,18)^f>>>3,b=Ne(h,17)^Ne(h,19)^h>>>10;nt[d]=b+nt[d-7]+y+nt[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Ne(a,6)^Ne(a,11)^Ne(a,25),h=l+f+y0(a,c,u)+w0[d]+nt[d]|0,b=(Ne(r,2)^Ne(r,13)^Ne(r,22))+g0(r,s,o)|0;l=u,u=c,c=a,a=i+h|0,i=o,o=s,s=r,r=h+b|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,o,i,a,c,u,l)}roundClean(){nt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const x0=h0(()=>new v0);class Ga extends Ha{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,u0(t);const r=Js(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return Vn(this),this.iHash.update(t),this}digestInto(t){Vn(this),fr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qa=(e,t,n)=>new Ga(e,t).update(n).digest();qa.create=(e,t)=>new Ga(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hr=BigInt(0),pr=BigInt(1),E0=BigInt(2);function Et(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Nn(e){if(!Et(e))throw new Error("Uint8Array expected")}function Lt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const P0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zt(e){Nn(e);let t="";for(let n=0;n<e.length;n++)t+=P0[e[n]];return t}function Tt(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Xs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?hr:BigInt("0x"+e)}const je={_0:48,_9:57,A:65,F:70,a:97,f:102};function jo(e){if(e>=je._0&&e<=je._9)return e-je._0;if(e>=je.A&&e<=je.F)return e-(je.A-10);if(e>=je.a&&e<=je.f)return e-(je.a-10)}function Ot(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=jo(e.charCodeAt(o)),a=jo(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function yt(e){return Xs(zt(e))}function Qs(e){return Nn(e),Xs(zt(Uint8Array.from(e).reverse()))}function Ut(e,t){return Ot(e.toString(16).padStart(t*2,"0"))}function eo(e,t){return Ut(e,t).reverse()}function A0(e){return Ot(Tt(e))}function Be(e,t,n){let r;if(typeof t=="string")try{r=Ot(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Et(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function En(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Nn(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function B0(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function I0(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Cr=e=>typeof e=="bigint"&&hr<=e;function br(e,t,n){return Cr(e)&&Cr(t)&&Cr(n)&&t<=e&&e<n}function gt(e,t,n,r){if(!br(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Va(e){let t;for(t=0;e>hr;e>>=pr,t+=1);return t}function T0(e,t){return e>>BigInt(t)&pr}function k0(e,t,n){return e|(n?pr:hr)<<BigInt(t)}const to=e=>(E0<<BigInt(e-1))-pr,_r=e=>new Uint8Array(e),Do=e=>Uint8Array.from(e);function Ka(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=_r(e),s=_r(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},a=(...d)=>n(s,r,...d),c=(d=_r())=>{s=a(Do([0]),d),r=a(),d.length!==0&&(s=a(Do([1]),d),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<t;){r=a();const h=r.slice();f.push(h),d+=r.length}return En(...f)};return(d,f)=>{i(),c(d);let h;for(;!(h=f(u()));)c();return i(),h}}const $0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Et(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Fn(e,t,n={}){const r=(s,o,i)=>{const a=$0[o];if(typeof a!="function")throw new Error("invalid validator function");const c=e[s];if(!(i&&c===void 0)&&!a(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}const S0=()=>{throw new Error("not implemented")};function ds(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const C0=Object.freeze(Object.defineProperty({__proto__:null,aInRange:gt,abool:Lt,abytes:Nn,bitGet:T0,bitLen:Va,bitMask:to,bitSet:k0,bytesToHex:zt,bytesToNumberBE:yt,bytesToNumberLE:Qs,concatBytes:En,createHmacDrbg:Ka,ensureBytes:Be,equalBytes:B0,hexToBytes:Ot,hexToNumber:Xs,inRange:br,isBytes:Et,memoized:ds,notImplemented:S0,numberToBytesBE:Ut,numberToBytesLE:eo,numberToHexUnpadded:Tt,numberToVarBytesBE:A0,utf8ToBytes:I0,validateObject:Fn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ue=BigInt(0),ne=BigInt(1),pt=BigInt(2),_0=BigInt(3),ls=BigInt(4),Ho=BigInt(5),Go=BigInt(8);function be(e,t){const n=e%t;return n>=ue?n:t+n}function N0(e,t,n){if(t<ue)throw new Error("invalid exponent, negatives unsupported");if(n<=ue)throw new Error("invalid modulus");if(n===ne)return ue;let r=ne;for(;t>ue;)t&ne&&(r=r*e%n),e=e*e%n,t>>=ne;return r}function Pe(e,t,n){let r=e;for(;t-- >ue;)r*=r,r%=n;return r}function fs(e,t){if(e===ue)throw new Error("invert: expected non-zero number");if(t<=ue)throw new Error("invert: expected positive modulus, got "+t);let n=be(e,t),r=t,s=ue,o=ne;for(;n!==ue;){const a=r/n,c=r%n,u=s-o*a;r=n,n=c,s=o,o=u}if(r!==ne)throw new Error("invert: does not exist");return be(s,t)}function F0(e){const t=(e-ne)/pt;let n,r,s;for(n=e-ne,r=0;n%pt===ue;n/=pt,r++);for(s=pt;s<e&&N0(s,t,e)!==e-ne;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const i=(e+ne)/ls;return function(c,u){const l=c.pow(u,i);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const o=(n+ne)/pt;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,o),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let b=a.sqr(f);h<u&&!a.eql(b,a.ONE);h++)b=a.sqr(b);const y=a.pow(l,ne<<BigInt(u-h-1));l=a.sqr(y),d=a.mul(d,y),f=a.mul(f,l),u=h}return d}}function M0(e){if(e%ls===_0){const t=(e+ne)/ls;return function(r,s){const o=r.pow(s,t);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(e%Go===Ho){const t=(e-Ho)/Go;return function(r,s){const o=r.mul(s,pt),i=r.pow(o,t),a=r.mul(s,i),c=r.mul(r.mul(a,pt),i),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return F0(e)}const R0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function L0(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=R0.reduce((r,s)=>(r[s]="function",r),t);return Fn(e,n)}function z0(e,t,n){if(n<ue)throw new Error("invalid exponent, negatives unsupported");if(n===ue)return e.ONE;if(n===ne)return t;let r=e.ONE,s=t;for(;n>ue;)n&ne&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ne;return r}function O0(e,t){const n=new Array(t.length),r=t.reduce((o,i,a)=>e.is0(i)?o:(n[a]=o,e.mul(o,i)),e.ONE),s=e.inv(r);return t.reduceRight((o,i,a)=>e.is0(i)?o:(n[a]=e.mul(o,n[a]),e.mul(o,i)),s),n}function Za(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Wa(e,t,n=!1,r={}){if(e<=ue)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=Za(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const a=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:to(s),ZERO:ue,ONE:ne,create:c=>be(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ue<=c&&c<e},is0:c=>c===ue,isOdd:c=>(c&ne)===ne,neg:c=>be(-c,e),eql:(c,u)=>c===u,sqr:c=>be(c*c,e),add:(c,u)=>be(c+u,e),sub:(c,u)=>be(c-u,e),mul:(c,u)=>be(c*u,e),pow:(c,u)=>z0(a,c,u),div:(c,u)=>be(c*fs(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>fs(c,e),sqrt:r.sqrt||(c=>(i||(i=M0(e)),i(a,c))),invertBatch:c=>O0(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?eo(c,o):Ut(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?Qs(c):yt(c)}});return Object.freeze(a)}function Ya(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ja(e){const t=Ya(e);return t+Math.ceil(t/2)}function U0(e,t,n=!1){const r=e.length,s=Ya(t),o=Ja(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?yt(e):Qs(e),a=be(i,t-ne)+ne;return n?eo(a,s):Ut(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt(0),Un=BigInt(1);function Nr(e,t){const n=t.negate();return e?n:t}function Xa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Fr(e,t){Xa(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function j0(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function D0(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Mr=new WeakMap,Qa=new WeakMap;function Rr(e){return Qa.get(e)||1}function H0(e,t){return{constTimeNegate:Nr,hasPrecomputes(n){return Rr(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>qo;)r&Un&&(s=s.add(o)),o=o.double(),r>>=Un;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Fr(r,t),i=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,i.push(c);for(let l=1;l<o;l++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(n,r,s){const{windows:o,windowSize:i}=Fr(n,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let f=0;f<o;f++){const h=f*i;let y=Number(s&u);s>>=d,y>i&&(y-=l,s+=Un);const b=h,p=h+Math.abs(y)-1,g=f%2!==0,m=y<0;y===0?c=c.add(Nr(g,r[b])):a=a.add(Nr(m,r[p]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,o=e.ZERO){const{windows:i,windowSize:a}=Fr(n,t),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<i;d++){const f=d*a;if(s===qo)break;let h=Number(s&c);if(s>>=l,h>a&&(h-=u,s+=Un),h===0)continue;let y=r[f+Math.abs(h)-1];h<0&&(y=y.negate()),o=o.add(y)}return o},getPrecomputes(n,r,s){let o=Mr.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Mr.set(r,s(o))),o},wNAFCached(n,r,s){const o=Rr(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=Rr(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){Xa(r,t),Qa.set(n,r),Mr.delete(n)}}}function G0(e,t,n,r){if(j0(n,e),D0(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=Va(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,a=(1<<i)-1,c=new Array(a+1).fill(s),u=Math.floor((t.BITS-1)/i)*i;let l=s;for(let d=u;d>=0;d-=i){c.fill(s);for(let h=0;h<r.length;h++){const y=r[h],b=Number(y>>BigInt(d)&BigInt(a));c[b]=c[b].add(n[h])}let f=s;for(let h=c.length-1,y=s;h>0;h--)y=y.add(c[h]),f=f.add(y);if(l=l.add(f),d!==0)for(let h=0;h<i;h++)l=l.double()}return l}function ec(e){return L0(e.Fp),Fn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Za(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vo(e){e.lowS!==void 0&&Lt("lowS",e.lowS),e.prehash!==void 0&&Lt("prehash",e.prehash)}function q0(e){const t=ec(e);Fn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:V0,hexToBytes:K0}=C0,He={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=He;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Tt(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Tt(s.length/2|128):"";return Tt(e)+o+s+t},decode(e,t){const{Err:n}=He;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)i=i<<8|l;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=He;if(e<Ge)throw new t("integer: negative integers are not allowed");let n=Tt(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=He;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return V0(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=He,s=typeof e=="string"?K0(e):e;Nn(s);const{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=He,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}},Ge=BigInt(0),ce=BigInt(1);BigInt(2);const Ko=BigInt(3);BigInt(4);function Z0(e){const t=q0(e),{Fp:n}=t,r=Wa(t.n,t.nBitLength),s=t.toBytes||((b,p,g)=>{const m=p.toAffine();return En(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),o=t.fromBytes||(b=>{const p=b.subarray(1),g=n.fromBytes(p.subarray(0,n.BYTES)),m=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:g,y:m}});function i(b){const{a:p,b:g}=t,m=n.sqr(b),w=n.mul(m,b);return n.add(n.add(w,n.mul(b,p)),g)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(b){return br(b,ce,t.n)}function c(b){const{allowedPrivateKeyLengths:p,nByteLength:g,wrapPrivateKey:m,n:w}=t;if(p&&typeof b!="bigint"){if(Et(b)&&(b=zt(b)),typeof b!="string"||!p.includes(b.length))throw new Error("invalid private key");b=b.padStart(g*2,"0")}let A;try{A=typeof b=="bigint"?b:yt(Be("private key",b,g))}catch{throw new Error("invalid private key, expected hex or "+g+" bytes, got "+typeof b)}return m&&(A=be(A,w)),gt("private key",A,ce,w),A}function u(b){if(!(b instanceof f))throw new Error("ProjectivePoint expected")}const l=ds((b,p)=>{const{px:g,py:m,pz:w}=b;if(n.eql(w,n.ONE))return{x:g,y:m};const A=b.is0();p==null&&(p=A?n.ONE:n.inv(w));const $=n.mul(g,p),v=n.mul(m,p),E=n.mul(w,p);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:$,y:v}}),d=ds(b=>{if(b.is0()){if(t.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:p,y:g}=b.toAffine();if(!n.isValid(p)||!n.isValid(g))throw new Error("bad point: x or y not FE");const m=n.sqr(g),w=i(p);if(!n.eql(m,w))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(p,g,m){if(this.px=p,this.py=g,this.pz=m,p==null||!n.isValid(p))throw new Error("x required");if(g==null||!n.isValid(g))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:g,y:m}=p||{};if(!p||!n.isValid(g)||!n.isValid(m))throw new Error("invalid affine point");if(p instanceof f)throw new Error("projective point not allowed");const w=A=>n.eql(A,n.ZERO);return w(g)&&w(m)?f.ZERO:new f(g,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const g=n.invertBatch(p.map(m=>m.pz));return p.map((m,w)=>m.toAffine(g[w])).map(f.fromAffine)}static fromHex(p){const g=f.fromAffine(o(Be("pointHex",p)));return g.assertValidity(),g}static fromPrivateKey(p){return f.BASE.multiply(c(p))}static msm(p,g){return G0(f,r,p,g)}_setWindowSize(p){y.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:g,py:m,pz:w}=this,{px:A,py:$,pz:v}=p,E=n.eql(n.mul(g,v),n.mul(A,w)),P=n.eql(n.mul(m,v),n.mul($,w));return E&&P}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:g}=t,m=n.mul(g,Ko),{px:w,py:A,pz:$}=this;let v=n.ZERO,E=n.ZERO,P=n.ZERO,x=n.mul(w,w),N=n.mul(A,A),_=n.mul($,$),C=n.mul(w,A);return C=n.add(C,C),P=n.mul(w,$),P=n.add(P,P),v=n.mul(p,P),E=n.mul(m,_),E=n.add(v,E),v=n.sub(N,E),E=n.add(N,E),E=n.mul(v,E),v=n.mul(C,v),P=n.mul(m,P),_=n.mul(p,_),C=n.sub(x,_),C=n.mul(p,C),C=n.add(C,P),P=n.add(x,x),x=n.add(P,x),x=n.add(x,_),x=n.mul(x,C),E=n.add(E,x),_=n.mul(A,$),_=n.add(_,_),x=n.mul(_,C),v=n.sub(v,x),P=n.mul(_,N),P=n.add(P,P),P=n.add(P,P),new f(v,E,P)}add(p){u(p);const{px:g,py:m,pz:w}=this,{px:A,py:$,pz:v}=p;let E=n.ZERO,P=n.ZERO,x=n.ZERO;const N=t.a,_=n.mul(t.b,Ko);let C=n.mul(g,A),U=n.mul(m,$),B=n.mul(w,v),S=n.add(g,m),T=n.add(A,$);S=n.mul(S,T),T=n.add(C,U),S=n.sub(S,T),T=n.add(g,w);let F=n.add(A,v);return T=n.mul(T,F),F=n.add(C,B),T=n.sub(T,F),F=n.add(m,w),E=n.add($,v),F=n.mul(F,E),E=n.add(U,B),F=n.sub(F,E),x=n.mul(N,T),E=n.mul(_,B),x=n.add(E,x),E=n.sub(U,x),x=n.add(U,x),P=n.mul(E,x),U=n.add(C,C),U=n.add(U,C),B=n.mul(N,B),T=n.mul(_,T),U=n.add(U,B),B=n.sub(C,B),B=n.mul(N,B),T=n.add(T,B),C=n.mul(U,T),P=n.add(P,C),C=n.mul(F,T),E=n.mul(S,E),E=n.sub(E,C),C=n.mul(S,U),x=n.mul(F,x),x=n.add(x,C),new f(E,P,x)}subtract(p){return this.add(p.negate())}is0(){return this.equals(f.ZERO)}wNAF(p){return y.wNAFCached(this,p,f.normalizeZ)}multiplyUnsafe(p){const{endo:g,n:m}=t;gt("scalar",p,Ge,m);const w=f.ZERO;if(p===Ge)return w;if(this.is0()||p===ce)return this;if(!g||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,p,f.normalizeZ);let{k1neg:A,k1:$,k2neg:v,k2:E}=g.splitScalar(p),P=w,x=w,N=this;for(;$>Ge||E>Ge;)$&ce&&(P=P.add(N)),E&ce&&(x=x.add(N)),N=N.double(),$>>=ce,E>>=ce;return A&&(P=P.negate()),v&&(x=x.negate()),x=new f(n.mul(x.px,g.beta),x.py,x.pz),P.add(x)}multiply(p){const{endo:g,n:m}=t;gt("scalar",p,ce,m);let w,A;if(g){const{k1neg:$,k1:v,k2neg:E,k2:P}=g.splitScalar(p);let{p:x,f:N}=this.wNAF(v),{p:_,f:C}=this.wNAF(P);x=y.constTimeNegate($,x),_=y.constTimeNegate(E,_),_=new f(n.mul(_.px,g.beta),_.py,_.pz),w=x.add(_),A=N.add(C)}else{const{p:$,f:v}=this.wNAF(p);w=$,A=v}return f.normalizeZ([w,A])[0]}multiplyAndAddUnsafe(p,g,m){const w=f.BASE,A=(v,E)=>E===Ge||E===ce||!v.equals(w)?v.multiplyUnsafe(E):v.multiply(E),$=A(this,g).add(A(p,m));return $.is0()?void 0:$}toAffine(p){return l(this,p)}isTorsionFree(){const{h:p,isTorsionFree:g}=t;if(p===ce)return!0;if(g)return g(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:g}=t;return p===ce?this:g?g(f,this):this.multiplyUnsafe(t.h)}toRawBytes(p=!0){return Lt("isCompressed",p),this.assertValidity(),s(f,this,p)}toHex(p=!0){return Lt("isCompressed",p),zt(this.toRawBytes(p))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,y=H0(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function W0(e){const t=ec(e);return Fn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Y0(e){const t=W0(e),{Fp:n,n:r}=t,s=n.BYTES+1,o=2*n.BYTES+1;function i(B){return be(B,r)}function a(B){return fs(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Z0({...t,toBytes(B,S,T){const F=S.toAffine(),z=n.toBytes(F.x),M=En;return Lt("isCompressed",T),T?M(Uint8Array.from([S.hasEvenY()?2:3]),z):M(Uint8Array.from([4]),z,n.toBytes(F.y))},fromBytes(B){const S=B.length,T=B[0],F=B.subarray(1);if(S===s&&(T===2||T===3)){const z=yt(F);if(!br(z,ce,n.ORDER))throw new Error("Point is not on curve");const M=l(z);let R;try{R=n.sqrt(M)}catch(W){const Y=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+Y)}const j=(R&ce)===ce;return(T&1)===1!==j&&(R=n.neg(R)),{x:z,y:R}}else if(S===o&&T===4){const z=n.fromBytes(F.subarray(0,n.BYTES)),M=n.fromBytes(F.subarray(n.BYTES,2*n.BYTES));return{x:z,y:M}}else{const z=s,M=o;throw new Error("invalid Point, expected length of "+z+", or uncompressed "+M+", got "+S)}}}),f=B=>zt(Ut(B,t.nByteLength));function h(B){const S=r>>ce;return B>S}function y(B){return h(B)?i(-B):B}const b=(B,S,T)=>yt(B.slice(S,T));class p{constructor(S,T,F){this.r=S,this.s=T,this.recovery=F,this.assertValidity()}static fromCompact(S){const T=t.nByteLength;return S=Be("compactSignature",S,T*2),new p(b(S,0,T),b(S,T,2*T))}static fromDER(S){const{r:T,s:F}=He.toSig(Be("DER",S));return new p(T,F)}assertValidity(){gt("r",this.r,ce,r),gt("s",this.s,ce,r)}addRecoveryBit(S){return new p(this.r,this.s,S)}recoverPublicKey(S){const{r:T,s:F,recovery:z}=this,M=v(Be("msgHash",S));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const R=z===2||z===3?T+t.n:T;if(R>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=z&1?"03":"02",L=c.fromHex(j+f(R)),W=a(R),Y=i(-M*W),ee=i(F*W),ie=c.BASE.multiplyAndAddUnsafe(L,Y,ee);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return Ot(this.toDERHex())}toDERHex(){return He.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ot(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(B){try{return u(B),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const B=Ja(t.n);return U0(t.randomBytes(B),t.n)},precompute(B=8,S=c.BASE){return S._setWindowSize(B),S.multiply(BigInt(3)),S}};function m(B,S=!0){return c.fromPrivateKey(B).toRawBytes(S)}function w(B){const S=Et(B),T=typeof B=="string",F=(S||T)&&B.length;return S?F===s||F===o:T?F===2*s||F===2*o:B instanceof c}function A(B,S,T=!0){if(w(B))throw new Error("first arg must be private key");if(!w(S))throw new Error("second arg must be public key");return c.fromHex(S).multiply(u(B)).toRawBytes(T)}const $=t.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const S=yt(B),T=B.length*8-t.nBitLength;return T>0?S>>BigInt(T):S},v=t.bits2int_modN||function(B){return i($(B))},E=to(t.nBitLength);function P(B){return gt("num < 2^"+t.nBitLength,B,Ge,E),Ut(B,t.nByteLength)}function x(B,S,T=N){if(["recovered","canonical"].some(he=>he in T))throw new Error("sign() legacy options not supported");const{hash:F,randomBytes:z}=t;let{lowS:M,prehash:R,extraEntropy:j}=T;M==null&&(M=!0),B=Be("msgHash",B),Vo(T),R&&(B=Be("prehashed msgHash",F(B)));const L=v(B),W=u(S),Y=[P(W),P(L)];if(j!=null&&j!==!1){const he=j===!0?z(n.BYTES):j;Y.push(Be("extraEntropy",he))}const ee=En(...Y),ie=L;function Ce(he){const ve=$(he);if(!d(ve))return;const yr=a(ve),Yt=c.BASE.multiply(ve).toAffine(),ft=i(Yt.x);if(ft===Ge)return;const Jt=i(yr*i(ie+ft*W));if(Jt===Ge)return;let Pt=(Yt.x===ft?0:2)|Number(Yt.y&ce),ro=Jt;return M&&h(Jt)&&(ro=y(Jt),Pt^=1),new p(ft,ro,Pt)}return{seed:ee,k2sig:Ce}}const N={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function C(B,S,T=N){const{seed:F,k2sig:z}=x(B,S,T),M=t;return Ka(M.hash.outputLen,M.nByteLength,M.hmac)(F,z)}c.BASE._setWindowSize(8);function U(B,S,T,F=_){const z=B;S=Be("msgHash",S),T=Be("publicKey",T);const{lowS:M,prehash:R,format:j}=F;if(Vo(F),"strict"in F)throw new Error("options.strict was renamed to lowS");if(j!==void 0&&j!=="compact"&&j!=="der")throw new Error("format must be compact or der");const L=typeof z=="string"||Et(z),W=!L&&!j&&typeof z=="object"&&z!==null&&typeof z.r=="bigint"&&typeof z.s=="bigint";if(!L&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Y,ee;try{if(W&&(Y=new p(z.r,z.s)),L){try{j!=="compact"&&(Y=p.fromDER(z))}catch(Pt){if(!(Pt instanceof He.Err))throw Pt}!Y&&j!=="der"&&(Y=p.fromCompact(z))}ee=c.fromHex(T)}catch{return!1}if(!Y||M&&Y.hasHighS())return!1;R&&(S=t.hash(S));const{r:ie,s:Ce}=Y,he=v(S),ve=a(Ce),yr=i(he*ve),Yt=i(ie*ve),ft=c.BASE.multiplyAndAddUnsafe(ee,yr,Yt)?.toAffine();return ft?i(ft.x)===ie:!1}return{CURVE:t,getPublicKey:m,getSharedSecret:A,sign:C,verify:U,ProjectivePoint:c,Signature:p,utils:g}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J0(e){return{hash:e,hmac:(t,...n)=>qa(e,t,f0(...n)),randomBytes:p0}}function X0(e,t){const n=r=>Y0({...e,...J0(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Q0=BigInt(1),hs=BigInt(2),Wo=(e,t)=>(e+t/hs)/t;function eh(e){const t=tc,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=Pe(l,n,t)*l%t,f=Pe(d,n,t)*l%t,h=Pe(f,hs,t)*u%t,y=Pe(h,s,t)*h%t,b=Pe(y,o,t)*y%t,p=Pe(b,a,t)*b%t,g=Pe(p,c,t)*p%t,m=Pe(g,a,t)*b%t,w=Pe(m,n,t)*l%t,A=Pe(w,i,t)*y%t,$=Pe(A,r,t)*u%t,v=Pe($,hs,t);if(!ps.eql(ps.sqr(v),e))throw new Error("Cannot find square root");return v}const ps=Wa(tc,void 0,void 0,{sqrt:eh}),Wt=X0({a:BigInt(0),b:BigInt(7),Fp:ps,n:Zo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Zo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Q0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),a=Wo(o*e,t),c=Wo(-r*e,t);let u=be(e-a*n-c*s,t),l=be(-a*r-c*o,t);const d=u>i,f=l>i;if(d&&(u=t-u),f&&(l=t-l),u>i||l>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},x0);BigInt(0);Wt.ProjectivePoint;const th=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Wt},Symbol.toStringTag,{value:"Module"}));function nc({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Wt.Signature(it(e),it(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:$e(i)}async function no(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,universalSignatureVerifierAddress:a=e.chain?.contracts?.universalSignatureVerifier?.address,...c}=t,u=ze(i)?i:typeof i=="object"&&"r"in i&&"s"in i?nc(i):se(i),l=await(async()=>!r&&!s||Uf(u)?u:jf({address:r,data:s,signature:u}))();try{const d=a?{to:a,data:Xe({abi:Fo,functionName:"isValidSig",args:[n,o,l]}),...c}:{data:ir({abi:Fo,args:[n,o,l],bytecode:Bl}),...c},{data:f}=await H(e,ar,"call")(d);return Bu(f??"0x0")}catch(d){try{if(Os(Li(n),await ea({hash:o,signature:i})))return!0}catch{}if(d instanceof Xi)return!1;throw d}}async function nh(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const a=Zs(n);return no(e,{address:t,factory:r,factoryData:s,hash:a,signature:o,...i})}async function rh(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:a,types:c,domain:u,...l}=t,d=Ma({message:i,primaryType:a,types:c,domain:u});return no(e,{address:n,factory:r,factoryData:s,hash:d,signature:o,...l})}function rc(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const a=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let c;return a?(()=>{const d=de(["watchBlockNumber",e.uid,t,n,i]);return ct(d,{onBlockNumber:r,onError:s},f=>$n(async()=>{try{const h=await H(e,Sn,"getBlockNumber")({cacheTime:0});if(c){if(h===c)return;if(h-c>1&&n)for(let y=c+1n;y<h;y++)f.onBlockNumber(y,c),c=y}(!c||h>c)&&(f.onBlockNumber(h,c),c=h)}catch(h){f.onError?.(h)}},{emitOnBegin:t,interval:i}))})():(()=>{const d=de(["watchBlockNumber",e.uid,t,n]);return ct(d,{onBlockNumber:r,onError:s},f=>{let h=!0,y=()=>h=!1;return(async()=>{try{const b=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(m=>m.config.type==="webSocket");return g?g.value:e.transport}return e.transport})(),{unsubscribe:p}=await b.subscribe({params:["newHeads"],onData(g){if(!h)return;const m=it(g.result?.number);f.onBlockNumber(m,c),c=m},onError(g){f.onError?.(g)}});y=p,h||y()}catch(b){s?.(b)}})(),()=>y()})})()}async function sh(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,retryCount:o=6,retryDelay:i=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=de(["waitForTransactionReceipt",e.uid,n]);let u,l,d,f=!1;const{promise:h,resolve:y,reject:b}=Aa(),p=a?setTimeout(()=>b(new Ld({hash:n})),a):void 0,g=ct(c,{onReplaced:r,resolve:y,reject:b},m=>{const w=H(e,rc,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const $=E=>{clearTimeout(p),w(),E(),g()};let v=A;if(!f)try{if(d){if(t>1&&(!d.blockNumber||v-d.blockNumber+1n<t))return;$(()=>m.resolve(d));return}if(u||(f=!0,await cs(async()=>{u=await H(e,Ys,"getTransaction")({hash:n}),u.blockNumber&&(v=u.blockNumber)},{delay:i,retryCount:o}),f=!1),d=await H(e,us,"getTransactionReceipt")({hash:n}),t>1&&(!d.blockNumber||v-d.blockNumber+1n<t))return;$(()=>m.resolve(d))}catch(E){if(E instanceof Yi||E instanceof Ji){if(!u){f=!1;return}try{l=u,f=!0;const P=await cs(()=>H(e,Me,"getBlock")({blockNumber:v,includeTransactions:!0}),{delay:i,retryCount:o,shouldRetry:({error:_})=>_ instanceof ia});f=!1;const x=P.transactions.find(({from:_,nonce:C})=>_===l.from&&C===l.nonce);if(!x||(d=await H(e,us,"getTransactionReceipt")({hash:x.hash}),t>1&&(!d.blockNumber||v-d.blockNumber+1n<t)))return;let N="replaced";x.to===l.to&&x.value===l.value?N="repriced":x.from===x.to&&x.value===0n&&(N="cancelled"),$(()=>{m.onReplaced?.({reason:N,replacedTransaction:l,transaction:x,transactionReceipt:d}),m.resolve(d)})}catch(P){$(()=>m.reject(P))}}else $(()=>m.reject(E))}}})});return h}function oh(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),l=i??!1;let d;return u?(()=>{const y=de(["watchBlocks",e.uid,t,n,r,l,c]);return ct(y,{onBlock:s,onError:o},b=>$n(async()=>{try{const p=await H(e,Me,"getBlock")({blockTag:t,includeTransactions:l});if(p.number&&d?.number){if(p.number===d.number)return;if(p.number-d.number>1&&n)for(let g=d?.number+1n;g<p.number;g++){const m=await H(e,Me,"getBlock")({blockNumber:g,includeTransactions:l});b.onBlock(m,d),d=m}}(!d?.number||t==="pending"&&!p?.number||p.number&&p.number>d.number)&&(b.onBlock(p,d),d=p)}catch(p){b.onError?.(p)}},{emitOnBegin:r,interval:c}))})():(()=>{let y=!0,b=!0,p=()=>y=!1;return(async()=>{try{r&&H(e,Me,"getBlock")({blockTag:t,includeTransactions:l}).then(w=>{y&&b&&(s(w,void 0),b=!1)});const g=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(A=>A.config.type==="webSocket");return w?w.value:e.transport}return e.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],async onData(w){if(!y)return;const A=await H(e,Me,"getBlock")({blockNumber:w.blockNumber,includeTransactions:l}).catch(()=>{});y&&(s(A,d),b=!1,d=A)},onError(w){o?.(w)}});p=m,y||p()}catch(g){o?.(g)}})(),()=>p()})()}function ih(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:d}){const f=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),h=d??!1;return f?(()=>{const p=de(["watchEvent",t,n,r,e.uid,s,l,i]);return ct(p,{onLogs:c,onError:a},g=>{let m;i!==void 0&&(m=i-1n);let w,A=!1;const $=$n(async()=>{if(!A){try{w=await H(e,Na,"createEventFilter")({address:t,args:n,event:s,events:o,strict:h,fromBlock:i})}catch{}A=!0;return}try{let v;if(w)v=await H(e,cr,"getFilterChanges")({filter:w});else{const E=await H(e,Sn,"getBlockNumber")({});m&&m!==E?v=await H(e,Ds,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:m+1n,toBlock:E}):v=[],m=E}if(v.length===0)return;if(r)g.onLogs(v);else for(const E of v)g.onLogs([E])}catch(v){w&&v instanceof wt&&(A=!1),g.onError?.(v)}},{emitOnBegin:!0,interval:l});return async()=>{w&&await H(e,ur,"uninstallFilter")({filter:w}),$()}})})():(()=>{let p=!0,g=()=>p=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const v=e.transport.transports.find(E=>E.config.type==="webSocket");return v?v.value:e.transport}return e.transport})(),w=o??(s?[s]:void 0);let A=[];w&&(A=[w.flatMap(E=>Bn({abi:[E],eventName:E.name,args:n}))],s&&(A=A[0]));const{unsubscribe:$}=await m.subscribe({params:["logs",{address:t,topics:A}],onData(v){if(!p)return;const E=v.result;try{const{eventName:P,args:x}=Us({abi:w??[],data:E.data,topics:E.topics,strict:h}),N=at(E,{args:x,eventName:P});c([N])}catch(P){let x,N;if(P instanceof rn||P instanceof Wn){if(d)return;x=P.abiItem.name,N=P.abiItem.inputs?.some(C=>!("name"in C&&C.name))}const _=at(E,{args:N?[]:{},eventName:x});c([_])}},onError(v){a?.(v)}});g=$,p||g()}catch(m){a?.(m)}})(),()=>g()})()}function ah(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const u=de(["watchPendingTransactions",e.uid,t,o]);return ct(u,{onTransactions:r,onError:n},l=>{let d;const f=$n(async()=>{try{if(!d)try{d=await H(e,Fa,"createPendingTransactionFilter")({});return}catch(y){throw f(),y}const h=await H(e,cr,"getFilterChanges")({filter:d});if(h.length===0)return;if(t)l.onTransactions(h);else for(const y of h)l.onTransactions([y])}catch(h){l.onError?.(h)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await H(e,ur,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const h=f.result;r([h])},onError(f){n?.(f)}});l=d,u||l()}catch(d){n?.(d)}})(),()=>l()})()}function ch(e){const{scheme:t,statement:n,...r}=e.match(uh)?.groups??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(dh)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const uh=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,dh=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function lh(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||t&&!Os(r.address,t))return!1}catch{return!1}return!0}async function fh(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:a,time:c=new Date,...u}=t,l=ch(s);if(!l.address||!lh({address:n,domain:r,message:l,nonce:o,scheme:i,time:c}))return!1;const f=Zs(s);return no(e,{address:l.address,hash:f,signature:a,...u})}function hh(e){return{call:t=>ar(e,t),createBlockFilter:()=>xf(e),createContractEventFilter:t=>Gi(e,t),createEventFilter:t=>Na(e,t),createPendingTransactionFilter:()=>Fa(e),estimateContractGas:t=>ml(e,t),estimateGas:t=>zs(e,t),getBalance:t=>wa(e,t),getBlobBaseFee:()=>Ef(e),getBlock:t=>Me(e,t),getBlockNumber:t=>Sn(e,t),getBlockTransactionCount:t=>Pf(e,t),getBytecode:t=>Oo(e,t),getChainId:()=>kn(e),getCode:t=>Oo(e,t),getContractEvents:t=>va(e,t),getEip712Domain:t=>ql(e,t),getEnsAddress:t=>sf(e,t),getEnsAvatar:t=>mf(e,t),getEnsName:t=>wf(e,t),getEnsResolver:t=>vf(e,t),getEnsText:t=>_a(e,t),getFeeHistory:t=>Bf(e,t),estimateFeesPerGas:t=>sl(e,t),getFilterChanges:t=>cr(e,t),getFilterLogs:t=>If(e,t),getGasPrice:()=>Fs(e),getLogs:t=>Ds(e,t),getProof:t=>s0(e,t),estimateMaxPriorityFeePerGas:t=>rl(e,t),getStorageAt:t=>o0(e,t),getTransaction:t=>Ys(e,t),getTransactionConfirmations:t=>i0(e,t),getTransactionCount:t=>da(e,t),getTransactionReceipt:t=>us(e,t),multicall:t=>a0(e,t),prepareTransactionRequest:t=>sr(e,t),readContract:t=>Ye(e,t),sendRawTransaction:t=>Hs(e,t),simulateContract:t=>Fl(e,t),verifyMessage:t=>nh(e,t),verifySiweMessage:t=>fh(e,t),verifyTypedData:t=>rh(e,t),uninstallFilter:t=>ur(e,t),waitForTransactionReceipt:t=>sh(e,t),watchBlocks:t=>oh(e,t),watchBlockNumber:t=>rc(e,t),watchContractEvent:t=>jl(e,t),watchEvent:t=>ih(e,t),watchPendingTransactions:t=>ah(e,t)}}function ph(e){const{key:t="public",name:n="Public Client"}=e;return ka({...e,key:t,name:n,type:"publicClient"}).extend(hh)}function bh(e,t){const{abi:n,args:r,bytecode:s,...o}=t,i=ir({abi:n,args:r,bytecode:s});return Gs(e,{...o,data:i})}async function yh(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>Pn(n))}async function gh(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function mh(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Li(n))}async function wh(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function vh(e,{account:t=e.account,message:n}){if(!t)throw new Cn({docsPath:"/docs/actions/wallet/signMessage"});const r=Ee(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Ft(n):n.raw instanceof Uint8Array?K(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function xh(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new Cn({docsPath:"/docs/actions/wallet/signTransaction"});const o=Ee(n);Tn({account:o,...t});const i=await H(e,kn,"getChainId")({});r!==null&&Ia({currentChainId:i,chain:r});const c=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||nr;return o.signTransaction?o.signTransaction({...s,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(s),chainId:V(i),from:o.address}]},{retryCount:0})}async function Eh(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new Cn({docsPath:"/docs/actions/wallet/signTypedData"});const i=Ee(n),a={EIP712Domain:ja({domain:r}),...t.types};if(Ua({domain:r,message:s,primaryType:o,types:a}),i.signTypedData)return i.signTypedData({domain:r,message:s,primaryType:o,types:a});const c=Ff({domain:r,message:s,primaryType:o,types:a});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}async function Ph(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:V(t)}]},{retryCount:0})}async function Ah(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Bh(e){return{addChain:t=>Kl(e,t),deployContract:t=>bh(e,t),getAddresses:()=>yh(e),getChainId:()=>kn(e),getPermissions:()=>gh(e),prepareTransactionRequest:t=>sr(e,t),requestAddresses:()=>mh(e),requestPermissions:t=>wh(e,t),sendRawTransaction:t=>Hs(e,t),sendTransaction:t=>Gs(e,t),signMessage:t=>vh(e,t),signTransaction:t=>xh(e,t),signTypedData:t=>Eh(e,t),switchChain:t=>Ph(e,t),watchAsset:t=>Ah(e,t),writeContract:t=>Hl(e,t)}}function Ih(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return ka({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(Bh)}const Lr=Tf({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}});function sc(){return K(Wt.utils.randomPrivateKey())}function Th(e){if(typeof e=="string"){if(!oe(e,{strict:!1}))throw new fe({address:e});return{address:e,type:"json-rpc"}}if(!oe(e.address,{strict:!1}))throw new fe({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}let kh=!1;async function Mn({hash:e,privateKey:t,to:n="object"}){const{r,s,recovery:o}=Wt.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:kh}),i={r:V(r,{size:32}),s:V(s,{size:32}),v:o?28n:27n,yParity:o};return n==="bytes"||n==="hex"?nc({...i,to:n}):i}async function $h(e){const{contractAddress:t,chainId:n,nonce:r,privateKey:s,to:o="object"}=e,i=await Mn({hash:ra({contractAddress:t,chainId:n,nonce:r}),privateKey:s,to:o});return o==="object"?{contractAddress:t,chainId:n,nonce:r,...i}:i}async function Sh({message:e,privateKey:t}){return await Mn({hash:Zs(e),privateKey:t,to:"hex"})}async function Ch(e){const{privateKey:t,transaction:n,serializer:r=Kf}=e,s=n.type==="eip4844"?{...n,sidecars:!1}:n,o=await Mn({hash:ae(r(s)),privateKey:t});return r(n,o)}async function _h(e){const{privateKey:t,...n}=e;return await Mn({hash:Ma(n),privateKey:t,to:"hex"})}function zr(e,t={}){const{nonceManager:n}=t,r=K(Wt.getPublicKey(e.slice(2),!1)),s=Qi(r);return{...Th({address:s,nonceManager:n,async sign({hash:i}){return Mn({hash:i,privateKey:e,to:"hex"})},async experimental_signAuthorization(i){return $h({...i,privateKey:e})},async signMessage({message:i}){return Sh({message:i,privateKey:e})},async signTransaction(i,{serializer:a}={}){return Ch({privateKey:e,transaction:i,serializer:a})},async signTypedData(i){return _h({...i,privateKey:e})}}),publicKey:r,source:"privateKey"}}function Or(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function oc(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ye(e,...t){if(!oc(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Yo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Nh(e,t){ye(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Jo(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const st=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Fh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Mh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Mh)throw new Error("Non little-endian hardware is not supported");const Rh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xo(e){ye(e);let t="";for(let n=0;n<e.length;n++)t+=Rh[e[n]];return t}const De={_0:48,_9:57,A:65,F:70,a:97,f:102};function Qo(e){if(e>=De._0&&e<=De._9)return e-De._0;if(e>=De.A&&e<=De.F)return e-(De.A-10);if(e>=De.a&&e<=De.f)return e-(De.a-10)}function ei(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Qo(e.charCodeAt(o)),a=Qo(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function bs(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function ys(e){if(typeof e=="string")e=bs(e);else if(oc(e))e=gs(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function Lh(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function zh(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const Oh=(e,t)=>{function n(r,...s){if(ye(r),e.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");e.varSizeNonce?ye(l):ye(l,e.nonceLength)}const o=e.tagLength;o&&s[1]!==void 0&&ye(s[1]);const i=t(r,...s),a=(l,d)=>{if(d!==void 0){if(l!==2)throw new Error("cipher output not supported");ye(d)}};let c=!1;return{encrypt(l,d){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ye(l),a(i.encrypt.length,d),i.encrypt(l,d)},decrypt(l,d){if(ye(l),o&&l.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return a(i.decrypt.length,d),i.decrypt(l,d)}}}return Object.assign(n,e),n};function ti(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Uh(t))throw new Error("invalid output, must be aligned");return t}function ni(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=4,u=0;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}function Uh(e){return e.byteOffset%4===0}function gs(e){return Uint8Array.from(e)}function jt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const ic=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),jh=ic("expand 16-byte k"),Dh=ic("expand 32-byte k"),Hh=st(jh),Gh=st(Dh);function O(e,t){return e<<t|e>>>32-t}function ms(e){return e.byteOffset%4===0}const jn=64,qh=16,ac=2**32-1,ri=new Uint32Array;function Vh(e,t,n,r,s,o,i,a){const c=s.length,u=new Uint8Array(jn),l=st(u),d=ms(s)&&ms(o),f=d?st(s):ri,h=d?st(o):ri;for(let y=0;y<c;i++){if(e(t,n,r,l,i,a),i>=ac)throw new Error("arx: counter overflow");const b=Math.min(jn,c-y);if(d&&b===jn){const p=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let g=0,m;g<qh;g++)m=p+g,h[m]=f[m]^l[g];y+=jn;continue}for(let p=0,g;p<b;p++)g=y+p,o[g]=s[g]^u[p];y+=b}}function Kh(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:i}=Lh({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Or(s),Or(i),Jo(o),Jo(n),(a,c,u,l,d=0)=>{ye(a),ye(c),ye(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),ye(l),Or(d),d<0||d>=ac)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const h=[];let y=a.length,b,p;if(y===32)h.push(b=gs(a)),p=Gh;else if(y===16&&n)b=new Uint8Array(32),b.set(a),b.set(a,16),p=Hh,h.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);ms(c)||h.push(c=gs(c));const g=st(b);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,g,st(c.subarray(0,16)),g),c=c.subarray(16)}const m=16-s;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const A=new Uint8Array(12);A.set(c,o?0:12-c.length),c=A,h.push(c)}const w=st(c);return Vh(e,p,g,w,u,l,d,i),jt(...h),l}}const le=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Zh{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=ys(t),ye(t,32);const n=le(t,0),r=le(t,2),s=le(t,4),o=le(t,6),i=le(t,8),a=le(t,10),c=le(t,12),u=le(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=le(t,16+2*l)}process(t,n,r=!1){const s=r?0:2048,{h:o,r:i}=this,a=i[0],c=i[1],u=i[2],l=i[3],d=i[4],f=i[5],h=i[6],y=i[7],b=i[8],p=i[9],g=le(t,n+0),m=le(t,n+2),w=le(t,n+4),A=le(t,n+6),$=le(t,n+8),v=le(t,n+10),E=le(t,n+12),P=le(t,n+14);let x=o[0]+(g&8191),N=o[1]+((g>>>13|m<<3)&8191),_=o[2]+((m>>>10|w<<6)&8191),C=o[3]+((w>>>7|A<<9)&8191),U=o[4]+((A>>>4|$<<12)&8191),B=o[5]+($>>>1&8191),S=o[6]+(($>>>14|v<<2)&8191),T=o[7]+((v>>>11|E<<5)&8191),F=o[8]+((E>>>8|P<<8)&8191),z=o[9]+(P>>>5|s),M=0,R=M+x*a+N*(5*p)+_*(5*b)+C*(5*y)+U*(5*h);M=R>>>13,R&=8191,R+=B*(5*f)+S*(5*d)+T*(5*l)+F*(5*u)+z*(5*c),M+=R>>>13,R&=8191;let j=M+x*c+N*a+_*(5*p)+C*(5*b)+U*(5*y);M=j>>>13,j&=8191,j+=B*(5*h)+S*(5*f)+T*(5*d)+F*(5*l)+z*(5*u),M+=j>>>13,j&=8191;let L=M+x*u+N*c+_*a+C*(5*p)+U*(5*b);M=L>>>13,L&=8191,L+=B*(5*y)+S*(5*h)+T*(5*f)+F*(5*d)+z*(5*l),M+=L>>>13,L&=8191;let W=M+x*l+N*u+_*c+C*a+U*(5*p);M=W>>>13,W&=8191,W+=B*(5*b)+S*(5*y)+T*(5*h)+F*(5*f)+z*(5*d),M+=W>>>13,W&=8191;let Y=M+x*d+N*l+_*u+C*c+U*a;M=Y>>>13,Y&=8191,Y+=B*(5*p)+S*(5*b)+T*(5*y)+F*(5*h)+z*(5*f),M+=Y>>>13,Y&=8191;let ee=M+x*f+N*d+_*l+C*u+U*c;M=ee>>>13,ee&=8191,ee+=B*a+S*(5*p)+T*(5*b)+F*(5*y)+z*(5*h),M+=ee>>>13,ee&=8191;let ie=M+x*h+N*f+_*d+C*l+U*u;M=ie>>>13,ie&=8191,ie+=B*c+S*a+T*(5*p)+F*(5*b)+z*(5*y),M+=ie>>>13,ie&=8191;let Ce=M+x*y+N*h+_*f+C*d+U*l;M=Ce>>>13,Ce&=8191,Ce+=B*u+S*c+T*a+F*(5*p)+z*(5*b),M+=Ce>>>13,Ce&=8191;let he=M+x*b+N*y+_*h+C*f+U*d;M=he>>>13,he&=8191,he+=B*l+S*u+T*c+F*a+z*(5*p),M+=he>>>13,he&=8191;let ve=M+x*p+N*b+_*y+C*h+U*f;M=ve>>>13,ve&=8191,ve+=B*d+S*l+T*u+F*c+z*a,M+=ve>>>13,ve&=8191,M=(M<<2)+M|0,M=M+R|0,R=M&8191,M=M>>>13,j+=M,o[0]=R,o[1]=j,o[2]=L,o[3]=W,o[4]=Y,o[5]=ee,o[6]=ie,o[7]=Ce,o[8]=he,o[9]=ve}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=s,s=t[a]>>>13,t[a]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let o=(s^1)-1;for(let a=0;a<10;a++)r[a]&=o;o=~o;for(let a=0;a<10;a++)t[a]=t[a]&o|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let i=t[0]+n[0];t[0]=i&65535;for(let a=1;a<8;a++)i=(t[a]+n[a]|0)+(i>>>16)|0,t[a]=i&65535;jt(r)}update(t){Yo(this);const{buffer:n,blockLen:r}=this;t=ys(t);const s=t.length;for(let o=0;o<s;){const i=Math.min(r-this.pos,s-o);if(i===r){for(;r<=s-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){jt(this.h,this.r,this.buffer,this.pad)}digestInto(t){Yo(this),Nh(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)t[o++]=r[i]>>>0,t[o++]=r[i]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Wh(e){const t=(r,s)=>e(s).update(ys(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Yh=Wh(e=>new Zh(e));function Jh(e,t,n,r,s,o=20){let i=e[0],a=e[1],c=e[2],u=e[3],l=t[0],d=t[1],f=t[2],h=t[3],y=t[4],b=t[5],p=t[6],g=t[7],m=s,w=n[0],A=n[1],$=n[2],v=i,E=a,P=c,x=u,N=l,_=d,C=f,U=h,B=y,S=b,T=p,F=g,z=m,M=w,R=A,j=$;for(let W=0;W<o;W+=2)v=v+N|0,z=O(z^v,16),B=B+z|0,N=O(N^B,12),v=v+N|0,z=O(z^v,8),B=B+z|0,N=O(N^B,7),E=E+_|0,M=O(M^E,16),S=S+M|0,_=O(_^S,12),E=E+_|0,M=O(M^E,8),S=S+M|0,_=O(_^S,7),P=P+C|0,R=O(R^P,16),T=T+R|0,C=O(C^T,12),P=P+C|0,R=O(R^P,8),T=T+R|0,C=O(C^T,7),x=x+U|0,j=O(j^x,16),F=F+j|0,U=O(U^F,12),x=x+U|0,j=O(j^x,8),F=F+j|0,U=O(U^F,7),v=v+_|0,j=O(j^v,16),T=T+j|0,_=O(_^T,12),v=v+_|0,j=O(j^v,8),T=T+j|0,_=O(_^T,7),E=E+C|0,z=O(z^E,16),F=F+z|0,C=O(C^F,12),E=E+C|0,z=O(z^E,8),F=F+z|0,C=O(C^F,7),P=P+U|0,M=O(M^P,16),B=B+M|0,U=O(U^B,12),P=P+U|0,M=O(M^P,8),B=B+M|0,U=O(U^B,7),x=x+N|0,R=O(R^x,16),S=S+R|0,N=O(N^S,12),x=x+N|0,R=O(R^x,8),S=S+R|0,N=O(N^S,7);let L=0;r[L++]=i+v|0,r[L++]=a+E|0,r[L++]=c+P|0,r[L++]=u+x|0,r[L++]=l+N|0,r[L++]=d+_|0,r[L++]=f+C|0,r[L++]=h+U|0,r[L++]=y+B|0,r[L++]=b+S|0,r[L++]=p+T|0,r[L++]=g+F|0,r[L++]=m+z|0,r[L++]=w+M|0,r[L++]=A+R|0,r[L++]=$+j|0}function Xh(e,t,n,r){let s=e[0],o=e[1],i=e[2],a=e[3],c=t[0],u=t[1],l=t[2],d=t[3],f=t[4],h=t[5],y=t[6],b=t[7],p=n[0],g=n[1],m=n[2],w=n[3];for(let $=0;$<20;$+=2)s=s+c|0,p=O(p^s,16),f=f+p|0,c=O(c^f,12),s=s+c|0,p=O(p^s,8),f=f+p|0,c=O(c^f,7),o=o+u|0,g=O(g^o,16),h=h+g|0,u=O(u^h,12),o=o+u|0,g=O(g^o,8),h=h+g|0,u=O(u^h,7),i=i+l|0,m=O(m^i,16),y=y+m|0,l=O(l^y,12),i=i+l|0,m=O(m^i,8),y=y+m|0,l=O(l^y,7),a=a+d|0,w=O(w^a,16),b=b+w|0,d=O(d^b,12),a=a+d|0,w=O(w^a,8),b=b+w|0,d=O(d^b,7),s=s+u|0,w=O(w^s,16),y=y+w|0,u=O(u^y,12),s=s+u|0,w=O(w^s,8),y=y+w|0,u=O(u^y,7),o=o+l|0,p=O(p^o,16),b=b+p|0,l=O(l^b,12),o=o+l|0,p=O(p^o,8),b=b+p|0,l=O(l^b,7),i=i+d|0,g=O(g^i,16),f=f+g|0,d=O(d^f,12),i=i+d|0,g=O(g^i,8),f=f+g|0,d=O(d^f,7),a=a+c|0,m=O(m^a,16),h=h+m|0,c=O(c^h,12),a=a+c|0,m=O(m^a,8),h=h+m|0,c=O(c^h,7);let A=0;r[A++]=s,r[A++]=o,r[A++]=i,r[A++]=a,r[A++]=p,r[A++]=g,r[A++]=m,r[A++]=w}const Qh=Kh(Jh,{counterRight:!1,counterLength:8,extendNonceFn:Xh,allowShortKeys:!1}),ep=new Uint8Array(16),si=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(ep.subarray(n))},tp=new Uint8Array(32);function oi(e,t,n,r,s){const o=e(t,n,tp),i=Yh.create(o);s&&si(i,s),si(i,r);const a=new Uint8Array(16),c=Fh(a);ni(c,0,BigInt(s?s.length:0),!0),ni(c,8,BigInt(r.length),!0),i.update(a);const u=i.digest();return jt(o,a),u}const np=e=>(t,n,r)=>({encrypt(o,i){const a=o.length;i=ti(a+16,i,!1),i.set(o);const c=i.subarray(0,-16);e(t,n,c,c,1);const u=oi(e,t,n,c,r);return i.set(u,a),jt(u),i},decrypt(o,i){i=ti(o.length-16,i,!1);const a=o.subarray(0,-16),c=o.subarray(-16),u=oi(e,t,n,a,r);if(!zh(c,u))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),e(t,n,i,i,1),jt(u),i}}),ii=Oh({blockSize:64,nonceLength:24,tagLength:16},np(Qh)),Bt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function rp(e=32){if(Bt&&typeof Bt.getRandomValues=="function")return Bt.getRandomValues(new Uint8Array(e));if(Bt&&typeof Bt.randomBytes=="function")return Bt.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class sp{generateSecurePrivateKey(){return sc()}base64ToHex(t){if(!t)throw new Error("Invalid input: empty string");try{const n=atob(t);let r="";for(let s=0;s<n.length;s++){const o=n.charCodeAt(s).toString(16);r+=o.length===2?o:"0"+o}return r.toLowerCase()}catch{throw new Error("Invalid base64 string")}}base64ToBase10(t){if(!t)throw new Error("Invalid input: empty string");const n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",r=n.length;let s=0;for(const o of t){const i=n.indexOf(o);if(i===-1)throw new Error("Invalid character in string");s=s*r+i}if(s<0)throw new Error("Invalid numeric result");return s}encryptPrivateKey(t,n){if(!this.validatePin(n))throw new Error("Invalid PIN format");if(!t.match(/^0x[a-f0-9]{64}$/i))throw new Error("Invalid private key format");try{const r=bs(n.padEnd(32,"0")),s=rp(24),o=ii(r,s),i=ei(t),a=o.encrypt(i),c=new Uint8Array(s.length+a.length);return c.set(s),c.set(a,s.length),Xo(c)}catch{throw new Error("Encryption failed")}}decryptPrivateKey(t,n){if(!this.validatePin(n))throw new Error("Invalid PIN format");if(!t.match(/^0x[a-f0-9]+$/i))throw new Error("Invalid encrypted key format");try{const r=ei(t),s=r.slice(0,24),o=r.slice(24),i=bs(n.padEnd(32,"0")),c=ii(i,s).decrypt(o),u=Xo(c);if(!u.match(/^0x[a-f0-9]{64}$/i))throw new Error("Decrypted key is invalid");return u}catch{throw new Error("Decryption failed")}}parseCardData(t){if(!t)return null;try{const[n,r,s]=t.replace("#","").split(":");if(!n||!r||!s)throw new Error("Missing card data");const o=`0x${this.base64ToHex(n)}`;if(!oe(o))throw new Error("Invalid public address");const i=this.base64ToBase10(s);if(i<0)throw new Error("Invalid card ID");return{pub:o,priv:r,id:i}}catch{return null}}formatCardId(t){if(t<0)throw new Error("Invalid card ID");return t.toString().padStart(4,"0")}validatePin(t){return/^\d{6}$/.test(t)}isValidPrivateKey(t){return/^0x[a-f0-9]{64}$/i.test(t)}}const ke=new sp;class op{publicClient;walletClient=null;constructor(){this.publicClient=ph({chain:Lr,transport:Lo()}),this.walletClient=Ih({chain:Lr,transport:Lo()})}async importPrivateKey(t,n){try{t.startsWith("0x")||(t=`0x${t}`);const r=t,s=zr(r),o=ke.encryptPrivateKey(r,n),i=await this.getBalance(s.address);return{address:s.address,encryptedKey:o,balance:i}}catch(r){throw r instanceof Error?new Error(`Failed to import private key: ${r.message}`):new Error("Failed to import private key")}}async createAccount(t){const n=sc(),r=zr(n),s=ke.encryptPrivateKey(n,t);return{address:r.address,encryptedKey:s}}async getBalance(t){const n=await this.publicClient.getBalance({address:t});return er(n)}async sendTransaction(t,n,r,s){if(!this.walletClient)throw new Error("Wallet client not initialized");const o=ke.decryptPrivateKey(t,n),i=zr(o),a=t0(s);return await this.walletClient.sendTransaction({account:i,to:r,value:a,chain:Lr})}async getTransactionReceipt(t){return this.publicClient.getTransactionReceipt({hash:t})}}const Re=new op;function ip(){const e=kt({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),t=kt(!1),n=kt(0),r=3,s=Hn(e,d=>d.address?`${d.address.slice(0,6)}...${d.address.slice(-4)}`:""),o=Hn(n,d=>d>=r);async function i(d){try{t.set(!0);const f=ke.parseCardData(d);if(!f)throw new Error("Invalid card data");const h=await Re.getBalance(f.pub);e.update(y=>({...y,id:f.id.toString(),address:f.pub,encryptedKey:f.priv,balance:h,isLocked:!0,error:null}))}catch(f){e.update(h=>({...h,error:f instanceof Error?f.message:"Failed to load card"}))}finally{t.set(!1)}}async function a(d){if(pe(n)>=r)return e.update(h=>({...h,error:"Too many attempts. Card is blocked."})),!1;if(!pe(e).encryptedKey)return e.update(h=>({...h,error:"No card loaded"})),!1;try{return ke.validatePin(d)?(e.update(y=>({...y,isLocked:!1,error:null})),n.set(0),!0):(n.update(y=>y+1),e.update(y=>({...y,error:`Invalid PIN. ${r-pe(n)-1} attempts remaining.`})),!1)}catch{return e.update(y=>({...y,error:"Failed to validate PIN"})),!1}}async function c(d,f,h){const y=pe(e);if(y.isLocked||!y.address||!y.encryptedKey)return e.update(b=>({...b,error:"Card is locked or invalid"})),null;try{e.update(p=>({...p,error:null}));const b=await Re.sendTransaction(y.encryptedKey,h,d,f);return await u(),e.update(p=>({...p,lastTransaction:b})),b}catch(b){return e.update(p=>({...p,error:b instanceof Error?b.message:"Transaction failed"})),null}}async function u(){const d=pe(e);if(d.address)try{const f=await Re.getBalance(d.address);e.update(h=>({...h,balance:f,error:null}))}catch{e.update(h=>({...h,error:"Failed to refresh balance"}))}}function l(){e.set({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),n.set(0)}return{subscribe:e.subscribe,initFromHash:i,unlock:a,sendTransaction:c,refreshBalance:u,reset:l,isLoading:{subscribe:t.subscribe},isBlocked:{subscribe:o.subscribe},formattedAddress:{subscribe:s.subscribe}}}const ap=ip(),cp=!0,up=async()=>(window.location.hash&&await ap.init(window.location.hash.slice(1)),{hash:window.location.hash||""}),Qp=Object.freeze(Object.defineProperty({__proto__:null,load:up,prerender:cp},Symbol.toStringTag,{value:"Module"}));function dp(){return window.location.hash.slice(1)}var lp=Q(`// lib/components/card/CardHeader.svelte <div class="p-6 border-b dark:border-gray-700"><div class="flex justify-between items-start"><div><h2 class="text-2xl font-bold dark:text-white"> </h2> <p class="text-sm font-mono mt-2 text-gray-600 dark:text-gray-400 
                select-all cursor-pointer svelte-1xk9rgp"> </p></div> <div class="text-right"><p class="text-xl font-bold dark:text-white"> </p> <p class="text-sm text-gray-600 dark:text-gray-400">Balance</p></div></div></div>`,1);function fp(e,t){ut(t,!0),ot();var n=lp(),r=D(Ke(n)),s=G(r),o=G(s),i=G(o),a=G(i);q(i);var c=D(i,2),u=G(c,!0);q(c),q(o);var l=D(o,2),d=G(l),f=G(d);q(d),ot(2),q(l),q(s),q(r),Le(()=>{xe(a,`Card #${t.formattedId??""}`),xe(u,t.address),xe(f,`${t.balance??""} MATIC`)}),J(e,n),dt()}var hp=Q('<button class="card-button card-button-primary svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">lock_open</span> <span class="label svelte-1y1bgjs">Unlock</span></button>'),pp=()=>window.dispatchEvent(new CustomEvent("open-payment")),bp=Q('<button class="card-button card-button-primary svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">send</span> <span class="label svelte-1y1bgjs">Send</span></button>'),yp=Q('// lib/components/card/CardActions.svelte <div class="px-6 pb-6"><div class="grid grid-cols-2 gap-4"><!> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">qr_code_2</span> <span class="label svelte-1y1bgjs">QR Code</span></button> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">content_copy</span> <span class="label svelte-1y1bgjs">Copy</span></button> <button class="card-button svelte-1y1bgjs"><span class="icon svelte-1y1bgjs">open_in_new</span> <span class="label svelte-1y1bgjs">Explorer</span></button></div></div>',1);function gp(e,t){ut(t,!0),ot();var n=yp(),r=D(Ke(n)),s=G(r),o=G(s);{var i=d=>{var f=hp();f.__click=function(...h){t.onUnlock?.apply(this,h)},J(d,f)},a=d=>{var f=bp();f.__click=[pp],J(d,f)};re(o,d=>{t.isLocked?d(i):d(a,!1)})}var c=D(o,2);c.__click=function(...d){t.onToggleQR?.apply(this,d)};var u=D(c,2);u.__click=function(...d){t.onCopy?.apply(this,d)};var l=D(u,2);l.__click=function(...d){t.onExplorer?.apply(this,d)},q(s),q(r),J(e,n),dt()}Dt(["click"]);var mp=Q(`// lib/components/card/CardQR.svelte <div class="p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-semibold dark:text-white">Scan Address</h3> <button class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700
             transition-colors duration-200"><span class="material-icons text-gray-600 dark:text-gray-300">close</span></button></div> <div class="flex justify-center"><div class="qr-container svelte-wa451t"><!></div></div> <p class="text-center mt-4 text-sm text-gray-600 dark:text-gray-400">Scan this QR code to get the card's address</p></div>`,1);function wp(e,t){ut(t,!0),ot();var n=mp(),r=D(Ke(n)),s=G(r),o=D(G(s),2);o.__click=function(...u){t.onClose?.apply(this,u)},q(s);var i=D(s,2),a=G(i),c=G(a);ci(c,()=>children),q(a),q(i),ot(2),q(r),J(e,n),dt()}Dt(["click"]);function vp(e){return`
    <svg 
      viewBox="0 0 100 100"
      xmlns="http://www.w3.org/2000/svg"
      class="w-full max-w-[200px] mx-auto"
    >
      <rect width="100" height="100" fill="currentColor" class="text-white dark:text-gray-800"/>
      <text
        x="50"
        y="50"
        text-anchor="middle"
        class="text-xs text-gray-800 dark:text-gray-200"
      >
        ${e}
      </text>
    </svg>
  `}var xp=Q('// lib/components/Card.svelte <div class="card bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"><!> <!></div>',1);function Ep(e,t){ut(t,!0);let n=X("0"),r=X(!0),s=X(!1),o=X(null);Ec(async()=>{if(t.address)try{Z(n,qe(await Re.getBalance(t.address)))}catch{Z(o,"Failed to load balance")}});function i(){navigator.clipboard.writeText(t.address)}function a(){window.open(`https://polygonscan.com/address/${t.address}`,"_blank")}function c(){Z(s,!k(s))}ot();var u=xp(),l=D(Ke(u)),d=G(l),f=ge(()=>t.isDarkMode??!1);fp(d,{get formattedId(){return t.formattedId},get balance(){return k(n)},get address(){return t.address},get isDarkMode(){return k(f)}});var h=D(d,2);{var y=p=>{var g=ge(()=>t.isDarkMode??!1);wp(p,{onClose:c,get isDarkMode(){return k(g)},children:(m,w)=>{var A=Ur(),$=Ke(A);ci($,()=>vp(t.address)),J(m,A)},$$slots:{default:!0}})},b=p=>{var g=ge(()=>t.isDarkMode??!1);gp(p,{get isLocked(){return k(r)},onCopy:i,onExplorer:a,onToggleQR:c,onUnlock:()=>Z(r,!k(r)),get isDarkMode(){return k(g)}})};re(h,p=>{k(s)?p(y):p(b,!1)})}q(l),J(e,u),dt()}var Pp=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4"> </div>`),Ap=Q('<p class="mt-2 text-sm text-gray-600 dark:text-gray-400"> </p>'),Bp=Q(`// lib/components/modals/PinModal.svelte <div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 
            backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Enter PIN</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300 transition-colors"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label for="pin-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">PIN Code</label> <input id="pin-input" type="password" inputmode="numeric" pattern="\\d*" maxlength="6" placeholder="******" class="input svelte-1w4h80i" autocomplete="off"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary svelte-1w4h80i">Cancel</button> <button type="submit" class="btn btn-primary svelte-1w4h80i"> </button></div></form></div></div>`,1);function cc(e,t){ut(t,!0);let n=X(""),r=X(null),s=X(!1),o=ge(()=>ke.validatePin(k(n))),i=ge(()=>()=>t.remainingAttempts===void 0?"":`${t.remainingAttempts} attempts remaining`);async function a(P){if(P.preventDefault(),!(!k(o)||k(s))){Z(s,!0),Z(r,null);try{await t.onSubmit(k(n)),Z(n,"")}catch(x){Z(r,qe(x instanceof Error?x.message:"Invalid PIN")),Z(n,"")}finally{Z(s,!1)}}}ot();var c=Bp(),u=D(Ke(c)),l=G(u),d=G(l),f=D(G(d),2);f.__click=function(...P){t.onClose?.apply(this,P)},q(d);var h=D(d,2);{var y=P=>{var x=Pp(),N=G(x,!0);q(x),Le(()=>xe(N,k(r))),J(P,x)};re(h,P=>{k(r)&&P(y)})}var b=D(h,2),p=G(b),g=D(G(p),2);$t(g);var m=D(g,2);{var w=P=>{var x=Ap(),N=G(x,!0);q(x),Le(()=>xe(N,k(i))),J(P,x)};re(m,P=>{k(i)&&P(w)})}q(p);var A=D(p,2),$=G(A);$.__click=function(...P){t.onClose?.apply(this,P)};var v=D($,2),E=G(v,!0);q(v),q(A),q(b),q(l),q(u),Le(()=>{g.disabled=k(s),St(g,"error",k(n)&&!k(o)),$.disabled=k(s),v.disabled=!k(o)||k(s),xe(E,k(s)?"Validating...":"Submit")}),ws("submit",b,a),Ct(g,()=>k(n),P=>Z(n,P)),J(e,c),dt()}Dt(["click"]);var Ip=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4"> </div>`),Tp=Q('<p class="form-error svelte-jnuz5k">Invalid address format</p>'),kp=Q('<p class="form-error svelte-jnuz5k"><!></p>'),$p=Q(`// lib/components/Payment.svelte <div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 
            backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Send MATIC</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label class="form-label svelte-jnuz5k" for="recipient">Recipient Address</label> <input id="recipient" type="text" placeholder="0x..." class="form-input svelte-jnuz5k"> <!></div> <div><label class="form-label svelte-jnuz5k" for="amount">Amount (MATIC)</label> <input id="amount" type="number" step="0.000001" min="0" placeholder="0.0" class="form-input svelte-jnuz5k"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form> <p class="mt-4 text-sm text-gray-500 dark:text-gray-400"> </p></div></div> <!>`,1);function Sp(e,t){ut(t,!0);let n=X(""),r=X(""),s=X(null),o=X(!1),i=X(!1),a=ge(()=>()=>k(n)?oe(k(n)):!1),c=ge(()=>()=>{const R=parseFloat(k(r));return!isNaN(R)&&R>0&&R<=parseFloat(t.balance)}),u=ge(()=>()=>k(a)()&&k(c)()&&!k(i));async function l(R){R.preventDefault(),k(u)&&Z(o,!0)}async function d(R){try{Z(i,!0),Z(s,null),await Re.sendTransaction(t.encryptedKey,R,k(n),k(r))&&t.onClose()}catch(j){Z(s,qe(j instanceof Error?j.message:"Payment failed")),Z(o,!1)}finally{Z(i,!1)}}ot();var f=$p(),h=D(Ke(f)),y=G(h),b=G(y),p=D(G(b),2);p.__click=function(...R){t.onClose?.apply(this,R)},q(b);var g=D(b,2);{var m=R=>{var j=Ip(),L=G(j,!0);q(j),Le(()=>xe(L,k(s))),J(R,j)};re(g,R=>{k(s)&&R(m)})}var w=D(g,2),A=G(w),$=D(G(A),2);$t($);var v=D($,2);{var E=R=>{var j=Tp();J(R,j)};re(v,R=>{k(n)&&!k(a)&&R(E)})}q(A);var P=D(A,2),x=D(G(P),2);$t(x);var N=D(x,2);{var _=R=>{var j=kp(),L=G(j);{var W=ee=>{var ie=oo("Insufficient balance");J(ee,ie)},Y=ee=>{var ie=oo("Invalid amount");J(ee,ie)};re(L,ee=>{parseFloat(k(r))>parseFloat(t.balance)?ee(W):ee(Y,!1)})}q(j),J(R,j)};re(N,R=>{k(r)&&!k(c)&&R(_)})}q(P);var C=D(P,2),U=G(C);U.__click=function(...R){t.onClose?.apply(this,R)};var B=D(U,2),S=G(B,!0);q(B),q(C),q(w);var T=D(w,2),F=G(T);q(T),q(y),q(h);var z=D(h,2);{var M=R=>{cc(R,{onSubmit:d,onClose:()=>Z(o,!1),remainingAttempts:3})};re(z,R=>{k(o)&&R(M)})}Le(()=>{$.disabled=k(i),St($,"error",k(n)&&!k(a)),Dr(x,"max",t.balance),x.disabled=k(i),St(x,"error",k(r)&&!k(c)),U.disabled=k(i),B.disabled=!k(u),xe(S,k(i)?"Processing...":"Continue"),xe(F,`Available balance: ${t.balance??""} MATIC`)}),ws("submit",w,l),Ct($,()=>k(n),R=>Z(n,R)),Ct(x,()=>k(r),R=>Z(r,R)),J(e,f),dt()}Dt(["click"]);var Cp=Q(`<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 
                  dark:border-red-800 text-red-700 dark:text-red-100 
                  px-4 py-3 rounded mb-4" role="alert"> </div>`),_p=Q('<p class="form-error svelte-1err1e3">Invalid private key format</p>'),Np=Q('<p class="form-error svelte-1err1e3">PIN must be exactly 6 digits</p>'),Fp=Q('<p class="form-error svelte-1err1e3">PINs do not match</p>'),Mp=Q(`<div class="mt-4 p-3 bg-green-100 dark:bg-green-900/50 
                  border border-green-400 dark:border-green-800 
                  text-green-700 dark:text-green-100 rounded" role="status"><p class="text-sm font-medium">Successfully imported wallet:</p> <p class="text-xs font-mono mt-1"> </p></div>`),Rp=Q(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 backdrop-blur-sm z-50"><div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold dark:text-white">Import Private Key</h2> <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 
               dark:hover:text-gray-300" aria-label="Close"><span class="material-icons">close</span></button></div> <!> <form class="space-y-4"><div><label for="private-key" class="form-label svelte-1err1e3">Private Key</label> <input id="private-key" type="password" placeholder="0x..." autocomplete="off" class="form-input svelte-1err1e3"> <!></div> <div><label for="pin" class="form-label svelte-1err1e3">PIN (6 digits)</label> <input id="pin" type="password" inputmode="numeric" maxlength="6" placeholder="******" class="form-input text-center tracking-widest svelte-1err1e3"> <!></div> <div><label for="confirm-pin" class="form-label svelte-1err1e3">Confirm PIN</label> <input id="confirm-pin" type="password" inputmode="numeric" maxlength="6" placeholder="******" class="form-input text-center tracking-widest svelte-1err1e3"> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form> <!></div></div>`);function Lp(e,t){ut(t,!0);let n=X(""),r=X(""),s=X(""),o=X(null),i=X(null),a=X(!1),c=ge(()=>ke.isValidPrivateKey(k(n))),u=ge(()=>ke.validatePin(k(r))),l=ge(()=>k(r)===k(s)),d=ge(()=>k(c)&&k(u)&&k(l)&&!k(a));async function f(L){if(L.preventDefault(),!!k(d))try{Z(a,!0),Z(o,null);const W=await Re.importPrivateKey(k(n),k(r));Z(i,qe(W.address)),t.onImport&&t.onImport(W.address),Z(n,""),Z(r,""),Z(s,""),setTimeout(t.onClose,1500)}catch(W){Z(o,qe(W instanceof Error?W.message:"Failed to import private key"))}finally{Z(a,!1)}}var h=Rp(),y=G(h),b=G(y),p=D(G(b),2);p.__click=function(...L){t.onClose?.apply(this,L)},q(b);var g=D(b,2);{var m=L=>{var W=Cp(),Y=G(W,!0);q(W),Le(()=>xe(Y,k(o))),J(L,W)};re(g,L=>{k(o)&&L(m)})}var w=D(g,2),A=G(w),$=D(G(A),2);$t($);var v=D($,2);{var E=L=>{var W=_p();J(L,W)};re(v,L=>{k(n)&&!k(c)&&L(E)})}q(A);var P=D(A,2),x=D(G(P),2);$t(x),Dr(x,"pattern","\\d6");var N=D(x,2);{var _=L=>{var W=Np();J(L,W)};re(N,L=>{k(r)&&!k(u)&&L(_)})}q(P);var C=D(P,2),U=D(G(C),2);$t(U),Dr(U,"pattern","\\d6");var B=D(U,2);{var S=L=>{var W=Fp();J(L,W)};re(B,L=>{k(s)&&!k(l)&&L(S)})}q(C);var T=D(C,2),F=G(T);F.__click=function(...L){t.onClose?.apply(this,L)};var z=D(F,2),M=G(z,!0);q(z),q(T),q(w);var R=D(w,2);{var j=L=>{var W=Mp(),Y=D(G(W),2),ee=G(Y,!0);q(Y),q(W),Le(()=>xe(ee,k(i))),J(L,W)};re(R,L=>{k(i)&&L(j)})}q(y),q(h),Le(()=>{$.disabled=k(a),St($,"error",k(n)&&!k(c)),x.disabled=k(a),St(x,"error",k(r)&&!k(u)),U.disabled=k(a),St(U,"error",k(s)&&!k(l)),F.disabled=k(a),z.disabled=!k(d),xe(M,k(a)?"Importing...":"Import")}),ws("submit",w,f),Ct($,()=>k(n),L=>Z(n,L)),Ct(x,()=>k(r),L=>Z(r,L)),Ct(U,()=>k(s),L=>Z(s,L)),J(e,h),dt()}Dt(["click"]);function zp(){const e=kt({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),t=kt(!1),n=kt(0),r=3,s=Hn(e,f=>f.address?`${f.address.slice(0,6)}...${f.address.slice(-4)}`:""),o=Hn(n,f=>f>=r);async function i(f){try{t.set(!0),e.update(b=>({...b,error:null}));const h=ke.parseCardData(f);if(!h)throw new Error("Invalid card data");const y=await Re.getBalance(h.pub);e.set({id:h.id.toString(),address:h.pub,encryptedKey:h.priv,balance:y,isLocked:!0,error:null,lastTransaction:null})}catch(h){e.update(y=>({...y,error:h instanceof Error?h.message:"Failed to load card"}))}finally{t.set(!1)}}async function a(f,h){try{t.set(!0),e.update(p=>({...p,error:null}));const y=await Re.getBalance(f),b=Date.now().toString();return e.set({id:b,address:f,encryptedKey:h,balance:y,isLocked:!0,error:null,lastTransaction:null}),!0}catch(y){return e.update(b=>({...b,error:y instanceof Error?y.message:"Failed to import wallet"})),!1}finally{t.set(!1)}}async function c(f){if(pe(o))return e.update(y=>({...y,error:"Too many attempts. Card is blocked."})),!1;const h=pe(e);if(!h.encryptedKey)return e.update(y=>({...y,error:"No card loaded"})),!1;try{if(!ke.validatePin(f))return n.update(b=>b+1),e.update(b=>({...b,error:`Invalid PIN. ${r-pe(n)} attempts remaining.`})),!1;try{ke.decryptPrivateKey(h.encryptedKey,f)}catch{return n.update(b=>b+1),e.update(b=>({...b,error:`Invalid PIN. ${r-pe(n)} attempts remaining.`})),!1}return e.update(b=>({...b,isLocked:!1,error:null})),n.set(0),!0}catch{return e.update(b=>({...b,error:"Failed to validate PIN"})),!1}}async function u(f,h,y){const b=pe(e);if(b.isLocked||!b.address||!b.encryptedKey)return e.update(p=>({...p,error:"Card is locked or invalid"})),null;try{e.update(g=>({...g,error:null}));const p=await Re.sendTransaction(b.encryptedKey,y,f,h);return await l(),e.update(g=>({...g,lastTransaction:p})),p}catch(p){return e.update(g=>({...g,error:p instanceof Error?p.message:"Transaction failed"})),null}}async function l(){const f=pe(e);if(f.address)try{const h=await Re.getBalance(f.address);e.update(y=>({...y,balance:h,error:null}))}catch{e.update(y=>({...y,error:"Failed to refresh balance"}))}}function d(){e.set({id:"",address:void 0,encryptedKey:void 0,balance:"0",isLocked:!0,error:null,lastTransaction:null}),n.set(0)}if(typeof window<"u"){const f=setInterval(()=>{const h=pe(e);!h.isLocked&&h.address&&l()},3e4);return()=>clearInterval(f)}return{subscribe:e.subscribe,initFromHash:i,importWallet:a,unlock:c,sendTransaction:u,refreshBalance:l,reset:d,isLoading:{subscribe:t.subscribe},isBlocked:{subscribe:o.subscribe},formattedAddress:{subscribe:s.subscribe}}}const Fe=zp();var Op=(e,t)=>Z(t,!0),Up=Q('<div class="text-center py-12"><h1 class="text-4xl font-bold mb-4 dark:text-white">Welcome to Tap3</h1> <p class="text-gray-600 dark:text-gray-400 mb-8">Scan your NFC card or import manually</p> <button class="btn btn-primary">Import Wallet</button></div>'),jp=Q('<div class="skeleton" role="status"><div class="animate-pulse space-y-4"><div class="h-40 bg-gray-200 dark:bg-gray-700 rounded-lg"></div></div> <span class="sr-only">Loading...</span></div>'),Dp=Q('<div class="alert alert-error" role="alert"> </div>'),Hp=Q('<main class="min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4"><div class="max-w-lg mx-auto"><!></div> <!> <!> <!></main>');function eb(e,t){ut(t,!0);let n=X(!1),r=X(!1),s=X(!1),o=X(null),i=X(!1),a=X(qe({}));Pc(()=>{if(typeof window<"u"){const v=dp();v&&c(v)}});async function c(v){try{Z(i,!0),Z(o,null),typeof Fe!="function"&&Fe.initFromHash&&await Fe.initFromHash(v);const E=typeof Fe!="function"?pe(Fe):null;E&&Z(a,qe({address:E.address,formattedId:E.id.padStart(4,"0"),balance:E.balance,encryptedKey:E.encryptedKey}))}catch(E){Z(o,qe(E instanceof Error?E.message:"Failed to load card"))}finally{Z(i,!1)}}async function u(v){let E=!1;typeof Fe!="function"&&Fe.unlock&&(E=await Fe.unlock(v),E&&Z(s,!1)),E&&Z(s,!1)}async function l(){Z(r,!1);const v=typeof Fe!="function"?pe(Fe):null;v&&Z(a,qe({address:v.address,formattedId:v.id.padStart(4,"0"),balance:v.balance,encryptedKey:v.encryptedKey}))}var d=Hp(),f=G(d),h=G(f);{var y=v=>{var E=Up(),P=D(G(E),4);P.__click=[Op,r],q(E),J(v,E)},b=v=>{var E=Ur(),P=Ke(E);{var x=_=>{var C=jp();J(_,C)},N=_=>{var C=Ur(),U=Ke(C);{var B=T=>{var F=Dp(),z=G(F,!0);q(F),Le(()=>xe(z,k(o))),J(T,F)},S=T=>{var F=ge(()=>k(a).formattedId??"");Ep(T,{get address(){return k(a).address},get formattedId(){return k(F)}})};re(U,T=>{k(o)?T(B):T(S,!1)},!0)}J(_,C)};re(P,_=>{k(i)?_(x):_(N,!1)})}J(v,E)};re(h,v=>{k(a).address?v(b,!1):v(y)})}q(f);var p=D(f,2);{var g=v=>{var E=ge(()=>k(a).balance??"0");Sp(v,{get address(){return k(a).address},get balance(){return k(E)},get encryptedKey(){return k(a).encryptedKey},onClose:()=>Z(n,!1)})};re(p,v=>{k(n)&&k(a).address&&k(a).encryptedKey&&v(g)})}var m=D(p,2);{var w=v=>{Lp(v,{onClose:()=>Z(r,!1),onImport:l})};re(m,v=>{k(r)&&v(w)})}var A=D(m,2);{var $=v=>{cc(v,{onSubmit:u,onClose:()=>Z(s,!1),remainingAttempts:3})};re(A,v=>{k(s)&&v($)})}q(d),J(e,d),dt()}Dt(["click"]);export{I as B,nn as H,Qp as _,We as a,ze as b,ar as c,Td as d,qt as e,eb as f,ks as g,Os as i,de as s};
