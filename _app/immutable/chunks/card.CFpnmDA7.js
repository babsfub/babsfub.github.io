import{g as pc,w as Iy}from"./index.BEr0zjpm.js";import{_ as eb}from"./preload-helper.sXOXHkSi.js";const By="1.0.7";let Fr=class Hf extends Error{constructor(e,r={}){const n=r.cause instanceof Hf?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof Hf&&r.cause.docsPath||r.docsPath,s=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${By}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.shortMessage=e}};function gi(t,e){return t.exec(e)?.groups}const tb=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,rb=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,nb=/^\(.+?\).*?$/,gd=/^tuple(?<array>(\[(\d*)\])*)$/;function Kf(t){let e=t.type;if(gd.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let i=0;i<r;i++){const s=t.components[i];e+=Kf(s),i<r-1&&(e+=", ")}const n=gi(gd,t.type);return e+=`)${n?.array??""}`,Kf({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function ea(t){let e="";const r=t.length;for(let n=0;n<r;n++){const i=t[n];e+=Kf(i),n!==r-1&&(e+=", ")}return e}function Py(t){return t.type==="function"?`function ${t.name}(${ea(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${ea(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${ea(t.inputs)})`:t.type==="error"?`error ${t.name}(${ea(t.inputs)})`:t.type==="constructor"?`constructor(${ea(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const ib=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fy(t){return ib.test(t)}function Ry(t){return gi(ib,t)}const sb=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Oy(t){return sb.test(t)}function Ty(t){return gi(sb,t)}const ab=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Ny(t){return ab.test(t)}function $y(t){return gi(ab,t)}const ob=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function cb(t){return ob.test(t)}function Ly(t){return gi(ob,t)}const fb=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function ky(t){return fb.test(t)}function qy(t){return gi(fb,t)}const zy=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Uy(t){return zy.test(t)}const jy=/^receive\(\) external payable$/;function Hy(t){return jy.test(t)}const Ky=new Set(["indexed"]),Vf=new Set(["calldata","memory","storage"]);class Vy extends Fr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Gy extends Fr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Wy extends Fr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Zy extends Fr{constructor({param:e,name:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Xy extends Fr{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Yy extends Fr{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Jy extends Fr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class pa extends Fr{constructor({signature:e,type:r}){super(`Invalid ${r} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Qy extends Fr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class em extends Fr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class tm extends Fr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class rm extends Fr{constructor({current:e,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function nm(t,e,r){let n="";if(r)for(const i of Object.entries(r)){if(!i)continue;let s="";for(const a of i[1])s+=`[${a.type}${a.name?`:${a.name}`:""}]`;n+=`(${i[0]}{${s}})`}return e?`${e}:${t}${n}`:t}const bc=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function im(t,e={}){if(Ny(t)){const r=$y(t);if(!r)throw new pa({signature:t,type:"function"});const n=Hr(r.parameters),i=[],s=n.length;for(let o=0;o<s;o++)i.push(Pi(n[o],{modifiers:Vf,structs:e,type:"function"}));const a=[];if(r.returns){const o=Hr(r.returns),f=o.length;for(let c=0;c<f;c++)a.push(Pi(o[c],{modifiers:Vf,structs:e,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:i,outputs:a}}if(Oy(t)){const r=Ty(t);if(!r)throw new pa({signature:t,type:"event"});const n=Hr(r.parameters),i=[],s=n.length;for(let a=0;a<s;a++)i.push(Pi(n[a],{modifiers:Ky,structs:e,type:"event"}));return{name:r.name,type:"event",inputs:i}}if(Fy(t)){const r=Ry(t);if(!r)throw new pa({signature:t,type:"error"});const n=Hr(r.parameters),i=[],s=n.length;for(let a=0;a<s;a++)i.push(Pi(n[a],{structs:e,type:"error"}));return{name:r.name,type:"error",inputs:i}}if(ky(t)){const r=qy(t);if(!r)throw new pa({signature:t,type:"constructor"});const n=Hr(r.parameters),i=[],s=n.length;for(let a=0;a<s;a++)i.push(Pi(n[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:i}}if(Uy(t))return{type:"fallback"};if(Hy(t))return{type:"receive",stateMutability:"payable"};throw new Qy({signature:t})}const sm=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,am=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,om=/^u?int$/;function Pi(t,e){const r=nm(t,e?.type,e?.structs);if(bc.has(r))return bc.get(r);const n=nb.test(t),i=gi(n?am:sm,t);if(!i)throw new Wy({param:t});if(i.name&&fm(i.name))throw new Zy({param:t,name:i.name});const s=i.name?{name:i.name}:{},a=i.modifier==="indexed"?{indexed:!0}:{},o=e?.structs??{};let f,c={};if(n){f="tuple";const d=Hr(i.type),p=[],v=d.length;for(let x=0;x<v;x++)p.push(Pi(d[x],{structs:o}));c={components:p}}else if(i.type in o)f="tuple",c={components:o[i.type]};else if(om.test(i.type))f=`${i.type}256`;else if(f=i.type,e?.type!=="struct"&&!ub(f))throw new Gy({type:f});if(i.modifier){if(!e?.modifiers?.has?.(i.modifier))throw new Xy({param:t,type:e?.type,modifier:i.modifier});if(Vf.has(i.modifier)&&!um(f,!!i.array))throw new Yy({param:t,type:e?.type,modifier:i.modifier})}const h={type:`${f}${i.array??""}`,...s,...a,...c};return bc.set(r,h),h}function Hr(t,e=[],r="",n=0){const i=t.trim().length;for(let s=0;s<i;s++){const a=t[s],o=t.slice(s+1);switch(a){case",":return n===0?Hr(o,[...e,r.trim()]):Hr(o,e,`${r}${a}`,n);case"(":return Hr(o,e,`${r}${a}`,n+1);case")":return Hr(o,e,`${r}${a}`,n-1);default:return Hr(o,e,`${r}${a}`,n)}}if(r==="")return e;if(n!==0)throw new rm({current:r,depth:n});return e.push(r.trim()),e}function ub(t){return t==="address"||t==="bool"||t==="function"||t==="string"||tb.test(t)||rb.test(t)}const cm=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function fm(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||tb.test(t)||rb.test(t)||cm.test(t)}function um(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function hm(t){const e={},r=t.length;for(let a=0;a<r;a++){const o=t[a];if(!cb(o))continue;const f=Ly(o);if(!f)throw new pa({signature:o,type:"struct"});const c=f.properties.split(";"),h=[],d=c.length;for(let p=0;p<d;p++){const x=c[p].trim();if(!x)continue;const D=Pi(x,{type:"struct"});h.push(D)}if(!h.length)throw new em({signature:o});e[f.name]=h}const n={},i=Object.entries(e),s=i.length;for(let a=0;a<s;a++){const[o,f]=i[a];n[o]=hb(f,e)}return n}const dm=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function hb(t,e,r=new Set){const n=[],i=t.length;for(let s=0;s<i;s++){const a=t[s];if(nb.test(a.type))n.push(a);else{const f=gi(dm,a.type);if(!f?.type)throw new Jy({abiParameter:a});const{array:c,type:h}=f;if(h in e){if(r.has(h))throw new tm({type:h});n.push({...a,type:`tuple${c??""}`,components:hb(e[h]??[],e,new Set([...r,h]))})}else if(ub(h))n.push(a);else throw new Vy({type:h})}}return n}function db(t){const e=hm(t),r=[],n=t.length;for(let i=0;i<n;i++){const s=t[i];cb(s)||r.push(im(s,e))}return r}function Ue(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const i=t[r];return typeof i=="function"?i:s=>e(t,s)}function jn(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Sm(t.type);return`${t.name}(${x0(t.inputs,{includeName:e})})`}function x0(t,{includeName:e=!1}={}){return t?t.map(r=>lm(r,{includeName:e})).join(e?", ":","):""}function lm(t,{includeName:e}){return t.type.startsWith("tuple")?`(${x0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function hn(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Et(t){return hn(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const lb="2.21.57";let gc={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${lb}`};class te extends Error{constructor(e,r={}){const n=r.cause instanceof te?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof te&&r.cause.docsPath||r.docsPath,s=gc.getDocsUrl?.({...r,docsPath:i}),a=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...gc.version?[`Version: ${gc.version}`]:[]].join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=lb}walk(e){return pb(this,e)}}function pb(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?pb(t.cause,e):e?null:t}class pm extends te{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class vd extends te{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class bb extends te{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${x0(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class w0 extends te{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class bm extends te{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class gm extends te{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${Et(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class vm extends te{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class gb extends te{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class ym extends te{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class vb extends te{constructor(e,{docsPath:r}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}}class yd extends te{constructor(e,{docsPath:r}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:r,name:"AbiEventNotFoundError"})}}class Wo extends te{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class mm extends te{constructor(e,{docsPath:r}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}}class xm extends te{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${jn(e.abiItem)}\`, and`,`\`${r.type}\` in \`${jn(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class wm extends te{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class wa extends te{constructor({abiItem:e,data:r,params:n,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${x0(n,{includeName:!0})})`,`Data:   ${r} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=r,this.params=n,this.size=i}}class _0 extends te{constructor({abiItem:e,param:r}){super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${jn(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class _m extends te{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class Em extends te{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class Am extends te{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Sm extends te{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Dm extends te{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class yb extends te{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class mb extends te{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class md extends te{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Os(t,{dir:e,size:r=32}={}){return typeof t=="string"?fi(t,{dir:e,size:r}):Mm(t,{dir:e,size:r})}function fi(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new mb({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Mm(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new mb({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class xb extends te{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Cm extends te{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Im extends te{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class Bm extends te{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Li(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Xr(t,{size:e}){if(Et(t)>e)throw new Bm({givenSize:Et(t),maxSize:e})}function ui(t,e={}){const{signed:r}=e;e.size&&Xr(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Pm(t,e={}){let r=t;if(e.size&&(Xr(r,{size:e.size}),r=Li(r)),Li(r)==="0x00")return!1;if(Li(r)==="0x01")return!0;throw new Im(r)}function Hn(t,e={}){return Number(ui(t,e))}const Fm=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dn(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ve(t,e):typeof t=="string"?_s(t,e):typeof t=="boolean"?wb(t,e):Mt(t,e)}function wb(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Xr(r,{size:e.size}),Os(r,{size:e.size})):r}function Mt(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Fm[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Xr(n,{size:e.size}),Os(n,{dir:"right",size:e.size})):n}function Ve(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<a){const f=typeof t=="bigint"?"n":"";throw new xb({max:s?`${s}${f}`:void 0,min:`${a}${f}`,signed:r,size:n,value:`${t}${f}`})}const o=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Os(o,{size:n}):o}const Rm=new TextEncoder;function _s(t,e={}){const r=Rm.encode(t);return Mt(r,e)}const Om=new TextEncoder;function Ts(t,e={}){return typeof t=="number"||typeof t=="bigint"?Nm(t,e):typeof t=="boolean"?Tm(t,e):hn(t)?Gr(t,e):ki(t,e)}function Tm(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Xr(r,{size:e.size}),Os(r,{size:e.size})):r}const Bn={zero:48,nine:57,A:65,F:70,a:97,f:102};function xd(t){if(t>=Bn.zero&&t<=Bn.nine)return t-Bn.zero;if(t>=Bn.A&&t<=Bn.F)return t-(Bn.A-10);if(t>=Bn.a&&t<=Bn.f)return t-(Bn.a-10)}function Gr(t,e={}){let r=t;e.size&&(Xr(r,{size:e.size}),r=Os(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let a=0,o=0;a<i;a++){const f=xd(n.charCodeAt(o++)),c=xd(n.charCodeAt(o++));if(f===void 0||c===void 0)throw new te(`Invalid byte sequence ("${n[o-2]}${n[o-1]}" in "${n}").`);s[a]=f*16+c}return s}function Nm(t,e){const r=Ve(t,e);return Gr(r)}function ki(t,e={}){const r=Om.encode(t);return typeof e.size=="number"?(Xr(r,{size:e.size}),Os(r,{dir:"right",size:e.size})):r}function wd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $m(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Hu(t,...e){if(!$m(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Zo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _b(t,e){Hu(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ao=BigInt(2**32-1),_d=BigInt(32);function Lm(t,e=!1){return e?{h:Number(t&Ao),l:Number(t>>_d&Ao)}:{h:Number(t>>_d&Ao)|0,l:Number(t&Ao)|0}}function km(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=Lm(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}const qm=(t,e,r)=>t<<r|e>>>32-r,zm=(t,e,r)=>e<<r|t>>>32-r,Um=(t,e,r)=>e<<r-32|t>>>64-r,jm=(t,e,r)=>t<<r-32|e>>>64-r;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hm=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),vc=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Jr=(t,e)=>t<<32-e|t>>>e,Ed=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Km=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function Ad(t){for(let e=0;e<t.length;e++)t[e]=Km(t[e])}function Vm(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ku(t){return typeof t=="string"&&(t=Vm(t)),Hu(t),t}let Eb=class{clone(){return this._cloneInto()}};function Ab(t){const e=n=>t().update(Ku(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}const Sb=[],Db=[],Mb=[],Gm=BigInt(0),ta=BigInt(1),Wm=BigInt(2),Zm=BigInt(7),Xm=BigInt(256),Ym=BigInt(113);for(let t=0,e=ta,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Sb.push(2*(5*n+r)),Db.push((t+1)*(t+2)/2%64);let i=Gm;for(let s=0;s<7;s++)e=(e<<ta^(e>>Zm)*Ym)%Xm,e&Wm&&(i^=ta<<(ta<<BigInt(s))-ta);Mb.push(i)}const[Jm,Qm]=km(Mb,!0),Sd=(t,e,r)=>r>32?Um(t,e,r):qm(t,e,r),Dd=(t,e,r)=>r>32?jm(t,e,r):zm(t,e,r);function e6(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)r[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,f=(a+2)%10,c=r[f],h=r[f+1],d=Sd(c,h,1)^r[o],p=Dd(c,h,1)^r[o+1];for(let v=0;v<50;v+=10)t[a+v]^=d,t[a+v+1]^=p}let i=t[2],s=t[3];for(let a=0;a<24;a++){const o=Db[a],f=Sd(i,s,o),c=Dd(i,s,o),h=Sb[a];i=t[h],s=t[h+1],t[h]=f,t[h+1]=c}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)r[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~r[(o+2)%10]&r[(o+4)%10]}t[0]^=Jm[n],t[1]^=Qm[n]}r.fill(0)}class Vu extends Eb{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wd(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Hm(this.state)}keccak(){Ed||Ad(this.state32),e6(this.state32,this.rounds),Ed||Ad(this.state32),this.posOut=0,this.pos=0}update(e){Zo(this);const{blockLen:r,state:n}=this;e=Ku(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);for(let o=0;o<a;o++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Zo(this,!1),Hu(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_b(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new Vu(r,n,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const t6=(t,e,r)=>Ab(()=>new Vu(e,t,r)),r6=t6(1,136,256/8);function Rt(t,e){const r=e||"hex",n=r6(hn(t,{strict:!1})?Ts(t):t);return r==="bytes"?n:dn(n)}const n6=t=>Rt(Ts(t));function i6(t){return n6(t)}function s6(t){let e=!0,r="",n=0,i="",s=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&n++,o===")"&&n--,!!e){if(n===0){if(o===" "&&["event","function",""].includes(i))i="";else if(i+=o,o===")"){s=!0;break}continue}if(o===" "){t[a-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}i+=o,r+=o}}if(!s)throw new te("Unable to normalize signature.");return i}const a6=t=>{const e=typeof t=="string"?t:Py(t);return s6(e)};function Cb(t){return i6(a6(t))}const E0=Cb;class hi extends te{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class A0 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const yc=new A0(8192);function Ka(t,e){if(yc.has(`${t}.${e}`))return yc.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=Rt(ki(r),"bytes"),i=r.split("");for(let a=0;a<40;a+=2)n[a>>1]>>4>=8&&i[a]&&(i[a]=i[a].toUpperCase()),(n[a>>1]&15)>=8&&i[a+1]&&(i[a+1]=i[a+1].toUpperCase());const s=`0x${i.join("")}`;return yc.set(`${t}.${e}`,s),s}function Ib(t,e){if(!Wr(t,{strict:!1}))throw new hi({address:t});return Ka(t,e)}const o6=/^0x[a-fA-F0-9]{40}$/,mc=new A0(8192);function Wr(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(mc.has(n))return mc.get(n);const i=o6.test(t)?t.toLowerCase()===t?!0:r?Ka(t)===t:!0:!1;return mc.set(n,i),i}function Kn(t){return typeof t[0]=="string"?Va(t):c6(t)}function c6(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Va(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function Xo(t,e,r,{strict:n}={}){return hn(t,{strict:!1})?Rb(t,e,r,{strict:n}):Fb(t,e,r,{strict:n})}function Bb(t,e){if(typeof e=="number"&&e>0&&e>Et(t)-1)throw new yb({offset:e,position:"start",size:Et(t)})}function Pb(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Et(t)!==r-e)throw new yb({offset:r,position:"end",size:Et(t)})}function Fb(t,e,r,{strict:n}={}){Bb(t,e);const i=t.slice(e,r);return n&&Pb(i,e,r),i}function Rb(t,e,r,{strict:n}={}){Bb(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&Pb(i,e,r),i}const f6=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ob=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ns(t,e){if(t.length!==e.length)throw new vm({expectedLength:t.length,givenLength:e.length});const r=u6({params:t,values:e}),n=Wu(r);return n.length===0?"0x":n}function u6({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(Gu({param:t[n],value:e[n]}));return r}function Gu({param:t,value:e}){const r=Zu(t.type);if(r){const[n,i]=r;return d6(e,{length:n,param:{...t,type:i}})}if(t.type==="tuple")return v6(e,{param:t});if(t.type==="address")return h6(e);if(t.type==="bool")return p6(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int"),[,,i="256"]=Ob.exec(t.type)??[];return b6(e,{signed:n,size:Number(i)})}if(t.type.startsWith("bytes"))return l6(e,{param:t});if(t.type==="string")return g6(e);throw new _m(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Wu(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:a,encoded:o}=t[s];a?e+=32:e+=Et(o)}const r=[],n=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:a,encoded:o}=t[s];a?(r.push(Ve(e+i,{size:32})),n.push(o),i+=Et(o)):r.push(o)}return Kn([...r,...n])}function h6(t){if(!Wr(t))throw new hi({address:t});return{dynamic:!1,encoded:fi(t.toLowerCase())}}function d6(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new Am(t);if(!n&&t.length!==e)throw new bm({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let i=!1;const s=[];for(let a=0;a<t.length;a++){const o=Gu({param:r,value:t[a]});o.dynamic&&(i=!0),s.push(o)}if(n||i){const a=Wu(s);if(n){const o=Ve(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Kn([o,a]):o}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Kn(s.map(({encoded:a})=>a))}}function l6(t,{param:e}){const[,r]=e.type.split("bytes"),n=Et(t);if(!r){let i=t;return n%32!==0&&(i=fi(i,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Kn([fi(Ve(n,{size:32})),i])}}if(n!==Number.parseInt(r))throw new gm({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:fi(t,{dir:"right"})}}function p6(t){if(typeof t!="boolean")throw new te(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:fi(wb(t))}}function b6(t,{signed:e,size:r=256}){if(typeof r=="number"){const n=2n**(BigInt(r)-(e?1n:0n))-1n,i=e?-n-1n:0n;if(t>n||t<i)throw new xb({max:n.toString(),min:i.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:Ve(t,{size:32,signed:e})}}function g6(t){const e=_s(t),r=Math.ceil(Et(e)/32),n=[];for(let i=0;i<r;i++)n.push(fi(Xo(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Kn([fi(Ve(Et(e),{size:32})),...n])}}function v6(t,{param:e}){let r=!1;const n=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],a=Array.isArray(t)?i:s.name,o=Gu({param:s,value:t[a]});n.push(o),o.dynamic&&(r=!0)}return{dynamic:r,encoded:r?Wu(n):Kn(n.map(({encoded:i})=>i))}}function Zu(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Xu=t=>Xo(Cb(t),0,4);function Ga(t){const{abi:e,args:r=[],name:n}=t,i=hn(n,{strict:!1}),s=e.filter(o=>i?o.type==="function"?Xu(o)===n:o.type==="event"?E0(o)===n:!1:"name"in o&&o.name===n);if(s.length===0)return;if(s.length===1)return s[0];let a;for(const o of s){if(!("inputs"in o))continue;if(!r||r.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==r.length)continue;if(r.every((c,h)=>{const d="inputs"in o&&o.inputs[h];return d?Gf(c,d):!1})){if(a&&"inputs"in a&&a.inputs){const c=Tb(o.inputs,a.inputs,r);if(c)throw new xm({abiItem:o,type:c[0]},{abiItem:a,type:c[1]})}a=o}}return a||s[0]}function Gf(t,e){const r=typeof t,n=e.type;switch(n){case"address":return Wr(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>Gf(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(i=>Gf(i,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Tb(t,e,r){for(const n in t){const i=t[n],s=e[n];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return Tb(i.components,s.components,r[n]);const a=[i.type,s.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Wr(r[n],{strict:!1}):a.includes("address")&&a.includes("bytes")?Wr(r[n],{strict:!1}):!1)return a}}const Md="/docs/contract/encodeEventTopics";function Wa(t){const{abi:e,eventName:r,args:n}=t;let i=e[0];if(r){const f=Ga({abi:e,name:r});if(!f)throw new yd(r,{docsPath:Md});i=f}if(i.type!=="event")throw new yd(void 0,{docsPath:Md});const s=jn(i),a=E0(s);let o=[];if(n&&"inputs"in i){const f=i.inputs?.filter(h=>"indexed"in h&&h.indexed),c=Array.isArray(n)?n:Object.values(n).length>0?f?.map(h=>n[h.name])??[]:[];c.length>0&&(o=f?.map((h,d)=>Array.isArray(c[d])?c[d].map((p,v)=>Cd({param:h,value:c[d][v]})):c[d]?Cd({param:h,value:c[d]}):null)??[])}return[a,...o]}function Cd({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Rt(Ts(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Dm(t.type);return Ns([t],[e])}function S0(t,{method:e}){const r={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:n,response:i,status:s,transport:a})=>{s==="success"&&e===n&&(r[i]=a.request)}),n=>r[n]||t.request}async function Nb(t,e){const{address:r,abi:n,args:i,eventName:s,fromBlock:a,strict:o,toBlock:f}=e,c=S0(t,{method:"eth_newFilter"}),h=s?Wa({abi:n,args:i,eventName:s}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:r,fromBlock:typeof a=="bigint"?Ve(a):a,toBlock:typeof f=="bigint"?Ve(f):f,topics:h}]});return{abi:n,args:i,eventName:s,id:d,request:c(d),strict:!!o,type:"event"}}function mr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Id="/docs/contract/encodeFunctionData";function y6(t){const{abi:e,args:r,functionName:n}=t;let i=e[0];if(n){const s=Ga({abi:e,args:r,name:n});if(!s)throw new Wo(n,{docsPath:Id});i=s}if(i.type!=="function")throw new Wo(void 0,{docsPath:Id});return{abi:[i],functionName:Xu(jn(i))}}function Zn(t){const{args:e}=t,{abi:r,functionName:n}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:y6(t),i=r[0],s=n,a="inputs"in i&&i.inputs?Ns(i.inputs,e??[]):void 0;return Va([s,a??"0x"])}const $b={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},m6={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},x6={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Bd extends te{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Lb extends te{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class w6 extends te{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const _6={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new w6({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Lb({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Bd({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Bd({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Yu(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(_6);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function E6(t,e={}){typeof e.size<"u"&&Xr(t,{size:e.size});const r=Mt(t,e);return ui(r,e)}function A6(t,e={}){let r=t;if(typeof e.size<"u"&&(Xr(r,{size:e.size}),r=Li(r)),r.length>1||r[0]>1)throw new Cm(r);return!!r[0]}function zn(t,e={}){typeof e.size<"u"&&Xr(t,{size:e.size});const r=Mt(t,e);return Hn(r,e)}function S6(t,e={}){let r=t;return typeof e.size<"u"&&(Xr(r,{size:e.size}),r=Li(r,{dir:"right"})),new TextDecoder().decode(r)}function D0(t,e){const r=typeof e=="string"?Gr(e):e,n=Yu(r);if(Et(r)===0&&t.length>0)throw new w0;if(Et(e)&&Et(e)<32)throw new bb({data:typeof e=="string"?e:Mt(e),params:t,size:Et(e)});let i=0;const s=[];for(let a=0;a<t.length;++a){const o=t[a];n.setPosition(i);const[f,c]=gs(n,o,{staticPosition:0});i+=c,s.push(f)}return s}function gs(t,e,{staticPosition:r}){const n=Zu(e.type);if(n){const[i,s]=n;return M6(t,{...e,type:s},{length:i,staticPosition:r})}if(e.type==="tuple")return P6(t,e,{staticPosition:r});if(e.type==="address")return D6(t);if(e.type==="bool")return C6(t);if(e.type.startsWith("bytes"))return I6(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return B6(t,e);if(e.type==="string")return F6(t,{staticPosition:r});throw new Em(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Pd=32,Wf=32;function D6(t){const e=t.readBytes(32);return[Ka(Mt(Fb(e,-20))),32]}function M6(t,e,{length:r,staticPosition:n}){if(!r){const a=zn(t.readBytes(Wf)),o=n+a,f=o+Pd;t.setPosition(o);const c=zn(t.readBytes(Pd)),h=_a(e);let d=0;const p=[];for(let v=0;v<c;++v){t.setPosition(f+(h?v*32:d));const[x,D]=gs(t,e,{staticPosition:f});d+=D,p.push(x)}return t.setPosition(n+32),[p,32]}if(_a(e)){const a=zn(t.readBytes(Wf)),o=n+a,f=[];for(let c=0;c<r;++c){t.setPosition(o+c*32);const[h]=gs(t,e,{staticPosition:o});f.push(h)}return t.setPosition(n+32),[f,32]}let i=0;const s=[];for(let a=0;a<r;++a){const[o,f]=gs(t,e,{staticPosition:n+i});i+=f,s.push(o)}return[s,i]}function C6(t){return[A6(t.readBytes(32),{size:32}),32]}function I6(t,e,{staticPosition:r}){const[n,i]=e.type.split("bytes");if(!i){const a=zn(t.readBytes(32));t.setPosition(r+a);const o=zn(t.readBytes(32));if(o===0)return t.setPosition(r+32),["0x",32];const f=t.readBytes(o);return t.setPosition(r+32),[Mt(f),32]}return[Mt(t.readBytes(Number.parseInt(i),32)),32]}function B6(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),i=t.readBytes(32);return[n>48?E6(i,{signed:r}):zn(i,{signed:r}),32]}function P6(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:a})=>!a),i=n?[]:{};let s=0;if(_a(e)){const a=zn(t.readBytes(Wf)),o=r+a;for(let f=0;f<e.components.length;++f){const c=e.components[f];t.setPosition(o+s);const[h,d]=gs(t,c,{staticPosition:o});s+=d,i[n?f:c?.name]=h}return t.setPosition(r+32),[i,32]}for(let a=0;a<e.components.length;++a){const o=e.components[a],[f,c]=gs(t,o,{staticPosition:r});i[n?a:o?.name]=f,s+=c}return[i,s]}function F6(t,{staticPosition:e}){const r=zn(t.readBytes(32)),n=e+r;t.setPosition(n);const i=zn(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),a=S6(Li(s));return t.setPosition(e+32),[a,32]}function _a(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(_a);const r=Zu(t.type);return!!(r&&_a({...t,type:r[1]}))}function R6(t){const{abi:e,data:r}=t,n=Xo(r,0,4);if(n==="0x")throw new w0;const s=[...e||[],m6,x6].find(a=>a.type==="error"&&n===Xu(jn(a)));if(!s)throw new gb(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?D0(s.inputs,Xo(r,4)):void 0,errorName:s.name}}const Nt=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function kb({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((i,s)=>`${n&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?Nt(e[s]):e[s]}`).join(", ")})`}const O6={gwei:9,wei:18},T6={ether:-9,wei:9};function qb(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function M0(t,e="wei"){return qb(t,O6[e])}function ur(t,e="wei"){return qb(t,T6[e])}class N6 extends te{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class $6 extends te{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Fd(t){return t.reduce((e,{slot:r,value:n})=>`${e}        ${r}: ${n}
`,"")}function L6(t){return t.reduce((e,{address:r,...n})=>{let i=`${e}    ${r}:
`;return n.nonce&&(i+=`      nonce: ${n.nonce}
`),n.balance&&(i+=`      balance: ${n.balance}
`),n.code&&(i+=`      code: ${n.code}
`),n.state&&(i+=`      state:
`,i+=Fd(n.state)),n.stateDiff&&(i+=`      stateDiff:
`,i+=Fd(n.stateDiff)),i},`  State Override:
`).slice(0,-1)}function Za(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class k6 extends te{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class q6 extends te{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Za(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class z6 extends te{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:f,maxPriorityFeePerGas:c,nonce:h,to:d,value:p}){const v=Za({chain:i&&`${i?.name} (id: ${i?.id})`,from:r?.address,to:d,value:typeof p<"u"&&`${M0(p)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${ur(o)} gwei`,maxFeePerGas:typeof f<"u"&&`${ur(f)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${ur(c)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",v].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class zb extends te{constructor({blockHash:e,blockNumber:r,blockTag:n,hash:i,index:s}){let a="Transaction";n&&s!==void 0&&(a=`Transaction at block time "${n}" at index "${s}"`),e&&s!==void 0&&(a=`Transaction at block hash "${e}" at index "${s}"`),r&&s!==void 0&&(a=`Transaction at block number "${r}" at index "${s}"`),i&&(a=`Transaction with hash "${i}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class Ub extends te{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class U6 extends te{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const j6=t=>t,Ju=t=>t;class jb extends te{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:f,maxPriorityFeePerGas:c,nonce:h,to:d,value:p,stateOverride:v}){const x=r?mr(r):void 0;let D=Za({from:x?.address,to:d,value:typeof p<"u"&&`${M0(p)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${ur(o)} gwei`,maxFeePerGas:typeof f<"u"&&`${ur(f)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${ur(c)} gwei`,nonce:h});v&&(D+=`
${L6(v)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",D].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class H6 extends te{constructor(e,{abi:r,args:n,contractAddress:i,docsPath:s,functionName:a,sender:o}){const f=Ga({abi:r,args:n,name:a}),c=f?kb({abiItem:f,args:n,includeFunctionName:!1,includeName:!1}):void 0,h=f?jn(f,{includeName:!0}):void 0,d=Za({address:i&&j6(i),function:h,args:c&&c!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${c}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=i,this.functionName=a,this.sender=o}}class Zf extends te{constructor({abi:e,data:r,functionName:n,message:i}){let s,a,o,f;if(r&&r!=="0x")try{a=R6({abi:e,data:r});const{abiItem:h,errorName:d,args:p}=a;if(d==="Error")f=p[0];else if(d==="Panic"){const[v]=p;f=$b[v]}else{const v=h?jn(h,{includeName:!0}):void 0,x=h&&p?kb({abiItem:h,args:p,includeFunctionName:!1,includeName:!1}):void 0;o=[v?`Error: ${v}`:"",x&&x!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${x}`:""]}}catch(h){s=h}else i&&(f=i);let c;s instanceof gb&&(c=s.signature,o=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(f&&f!=="execution reverted"||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,f||c].join(`
`):`The contract function "${n}" reverted.`,{cause:s,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.reason=f,this.signature=c}}class K6 extends te{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class V6 extends te{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Qu extends te{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class va extends te{constructor({body:e,cause:r,details:n,headers:i,status:s,url:a}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Ju(a)}`,e&&`Request body: ${Nt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=a}}class eh extends te{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Ju(n)}`,`Request body: ${Nt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class Rd extends te{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ju(r)}`,`Request body: ${Nt(e)}`],name:"TimeoutError"})}}const G6=-1;class lr extends te{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:a}){super(a,{cause:e,docsPath:n,metaMessages:i||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof eh?e.code:r??G6}}class $s extends lr{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Ea extends lr{constructor(e){super(e,{code:Ea.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ea,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Aa extends lr{constructor(e){super(e,{code:Aa.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Aa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Sa extends lr{constructor(e,{method:r}={}){super(e,{code:Sa.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Sa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Da extends lr{constructor(e){super(e,{code:Da.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Da,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ji extends lr{constructor(e){super(e,{code:ji.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ji,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Hi extends lr{constructor(e){super(e,{code:Hi.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Hi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Ma extends lr{constructor(e){super(e,{code:Ma.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ca extends lr{constructor(e){super(e,{code:Ca.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Ca,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Ia extends lr{constructor(e){super(e,{code:Ia.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Ia,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ba extends lr{constructor(e,{method:r}={}){super(e,{code:Ba.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not implemented.`})}}Object.defineProperty(Ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Es extends lr{constructor(e){super(e,{code:Es.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Es,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Pa extends lr{constructor(e){super(e,{code:Pa.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vs extends $s{constructor(e){super(e,{code:vs.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Fa extends $s{constructor(e){super(e,{code:Fa.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ra extends $s{constructor(e,{method:r}={}){super(e,{code:Ra.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Ra,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Oa extends $s{constructor(e){super(e,{code:Oa.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Oa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ta extends $s{constructor(e){super(e,{code:Ta.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ta,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Na extends $s{constructor(e){super(e,{code:Na.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Na,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class W6 extends lr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Z6=3;function As(t,{abi:e,address:r,args:n,docsPath:i,functionName:s,sender:a}){const o=t instanceof Qu?t:t instanceof te?t.walk(x=>"data"in x)||t.walk():{},{code:f,data:c,details:h,message:d,shortMessage:p}=o,v=t instanceof w0?new K6({functionName:s}):[Z6,ji.code].includes(f)&&(c||h||d||p)?new Zf({abi:e,data:typeof c=="object"?c.data:c,functionName:s,message:o instanceof eh?h:p??d}):t;return new H6(v,{abi:e,args:n,contractAddress:r,docsPath:i,functionName:s,sender:a})}function X6(t){const e=Rt(`0x${t.substring(4)}`).substring(26);return Ka(`0x${e}`)}async function Y6({hash:t,signature:e}){const r=hn(t)?t:dn(t),{secp256k1:n}=await eb(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>J5);return{secp256k1:a}},void 0,import.meta.url);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:c,s:h,v:d,yParity:p}=e,v=Number(p??d),x=Od(v);return new n.Signature(ui(c),ui(h)).addRecoveryBit(x)}const a=hn(e)?e:dn(e),o=Hn(`0x${a.slice(130)}`),f=Od(o);return n.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Od(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Hb({hash:t,signature:e}){return X6(await Y6({hash:t,signature:e}))}function J6(t,e="hex"){const r=Kb(t),n=Yu(new Uint8Array(r.length));return r.encode(n),e==="hex"?Mt(n.bytes):n.bytes}function Kb(t){return Array.isArray(t)?Q6(t.map(e=>Kb(e))):ex(t)}function Q6(t){const e=t.reduce((i,s)=>i+s.length,0),r=Vb(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function ex(t){const e=typeof t=="string"?Gr(t):t,r=Vb(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function Vb(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new te("Length is too large.")}function tx(t){const{chainId:e,contractAddress:r,nonce:n,to:i}=t,s=Rt(Va(["0x05",J6([e?Ve(e):"0x",r,n?Ve(n):"0x"])]));return i==="bytes"?Gr(s):s}async function Gb(t){const{authorization:e,signature:r}=t;return Hb({hash:tx(e),signature:r??e})}class rx extends te{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:f,maxPriorityFeePerGas:c,nonce:h,to:d,value:p}){const v=Za({from:r?.address,to:d,value:typeof p<"u"&&`${M0(p)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${ur(o)} gwei`,maxFeePerGas:typeof f<"u"&&`${ur(f)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${ur(c)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",v].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ls extends te{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ls,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ls,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Yo extends te{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${ur(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Yo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Xf extends te{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${ur(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Xf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Yf extends te{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Yf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Jf extends te{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Jf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Qf extends te{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Qf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class eu extends te{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(eu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class tu extends te{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(tu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ru extends te{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ru,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class nu extends te{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(nu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Jo extends te{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${ur(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${ur(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Jo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class C0 extends te{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function th(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof te?t.walk(i=>i?.code===ls.code):t;return n instanceof te?new ls({cause:t,message:n.details}):ls.nodeMessage.test(r)?new ls({cause:t,message:t.details}):Yo.nodeMessage.test(r)?new Yo({cause:t,maxFeePerGas:e?.maxFeePerGas}):Xf.nodeMessage.test(r)?new Xf({cause:t,maxFeePerGas:e?.maxFeePerGas}):Yf.nodeMessage.test(r)?new Yf({cause:t,nonce:e?.nonce}):Jf.nodeMessage.test(r)?new Jf({cause:t,nonce:e?.nonce}):Qf.nodeMessage.test(r)?new Qf({cause:t,nonce:e?.nonce}):eu.nodeMessage.test(r)?new eu({cause:t}):tu.nodeMessage.test(r)?new tu({cause:t,gas:e?.gas}):ru.nodeMessage.test(r)?new ru({cause:t,gas:e?.gas}):nu.nodeMessage.test(r)?new nu({cause:t}):Jo.nodeMessage.test(r)?new Jo({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new C0({cause:t})}function nx(t,{docsPath:e,...r}){const n=(()=>{const i=th(t,r);return i instanceof C0?t:i})();return new rx(n,{docsPath:e,...r})}function rh(t,{format:e}){if(!e)return{};const r={};function n(s){const a=Object.keys(s);for(const o of a)o in t&&(r[o]=t[o]),s[o]&&typeof s[o]=="object"&&!Array.isArray(s[o])&&n(s[o])}const i=e(t||{});return n(i),r}const ix={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function I0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=sx(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>Mt(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ve(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ve(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ve(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ve(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ve(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ve(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=ix[t.type]),typeof t.value<"u"&&(e.value=Ve(t.value)),e}function sx(t){return t.map(e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:Ve(e.chainId),nonce:Ve(e.nonce),...typeof e.yParity<"u"?{yParity:Ve(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ve(e.v)}:{}}))}function Td(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new md({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new md({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function ax(t){const{balance:e,nonce:r,state:n,stateDiff:i,code:s}=t,a={};if(s!==void 0&&(a.code=s),e!==void 0&&(a.balance=Ve(e)),r!==void 0&&(a.nonce=Ve(r)),n!==void 0&&(a.state=Td(n)),i!==void 0){if(a.state)throw new $6;a.stateDiff=Td(i)}return a}function Wb(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!Wr(r,{strict:!1}))throw new hi({address:r});if(e[r])throw new N6({address:r});e[r]=ax(n)}return e}const ox=2n**256n-1n;function Xa(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,to:s}=t,a=e?mr(e):void 0;if(a&&!Wr(a.address))throw new hi({address:a.address});if(s&&!Wr(s))throw new hi({address:s});if(typeof r<"u"&&(typeof n<"u"||typeof i<"u"))throw new k6;if(n&&n>ox)throw new Yo({maxFeePerGas:n});if(i&&n&&i>n)throw new Jo({maxFeePerGas:n,maxPriorityFeePerGas:i})}class cx extends te{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class nh extends te{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class fx extends te{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ur(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Zb extends te{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const Xb={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Yb(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Hn(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Hn(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Xb[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=ux(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function ux(t){return t.map(e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function hx(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:Yb(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function sn(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:i}={}){const s=n??"latest",a=i??!1,o=r!==void 0?Ve(r):void 0;let f=null;if(e?f=await t.request({method:"eth_getBlockByHash",params:[e,a]},{dedupe:!0}):f=await t.request({method:"eth_getBlockByNumber",params:[o||s,a]},{dedupe:!!o}),!f)throw new Zb({blockHash:e,blockNumber:r});return(t.chain?.formatters?.block?.format||hx)(f)}async function ih(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function dx(t,e){return Jb(t,e)}async function Jb(t,e){const{block:r,chain:n=t.chain,request:i}=e||{};try{const s=n?.fees?.maxPriorityFeePerGas??n?.fees?.defaultPriorityFee;if(typeof s=="function"){const o=r||await Ue(t,sn,"getBlock")({}),f=await s({block:o,client:t,request:i});if(f===null)throw new Error;return f}if(typeof s<"u")return s;const a=await t.request({method:"eth_maxPriorityFeePerGas"});return ui(a)}catch{const[s,a]=await Promise.all([r?Promise.resolve(r):Ue(t,sn,"getBlock")({}),Ue(t,ih,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new nh;const o=a-s.baseFeePerGas;return o<0n?0n:o}}async function lx(t,e){return iu(t,e)}async function iu(t,e){const{block:r,chain:n=t.chain,request:i,type:s="eip1559"}=e||{},a=await(async()=>typeof n?.fees?.baseFeeMultiplier=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:i}):n?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new cx;const f=10**(a.toString().split(".")[1]?.length??0),c=p=>p*BigInt(Math.ceil(a*f))/BigInt(f),h=r||await Ue(t,sn,"getBlock")({});if(typeof n?.fees?.estimateFeesPerGas=="function"){const p=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:c,request:i,type:s});if(p!==null)return p}if(s==="eip1559"){if(typeof h.baseFeePerGas!="bigint")throw new nh;const p=typeof i?.maxPriorityFeePerGas=="bigint"?i.maxPriorityFeePerGas:await Jb(t,{block:h,chain:n,request:i}),v=c(h.baseFeePerGas);return{maxFeePerGas:i?.maxFeePerGas??v+p,maxPriorityFeePerGas:p}}return{gasPrice:i?.gasPrice??c(await Ue(t,ih,"getGasPrice")({}))}}async function Qb(t,{address:e,blockTag:r="latest",blockNumber:n}){const i=await t.request({method:"eth_getTransactionCount",params:[e,n?Ve(n):r]},{dedupe:!!n});return Hn(i)}function eg(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>Gr(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>Mt(s))}function tg(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(a=>Gr(a)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(a=>Gr(a)):t.commitments,s=[];for(let a=0;a<n.length;a++){const o=n[a],f=i[a];s.push(Uint8Array.from(e.computeBlobKzgProof(o,f)))}return r==="bytes"?s:s.map(a=>Mt(a))}function px(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),f=n?4:0,c=n?0:4;t.setUint32(e+f,a,n),t.setUint32(e+c,o,n)}const bx=(t,e,r)=>t&e^~t&r,gx=(t,e,r)=>t&e^t&r^e&r;let vx=class extends Eb{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vc(this.buffer)}update(e){Zo(this);const{view:r,buffer:n,blockLen:i}=this;e=Ku(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const f=vc(e);for(;i<=s-a;a+=i)this.process(f,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zo(this),_b(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let d=a;d<i;d++)r[d]=0;px(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=vc(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)o.setUint32(4*d,h[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}};const yx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ei=new Uint32Array(64);let mx=class extends vx{constructor(){super(64,32,8,!1),this.A=Qn[0]|0,this.B=Qn[1]|0,this.C=Qn[2]|0,this.D=Qn[3]|0,this.E=Qn[4]|0,this.F=Qn[5]|0,this.G=Qn[6]|0,this.H=Qn[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:a,G:o,H:f}=this;return[e,r,n,i,s,a,o,f]}set(e,r,n,i,s,a,o,f){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=f|0}process(e,r){for(let d=0;d<16;d++,r+=4)ei[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const p=ei[d-15],v=ei[d-2],x=Jr(p,7)^Jr(p,18)^p>>>3,D=Jr(v,17)^Jr(v,19)^v>>>10;ei[d]=D+ei[d-7]+x+ei[d-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:f,G:c,H:h}=this;for(let d=0;d<64;d++){const p=Jr(o,6)^Jr(o,11)^Jr(o,25),v=h+p+bx(o,f,c)+yx[d]+ei[d]|0,D=(Jr(n,2)^Jr(n,13)^Jr(n,22))+gx(n,i,s)|0;h=c,c=f,f=o,o=a+v|0,a=s,s=i,i=n,n=v+D|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,f=f+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(n,i,s,a,o,f,c,h)}roundClean(){ei.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const xx=Ab(()=>new mx);function wx(t,e){return xx(hn(t,{strict:!1})?Ts(t):t)}function _x(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=wx(e);return i.set([r],0),n==="bytes"?i:Mt(i)}function Ex(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(_x({commitment:s,to:n,version:r}));return i}const Nd=6,rg=32,sh=4096,ng=rg*sh,$d=ng*Nd-1-1*sh*Nd;class Ax extends te{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class Sx extends te{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Dx(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?Gr(t.data):t.data,n=Et(r);if(!n)throw new Sx;if(n>$d)throw new Ax({maxSize:$d,size:n});const i=[];let s=!0,a=0;for(;s;){const o=Yu(new Uint8Array(ng));let f=0;for(;f<sh;){const c=r.slice(a,a+(rg-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}f++,a+=31}i.push(o)}return e==="bytes"?i.map(o=>o.bytes):i.map(o=>Mt(o.bytes))}function Mx(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??Dx({data:e,to:n}),s=t.commitments??eg({blobs:i,kzg:r,to:n}),a=t.proofs??tg({blobs:i,commitments:s,kzg:r,to:n}),o=[];for(let f=0;f<i.length;f++)o.push({blob:i[f],commitment:s[f],proof:a[f]});return o}function Cx(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new q6({transaction:t})}async function Ya(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Hn(e)}const ig=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function B0(t,e){const{account:r=t.account,blobs:n,chain:i,gas:s,kzg:a,nonce:o,nonceManager:f,parameters:c=ig,type:h}=e,d=r&&mr(r),p={...e,...d?{from:d?.address}:{}};let v;async function x(){return v||(v=await Ue(t,sn,"getBlock")({blockTag:"latest"}),v)}let D;async function S(){return D||(i?i.id:typeof e.chainId<"u"?e.chainId:(D=await Ue(t,Ya,"getChainId")({}),D))}if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&n&&a){const O=eg({blobs:n,kzg:a});if(c.includes("blobVersionedHashes")){const A=Ex({commitments:O,to:"hex"});p.blobVersionedHashes=A}if(c.includes("sidecars")){const A=tg({blobs:n,commitments:O,kzg:a}),F=Mx({blobs:n,commitments:O,proofs:A,to:"hex"});p.sidecars=F}}if(c.includes("chainId")&&(p.chainId=await S()),c.includes("nonce")&&typeof o>"u"&&d)if(f){const O=await S();p.nonce=await f.consume({address:d.address,chainId:O,client:t})}else p.nonce=await Ue(t,Qb,"getTransactionCount")({address:d.address,blockTag:"pending"});if((c.includes("fees")||c.includes("type"))&&typeof h>"u")try{p.type=Cx(p)}catch{const O=await x();p.type=typeof O?.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(c.includes("fees"))if(p.type!=="legacy"&&p.type!=="eip2930"){if(typeof p.maxFeePerGas>"u"||typeof p.maxPriorityFeePerGas>"u"){const O=await x(),{maxFeePerGas:A,maxPriorityFeePerGas:F}=await iu(t,{block:O,chain:i,request:p});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<F)throw new fx({maxPriorityFeePerGas:F});p.maxPriorityFeePerGas=F,p.maxFeePerGas=A}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new nh;const O=await x(),{gasPrice:A}=await iu(t,{block:O,chain:i,request:p,type:"legacy"});p.gasPrice=A}return c.includes("gas")&&typeof s>"u"&&(p.gas=await Ue(t,ah,"estimateGas")({...p,account:d&&{address:d.address,type:"json-rpc"}})),Xa(p),delete p.parameters,p}async function sg(t,{address:e,blockNumber:r,blockTag:n="latest"}){const i=r?Ve(r):void 0,s=await t.request({method:"eth_getBalance",params:[e,i||n]});return BigInt(s)}async function ah(t,e){const{account:r=t.account}=e,n=r?mr(r):void 0;try{let N=function(b){const{block:u,request:l,rpcStateOverride:w}=b;return t.request({method:"eth_estimateGas",params:w?[l,u??"latest",w]:u?[l,u]:[l]})};const{accessList:i,authorizationList:s,blobs:a,blobVersionedHashes:o,blockNumber:f,blockTag:c,data:h,gas:d,gasPrice:p,maxFeePerBlobGas:v,maxFeePerGas:x,maxPriorityFeePerGas:D,nonce:S,value:O,stateOverride:A,...F}=await B0(t,{...e,parameters:n?.type==="local"?void 0:["blobVersionedHashes"]}),k=(f?Ve(f):void 0)||c,L=Wb(A),m=await(async()=>{if(F.to)return F.to;if(s&&s.length>0)return await Gb({authorization:s[0]}).catch(()=>{throw new te("`to` is required. Could not infer from `authorizationList`")})})();Xa(e);const T=t.chain?.formatters?.transactionRequest?.format,U=(T||I0)({...rh(F,{format:T}),from:n?.address,accessList:i,authorizationList:s,blobs:a,blobVersionedHashes:o,data:h,gas:d,gasPrice:p,maxFeePerBlobGas:v,maxFeePerGas:x,maxPriorityFeePerGas:D,nonce:S,to:m,value:O});let g=BigInt(await N({block:k,request:U,rpcStateOverride:L}));if(s){const b=await sg(t,{address:U.from}),u=await Promise.all(s.map(async l=>{const{contractAddress:w}=l,I=await N({block:k,request:{authorizationList:void 0,data:h,from:n?.address,to:w,value:Ve(b)},rpcStateOverride:L}).catch(()=>100000n);return 2n*BigInt(I)}));g+=u.reduce((l,w)=>l+w,0n)}return g}catch(i){throw nx(i,{...e,account:n,chain:t.chain})}}async function Ix(t,e){const{abi:r,address:n,args:i,functionName:s,dataSuffix:a,...o}=e,f=Zn({abi:r,args:i,functionName:s});try{return await Ue(t,ah,"estimateGas")({data:`${f}${a?a.replace("0x",""):""}`,to:n,...o})}catch(c){const h=o.account?mr(o.account):void 0;throw As(c,{abi:r,address:n,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:h?.address})}}function oh(t,e){if(!Wr(t,{strict:!1}))throw new hi({address:t});if(!Wr(e,{strict:!1}))throw new hi({address:e});return t.toLowerCase()===e.toLowerCase()}const Ld="/docs/contract/decodeEventLog";function ch(t){const{abi:e,data:r,strict:n,topics:i}=t,s=n??!0,[a,...o]=i;if(!a)throw new ym({docsPath:Ld});const f=e.length===1?e[0]:e.find(D=>D.type==="event"&&a===E0(jn(D)));if(!(f&&"name"in f)||f.type!=="event")throw new vb(a,{docsPath:Ld});const{name:c,inputs:h}=f,d=h?.some(D=>!("name"in D&&D.name));let p=d?[]:{};const v=h.filter(D=>"indexed"in D&&D.indexed);for(let D=0;D<v.length;D++){const S=v[D],O=o[D];if(!O)throw new _0({abiItem:f,param:S});p[d?D:S.name||D]=Bx({param:S,value:O})}const x=h.filter(D=>!("indexed"in D&&D.indexed));if(x.length>0){if(r&&r!=="0x")try{const D=D0(x,r);if(D)if(d)p=[...p,...D];else for(let S=0;S<x.length;S++)p[x[S].name]=D[S]}catch(D){if(s)throw D instanceof bb||D instanceof Lb?new wa({abiItem:f,data:r,params:x,size:Et(r)}):D}else if(s)throw new wa({abiItem:f,data:"0x",params:x,size:0})}return{eventName:c,args:Object.values(p).length>0?p:void 0}}function Bx({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:D0([t],e)[0]}function fh(t){const{abi:e,args:r,logs:n,strict:i=!0}=t,s=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return n.map(a=>{try{const o=e.find(c=>c.type==="event"&&a.topics[0]===E0(c));if(!o)return null;const f=ch({...a,abi:[o],strict:i});return s&&!s.includes(f.eventName)||!Px({args:f.args,inputs:o.inputs,matchArgs:r})?null:{...f,...a}}catch(o){let f,c;if(o instanceof vb)return null;if(o instanceof wa||o instanceof _0){if(i)return null;f=o.abiItem.name,c=o.abiItem.inputs?.some(h=>!("name"in h&&h.name))}return{...a,args:c?[]:{},eventName:f}}}).filter(Boolean)}function Px(t){const{args:e,inputs:r,matchArgs:n}=t;if(!n)return!0;if(!e)return!1;function i(s,a,o){try{return s.type==="address"?oh(a,o):s.type==="string"||s.type==="bytes"?Rt(Ts(a))===o:a===o}catch{return!1}}return Array.isArray(e)&&Array.isArray(n)?n.every((s,a)=>{if(s==null)return!0;const o=r[a];return o?(Array.isArray(s)?s:[s]).some(c=>i(o,c,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof n=="object"&&!Array.isArray(n)?Object.entries(n).every(([s,a])=>{if(a==null)return!0;const o=r.find(c=>c.name===s);return o?(Array.isArray(a)?a:[a]).some(c=>i(o,c,e[s])):!1}):!1}function di(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}async function uh(t,{address:e,blockHash:r,fromBlock:n,toBlock:i,event:s,events:a,args:o,strict:f}={}){const c=f??!1,h=a??(s?[s]:void 0);let d=[];h&&(d=[h.flatMap(D=>Wa({abi:[D],eventName:D.name,args:a?void 0:o}))],s&&(d=d[0]));let p;r?p=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:r}]}):p=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof n=="bigint"?Ve(n):n,toBlock:typeof i=="bigint"?Ve(i):i}]});const v=p.map(x=>di(x));return h?fh({abi:h,args:o,logs:v,strict:c}):v}async function ag(t,e){const{abi:r,address:n,args:i,blockHash:s,eventName:a,fromBlock:o,toBlock:f,strict:c}=e,h=a?Ga({abi:r,name:a}):void 0,d=h?void 0:r.filter(p=>p.type==="event");return Ue(t,uh,"getLogs")({address:n,args:i,blockHash:s,event:h,events:d,fromBlock:o,toBlock:f,strict:c})}const xc="/docs/contract/decodeFunctionResult";function Ls(t){const{abi:e,args:r,functionName:n,data:i}=t;let s=e[0];if(n){const o=Ga({abi:e,args:r,name:n});if(!o)throw new Wo(n,{docsPath:xc});s=o}if(s.type!=="function")throw new Wo(void 0,{docsPath:xc});if(!s.outputs)throw new mm(s.name,{docsPath:xc});const a=D0(s.outputs,i);if(a.length>1)return a;if(a.length===1)return a[0]}const su=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],og=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],cg=[...og,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Fx=[...og,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],kd=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],qd=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],zd=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Rx="0x82ad56cb",Ox="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Tx="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Nx="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class au extends te{constructor({blockNumber:e,chain:r,contract:n}){super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class $x extends te{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Lx extends te{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class fg extends te{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const wc="/docs/contract/encodeDeployData";function P0(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const i=e.find(a=>"type"in a&&a.type==="constructor");if(!i)throw new pm({docsPath:wc});if(!("inputs"in i))throw new vd({docsPath:wc});if(!i.inputs||i.inputs.length===0)throw new vd({docsPath:wc});const s=Ns(i.inputs,r);return Va([n,s])}function ks({blockNumber:t,chain:e,contract:r}){const n=e?.contracts?.[r];if(!n)throw new au({chain:e,contract:{name:r}});if(t&&n.blockCreated&&n.blockCreated>t)throw new au({blockNumber:t,chain:e,contract:{name:r,blockCreated:n.blockCreated}});return n.address}function kx(t,{docsPath:e,...r}){const n=(()=>{const i=th(t,r);return i instanceof C0?t:i})();return new jb(n,{docsPath:e,...r})}function ug(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const _c=new Map;function hg({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const h=f();a();const d=h.map(({args:p})=>p);d.length!==0&&t(d).then(p=>{i&&Array.isArray(p)&&p.sort(i);for(let v=0;v<h.length;v++){const{resolve:x}=h[v];x?.([p[v],p])}}).catch(p=>{for(let v=0;v<h.length;v++){const{reject:x}=h[v];x?.(p)}})},a=()=>_c.delete(e),o=()=>f().map(({args:h})=>h),f=()=>_c.get(e)||[],c=h=>_c.set(e,[...f(),h]);return{flush:a,async schedule(h){const{promise:d,resolve:p,reject:v}=ug();return r?.([...o(),h])&&s(),f().length>0?(c({args:h,resolve:p,reject:v}),d):(c({args:h,resolve:p,reject:v}),setTimeout(s,n),d)}}}async function F0(t,e){const{account:r=t.account,batch:n=!!t.batch?.multicall,blockNumber:i,blockTag:s="latest",accessList:a,blobs:o,code:f,data:c,factory:h,factoryData:d,gas:p,gasPrice:v,maxFeePerBlobGas:x,maxFeePerGas:D,maxPriorityFeePerGas:S,nonce:O,to:A,value:F,stateOverride:P,...k}=e,L=r?mr(r):void 0;if(f&&(h||d))throw new te("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&A)throw new te("Cannot provide both `code` & `to` as parameters.");const m=f&&c,T=h&&d&&A&&c,j=m||T,U=m?Ux({code:f,data:c}):T?jx({data:c,factory:h,factoryData:d,to:A}):c;try{Xa(e);const g=(i?Ve(i):void 0)||s,b=Wb(P),u=t.chain?.formatters?.transactionRequest?.format,w=(u||I0)({...rh(k,{format:u}),from:L?.address,accessList:a,blobs:o,data:U,gas:p,gasPrice:v,maxFeePerBlobGas:x,maxFeePerGas:D,maxPriorityFeePerGas:S,nonce:O,to:j?void 0:A,value:F});if(n&&qx({request:w})&&!b)try{return await zx(t,{...w,blockNumber:i,blockTag:s})}catch(B){if(!(B instanceof fg)&&!(B instanceof au))throw B}const I=await t.request({method:"eth_call",params:b?[w,g,b]:[w,g]});return I==="0x"?{data:void 0}:{data:I}}catch(N){const g=Hx(N),{offchainLookup:b,offchainLookupSignature:u}=await eb(async()=>{const{offchainLookup:l,offchainLookupSignature:w}=await import("./ccip.CGySeX_o.js");return{offchainLookup:l,offchainLookupSignature:w}},[],import.meta.url);if(t.ccipRead!==!1&&g?.slice(0,10)===u&&A)return{data:await b(t,{data:g,to:A})};throw j&&g?.slice(0,10)==="0x101bb98d"?new V6({factory:h}):kx(N,{...e,account:L,chain:t.chain})}}function qx({request:t}){const{data:e,to:r,...n}=t;return!(!e||e.startsWith(Rx)||!r||Object.values(n).filter(i=>typeof i<"u").length>0)}async function zx(t,e){const{batchSize:r=1024,wait:n=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:s="latest",data:a,multicallAddress:o,to:f}=e;let c=o;if(!c){if(!t.chain)throw new fg;c=ks({blockNumber:i,chain:t.chain,contract:"multicall3"})}const d=(i?Ve(i):void 0)||s,{schedule:p}=hg({id:`${t.uid}.${d}`,wait:n,shouldSplitBatch(D){return D.reduce((O,{data:A})=>O+(A.length-2),0)>r*2},fn:async D=>{const S=D.map(F=>({allowFailure:!0,callData:F.data,target:F.to})),O=Zn({abi:su,args:[S],functionName:"aggregate3"}),A=await t.request({method:"eth_call",params:[{data:O,to:c},d]});return Ls({abi:su,args:[S],functionName:"aggregate3",data:A||"0x"})}}),[{returnData:v,success:x}]=await p({data:a,to:f});if(!x)throw new Qu({data:v});return v==="0x"?{data:void 0}:{data:v}}function Ux(t){const{code:e,data:r}=t;return P0({abi:db(["constructor(bytes, bytes)"]),bytecode:Ox,args:[e,r]})}function jx(t){const{data:e,factory:r,factoryData:n,to:i}=t;return P0({abi:db(["constructor(address, bytes, address, bytes)"]),bytecode:Tx,args:[i,e,r,n]})}function Hx(t){if(!(t instanceof te))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function Vn(t,e){const{abi:r,address:n,args:i,functionName:s,...a}=e,o=Zn({abi:r,args:i,functionName:s});try{const{data:f}=await Ue(t,F0,"call")({...a,data:o,to:n});return Ls({abi:r,args:i,functionName:s,data:f||"0x"})}catch(f){throw As(f,{abi:r,address:n,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}async function Kx(t,e){const{abi:r,address:n,args:i,dataSuffix:s,functionName:a,...o}=e,f=o.account?mr(o.account):t.account,c=Zn({abi:r,args:i,functionName:a});try{const{data:h}=await Ue(t,F0,"call")({batch:!1,data:`${c}${s?s.replace("0x",""):""}`,to:n,...o,account:f}),d=Ls({abi:r,args:i,functionName:a,data:h||"0x"}),p=r.filter(v=>"name"in v&&v.name===e.functionName);return{result:d,request:{abi:p,address:n,args:i,dataSuffix:s,functionName:a,...o,account:f}}}catch(h){throw As(h,{abi:r,address:n,args:i,docsPath:"/docs/contract/simulateContract",functionName:a,sender:f?.address})}}const Ec=new Map,Ud=new Map;let Vx=0;function li(t,e,r){const n=++Vx,i=()=>Ec.get(t)||[],s=()=>{const h=i();Ec.set(t,h.filter(d=>d.id!==n))},a=()=>{const h=i();if(!h.some(p=>p.id===n))return;const d=Ud.get(t);h.length===1&&d&&d(),s()},o=i();if(Ec.set(t,[...o,{id:n,fns:e}]),o.length>0)return a;const f={};for(const h in e)f[h]=(...d)=>{const p=i();if(p.length!==0)for(const v of p)v.fns[h]?.(...d)};const c=r(f);return typeof c=="function"&&Ud.set(t,c),a}async function ou(t){return new Promise(e=>setTimeout(e,t))}function Ja(t,{emitOnBegin:e,initialWaitTime:r,interval:n}){let i=!0;const s=()=>i=!1;return(async()=>{let o;e&&(o=await t({unpoll:s}));const f=await r?.(o)??n;await ou(f);const c=async()=>{i&&(await t({unpoll:s}),await ou(n),c())};c()})(),s}const Gx=new Map,Wx=new Map;function Zx(t){const e=(i,s)=>({clear:()=>s.delete(i),get:()=>s.get(i),set:a=>s.set(i,a)}),r=e(t,Gx),n=e(t,Wx);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function Xx(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){const n=Zx(e),i=n.response.get();if(i&&r>0&&new Date().getTime()-i.created.getTime()<r)return i.data;let s=n.promise.get();s||(s=t(),n.promise.set(s));try{const a=await s;return n.response.set({created:new Date,data:a}),a}finally{n.promise.clear()}}const Yx=t=>`blockNumber.${t}`;async function Qa(t,{cacheTime:e=t.cacheTime}={}){const r=await Xx(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Yx(t.uid),cacheTime:e});return BigInt(r)}async function R0(t,{filter:e}){const r="strict"in e&&e.strict,n=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof n[0]=="string")return n;const i=n.map(s=>di(s));return!("abi"in e)||!e.abi?i:fh({abi:e.abi,logs:i,strict:r})}async function O0(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Jx(t,e){const{abi:r,address:n,args:i,batch:s=!0,eventName:a,fromBlock:o,onError:f,onLogs:c,poll:h,pollingInterval:d=t.pollingInterval,strict:p}=e;return(typeof h<"u"?h:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"))?(()=>{const S=p??!1,O=Nt(["watchContractEvent",n,i,s,t.uid,a,d,S,o]);return li(O,{onLogs:c,onError:f},A=>{let F;o!==void 0&&(F=o-1n);let P,k=!1;const L=Ja(async()=>{if(!k){try{P=await Ue(t,Nb,"createContractEventFilter")({abi:r,address:n,args:i,eventName:a,strict:S,fromBlock:o})}catch{}k=!0;return}try{let m;if(P)m=await Ue(t,R0,"getFilterChanges")({filter:P});else{const T=await Ue(t,Qa,"getBlockNumber")({});F&&F<T?m=await Ue(t,ag,"getContractEvents")({abi:r,address:n,args:i,eventName:a,fromBlock:F+1n,toBlock:T,strict:S}):m=[],F=T}if(m.length===0)return;if(s)A.onLogs(m);else for(const T of m)A.onLogs([T])}catch(m){P&&m instanceof Hi&&(k=!1),A.onError?.(m)}},{emitOnBegin:!0,interval:d});return async()=>{P&&await Ue(t,O0,"uninstallFilter")({filter:P}),L()}})})():(()=>{const S=p??!1,O=Nt(["watchContractEvent",n,i,s,t.uid,a,d,S]);let A=!0,F=()=>A=!1;return li(O,{onLogs:c,onError:f},P=>((async()=>{try{const k=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(j=>j.config.type==="webSocket");return T?T.value:t.transport}return t.transport})(),L=a?Wa({abi:r,eventName:a,args:i}):[],{unsubscribe:m}=await k.subscribe({params:["logs",{address:n,topics:L}],onData(T){if(!A)return;const j=T.result;try{const{eventName:U,args:N}=ch({abi:r,data:j.data,topics:j.topics,strict:p}),g=di(j,{args:N,eventName:U});P.onLogs([g])}catch(U){let N,g;if(U instanceof wa||U instanceof _0){if(p)return;N=U.abiItem.name,g=U.abiItem.inputs?.some(u=>!("name"in u&&u.name))}const b=di(j,{args:g?[]:{},eventName:N});P.onLogs([b])}},onError(T){P.onError?.(T)}});F=m,A||F()}catch(k){f?.(k)}})(),()=>F()))})()}class eo extends te{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Ac extends te{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function dg({chain:t,currentChainId:e}){if(!t)throw new Lx;if(e!==t.id)throw new $x({chain:t,currentChainId:e})}function Qx(t,{docsPath:e,...r}){const n=(()=>{const i=th(t,r);return i instanceof C0?t:i})();return new z6(n,{docsPath:e,...r})}async function hh(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Sc=new A0(128);async function dh(t,e){const{account:r=t.account,chain:n=t.chain,accessList:i,authorizationList:s,blobs:a,data:o,gas:f,gasPrice:c,maxFeePerBlobGas:h,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:v,value:x,...D}=e;if(typeof r>"u")throw new eo({docsPath:"/docs/actions/wallet/sendTransaction"});const S=r?mr(r):null;try{Xa(e);const O=await(async()=>{if(e.to)return e.to;if(s&&s.length>0)return await Gb({authorization:s[0]}).catch(()=>{throw new te("`to` is required. Could not infer from `authorizationList`.")})})();if(S?.type==="json-rpc"||S===null){let A;n!==null&&(A=await Ue(t,Ya,"getChainId")({}),dg({currentChainId:A,chain:n}));const F=t.chain?.formatters?.transactionRequest?.format,k=(F||I0)({...rh(D,{format:F}),accessList:i,authorizationList:s,blobs:a,chainId:A,data:o,from:S?.address,gas:f,gasPrice:c,maxFeePerBlobGas:h,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:v,to:O,value:x}),L=Sc.get(t.uid),m=L?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:m,params:[k]},{retryCount:0})}catch(T){if(L===!1)throw T;const j=T;if(j.name==="InvalidInputRpcError"||j.name==="InvalidParamsRpcError"||j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(U=>(Sc.set(t.uid,!0),U)).catch(U=>{const N=U;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(Sc.set(t.uid,!1),j):N});throw j}}if(S?.type==="local"){const A=await Ue(t,B0,"prepareTransactionRequest")({account:S,accessList:i,authorizationList:s,blobs:a,chain:n,data:o,gas:f,gasPrice:c,maxFeePerBlobGas:h,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:v,nonceManager:S.nonceManager,parameters:[...ig,"sidecars"],value:x,...D,to:O}),F=n?.serializers?.transaction,P=await S.signTransaction(A,{serializer:F});return await Ue(t,hh,"sendRawTransaction")({serializedTransaction:P})}throw S?.type==="smart"?new Ac({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ac({docsPath:"/docs/actions/wallet/sendTransaction",type:S?.type})}catch(O){throw O instanceof Ac?O:Qx(O,{...e,account:S,chain:e.chain||void 0})}}async function e3(t,e){const{abi:r,account:n=t.account,address:i,args:s,dataSuffix:a,functionName:o,...f}=e;if(typeof n>"u")throw new eo({docsPath:"/docs/contract/writeContract"});const c=n?mr(n):null,h=Zn({abi:r,args:s,functionName:o});try{return await Ue(t,dh,"sendTransaction")({data:`${h}${a?a.replace("0x",""):""}`,to:i,account:c,...f})}catch(d){throw As(d,{abi:r,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:o,sender:c?.address})}}class t3 extends te{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function r3(t,e){const{address:r,factory:n,factoryData:i}=e;try{const[s,a,o,f,c,h,d]=await Ue(t,Vn,"readContract")({abi:n3,address:r,functionName:"eip712Domain",factory:n,factoryData:i});return{domain:{name:a,version:o,chainId:Number(f),verifyingContract:c,salt:h},extensions:d,fields:s}}catch(s){const a=s;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new t3({address:r}):a}}const n3=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function i3(t,{chain:e}){const{id:r,name:n,nativeCurrency:i,rpcUrls:s,blockExplorers:a}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ve(r),chainName:n,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:a?Object.values(a).map(({url:o})=>o):void 0}]},{dedupe:!0,retryCount:0})}const cu=256;let So=cu,Do;function lg(t=11){if(!Do||So+t>cu*2){Do="",So=0;for(let e=0;e<cu;e++)Do+=(256+Math.random()*256|0).toString(16).substring(1)}return Do.substring(So,So+++t)}function pg(t){const{batch:e,cacheTime:r=t.pollingInterval??4e3,ccipRead:n,key:i="base",name:s="Base Client",pollingInterval:a=4e3,type:o="base"}=t,f=t.chain,c=t.account?mr(t.account):void 0,{config:h,request:d,value:p}=t.transport({chain:f,pollingInterval:a}),v={...h,...p},x={account:c,batch:e,cacheTime:r,ccipRead:n,chain:f,key:i,name:s,pollingInterval:a,request:d,transport:v,type:o,uid:lg()};function D(S){return O=>{const A=O(S);for(const P in x)delete A[P];const F={...S,...A};return Object.assign(F,{extend:D(F)})}}return Object.assign(x,{extend:D(x)})}const Mo=new A0(8192);function s3(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Mo.get(r))return Mo.get(r);const n=t().finally(()=>Mo.delete(r));return Mo.set(r,n),n}function fu(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const a=async({count:o=0}={})=>{const f=async({error:c})=>{const h=typeof e=="function"?e({count:o,error:c}):e;h&&await ou(h),a({count:o+1})};try{const c=await t();i(c)}catch(c){if(o<r&&await n({count:o,error:c}))return f({error:c});s(c)}};a()})}function a3(t,e={}){return async(r,n={})=>{const{dedupe:i=!1,retryDelay:s=150,retryCount:a=3,uid:o}={...e,...n},f=i?Rt(_s(`${o}.${Nt(r)}`)):void 0;return s3(()=>fu(async()=>{try{return await t(r)}catch(c){const h=c;switch(h.code){case Ea.code:throw new Ea(h);case Aa.code:throw new Aa(h);case Sa.code:throw new Sa(h,{method:r.method});case Da.code:throw new Da(h);case ji.code:throw new ji(h);case Hi.code:throw new Hi(h);case Ma.code:throw new Ma(h);case Ca.code:throw new Ca(h);case Ia.code:throw new Ia(h);case Ba.code:throw new Ba(h,{method:r.method});case Es.code:throw new Es(h);case Pa.code:throw new Pa(h);case vs.code:throw new vs(h);case Fa.code:throw new Fa(h);case Ra.code:throw new Ra(h);case Oa.code:throw new Oa(h);case Ta.code:throw new Ta(h);case Na.code:throw new Na(h);case 5e3:throw new vs(h);default:throw c instanceof te?c:new W6(h)}}},{delay:({count:c,error:h})=>{if(h&&h instanceof va){const d=h?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d)*1e3}return~~(1<<c)*s},retryCount:a,shouldRetry:({error:c})=>o3(c)}),{enabled:i,id:f})}}function o3(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Es.code||t.code===ji.code:t instanceof va&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function c3({key:t,name:e,request:r,retryCount:n=3,retryDelay:i=150,timeout:s,type:a},o){const f=lg();return{config:{key:t,name:e,request:r,retryCount:n,retryDelay:i,timeout:s,type:a},request:a3(r,{retryCount:n,retryDelay:i,uid:f}),value:o}}class f3 extends te{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function u3(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let a;try{const o=new AbortController;r>0&&(a=setTimeout(()=>{n?o.abort():s(e)},r)),i(await t({signal:o?.signal||null}))}catch(o){o?.name==="AbortError"&&s(e),s(o)}finally{clearTimeout(a)}})()})}function h3(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const jd=h3();function d3(t,e={}){return{async request(r){const{body:n,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:a=e.timeout??1e4}=r,o={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:f,method:c,signal:h}=o;try{const d=await u3(async({signal:v})=>{const x={...o,body:Array.isArray(n)?Nt(n.map(A=>({jsonrpc:"2.0",id:A.id??jd.take(),...A}))):Nt({jsonrpc:"2.0",id:n.id??jd.take(),...n}),headers:{"Content-Type":"application/json",...f},method:c||"POST",signal:h||(a>0?v:null)},D=new Request(t,x),S=await i?.(D,x)??{...x,url:t};return await fetch(S.url??t,S)},{errorInstance:new Rd({body:n,url:t}),timeout:a,signal:!0});s&&await s(d);let p;if(d.headers.get("Content-Type")?.startsWith("application/json"))p=await d.json();else{p=await d.text();try{p=JSON.parse(p||"{}")}catch(v){if(d.ok)throw v;p={error:p}}}if(!d.ok)throw new va({body:n,details:Nt(p.error)||d.statusText,headers:d.headers,status:d.status,url:t});return p}catch(d){throw d instanceof va||d instanceof Rd?d:new va({body:n,cause:d,url:t})}}}}function bg(t,e={}){const{batch:r,fetchOptions:n,key:i="http",name:s="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:o,retryDelay:f}=e;return({chain:c,retryCount:h,timeout:d})=>{const{batchSize:p=1e3,wait:v=0}=typeof r=="object"?r:{},x=e.retryCount??h,D=d??e.timeout??1e4,S=c?.rpcUrls.default.http[0];if(!S)throw new f3;const O=d3(S,{fetchOptions:n,onRequest:a,onResponse:o,timeout:D});return c3({key:i,name:s,async request({method:A,params:F}){const P={method:A,params:F},{schedule:k}=hg({id:S,wait:v,shouldSplitBatch(j){return j.length>p},fn:j=>O.request({body:j}),sort:(j,U)=>j.id-U.id}),L=async j=>r?k(j):[await O.request({body:j})],[{error:m,result:T}]=await L(P);if(m)throw new eh({body:P,error:m,url:S});return T},retryCount:x,retryDelay:f,timeout:D,type:"http"},{fetchOptions:n,url:S})}}function lh(t,e){if(!(t instanceof te))return!1;const r=t.walk(n=>n instanceof Zf);return r instanceof Zf?!!(r.data?.errorName==="ResolverNotFound"||r.data?.errorName==="ResolverWildcardNotSupported"||r.data?.errorName==="ResolverNotContract"||r.data?.errorName==="ResolverError"||r.data?.errorName==="HttpError"||r.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&r.reason===$b[50]):!1}function gg(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return hn(e)?e:null}function Oo(t){let e=new Uint8Array(32).fill(0);if(!t)return Mt(e);const r=t.split(".");for(let n=r.length-1;n>=0;n-=1){const i=gg(r[n]),s=i?Ts(i):Rt(ki(r[n]),"bytes");e=Rt(Kn([e,s]),"bytes")}return Mt(e)}function l3(t){return`[${t.slice(2)}]`}function p3(t){const e=new Uint8Array(32).fill(0);return t?gg(t)||Rt(ki(t)):Mt(e)}function T0(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const r=new Uint8Array(ki(e).byteLength+2);let n=0;const i=e.split(".");for(let s=0;s<i.length;s++){let a=ki(i[s]);a.byteLength>255&&(a=ki(l3(p3(i[s])))),r[n]=a.length,r.set(a,n+1),n+=a.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}async function b3(t,{blockNumber:e,blockTag:r,coinType:n,name:i,gatewayUrls:s,strict:a,universalResolverAddress:o}){let f=o;if(!f){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");f=ks({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const c=Zn({abi:qd,functionName:"addr",...n!=null?{args:[Oo(i),BigInt(n)]}:{args:[Oo(i)]}}),h={address:f,abi:cg,functionName:"resolve",args:[dn(T0(i)),c],blockNumber:e,blockTag:r},d=Ue(t,Vn,"readContract"),p=s?await d({...h,args:[...h.args,s]}):await d(h);if(p[0]==="0x")return null;const v=Ls({abi:qd,args:n!=null?[Oo(i),BigInt(n)]:void 0,functionName:"addr",data:p[0]});return v==="0x"||Li(v)==="0x00"?null:v}catch(c){if(a)throw c;if(lh(c,"resolve"))return null;throw c}}class g3 extends te{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class ra extends te{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class ph extends te{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class v3 extends te{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const y3=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,m3=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,x3=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,w3=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function _3(t){try{const e=await fetch(t,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(r=>{const n=new Image;n.onload=()=>{r(!0)},n.onerror=()=>{r(!1)},n.src=t})}}function Hd(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function vg({uri:t,gatewayUrls:e}){const r=x3.test(t);if(r)return{uri:t,isOnChain:!0,isEncoded:r};const n=Hd(e?.ipfs,"https://ipfs.io"),i=Hd(e?.arweave,"https://arweave.net"),s=t.match(y3),{protocol:a,subpath:o,target:f,subtarget:c=""}=s?.groups||{},h=a==="ipns:/"||o==="ipns/",d=a==="ipfs:/"||o==="ipfs/"||m3.test(t);if(t.startsWith("http")&&!h&&!d){let v=t;return e?.arweave&&(v=t.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:v,isOnChain:!1,isEncoded:!1}}if((h||d)&&f)return{uri:`${n}/${h?"ipns":"ipfs"}/${f}${c}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&f)return{uri:`${i}/${f}${c||""}`,isOnChain:!1,isEncoded:!1};let p=t.replace(w3,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new ph({uri:t})}function yg(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new g3({data:t});return t.image||t.image_url||t.image_data}async function E3({gatewayUrls:t,uri:e}){try{const r=await fetch(e).then(i=>i.json());return await bh({gatewayUrls:t,uri:yg(r)})}catch{throw new ph({uri:e})}}async function bh({gatewayUrls:t,uri:e}){const{uri:r,isOnChain:n}=vg({uri:e,gatewayUrls:t});if(n||await _3(r))return r;throw new ph({uri:e})}function A3(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[r,n,i]=e.split("/"),[s,a]=r.split(":"),[o,f]=n.split(":");if(!s||s.toLowerCase()!=="eip155")throw new ra({reason:"Only EIP-155 supported"});if(!a)throw new ra({reason:"Chain ID not found"});if(!f)throw new ra({reason:"Contract address not found"});if(!i)throw new ra({reason:"Token ID not found"});if(!o)throw new ra({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:o.toLowerCase(),contractAddress:f,tokenID:i}}async function S3(t,{nft:e}){if(e.namespace==="erc721")return Vn(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Vn(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new v3({namespace:e.namespace})}async function D3(t,{gatewayUrls:e,record:r}){return/eip155:/i.test(r)?M3(t,{gatewayUrls:e,record:r}):bh({uri:r,gatewayUrls:e})}async function M3(t,{gatewayUrls:e,record:r}){const n=A3(r),i=await S3(t,{nft:n}),{uri:s,isOnChain:a,isEncoded:o}=vg({uri:i,gatewayUrls:e});if(a&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){const c=o?atob(s.replace("data:application/json;base64,","")):s,h=JSON.parse(c);return bh({uri:yg(h),gatewayUrls:e})}let f=n.tokenID;return n.namespace==="erc1155"&&(f=f.replace("0x","").padStart(64,"0")),E3({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,f)})}async function mg(t,{blockNumber:e,blockTag:r,name:n,key:i,gatewayUrls:s,strict:a,universalResolverAddress:o}){let f=o;if(!f){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");f=ks({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const c={address:f,abi:cg,functionName:"resolve",args:[dn(T0(n)),Zn({abi:kd,functionName:"text",args:[Oo(n),i]})],blockNumber:e,blockTag:r},h=Ue(t,Vn,"readContract"),d=s?await h({...c,args:[...c.args,s]}):await h(c);if(d[0]==="0x")return null;const p=Ls({abi:kd,functionName:"text",data:d[0]});return p===""?null:p}catch(c){if(a)throw c;if(lh(c,"resolve"))return null;throw c}}async function C3(t,{blockNumber:e,blockTag:r,assetGatewayUrls:n,name:i,gatewayUrls:s,strict:a,universalResolverAddress:o}){const f=await Ue(t,mg,"getEnsText")({blockNumber:e,blockTag:r,key:"avatar",name:i,universalResolverAddress:o,gatewayUrls:s,strict:a});if(!f)return null;try{return await D3(t,{record:f,gatewayUrls:n})}catch{return null}}async function I3(t,{address:e,blockNumber:r,blockTag:n,gatewayUrls:i,strict:s,universalResolverAddress:a}){let o=a;if(!o){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=ks({blockNumber:r,chain:t.chain,contract:"ensUniversalResolver"})}const f=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const c={address:o,abi:Fx,functionName:"reverse",args:[dn(T0(f))],blockNumber:r,blockTag:n},h=Ue(t,Vn,"readContract"),[d,p]=i?await h({...c,args:[...c.args,i]}):await h(c);return e.toLowerCase()!==p.toLowerCase()?null:d}catch(c){if(s)throw c;if(lh(c,"reverse"))return null;throw c}}async function B3(t,{blockNumber:e,blockTag:r,name:n,universalResolverAddress:i}){let s=i;if(!s){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");s=ks({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}const[a]=await Ue(t,Vn,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[dn(T0(n))],blockNumber:e,blockTag:r});return a}async function P3(t){const e=S0(t,{method:"eth_newBlockFilter"}),r=await t.request({method:"eth_newBlockFilter"});return{id:r,request:e(r),type:"block"}}async function xg(t,{address:e,args:r,event:n,events:i,fromBlock:s,strict:a,toBlock:o}={}){const f=i??(n?[n]:void 0),c=S0(t,{method:"eth_newFilter"});let h=[];f&&(h=[f.flatMap(v=>Wa({abi:[v],eventName:v.name,args:r}))],n&&(h=h[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?Ve(s):s,toBlock:typeof o=="bigint"?Ve(o):o,...h.length?{topics:h}:{}}]});return{abi:f,args:r,eventName:n?n.name:void 0,fromBlock:s,id:d,request:c(d),strict:!!a,toBlock:o,type:"event"}}async function wg(t){const e=S0(t,{method:"eth_newPendingTransactionFilter"}),r=await t.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:e(r),type:"transaction"}}async function F3(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function R3(t,{blockHash:e,blockNumber:r,blockTag:n="latest"}={}){const i=r!==void 0?Ve(r):void 0;let s;return e?s=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):s=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[i||n]},{dedupe:!!i}),Hn(s)}async function Kd(t,{address:e,blockNumber:r,blockTag:n="latest"}){const i=r!==void 0?Ve(r):void 0,s=await t.request({method:"eth_getCode",params:[e,i||n]},{dedupe:!!i});if(s!=="0x")return s}function O3(t){return{baseFeePerGas:t.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:t.reward?.map(e=>e.map(r=>BigInt(r)))}}async function T3(t,{blockCount:e,blockNumber:r,blockTag:n="latest",rewardPercentiles:i}){const s=r?Ve(r):void 0,a=await t.request({method:"eth_feeHistory",params:[Ve(e),s||n,i]},{dedupe:!!s});return O3(a)}async function N3(t,{filter:e}){const r=e.strict??!1,i=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>di(s));return e.abi?fh({abi:e.abi,logs:i,strict:r}):i}function $3(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class L3 extends te{constructor({domain:e}){super(`Invalid domain "${Nt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class k3 extends te{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class q3 extends te{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function z3(t){const{domain:e={},message:r,primaryType:n}=t,i={EIP712Domain:Mg({domain:e}),...t.types};Dg({domain:e,message:r,primaryType:n,types:i});const s=["0x1901"];return e&&s.push(U3({domain:e,types:i})),n!=="EIP712Domain"&&s.push(_g({data:r,primaryType:n,types:i})),Rt(Kn(s))}function U3({domain:t,types:e}){return _g({data:t,primaryType:"EIP712Domain",types:e})}function _g({data:t,primaryType:e,types:r}){const n=Eg({data:t,primaryType:e,types:r});return Rt(n)}function Eg({data:t,primaryType:e,types:r}){const n=[{type:"bytes32"}],i=[j3({primaryType:e,types:r})];for(const s of r[e]){const[a,o]=Sg({types:r,name:s.name,type:s.type,value:t[s.name]});n.push(a),i.push(o)}return Ns(n,i)}function j3({primaryType:t,types:e}){const r=dn(H3({primaryType:t,types:e}));return Rt(r)}function H3({primaryType:t,types:e}){let r="";const n=Ag({primaryType:t,types:e});n.delete(t);const i=[t,...Array.from(n).sort()];for(const s of i)r+=`${s}(${e[s].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return r}function Ag({primaryType:t,types:e},r=new Set){const i=t.match(/^\w*/u)?.[0];if(r.has(i)||e[i]===void 0)return r;r.add(i);for(const s of e[i])Ag({primaryType:s.type,types:e},r);return r}function Sg({types:t,name:e,type:r,value:n}){if(t[r]!==void 0)return[{type:"bytes32"},Rt(Eg({data:n,primaryType:r,types:t}))];if(r==="bytes")return n=`0x${(n.length%2?"0":"")+n.slice(2)}`,[{type:"bytes32"},Rt(n)];if(r==="string")return[{type:"bytes32"},Rt(dn(n))];if(r.lastIndexOf("]")===r.length-1){const i=r.slice(0,r.lastIndexOf("[")),s=n.map(a=>Sg({name:e,type:i,types:t,value:a}));return[{type:"bytes32"},Rt(Ns(s.map(([a])=>a),s.map(([,a])=>a)))]}return[{type:r},n]}function K3(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(f,c)=>{const h={...c};for(const d of f){const{name:p,type:v}=d;v==="address"&&(h[p]=h[p].toLowerCase())}return h},a=i.EIP712Domain?e?s(i.EIP712Domain,e):{}:{},o=(()=>{if(n!=="EIP712Domain")return s(i[n],r)})();return Nt({domain:a,message:o,primaryType:n,types:i})}function Dg(t){const{domain:e,message:r,primaryType:n,types:i}=t,s=(a,o)=>{for(const f of a){const{name:c,type:h}=f,d=o[c],p=h.match(Ob);if(p&&(typeof d=="number"||typeof d=="bigint")){const[D,S,O]=p;Ve(d,{signed:S==="int",size:Number.parseInt(O)/8})}if(h==="address"&&typeof d=="string"&&!Wr(d))throw new hi({address:d});const v=h.match(f6);if(v){const[D,S]=v;if(S&&Et(d)!==Number.parseInt(S))throw new wm({expectedSize:Number.parseInt(S),givenSize:Et(d)})}const x=i[h];x&&(V3(h),s(x,d))}};if(i.EIP712Domain&&e){if(typeof e!="object")throw new L3({domain:e});s(i.EIP712Domain,e)}if(n!=="EIP712Domain")if(i[n])s(i[n],r);else throw new k3({primaryType:n,types:i})}function Mg({domain:t}){return[typeof t?.name=="string"&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},typeof t?.chainId=="number"&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function V3(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new q3({type:t})}const G3={"0x0":"reverted","0x1":"success"};function W3(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>di(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Hn(t.transactionIndex):null,status:t.status?G3[t.status]:null,type:t.type?Xb[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const Z3=`Ethereum Signed Message:
`;function X3(t){const e=typeof t=="string"?_s(t):typeof t.raw=="string"?t.raw:Mt(t.raw),r=_s(`${Z3}${Et(e)}`);return Kn([r,e])}function Cg(t,e){return Rt(X3(t),e)}const Ig="0x6492649264926492649264926492649264926492649264926492649264926492";function Y3(t){return Rb(t,-32)===Ig}function J3(t){const{address:e,data:r,signature:n,to:i="hex"}=t,s=Va([Ns([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,r,n]),Ig]);return i==="hex"?s:Gr(s)}function Q3(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function e5(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Hn(t.nonce):void 0,storageProof:t.storageProof?Q3(t.storageProof):void 0}}async function t5(t,{address:e,blockNumber:r,blockTag:n,storageKeys:i}){const s=n??"latest",a=r!==void 0?Ve(r):void 0,o=await t.request({method:"eth_getProof",params:[e,i,a||s]});return e5(o)}async function r5(t,{address:e,blockNumber:r,blockTag:n="latest",slot:i}){const s=r!==void 0?Ve(r):void 0;return await t.request({method:"eth_getStorageAt",params:[e,i,s||n]})}async function gh(t,{blockHash:e,blockNumber:r,blockTag:n,hash:i,index:s}){const a=n||"latest",o=r!==void 0?Ve(r):void 0;let f=null;if(i?f=await t.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):e?f=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ve(s)]},{dedupe:!0}):(o||a)&&(f=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,Ve(s)]},{dedupe:!!o})),!f)throw new zb({blockHash:e,blockNumber:r,blockTag:a,hash:i,index:s});return(t.chain?.formatters?.transaction?.format||Yb)(f)}async function n5(t,{hash:e,transactionReceipt:r}){const[n,i]=await Promise.all([Ue(t,Qa,"getBlockNumber")({}),e?Ue(t,gh,"getTransaction")({hash:e}):void 0]),s=r?.blockNumber||i?.blockNumber;return s?n-s+1n:0n}async function uu(t,{hash:e}){const r=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!r)throw new Ub({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||W3)(r)}async function i5(t,e){const{allowFailure:r=!0,batchSize:n,blockNumber:i,blockTag:s,multicallAddress:a,stateOverride:o}=e,f=e.contracts,c=n??(typeof t.batch?.multicall=="object"&&t.batch.multicall.batchSize||1024);let h=a;if(!h){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");h=ks({blockNumber:i,chain:t.chain,contract:"multicall3"})}const d=[[]];let p=0,v=0;for(let S=0;S<f.length;S++){const{abi:O,address:A,args:F,functionName:P}=f[S];try{const k=Zn({abi:O,args:F,functionName:P});v+=(k.length-2)/2,c>0&&v>c&&d[p].length>0&&(p++,v=(k.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:k,target:A}]}catch(k){const L=As(k,{abi:O,address:A,args:F,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw L;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:A}]}}const x=await Promise.allSettled(d.map(S=>Ue(t,Vn,"readContract")({abi:su,address:h,args:[S],blockNumber:i,blockTag:s,functionName:"aggregate3",stateOverride:o}))),D=[];for(let S=0;S<x.length;S++){const O=x[S];if(O.status==="rejected"){if(!r)throw O.reason;for(let F=0;F<d[S].length;F++)D.push({status:"failure",error:O.reason,result:void 0});continue}const A=O.value;for(let F=0;F<A.length;F++){const{returnData:P,success:k}=A[F],{callData:L}=d[S][F],{abi:m,address:T,functionName:j,args:U}=f[D.length];try{if(L==="0x")throw new w0;if(!k)throw new Qu({data:P});const N=Ls({abi:m,args:U,data:P,functionName:j});D.push(r?{result:N,status:"success"}:N)}catch(N){const g=As(N,{abi:m,address:T,args:U,docsPath:"/docs/contract/multicall",functionName:j});if(!r)throw g;D.push({error:g,result:void 0,status:"failure"})}}}if(D.length!==f.length)throw new te("multicall results mismatch");return D}function Vd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function N0(t,...e){if(!s5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vd(t.outputLen),Vd(t.blockLen)}function Qo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o5(t,e){N0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const os=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dc=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Qr=(t,e)=>t<<32-e|t>>>e;function c5(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function vh(t){return typeof t=="string"&&(t=c5(t)),N0(t),t}function f5(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];N0(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class Bg{clone(){return this._cloneInto()}}function u5(t){const e=n=>t().update(vh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function h5(t=32){if(os&&typeof os.getRandomValues=="function")return os.getRandomValues(new Uint8Array(t));if(os&&typeof os.randomBytes=="function")return os.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function d5(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),f=n?4:0,c=n?0:4;t.setUint32(e+f,a,n),t.setUint32(e+c,o,n)}const l5=(t,e,r)=>t&e^~t&r,p5=(t,e,r)=>t&e^t&r^e&r;class b5 extends Bg{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Dc(this.buffer)}update(e){Qo(this);const{view:r,buffer:n,blockLen:i}=this;e=vh(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const f=Dc(e);for(;i<=s-a;a+=i)this.process(f,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qo(this),o5(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let d=a;d<i;d++)r[d]=0;d5(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=Dc(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)o.setUint32(4*d,h[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}}const g5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ti=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ri=new Uint32Array(64);let v5=class extends b5{constructor(){super(64,32,8,!1),this.A=ti[0]|0,this.B=ti[1]|0,this.C=ti[2]|0,this.D=ti[3]|0,this.E=ti[4]|0,this.F=ti[5]|0,this.G=ti[6]|0,this.H=ti[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:a,G:o,H:f}=this;return[e,r,n,i,s,a,o,f]}set(e,r,n,i,s,a,o,f){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=f|0}process(e,r){for(let d=0;d<16;d++,r+=4)ri[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const p=ri[d-15],v=ri[d-2],x=Qr(p,7)^Qr(p,18)^p>>>3,D=Qr(v,17)^Qr(v,19)^v>>>10;ri[d]=D+ri[d-7]+x+ri[d-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:f,G:c,H:h}=this;for(let d=0;d<64;d++){const p=Qr(o,6)^Qr(o,11)^Qr(o,25),v=h+p+l5(o,f,c)+g5[d]+ri[d]|0,D=(Qr(n,2)^Qr(n,13)^Qr(n,22))+p5(n,i,s)|0;h=c,c=f,f=o,o=a+v|0,a=s,s=i,i=n,n=v+D|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,f=f+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(n,i,s,a,o,f,c,h)}roundClean(){ri.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const y5=u5(()=>new v5);let Pg=class extends Bg{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,a5(e);const n=vh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return Qo(this),this.iHash.update(e),this}digestInto(e){Qo(this),N0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Fg=(t,e,r)=>new Pg(t,e).update(r).digest();Fg.create=(t,e)=>new Pg(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $0=BigInt(0),L0=BigInt(1),m5=BigInt(2);function Ki(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function to(t){if(!Ki(t))throw new Error("Uint8Array expected")}function Ss(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const x5=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ds(t){to(t);let e="";for(let r=0;r<t.length;r++)e+=x5[t[r]];return e}function ps(t){const e=t.toString(16);return e.length&1?"0"+e:e}function yh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$0:BigInt("0x"+t)}const Pn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Gd(t){if(t>=Pn._0&&t<=Pn._9)return t-Pn._0;if(t>=Pn.A&&t<=Pn.F)return t-(Pn.A-10);if(t>=Pn.a&&t<=Pn.f)return t-(Pn.a-10)}function Ms(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const a=Gd(t.charCodeAt(s)),o=Gd(t.charCodeAt(s+1));if(a===void 0||o===void 0){const f=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}n[i]=a*16+o}return n}function qi(t){return yh(Ds(t))}function mh(t){return to(t),yh(Ds(Uint8Array.from(t).reverse()))}function Cs(t,e){return Ms(t.toString(16).padStart(e*2,"0"))}function xh(t,e){return Cs(t,e).reverse()}function w5(t){return Ms(ps(t))}function Ur(t,e,r){let n;if(typeof e=="string")try{n=Ms(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ki(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function $a(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];to(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function _5(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function E5(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Mc=t=>typeof t=="bigint"&&$0<=t;function k0(t,e,r){return Mc(t)&&Mc(e)&&Mc(r)&&e<=t&&t<r}function zi(t,e,r,n){if(!k0(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Rg(t){let e;for(e=0;t>$0;t>>=L0,e+=1);return e}function A5(t,e){return t>>BigInt(e)&L0}function S5(t,e,r){return t|(r?L0:$0)<<BigInt(e)}const wh=t=>(m5<<BigInt(t-1))-L0,Cc=t=>new Uint8Array(t),Wd=t=>Uint8Array.from(t);function Og(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Cc(t),i=Cc(t),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},o=(...d)=>r(i,n,...d),f=(d=Cc())=>{i=o(Wd([0]),d),n=o(),d.length!==0&&(i=o(Wd([1]),d),n=o())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){n=o();const v=n.slice();p.push(v),d+=n.length}return $a(...p)};return(d,p)=>{a(),f(d);let v;for(;!(v=p(c()));)f();return a(),v}}const D5={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ki(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ro(t,e,r={}){const n=(i,s,a)=>{const o=D5[s];if(typeof o!="function")throw new Error("invalid validator function");const f=t[i];if(!(a&&f===void 0)&&!o(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+f)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const M5=()=>{throw new Error("not implemented")};function hu(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const C5=Object.freeze(Object.defineProperty({__proto__:null,aInRange:zi,abool:Ss,abytes:to,bitGet:A5,bitLen:Rg,bitMask:wh,bitSet:S5,bytesToHex:Ds,bytesToNumberBE:qi,bytesToNumberLE:mh,concatBytes:$a,createHmacDrbg:Og,ensureBytes:Ur,equalBytes:_5,hexToBytes:Ms,hexToNumber:yh,inRange:k0,isBytes:Ki,memoized:hu,notImplemented:M5,numberToBytesBE:Cs,numberToBytesLE:xh,numberToHexUnpadded:ps,numberToVarBytesBE:w5,utf8ToBytes:E5,validateObject:ro},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ot=BigInt(0),_t=BigInt(1),Fi=BigInt(2),I5=BigInt(3),du=BigInt(4),Zd=BigInt(5),Xd=BigInt(8);function fr(t,e){const r=t%e;return r>=Ot?r:e+r}function B5(t,e,r){if(e<Ot)throw new Error("invalid exponent, negatives unsupported");if(r<=Ot)throw new Error("invalid modulus");if(r===_t)return Ot;let n=_t;for(;e>Ot;)e&_t&&(n=n*t%r),t=t*t%r,e>>=_t;return n}function Dr(t,e,r){let n=t;for(;e-- >Ot;)n*=n,n%=r;return n}function lu(t,e){if(t===Ot)throw new Error("invert: expected non-zero number");if(e<=Ot)throw new Error("invert: expected positive modulus, got "+e);let r=fr(t,e),n=e,i=Ot,s=_t;for(;r!==Ot;){const o=n/r,f=n%r,c=i-s*o;n=r,r=f,i=s,s=c}if(n!==_t)throw new Error("invert: does not exist");return fr(i,e)}function P5(t){const e=(t-_t)/Fi;let r,n,i;for(r=t-_t,n=0;r%Fi===Ot;r/=Fi,n++);for(i=Fi;i<t&&B5(i,e,t)!==t-_t;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(t+_t)/du;return function(f,c){const h=f.pow(c,a);if(!f.eql(f.sqr(h),c))throw new Error("Cannot find square root");return h}}const s=(r+_t)/Fi;return function(o,f){if(o.pow(f,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,h=o.pow(o.mul(o.ONE,i),r),d=o.pow(f,s),p=o.pow(f,r);for(;!o.eql(p,o.ONE);){if(o.eql(p,o.ZERO))return o.ZERO;let v=1;for(let D=o.sqr(p);v<c&&!o.eql(D,o.ONE);v++)D=o.sqr(D);const x=o.pow(h,_t<<BigInt(c-v-1));h=o.sqr(x),d=o.mul(d,x),p=o.mul(p,h),c=v}return d}}function F5(t){if(t%du===I5){const e=(t+_t)/du;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Xd===Zd){const e=(t-Zd)/Xd;return function(n,i){const s=n.mul(i,Fi),a=n.pow(s,e),o=n.mul(i,a),f=n.mul(n.mul(o,Fi),a),c=n.mul(o,n.sub(f,n.ONE));if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}return P5(t)}const R5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function O5(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=R5.reduce((n,i)=>(n[i]="function",n),e);return ro(t,r)}function T5(t,e,r){if(r<Ot)throw new Error("invalid exponent, negatives unsupported");if(r===Ot)return t.ONE;if(r===_t)return e;let n=t.ONE,i=e;for(;r>Ot;)r&_t&&(n=t.mul(n,i)),i=t.sqr(i),r>>=_t;return n}function N5(t,e){const r=new Array(e.length),n=e.reduce((s,a,o)=>t.is0(a)?s:(r[o]=s,t.mul(s,a)),t.ONE),i=t.inv(n);return e.reduceRight((s,a,o)=>t.is0(a)?s:(r[o]=t.mul(s,r[o]),t.mul(s,a)),i),r}function Tg(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ng(t,e,r=!1,n={}){if(t<=Ot)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Tg(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:wh(i),ZERO:Ot,ONE:_t,create:f=>fr(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Ot<=f&&f<t},is0:f=>f===Ot,isOdd:f=>(f&_t)===_t,neg:f=>fr(-f,t),eql:(f,c)=>f===c,sqr:f=>fr(f*f,t),add:(f,c)=>fr(f+c,t),sub:(f,c)=>fr(f-c,t),mul:(f,c)=>fr(f*c,t),pow:(f,c)=>T5(o,f,c),div:(f,c)=>fr(f*lu(c,t),t),sqrN:f=>f*f,addN:(f,c)=>f+c,subN:(f,c)=>f-c,mulN:(f,c)=>f*c,inv:f=>lu(f,t),sqrt:n.sqrt||(f=>(a||(a=F5(t)),a(o,f))),invertBatch:f=>N5(o,f),cmov:(f,c,h)=>h?c:f,toBytes:f=>r?xh(f,s):Cs(f,s),fromBytes:f=>{if(f.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+f.length);return r?mh(f):qi(f)}});return Object.freeze(o)}function $g(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Lg(t){const e=$g(t);return e+Math.ceil(e/2)}function $5(t,e,r=!1){const n=t.length,i=$g(e),s=Lg(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=r?qi(t):mh(t),o=fr(a,e-_t)+_t;return r?xh(o,i):Cs(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yd=BigInt(0),Co=BigInt(1);function Ic(t,e){const r=e.negate();return t?r:e}function kg(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Bc(t,e){kg(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function L5(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function k5(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Pc=new WeakMap,qg=new WeakMap;function Fc(t){return qg.get(t)||1}function q5(t,e){return{constTimeNegate:Ic,hasPrecomputes(r){return Fc(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Yd;)n&Co&&(i=i.add(s)),s=s.double(),n>>=Co;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Bc(n,e),a=[];let o=r,f=o;for(let c=0;c<i;c++){f=o,a.push(f);for(let h=1;h<s;h++)f=f.add(o),a.push(f);o=f.double()}return a},wNAF(r,n,i){const{windows:s,windowSize:a}=Bc(r,e);let o=t.ZERO,f=t.BASE;const c=BigInt(2**r-1),h=2**r,d=BigInt(r);for(let p=0;p<s;p++){const v=p*a;let x=Number(i&c);i>>=d,x>a&&(x-=h,i+=Co);const D=v,S=v+Math.abs(x)-1,O=p%2!==0,A=x<0;x===0?f=f.add(Ic(O,n[D])):o=o.add(Ic(A,n[S]))}return{p:o,f}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:a,windowSize:o}=Bc(r,e),f=BigInt(2**r-1),c=2**r,h=BigInt(r);for(let d=0;d<a;d++){const p=d*o;if(i===Yd)break;let v=Number(i&f);if(i>>=h,v>o&&(v-=c,i+=Co),v===0)continue;let x=n[p+Math.abs(v)-1];v<0&&(x=x.negate()),s=s.add(x)}return s},getPrecomputes(r,n,i){let s=Pc.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Pc.set(n,i(s))),s},wNAFCached(r,n,i){const s=Fc(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const a=Fc(r);return a===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(a,this.getPrecomputes(a,r,i),n,s)},setWindowSize(r,n){kg(n,e),qg.set(r,n),Pc.delete(r)}}}function z5(t,e,r,n){if(L5(r,t),k5(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Rg(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,o=(1<<a)-1,f=new Array(o+1).fill(i),c=Math.floor((e.BITS-1)/a)*a;let h=i;for(let d=c;d>=0;d-=a){f.fill(i);for(let v=0;v<n.length;v++){const x=n[v],D=Number(x>>BigInt(d)&BigInt(o));f[D]=f[D].add(r[v])}let p=i;for(let v=f.length-1,x=i;v>0;v--)x=x.add(f[v]),p=p.add(x);if(h=h.add(p),d!==0)for(let v=0;v<a;v++)h=h.double()}return h}function zg(t){return O5(t.Fp),ro(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tg(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jd(t){t.lowS!==void 0&&Ss("lowS",t.lowS),t.prehash!==void 0&&Ss("prehash",t.prehash)}function U5(t){const e=zg(t);ro(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:j5,hexToBytes:H5}=C5,$n={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:r}=$n;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=ps(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?ps(i.length/2|128):"";return ps(t)+s+i+e},decode(t,e){const{Err:r}=$n;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const f=i&127;if(!f)throw new r("tlv.decode(long): indefinite length not supported");if(f>4)throw new r("tlv.decode(long): byte length is too big");const c=e.subarray(n,n+f);if(c.length!==f)throw new r("tlv.decode: length bytes not complete");if(c[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const h of c)a=a<<8|h;if(n+=f,a<128)throw new r("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=$n;if(t<kn)throw new e("integer: negative integers are not allowed");let r=ps(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=$n;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return j5(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=$n,i=typeof t=="string"?H5(t):t;to(i);const{v:s,l:a}=n.decode(48,i);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:f}=n.decode(2,s),{v:c,l:h}=n.decode(2,f);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(c)}},hexFromSig(t){const{_tlv:e,_int:r}=$n,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},kn=BigInt(0),Pt=BigInt(1);BigInt(2);const Qd=BigInt(3);BigInt(4);function K5(t){const e=U5(t),{Fp:r}=e,n=Ng(e.n,e.nBitLength),i=e.toBytes||((D,S,O)=>{const A=S.toAffine();return $a(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),s=e.fromBytes||(D=>{const S=D.subarray(1),O=r.fromBytes(S.subarray(0,r.BYTES)),A=r.fromBytes(S.subarray(r.BYTES,2*r.BYTES));return{x:O,y:A}});function a(D){const{a:S,b:O}=e,A=r.sqr(D),F=r.mul(A,D);return r.add(r.add(F,r.mul(D,S)),O)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(D){return k0(D,Pt,e.n)}function f(D){const{allowedPrivateKeyLengths:S,nByteLength:O,wrapPrivateKey:A,n:F}=e;if(S&&typeof D!="bigint"){if(Ki(D)&&(D=Ds(D)),typeof D!="string"||!S.includes(D.length))throw new Error("invalid private key");D=D.padStart(O*2,"0")}let P;try{P=typeof D=="bigint"?D:qi(Ur("private key",D,O))}catch{throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof D)}return A&&(P=fr(P,F)),zi("private key",P,Pt,F),P}function c(D){if(!(D instanceof p))throw new Error("ProjectivePoint expected")}const h=hu((D,S)=>{const{px:O,py:A,pz:F}=D;if(r.eql(F,r.ONE))return{x:O,y:A};const P=D.is0();S==null&&(S=P?r.ONE:r.inv(F));const k=r.mul(O,S),L=r.mul(A,S),m=r.mul(F,S);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(m,r.ONE))throw new Error("invZ was invalid");return{x:k,y:L}}),d=hu(D=>{if(D.is0()){if(e.allowInfinityPoint&&!r.is0(D.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=D.toAffine();if(!r.isValid(S)||!r.isValid(O))throw new Error("bad point: x or y not FE");const A=r.sqr(O),F=a(S);if(!r.eql(A,F))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(S,O,A){if(this.px=S,this.py=O,this.pz=A,S==null||!r.isValid(S))throw new Error("x required");if(O==null||!r.isValid(O))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(S){const{x:O,y:A}=S||{};if(!S||!r.isValid(O)||!r.isValid(A))throw new Error("invalid affine point");if(S instanceof p)throw new Error("projective point not allowed");const F=P=>r.eql(P,r.ZERO);return F(O)&&F(A)?p.ZERO:new p(O,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const O=r.invertBatch(S.map(A=>A.pz));return S.map((A,F)=>A.toAffine(O[F])).map(p.fromAffine)}static fromHex(S){const O=p.fromAffine(s(Ur("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){return p.BASE.multiply(f(S))}static msm(S,O){return z5(p,n,S,O)}_setWindowSize(S){x.setWindowSize(this,S)}assertValidity(){d(this)}hasEvenY(){const{y:S}=this.toAffine();if(r.isOdd)return!r.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){c(S);const{px:O,py:A,pz:F}=this,{px:P,py:k,pz:L}=S,m=r.eql(r.mul(O,L),r.mul(P,F)),T=r.eql(r.mul(A,L),r.mul(k,F));return m&&T}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:S,b:O}=e,A=r.mul(O,Qd),{px:F,py:P,pz:k}=this;let L=r.ZERO,m=r.ZERO,T=r.ZERO,j=r.mul(F,F),U=r.mul(P,P),N=r.mul(k,k),g=r.mul(F,P);return g=r.add(g,g),T=r.mul(F,k),T=r.add(T,T),L=r.mul(S,T),m=r.mul(A,N),m=r.add(L,m),L=r.sub(U,m),m=r.add(U,m),m=r.mul(L,m),L=r.mul(g,L),T=r.mul(A,T),N=r.mul(S,N),g=r.sub(j,N),g=r.mul(S,g),g=r.add(g,T),T=r.add(j,j),j=r.add(T,j),j=r.add(j,N),j=r.mul(j,g),m=r.add(m,j),N=r.mul(P,k),N=r.add(N,N),j=r.mul(N,g),L=r.sub(L,j),T=r.mul(N,U),T=r.add(T,T),T=r.add(T,T),new p(L,m,T)}add(S){c(S);const{px:O,py:A,pz:F}=this,{px:P,py:k,pz:L}=S;let m=r.ZERO,T=r.ZERO,j=r.ZERO;const U=e.a,N=r.mul(e.b,Qd);let g=r.mul(O,P),b=r.mul(A,k),u=r.mul(F,L),l=r.add(O,A),w=r.add(P,k);l=r.mul(l,w),w=r.add(g,b),l=r.sub(l,w),w=r.add(O,F);let I=r.add(P,L);return w=r.mul(w,I),I=r.add(g,u),w=r.sub(w,I),I=r.add(A,F),m=r.add(k,L),I=r.mul(I,m),m=r.add(b,u),I=r.sub(I,m),j=r.mul(U,w),m=r.mul(N,u),j=r.add(m,j),m=r.sub(b,j),j=r.add(b,j),T=r.mul(m,j),b=r.add(g,g),b=r.add(b,g),u=r.mul(U,u),w=r.mul(N,w),b=r.add(b,u),u=r.sub(g,u),u=r.mul(U,u),w=r.add(w,u),g=r.mul(b,w),T=r.add(T,g),g=r.mul(I,w),m=r.mul(l,m),m=r.sub(m,g),g=r.mul(l,b),j=r.mul(I,j),j=r.add(j,g),new p(m,T,j)}subtract(S){return this.add(S.negate())}is0(){return this.equals(p.ZERO)}wNAF(S){return x.wNAFCached(this,S,p.normalizeZ)}multiplyUnsafe(S){const{endo:O,n:A}=e;zi("scalar",S,kn,A);const F=p.ZERO;if(S===kn)return F;if(this.is0()||S===Pt)return this;if(!O||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,S,p.normalizeZ);let{k1neg:P,k1:k,k2neg:L,k2:m}=O.splitScalar(S),T=F,j=F,U=this;for(;k>kn||m>kn;)k&Pt&&(T=T.add(U)),m&Pt&&(j=j.add(U)),U=U.double(),k>>=Pt,m>>=Pt;return P&&(T=T.negate()),L&&(j=j.negate()),j=new p(r.mul(j.px,O.beta),j.py,j.pz),T.add(j)}multiply(S){const{endo:O,n:A}=e;zi("scalar",S,Pt,A);let F,P;if(O){const{k1neg:k,k1:L,k2neg:m,k2:T}=O.splitScalar(S);let{p:j,f:U}=this.wNAF(L),{p:N,f:g}=this.wNAF(T);j=x.constTimeNegate(k,j),N=x.constTimeNegate(m,N),N=new p(r.mul(N.px,O.beta),N.py,N.pz),F=j.add(N),P=U.add(g)}else{const{p:k,f:L}=this.wNAF(S);F=k,P=L}return p.normalizeZ([F,P])[0]}multiplyAndAddUnsafe(S,O,A){const F=p.BASE,P=(L,m)=>m===kn||m===Pt||!L.equals(F)?L.multiplyUnsafe(m):L.multiply(m),k=P(this,O).add(P(S,A));return k.is0()?void 0:k}toAffine(S){return h(this,S)}isTorsionFree(){const{h:S,isTorsionFree:O}=e;if(S===Pt)return!0;if(O)return O(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:O}=e;return S===Pt?this:O?O(p,this):this.multiplyUnsafe(e.h)}toRawBytes(S=!0){return Ss("isCompressed",S),this.assertValidity(),i(p,this,S)}toHex(S=!0){return Ss("isCompressed",S),Ds(this.toRawBytes(S))}}p.BASE=new p(e.Gx,e.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const v=e.nBitLength,x=q5(p,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:o}}function V5(t){const e=zg(t);return ro(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function G5(t){const e=V5(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function a(u){return fr(u,n)}function o(u){return lu(u,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:d}=K5({...e,toBytes(u,l,w){const I=l.toAffine(),B=r.toBytes(I.x),C=$a;return Ss("isCompressed",w),w?C(Uint8Array.from([l.hasEvenY()?2:3]),B):C(Uint8Array.from([4]),B,r.toBytes(I.y))},fromBytes(u){const l=u.length,w=u[0],I=u.subarray(1);if(l===i&&(w===2||w===3)){const B=qi(I);if(!k0(B,Pt,r.ORDER))throw new Error("Point is not on curve");const C=h(B);let y;try{y=r.sqrt(C)}catch($){const V=$ instanceof Error?": "+$.message:"";throw new Error("Point is not on curve"+V)}const E=(y&Pt)===Pt;return(w&1)===1!==E&&(y=r.neg(y)),{x:B,y}}else if(l===s&&w===4){const B=r.fromBytes(I.subarray(0,r.BYTES)),C=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:B,y:C}}else{const B=i,C=s;throw new Error("invalid Point, expected length of "+B+", or uncompressed "+C+", got "+l)}}}),p=u=>Ds(Cs(u,e.nByteLength));function v(u){const l=n>>Pt;return u>l}function x(u){return v(u)?a(-u):u}const D=(u,l,w)=>qi(u.slice(l,w));class S{constructor(l,w,I){this.r=l,this.s=w,this.recovery=I,this.assertValidity()}static fromCompact(l){const w=e.nByteLength;return l=Ur("compactSignature",l,w*2),new S(D(l,0,w),D(l,w,2*w))}static fromDER(l){const{r:w,s:I}=$n.toSig(Ur("DER",l));return new S(w,I)}assertValidity(){zi("r",this.r,Pt,n),zi("s",this.s,Pt,n)}addRecoveryBit(l){return new S(this.r,this.s,l)}recoverPublicKey(l){const{r:w,s:I,recovery:B}=this,C=L(Ur("msgHash",l));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const y=B===2||B===3?w+e.n:w;if(y>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const E=B&1?"03":"02",_=f.fromHex(E+p(y)),$=o(y),V=a(-C*$),R=a(I*$),W=f.BASE.multiplyAndAddUnsafe(_,V,R);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ms(this.toDERHex())}toDERHex(){return $n.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ms(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const O={isValidPrivateKey(u){try{return c(u),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const u=Lg(e.n);return $5(e.randomBytes(u),e.n)},precompute(u=8,l=f.BASE){return l._setWindowSize(u),l.multiply(BigInt(3)),l}};function A(u,l=!0){return f.fromPrivateKey(u).toRawBytes(l)}function F(u){const l=Ki(u),w=typeof u=="string",I=(l||w)&&u.length;return l?I===i||I===s:w?I===2*i||I===2*s:u instanceof f}function P(u,l,w=!0){if(F(u))throw new Error("first arg must be private key");if(!F(l))throw new Error("second arg must be public key");return f.fromHex(l).multiply(c(u)).toRawBytes(w)}const k=e.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const l=qi(u),w=u.length*8-e.nBitLength;return w>0?l>>BigInt(w):l},L=e.bits2int_modN||function(u){return a(k(u))},m=wh(e.nBitLength);function T(u){return zi("num < 2^"+e.nBitLength,u,kn,m),Cs(u,e.nByteLength)}function j(u,l,w=U){if(["recovered","canonical"].some(q=>q in w))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:B}=e;let{lowS:C,prehash:y,extraEntropy:E}=w;C==null&&(C=!0),u=Ur("msgHash",u),Jd(w),y&&(u=Ur("prehashed msgHash",I(u)));const _=L(u),$=c(l),V=[T($),T(_)];if(E!=null&&E!==!1){const q=E===!0?B(r.BYTES):E;V.push(Ur("extraEntropy",q))}const R=$a(...V),W=_;function z(q){const H=k(q);if(!d(H))return;const M=o(H),K=f.BASE.multiply(H).toAffine(),Z=a(K.x);if(Z===kn)return;const Y=a(M*a(W+Z*$));if(Y===kn)return;let J=(K.x===Z?0:2)|Number(K.y&Pt),Q=Y;return C&&v(Y)&&(Q=x(Y),J^=1),new S(Z,Q,J)}return{seed:R,k2sig:z}}const U={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function g(u,l,w=U){const{seed:I,k2sig:B}=j(u,l,w),C=e;return Og(C.hash.outputLen,C.nByteLength,C.hmac)(I,B)}f.BASE._setWindowSize(8);function b(u,l,w,I=N){const B=u;l=Ur("msgHash",l),w=Ur("publicKey",w);const{lowS:C,prehash:y,format:E}=I;if(Jd(I),"strict"in I)throw new Error("options.strict was renamed to lowS");if(E!==void 0&&E!=="compact"&&E!=="der")throw new Error("format must be compact or der");const _=typeof B=="string"||Ki(B),$=!_&&!E&&typeof B=="object"&&B!==null&&typeof B.r=="bigint"&&typeof B.s=="bigint";if(!_&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,R;try{if($&&(V=new S(B.r,B.s)),_){try{E!=="compact"&&(V=S.fromDER(B))}catch(J){if(!(J instanceof $n.Err))throw J}!V&&E!=="der"&&(V=S.fromCompact(B))}R=f.fromHex(w)}catch{return!1}if(!V||C&&V.hasHighS())return!1;y&&(l=e.hash(l));const{r:W,s:z}=V,q=L(l),H=o(z),M=a(q*H),K=a(W*H),Z=f.BASE.multiplyAndAddUnsafe(R,M,K)?.toAffine();return Z?a(Z.x)===W:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:P,sign:g,verify:b,ProjectivePoint:f,Signature:S,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W5(t){return{hash:t,hmac:(e,...r)=>Fg(t,e,f5(...r)),randomBytes:h5}}function Z5(t,e){const r=n=>G5({...t,...W5(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ug=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),el=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),X5=BigInt(1),pu=BigInt(2),tl=(t,e)=>(t+e/pu)/e;function Y5(t){const e=Ug,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),f=BigInt(88),c=t*t*t%e,h=c*c*t%e,d=Dr(h,r,e)*h%e,p=Dr(d,r,e)*h%e,v=Dr(p,pu,e)*c%e,x=Dr(v,i,e)*v%e,D=Dr(x,s,e)*x%e,S=Dr(D,o,e)*D%e,O=Dr(S,f,e)*S%e,A=Dr(O,o,e)*D%e,F=Dr(A,r,e)*h%e,P=Dr(F,a,e)*x%e,k=Dr(P,n,e)*c%e,L=Dr(k,pu,e);if(!bu.eql(bu.sqr(L),t))throw new Error("Cannot find square root");return L}const bu=Ng(Ug,void 0,void 0,{sqrt:Y5}),_h=Z5({a:BigInt(0),b:BigInt(7),Fp:bu,n:el,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=el,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-X5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),o=tl(s*t,e),f=tl(-n*t,e);let c=fr(t-o*r-f*i,e),h=fr(-o*n-f*s,e);const d=c>a,p=h>a;if(d&&(c=e-c),p&&(h=e-h),c>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:p,k2:h}}}},y5);BigInt(0);_h.ProjectivePoint;const J5=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:_h},Symbol.toStringTag,{value:"Module"}));function Q5({r:t,s:e,to:r="hex",v:n,yParity:i}){const s=(()=>{if(i===0||i===1)return i;if(n&&(n===27n||n===28n||n>=35n))return n%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new _h.Signature(ui(t),ui(e)).toCompactHex()}${s===0?"1b":"1c"}`;return r==="hex"?a:Gr(a)}async function Eh(t,e){const{address:r,factory:n,factoryData:i,hash:s,signature:a,universalSignatureVerifierAddress:o=t.chain?.contracts?.universalSignatureVerifier?.address,...f}=e,c=hn(a)?a:typeof a=="object"&&"r"in a&&"s"in a?Q5(a):Mt(a),h=await(async()=>!n&&!i||Y3(c)?c:J3({address:n,data:i,signature:c}))();try{const d=o?{to:o,data:Zn({abi:zd,functionName:"isValidSig",args:[r,s,h]}),...f}:{data:P0({abi:zd,args:[r,s,h],bytecode:Nx}),...f},{data:p}=await Ue(t,F0,"call")(d);return Pm(p??"0x0")}catch(d){try{if(oh(Ib(r),await Hb({hash:s,signature:a})))return!0}catch{}if(d instanceof jb)return!1;throw d}}async function e8(t,{address:e,message:r,factory:n,factoryData:i,signature:s,...a}){const o=Cg(r);return Eh(t,{address:e,factory:n,factoryData:i,hash:o,signature:s,...a})}async function t8(t,e){const{address:r,factory:n,factoryData:i,signature:s,message:a,primaryType:o,types:f,domain:c,...h}=e,d=z3({message:a,primaryType:o,types:f,domain:c});return Eh(t,{address:r,factory:n,factoryData:i,hash:d,signature:s,...h})}function jg(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:n,onError:i,poll:s,pollingInterval:a=t.pollingInterval}){const o=typeof s<"u"?s:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let f;return o?(()=>{const d=Nt(["watchBlockNumber",t.uid,e,r,a]);return li(d,{onBlockNumber:n,onError:i},p=>Ja(async()=>{try{const v=await Ue(t,Qa,"getBlockNumber")({cacheTime:0});if(f){if(v===f)return;if(v-f>1&&r)for(let x=f+1n;x<v;x++)p.onBlockNumber(x,f),f=x}(!f||v>f)&&(p.onBlockNumber(v,f),f=v)}catch(v){p.onError?.(v)}},{emitOnBegin:e,interval:a}))})():(()=>{const d=Nt(["watchBlockNumber",t.uid,e,r]);return li(d,{onBlockNumber:n,onError:i},p=>{let v=!0,x=()=>v=!1;return(async()=>{try{const D=(()=>{if(t.transport.type==="fallback"){const O=t.transport.transports.find(A=>A.config.type==="webSocket");return O?O.value:t.transport}return t.transport})(),{unsubscribe:S}=await D.subscribe({params:["newHeads"],onData(O){if(!v)return;const A=ui(O.result?.number);p.onBlockNumber(A,f),f=A},onError(O){p.onError?.(O)}});x=S,v||x()}catch(D){i?.(D)}})(),()=>x()})})()}async function r8(t,{confirmations:e=1,hash:r,onReplaced:n,pollingInterval:i=t.pollingInterval,retryCount:s=6,retryDelay:a=({count:f})=>~~(1<<f)*200,timeout:o=18e4}){const f=Nt(["waitForTransactionReceipt",t.uid,r]);let c,h,d,p=!1;const{promise:v,resolve:x,reject:D}=ug(),S=o?setTimeout(()=>D(new U6({hash:r})),o):void 0,O=li(f,{onReplaced:n,resolve:x,reject:D},A=>{const F=Ue(t,jg,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(P){const k=m=>{clearTimeout(S),F(),m(),O()};let L=P;if(!p)try{if(d){if(e>1&&(!d.blockNumber||L-d.blockNumber+1n<e))return;k(()=>A.resolve(d));return}if(c||(p=!0,await fu(async()=>{c=await Ue(t,gh,"getTransaction")({hash:r}),c.blockNumber&&(L=c.blockNumber)},{delay:a,retryCount:s}),p=!1),d=await Ue(t,uu,"getTransactionReceipt")({hash:r}),e>1&&(!d.blockNumber||L-d.blockNumber+1n<e))return;k(()=>A.resolve(d))}catch(m){if(m instanceof zb||m instanceof Ub){if(!c){p=!1;return}try{h=c,p=!0;const T=await fu(()=>Ue(t,sn,"getBlock")({blockNumber:L,includeTransactions:!0}),{delay:a,retryCount:s,shouldRetry:({error:N})=>N instanceof Zb});p=!1;const j=T.transactions.find(({from:N,nonce:g})=>N===h.from&&g===h.nonce);if(!j||(d=await Ue(t,uu,"getTransactionReceipt")({hash:j.hash}),e>1&&(!d.blockNumber||L-d.blockNumber+1n<e)))return;let U="replaced";j.to===h.to&&j.value===h.value?U="repriced":j.from===j.to&&j.value===0n&&(U="cancelled"),k(()=>{A.onReplaced?.({reason:U,replacedTransaction:h,transaction:j,transactionReceipt:d}),A.resolve(d)})}catch(T){k(()=>A.reject(T))}}else k(()=>A.reject(m))}}})});return v}function n8(t,{blockTag:e="latest",emitMissed:r=!1,emitOnBegin:n=!1,onBlock:i,onError:s,includeTransactions:a,poll:o,pollingInterval:f=t.pollingInterval}){const c=typeof o<"u"?o:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),h=a??!1;let d;return c?(()=>{const x=Nt(["watchBlocks",t.uid,e,r,n,h,f]);return li(x,{onBlock:i,onError:s},D=>Ja(async()=>{try{const S=await Ue(t,sn,"getBlock")({blockTag:e,includeTransactions:h});if(S.number&&d?.number){if(S.number===d.number)return;if(S.number-d.number>1&&r)for(let O=d?.number+1n;O<S.number;O++){const A=await Ue(t,sn,"getBlock")({blockNumber:O,includeTransactions:h});D.onBlock(A,d),d=A}}(!d?.number||e==="pending"&&!S?.number||S.number&&S.number>d.number)&&(D.onBlock(S,d),d=S)}catch(S){D.onError?.(S)}},{emitOnBegin:n,interval:f}))})():(()=>{let x=!0,D=!0,S=()=>x=!1;return(async()=>{try{n&&Ue(t,sn,"getBlock")({blockTag:e,includeTransactions:h}).then(F=>{x&&D&&(i(F,void 0),D=!1)});const O=(()=>{if(t.transport.type==="fallback"){const F=t.transport.transports.find(P=>P.config.type==="webSocket");return F?F.value:t.transport}return t.transport})(),{unsubscribe:A}=await O.subscribe({params:["newHeads"],async onData(F){if(!x)return;const P=await Ue(t,sn,"getBlock")({blockNumber:F.blockNumber,includeTransactions:h}).catch(()=>{});x&&(i(P,d),D=!1,d=P)},onError(F){s?.(F)}});S=A,x||S()}catch(O){s?.(O)}})(),()=>S()})()}function i8(t,{address:e,args:r,batch:n=!0,event:i,events:s,fromBlock:a,onError:o,onLogs:f,poll:c,pollingInterval:h=t.pollingInterval,strict:d}){const p=typeof c<"u"?c:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),v=d??!1;return p?(()=>{const S=Nt(["watchEvent",e,r,n,t.uid,i,h,a]);return li(S,{onLogs:f,onError:o},O=>{let A;a!==void 0&&(A=a-1n);let F,P=!1;const k=Ja(async()=>{if(!P){try{F=await Ue(t,xg,"createEventFilter")({address:e,args:r,event:i,events:s,strict:v,fromBlock:a})}catch{}P=!0;return}try{let L;if(F)L=await Ue(t,R0,"getFilterChanges")({filter:F});else{const m=await Ue(t,Qa,"getBlockNumber")({});A&&A!==m?L=await Ue(t,uh,"getLogs")({address:e,args:r,event:i,events:s,fromBlock:A+1n,toBlock:m}):L=[],A=m}if(L.length===0)return;if(n)O.onLogs(L);else for(const m of L)O.onLogs([m])}catch(L){F&&L instanceof Hi&&(P=!1),O.onError?.(L)}},{emitOnBegin:!0,interval:h});return async()=>{F&&await Ue(t,O0,"uninstallFilter")({filter:F}),k()}})})():(()=>{let S=!0,O=()=>S=!1;return(async()=>{try{const A=(()=>{if(t.transport.type==="fallback"){const L=t.transport.transports.find(m=>m.config.type==="webSocket");return L?L.value:t.transport}return t.transport})(),F=s??(i?[i]:void 0);let P=[];F&&(P=[F.flatMap(m=>Wa({abi:[m],eventName:m.name,args:r}))],i&&(P=P[0]));const{unsubscribe:k}=await A.subscribe({params:["logs",{address:e,topics:P}],onData(L){if(!S)return;const m=L.result;try{const{eventName:T,args:j}=ch({abi:F??[],data:m.data,topics:m.topics,strict:v}),U=di(m,{args:j,eventName:T});f([U])}catch(T){let j,U;if(T instanceof wa||T instanceof _0){if(d)return;j=T.abiItem.name,U=T.abiItem.inputs?.some(g=>!("name"in g&&g.name))}const N=di(m,{args:U?[]:{},eventName:j});f([N])}},onError(L){o?.(L)}});O=k,S||O()}catch(A){o?.(A)}})(),()=>O()})()}function s8(t,{batch:e=!0,onError:r,onTransactions:n,poll:i,pollingInterval:s=t.pollingInterval}){return(typeof i<"u"?i:t.transport.type!=="webSocket")?(()=>{const c=Nt(["watchPendingTransactions",t.uid,e,s]);return li(c,{onTransactions:n,onError:r},h=>{let d;const p=Ja(async()=>{try{if(!d)try{d=await Ue(t,wg,"createPendingTransactionFilter")({});return}catch(x){throw p(),x}const v=await Ue(t,R0,"getFilterChanges")({filter:d});if(v.length===0)return;if(e)h.onTransactions(v);else for(const x of v)h.onTransactions([x])}catch(v){h.onError?.(v)}},{emitOnBegin:!0,interval:s});return async()=>{d&&await Ue(t,O0,"uninstallFilter")({filter:d}),p()}})})():(()=>{let c=!0,h=()=>c=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(p){if(!c)return;const v=p.result;n([v])},onError(p){r?.(p)}});h=d,c||h()}catch(d){r?.(d)}})(),()=>h()})()}function a8(t){const{scheme:e,statement:r,...n}=t.match(o8)?.groups??{},{chainId:i,expirationTime:s,issuedAt:a,notBefore:o,requestId:f,...c}=t.match(c8)?.groups??{},h=t.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...c,...i?{chainId:Number(i)}:{},...s?{expirationTime:new Date(s)}:{},...a?{issuedAt:new Date(a)}:{},...o?{notBefore:new Date(o)}:{},...f?{requestId:f}:{},...h?{resources:h}:{},...e?{scheme:e}:{},...r?{statement:r}:{}}}const o8=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,c8=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function f8(t){const{address:e,domain:r,message:n,nonce:i,scheme:s,time:a=new Date}=t;if(r&&n.domain!==r||i&&n.nonce!==i||s&&n.scheme!==s||n.expirationTime&&a>=n.expirationTime||n.notBefore&&a<n.notBefore)return!1;try{if(!n.address||e&&!oh(n.address,e))return!1}catch{return!1}return!0}async function u8(t,e){const{address:r,domain:n,message:i,nonce:s,scheme:a,signature:o,time:f=new Date,...c}=e,h=a8(i);if(!h.address||!f8({address:r,domain:n,message:h,nonce:s,scheme:a,time:f}))return!1;const p=Cg(i);return Eh(t,{address:h.address,hash:p,signature:o,...c})}function h8(t){return{call:e=>F0(t,e),createBlockFilter:()=>P3(t),createContractEventFilter:e=>Nb(t,e),createEventFilter:e=>xg(t,e),createPendingTransactionFilter:()=>wg(t),estimateContractGas:e=>Ix(t,e),estimateGas:e=>ah(t,e),getBalance:e=>sg(t,e),getBlobBaseFee:()=>F3(t),getBlock:e=>sn(t,e),getBlockNumber:e=>Qa(t,e),getBlockTransactionCount:e=>R3(t,e),getBytecode:e=>Kd(t,e),getChainId:()=>Ya(t),getCode:e=>Kd(t,e),getContractEvents:e=>ag(t,e),getEip712Domain:e=>r3(t,e),getEnsAddress:e=>b3(t,e),getEnsAvatar:e=>C3(t,e),getEnsName:e=>I3(t,e),getEnsResolver:e=>B3(t,e),getEnsText:e=>mg(t,e),getFeeHistory:e=>T3(t,e),estimateFeesPerGas:e=>lx(t,e),getFilterChanges:e=>R0(t,e),getFilterLogs:e=>N3(t,e),getGasPrice:()=>ih(t),getLogs:e=>uh(t,e),getProof:e=>t5(t,e),estimateMaxPriorityFeePerGas:e=>dx(t,e),getStorageAt:e=>r5(t,e),getTransaction:e=>gh(t,e),getTransactionConfirmations:e=>n5(t,e),getTransactionCount:e=>Qb(t,e),getTransactionReceipt:e=>uu(t,e),multicall:e=>i5(t,e),prepareTransactionRequest:e=>B0(t,e),readContract:e=>Vn(t,e),sendRawTransaction:e=>hh(t,e),simulateContract:e=>Kx(t,e),verifyMessage:e=>e8(t,e),verifySiweMessage:e=>u8(t,e),verifyTypedData:e=>t8(t,e),uninstallFilter:e=>O0(t,e),waitForTransactionReceipt:e=>r8(t,e),watchBlocks:e=>n8(t,e),watchBlockNumber:e=>jg(t,e),watchContractEvent:e=>Jx(t,e),watchEvent:e=>i8(t,e),watchPendingTransactions:e=>s8(t,e)}}function d8(t){const{key:e="public",name:r="Public Client"}=t;return pg({...t,key:e,name:r,type:"publicClient"}).extend(h8)}function l8(t,e){const{abi:r,args:n,bytecode:i,...s}=e,a=P0({abi:r,args:n,bytecode:i});return dh(t,{...s,data:a})}async function p8(t){return t.account?.type==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Ka(r))}async function b8(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function g8(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(r=>Ib(r))}async function v8(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function y8(t,{account:e=t.account,message:r}){if(!e)throw new eo({docsPath:"/docs/actions/wallet/signMessage"});const n=mr(e);if(n.signMessage)return n.signMessage({message:r});const i=typeof r=="string"?_s(r):r.raw instanceof Uint8Array?dn(r.raw):r.raw;return t.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}async function m8(t,e){const{account:r=t.account,chain:n=t.chain,...i}=e;if(!r)throw new eo({docsPath:"/docs/actions/wallet/signTransaction"});const s=mr(r);Xa({account:s,...e});const a=await Ue(t,Ya,"getChainId")({});n!==null&&dg({currentChainId:a,chain:n});const f=(n?.formatters||t.chain?.formatters)?.transactionRequest?.format||I0;return s.signTransaction?s.signTransaction({...i,chainId:a},{serializer:t.chain?.serializers?.transaction}):await t.request({method:"eth_signTransaction",params:[{...f(i),chainId:Ve(a),from:s.address}]},{retryCount:0})}async function x8(t,e){const{account:r=t.account,domain:n,message:i,primaryType:s}=e;if(!r)throw new eo({docsPath:"/docs/actions/wallet/signTypedData"});const a=mr(r),o={EIP712Domain:Mg({domain:n}),...e.types};if(Dg({domain:n,message:i,primaryType:s,types:o}),a.signTypedData)return a.signTypedData({domain:n,message:i,primaryType:s,types:o});const f=K3({domain:n,message:i,primaryType:s,types:o});return t.request({method:"eth_signTypedData_v4",params:[a.address,f]},{retryCount:0})}async function w8(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ve(e)}]},{retryCount:0})}async function _8(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function E8(t){return{addChain:e=>i3(t,e),deployContract:e=>l8(t,e),getAddresses:()=>p8(t),getChainId:()=>Ya(t),getPermissions:()=>b8(t),prepareTransactionRequest:e=>B0(t,e),requestAddresses:()=>g8(t),requestPermissions:e=>v8(t,e),sendRawTransaction:e=>hh(t,e),sendTransaction:e=>dh(t,e),signMessage:e=>y8(t,e),signTransaction:e=>m8(t,e),signTypedData:e=>x8(t,e),switchChain:e=>w8(t,e),watchAsset:e=>_8(t,e),writeContract:e=>e3(t,e)}}function A8(t){const{key:e="wallet",name:r="Wallet Client",transport:n}=t;return pg({...t,key:e,name:r,transport:n,type:"walletClient"}).extend(E8)}var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ah(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Sh={exports:{}},ys=typeof Reflect=="object"?Reflect:null,rl=ys&&typeof ys.apply=="function"?ys.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},To;ys&&typeof ys.ownKeys=="function"?To=ys.ownKeys:Object.getOwnPropertySymbols?To=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:To=function(e){return Object.getOwnPropertyNames(e)};function S8(t){console&&console.warn&&console.warn(t)}var Hg=Number.isNaN||function(e){return e!==e};function ft(){ft.init.call(this)}Sh.exports=ft;Sh.exports.once=I8;ft.EventEmitter=ft;ft.prototype._events=void 0;ft.prototype._eventsCount=0;ft.prototype._maxListeners=void 0;var nl=10;function q0(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return nl},set:function(t){if(typeof t!="number"||t<0||Hg(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nl=t}});ft.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ft.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Hg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Kg(t){return t._maxListeners===void 0?ft.defaultMaxListeners:t._maxListeners}ft.prototype.getMaxListeners=function(){return Kg(this)};ft.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var f=s[e];if(f===void 0)return!1;if(typeof f=="function")rl(f,this,r);else for(var c=f.length,h=Xg(f,c),n=0;n<c;++n)rl(h[n],this,r);return!0};function Vg(t,e,r,n){var i,s,a;if(q0(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=Kg(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,S8(o)}return t}ft.prototype.addListener=function(e,r){return Vg(this,e,r,!1)};ft.prototype.on=ft.prototype.addListener;ft.prototype.prependListener=function(e,r){return Vg(this,e,r,!0)};function D8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gg(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=D8.bind(n);return i.listener=r,n.wrapFn=i,i}ft.prototype.once=function(e,r){return q0(r),this.on(e,Gg(this,e,r)),this};ft.prototype.prependOnceListener=function(e,r){return q0(r),this.prependListener(e,Gg(this,e,r)),this};ft.prototype.removeListener=function(e,r){var n,i,s,a,o;if(q0(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){o=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():M8(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};ft.prototype.off=ft.prototype.removeListener;ft.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Wg(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?C8(i):Xg(i,i.length)}ft.prototype.listeners=function(e){return Wg(this,e,!0)};ft.prototype.rawListeners=function(e){return Wg(this,e,!1)};ft.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Zg.call(t,e)};ft.prototype.listenerCount=Zg;function Zg(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ft.prototype.eventNames=function(){return this._eventsCount>0?To(this._events):[]};function Xg(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function M8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function C8(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function I8(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Yg(t,e,s,{once:!0}),e!=="error"&&B8(t,i,{once:!0})})}function B8(t,e,r){typeof t.on=="function"&&Yg(t,"error",e,r)}function Yg(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Yr=Sh.exports;const Jg=Xi(Yr);var ae={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gu=function(t,e){return gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},gu(t,e)};function P8(t,e){gu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vu=function(){return vu=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vu.apply(this,arguments)};function F8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function R8(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function O8(t,e){return function(r,n){e(r,n,t)}}function T8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function N8(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(d){a(d)}}function f(h){try{c(n.throw(h))}catch(d){a(d)}}function c(h){h.done?s(h.value):i(h.value).then(o,f)}c((n=n.apply(t,e||[])).next())})}function $8(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return f([c,h])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(h){c=[6,h],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function L8(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function k8(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function yu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function q8(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qg(arguments[e]));return t}function z8(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function La(t){return this instanceof La?(this.v=t,this):new La(t)}function U8(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(v){return new Promise(function(x,D){s.push([p,v,x,D])>1||o(p,v)})})}function o(p,v){try{f(n[p](v))}catch(x){d(s[0][3],x)}}function f(p){p.value instanceof La?Promise.resolve(p.value.v).then(c,h):d(s[0][2],p)}function c(p){o("next",p)}function h(p){o("throw",p)}function d(p,v){p(v),s.shift(),s.length&&o(s[0][0],s[0][1])}}function j8(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:La(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function H8(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof yu=="function"?yu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(o,f){a=t[s](a),i(o,f,a.done,a.value)})}}function i(s,a,o,f){Promise.resolve(f).then(function(c){s({value:c,done:o})},a)}}function K8(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function V8(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function G8(t){return t&&t.__esModule?t:{default:t}}function W8(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Z8(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const X8=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return vu},__asyncDelegator:j8,__asyncGenerator:U8,__asyncValues:H8,__await:La,__awaiter:N8,__classPrivateFieldGet:W8,__classPrivateFieldSet:Z8,__createBinding:L8,__decorate:R8,__exportStar:k8,__extends:P8,__generator:$8,__importDefault:G8,__importStar:V8,__makeTemplateObject:K8,__metadata:T8,__param:O8,__read:Qg,__rest:F8,__spread:q8,__spreadArrays:z8,__values:yu},Symbol.toStringTag,{value:"Module"})),z0=Ah(X8);var Rc={},na={},il;function Y8(){if(il)return na;il=1,Object.defineProperty(na,"__esModule",{value:!0}),na.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return na.delay=t,na}var Si={},Oc={},Di={},sl;function J8(){return sl||(sl=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.ONE_THOUSAND=Di.ONE_HUNDRED=void 0,Di.ONE_HUNDRED=100,Di.ONE_THOUSAND=1e3),Di}var Tc={},al;function Q8(){return al||(al=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Tc)),Tc}var ol;function ev(){return ol||(ol=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=z0;e.__exportStar(J8(),t),e.__exportStar(Q8(),t)}(Oc)),Oc}var cl;function e4(){if(cl)return Si;cl=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.fromMiliseconds=Si.toMiliseconds=void 0;const t=ev();function e(n){return n*t.ONE_THOUSAND}Si.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Si.fromMiliseconds=r,Si}var fl;function t4(){return fl||(fl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=z0;e.__exportStar(Y8(),t),e.__exportStar(e4(),t)}(Rc)),Rc}var cs={},ul;function r4(){if(ul)return cs;ul=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return cs.Watch=t,cs.default=t,cs}var Nc={},ia={},hl;function n4(){if(hl)return ia;hl=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.IWatch=void 0;class t{}return ia.IWatch=t,ia}var dl;function i4(){return dl||(dl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),z0.__exportStar(n4(),t)}(Nc)),Nc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=z0;e.__exportStar(t4(),t),e.__exportStar(r4(),t),e.__exportStar(i4(),t),e.__exportStar(ev(),t)})(ae);class Yi{}let s4=class extends Yi{constructor(e){super()}};const ll=ae.FIVE_SECONDS,qs={pulse:"heartbeat_pulse"};let a4=class tv extends s4{constructor(e){super(e),this.events=new Yr.EventEmitter,this.interval=ll,this.interval=e?.interval||ll}static async init(e){const r=new tv(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ae.toMiliseconds(this.interval))}pulse(){this.events.emit(qs.pulse)}};const o4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,c4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,f4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function u4(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){h4(t);return}return e}function h4(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Io(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!f4.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(o4.test(t)||c4.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,u4)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function d4(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Bt(t,...e){try{return d4(t(...e))}catch(r){return Promise.reject(r)}}function l4(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function p4(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function No(t){if(l4(t))return String(t);if(p4(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return No(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const mu="base64:";function b4(t){return typeof t=="string"?t:mu+y4(t)}function g4(t){return typeof t!="string"||!t.startsWith(mu)?t:v4(t.slice(mu.length))}function v4(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function y4(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function or(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function m4(...t){return or(t.join(":"))}function Bo(t){return t=or(t),t?t+":":""}const x4="memory",w4=()=>{const t=new Map;return{name:x4,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function _4(t={}){const e={mounts:{"":t.driver||w4()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(const h of e.mountpoints)if(c.startsWith(h))return{base:h,relativeKey:c.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,h)=>e.mountpoints.filter(d=>d.startsWith(c)||h&&c.startsWith(d)).map(d=>({relativeBase:c.length>d.length?c.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(c,h)=>{if(e.watching){h=or(h);for(const d of e.watchListeners)d(c,h)}},s=async()=>{if(!e.watching){e.watching=!0;for(const c in e.mounts)e.unwatch[c]=await pl(e.mounts[c],i,c)}},a=async()=>{if(e.watching){for(const c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},o=(c,h,d)=>{const p=new Map,v=x=>{let D=p.get(x.base);return D||(D={driver:x.driver,base:x.base,items:[]},p.set(x.base,D)),D};for(const x of c){const D=typeof x=="string",S=or(D?x:x.key),O=D?void 0:x.value,A=D||!x.options?h:{...h,...x.options},F=r(S);v(F).items.push({key:S,value:O,relativeKey:F.relativeKey,options:A})}return Promise.all([...p.values()].map(x=>d(x))).then(x=>x.flat())},f={hasItem(c,h={}){c=or(c);const{relativeKey:d,driver:p}=r(c);return Bt(p.hasItem,d,h)},getItem(c,h={}){c=or(c);const{relativeKey:d,driver:p}=r(c);return Bt(p.getItem,d,h).then(v=>Io(v))},getItems(c,h={}){return o(c,h,d=>d.driver.getItems?Bt(d.driver.getItems,d.items.map(p=>({key:p.relativeKey,options:p.options})),h).then(p=>p.map(v=>({key:m4(d.base,v.key),value:Io(v.value)}))):Promise.all(d.items.map(p=>Bt(d.driver.getItem,p.relativeKey,p.options).then(v=>({key:p.key,value:Io(v)})))))},getItemRaw(c,h={}){c=or(c);const{relativeKey:d,driver:p}=r(c);return p.getItemRaw?Bt(p.getItemRaw,d,h):Bt(p.getItem,d,h).then(v=>g4(v))},async setItem(c,h,d={}){if(h===void 0)return f.removeItem(c);c=or(c);const{relativeKey:p,driver:v}=r(c);v.setItem&&(await Bt(v.setItem,p,No(h),d),v.watch||i("update",c))},async setItems(c,h){await o(c,h,async d=>{if(d.driver.setItems)return Bt(d.driver.setItems,d.items.map(p=>({key:p.relativeKey,value:No(p.value),options:p.options})),h);d.driver.setItem&&await Promise.all(d.items.map(p=>Bt(d.driver.setItem,p.relativeKey,No(p.value),p.options)))})},async setItemRaw(c,h,d={}){if(h===void 0)return f.removeItem(c,d);c=or(c);const{relativeKey:p,driver:v}=r(c);if(v.setItemRaw)await Bt(v.setItemRaw,p,h,d);else if(v.setItem)await Bt(v.setItem,p,b4(h),d);else return;v.watch||i("update",c)},async removeItem(c,h={}){typeof h=="boolean"&&(h={removeMeta:h}),c=or(c);const{relativeKey:d,driver:p}=r(c);p.removeItem&&(await Bt(p.removeItem,d,h),(h.removeMeta||h.removeMata)&&await Bt(p.removeItem,d+"$",h),p.watch||i("remove",c))},async getMeta(c,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),c=or(c);const{relativeKey:d,driver:p}=r(c),v=Object.create(null);if(p.getMeta&&Object.assign(v,await Bt(p.getMeta,d,h)),!h.nativeOnly){const x=await Bt(p.getItem,d+"$",h).then(D=>Io(D));x&&typeof x=="object"&&(typeof x.atime=="string"&&(x.atime=new Date(x.atime)),typeof x.mtime=="string"&&(x.mtime=new Date(x.mtime)),Object.assign(v,x))}return v},setMeta(c,h,d={}){return this.setItem(c+"$",h,d)},removeMeta(c,h={}){return this.removeItem(c+"$",h)},async getKeys(c,h={}){c=Bo(c);const d=n(c,!0);let p=[];const v=[];for(const x of d){const D=await Bt(x.driver.getKeys,x.relativeBase,h);for(const S of D){const O=x.mountpoint+or(S);p.some(A=>O.startsWith(A))||v.push(O)}p=[x.mountpoint,...p.filter(S=>!S.startsWith(x.mountpoint))]}return c?v.filter(x=>x.startsWith(c)&&x[x.length-1]!=="$"):v.filter(x=>x[x.length-1]!=="$")},async clear(c,h={}){c=Bo(c),await Promise.all(n(c,!1).map(async d=>{if(d.driver.clear)return Bt(d.driver.clear,d.relativeBase,h);if(d.driver.removeItem){const p=await d.driver.getKeys(d.relativeBase||"",h);return Promise.all(p.map(v=>d.driver.removeItem(v,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>bl(c)))},async watch(c){return await s(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==c),e.watchListeners.length===0&&await a()}},async unwatch(){e.watchListeners=[],await a()},mount(c,h){if(c=Bo(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((d,p)=>p.length-d.length)),e.mounts[c]=h,e.watching&&Promise.resolve(pl(h,i,c)).then(d=>{e.unwatch[c]=d}).catch(console.error),f},async unmount(c,h=!0){c=Bo(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&(e.unwatch[c]?.(),delete e.unwatch[c]),h&&await bl(e.mounts[c]),e.mountpoints=e.mountpoints.filter(d=>d!==c),delete e.mounts[c])},getMount(c=""){c=or(c)+":";const h=r(c);return{driver:h.driver,base:h.base}},getMounts(c="",h={}){return c=or(c),n(c,h.parents).map(p=>({driver:p.driver,base:p.mountpoint}))},keys:(c,h={})=>f.getKeys(c,h),get:(c,h={})=>f.getItem(c,h),set:(c,h,d={})=>f.setItem(c,h,d),has:(c,h={})=>f.hasItem(c,h),del:(c,h={})=>f.removeItem(c,h),remove:(c,h={})=>f.removeItem(c,h)};return f}function pl(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function bl(t){typeof t.dispose=="function"&&await Bt(t.dispose)}function Ji(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function rv(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Ji(r);return(i,s)=>n.then(a=>s(a.transaction(e,i).objectStore(e)))}let $c;function no(){return $c||($c=rv("keyval-store","keyval")),$c}function gl(t,e=no()){return e("readonly",r=>Ji(r.get(t)))}function E4(t,e,r=no()){return r("readwrite",n=>(n.put(e,t),Ji(n.transaction)))}function A4(t,e=no()){return e("readwrite",r=>(r.delete(t),Ji(r.transaction)))}function S4(t=no()){return t("readwrite",e=>(e.clear(),Ji(e.transaction)))}function D4(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ji(t.transaction)}function M4(t=no()){return t("readonly",e=>{if(e.getAllKeys)return Ji(e.getAllKeys());const r=[];return D4(e,n=>r.push(n.key)).then(()=>r)})}const C4=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),I4=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Is(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return I4(t)}catch{return t}}function Vi(t){return typeof t=="string"?t:C4(t)||""}const B4="idb-keyval";var P4=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=rv(t.dbName,t.storeName)),{name:B4,options:t,async hasItem(i){return!(typeof await gl(r(i),n)>"u")},async getItem(i){return await gl(r(i),n)??null},setItem(i,s){return E4(r(i),s,n)},removeItem(i){return A4(r(i),n)},getKeys(){return M4(n)},clear(){return S4(n)}}};const F4="WALLET_CONNECT_V2_INDEXED_DB",R4="keyvaluestorage";let O4=class{constructor(){this.indexedDb=_4({driver:P4({dbName:F4,storeName:R4})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Vi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$o={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Lc<"u"&&Lc.localStorage?$o.exports=Lc.localStorage:typeof window<"u"&&window.localStorage?$o.exports=window.localStorage:$o.exports=new e})();function T4(t){var e;return[t[0],Is((e=t[1])!=null?e:"")]}let N4=class{constructor(){this.localStorage=$o.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(T4)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Is(r)}async setItem(e,r){this.localStorage.setItem(e,Vi(r))}async removeItem(e){this.localStorage.removeItem(e)}};const $4="wc_storage_version",vl=1,L4=async(t,e,r)=>{const n=$4,i=await e.getItem(n);if(i&&i>=vl){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const a=[];for(;s.length;){const o=s.shift();if(!o)continue;const f=o.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const c=await t.getItem(o);await e.setItem(o,c),a.push(o)}}await e.setItem(n,vl),r(e),k4(t,a)},k4=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let q4=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new N4;this.storage=e;try{const r=new O4;L4(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function z4(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var U4=j4;function j4(t,e,r){var n=r&&r.stringify||z4,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var a=new Array(s);a[0]=n(t);for(var o=1;o<s;o++)a[o]=n(e[o]);return a.join(" ")}if(typeof t!="string")return t;var f=e.length;if(f===0)return t;for(var c="",h=1-i,d=-1,p=t&&t.length||0,v=0;v<p;){if(t.charCodeAt(v)===37&&v+1<p){switch(d=d>-1?d:0,t.charCodeAt(v+1)){case 100:case 102:if(h>=f||e[h]==null)break;d<v&&(c+=t.slice(d,v)),c+=Number(e[h]),d=v+2,v++;break;case 105:if(h>=f||e[h]==null)break;d<v&&(c+=t.slice(d,v)),c+=Math.floor(Number(e[h])),d=v+2,v++;break;case 79:case 111:case 106:if(h>=f||e[h]===void 0)break;d<v&&(c+=t.slice(d,v));var x=typeof e[h];if(x==="string"){c+="'"+e[h]+"'",d=v+2,v++;break}if(x==="function"){c+=e[h].name||"<anonymous>",d=v+2,v++;break}c+=n(e[h]),d=v+2,v++;break;case 115:if(h>=f)break;d<v&&(c+=t.slice(d,v)),c+=String(e[h]),d=v+2,v++;break;case 37:d<v&&(c+=t.slice(d,v)),c+="%",d=v+2,v++,h--;break}++h}++v}return d===-1?t:(d<p&&(c+=t.slice(d)),c)}const yl=U4;var ds=an;const ka=Q4().console||{},H4={mapHttpRequest:Po,mapHttpResponse:Po,wrapRequestSerializer:kc,wrapResponseSerializer:kc,wrapErrorSerializer:kc,req:Po,res:Po,err:Z4};function K4(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function an(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||ka;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=K4(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const a=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const o=t.level||"info",f=Object.create(r);f.log||(f.log=qa),Object.defineProperty(f,"levelVal",{get:h}),Object.defineProperty(f,"level",{get:d,set:p});const c={transmit:e,serialize:i,asObject:t.browser.asObject,levels:a,timestamp:X4(t)};f.levels=an.levels,f.level=o,f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=qa,f.serializers=n,f._serialize=i,f._stdErrSerialize=s,f.child=v,e&&(f._logEvent=xu());function h(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function p(x){if(x!=="silent"&&!this.levels.values[x])throw Error("unknown level "+x);this._level=x,fs(c,f,"error","log"),fs(c,f,"fatal","error"),fs(c,f,"warn","error"),fs(c,f,"info","log"),fs(c,f,"debug","log"),fs(c,f,"trace","log")}function v(x,D){if(!x)throw new Error("missing bindings for child Pino");D=D||{},i&&x.serializers&&(D.serializers=x.serializers);const S=D.serializers;if(i&&S){var O=Object.assign({},n,S),A=t.browser.serialize===!0?Object.keys(O):i;delete x.serializers,U0([x],A,O,this._stdErrSerialize)}function F(P){this._childLevel=(P._childLevel|0)+1,this.error=us(P,x,"error"),this.fatal=us(P,x,"fatal"),this.warn=us(P,x,"warn"),this.info=us(P,x,"info"),this.debug=us(P,x,"debug"),this.trace=us(P,x,"trace"),O&&(this.serializers=O,this._serialize=A),e&&(this._logEvent=xu([].concat(P._logEvent.bindings,x)))}return F.prototype=this,new F(this)}return f}an.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};an.stdSerializers=H4;an.stdTimeFunctions=Object.assign({},{nullTime:nv,epochTime:iv,unixTime:Y4,isoTime:J4});function fs(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?qa:i[r]?i[r]:ka[r]||ka[n]||qa,V4(t,e,r)}function V4(t,e,r){!t.transmit&&e[r]===qa||(e[r]=function(n){return function(){const s=t.timestamp(),a=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ka?ka:this;for(var f=0;f<a.length;f++)a[f]=arguments[f];if(t.serialize&&!t.asObject&&U0(a,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(o,G4(this,r,a,s)):n.apply(o,a),t.transmit){const c=t.transmit.level||e.level,h=an.levels.values[c],d=an.levels.values[r];if(d<h)return;W4(this,{ts:s,methodLevel:r,methodValue:d,transmitLevel:c,transmitValue:an.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},a)}}}(e[r]))}function G4(t,e,r,n){t._serialize&&U0(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const a={};n&&(a.time=n),a.level=an.levels.values[e];let o=(t._childLevel|0)+1;if(o<1&&(o=1),s!==null&&typeof s=="object"){for(;o--&&typeof i[0]=="object";)Object.assign(a,i.shift());s=i.length?yl(i.shift(),i):void 0}else typeof s=="string"&&(s=yl(i.shift(),i));return s!==void 0&&(a.msg=s),a}function U0(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=an.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function us(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function W4(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,a=e.methodValue,o=e.val,f=t._logEvent.bindings;U0(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(c){return f.indexOf(c)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=a,n(s,t._logEvent,o),t._logEvent=xu(f)}function xu(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Z4(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function X4(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?nv:iv}function Po(){return{}}function kc(t){return t}function qa(){}function nv(){return!1}function iv(){return Date.now()}function Y4(){return Math.round(Date.now()/1e3)}function J4(){return new Date(Date.now()).toISOString()}function Q4(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const j0=Xi(ds),ew={level:"info"},io="custom_context",Dh=1e3*1024;let tw=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ml=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new tw(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},sv=class{constructor(e,r=Dh){this.level=e??"error",this.levelValue=ds.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new ml(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ds.levels.values.error?console.error(e):r===ds.levels.values.warn?console.warn(e):r===ds.levels.values.debug?console.debug(e):r===ds.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Vi({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new ml(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Vi({extraMetadata:e})),new Blob(r,{type:"application/json"})}};class rw{constructor(e,r=Dh){this.baseChunkLogger=new sv(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}let nw=class{constructor(e,r=Dh){this.baseChunkLogger=new sv(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var iw=Object.defineProperty,sw=Object.defineProperties,aw=Object.getOwnPropertyDescriptors,xl=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,cw=Object.prototype.propertyIsEnumerable,wl=(t,e,r)=>e in t?iw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,e0=(t,e)=>{for(var r in e||(e={}))ow.call(e,r)&&wl(t,r,e[r]);if(xl)for(var r of xl(e))cw.call(e,r)&&wl(t,r,e[r]);return t},t0=(t,e)=>sw(t,aw(e));function Mh(t){return t0(e0({},t),{level:t?.level||ew.level})}function fw(t,e=io){return t[e]||""}function uw(t,e,r=io){return t[r]=e,t}function pr(t,e=io){let r="";return typeof t.bindings>"u"?r=fw(t,e):r=t.bindings().context||"",r}function hw(t,e,r=io){const n=pr(t,r);return n.trim()?`${n}/${e}`:e}function rr(t,e,r=io){const n=hw(t,e,r),i=t.child({context:n});return uw(i,n,r)}function dw(t){var e,r;const n=new rw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:j0(t0(e0({},t.opts),{level:"trace",browser:t0(e0({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function lw(t){var e;const r=new nw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:j0(t0(e0({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function pw(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?dw(t):lw(t)}let bw=class extends Yi{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},gw=class extends Yi{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}};class vw{constructor(e,r){this.logger=e,this.core=r}}let yw=class extends Yi{constructor(e,r){super(),this.relayer=e,this.logger=r}};class mw extends Yi{constructor(e){super()}}let xw=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},ww=class extends Yi{constructor(e,r){super(),this.relayer=e,this.logger=r}},_w=class extends Yi{constructor(e,r){super(),this.core=e,this.logger=r}},Ew=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Aw=class{constructor(e,r){this.projectId=e,this.logger=r}},Sw=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}},Dw=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Mw=class{constructor(e){this.client=e}};var Ch={},vi={},H0={},K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.BrowserRandomSource=void 0;const _l=65536;class Cw{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=_l)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,_l)));return r}}K0.BrowserRandomSource=Cw;function av(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var V0={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Iw(t){for(var e=0;e<t.length;e++)t[e]=0;return t}xr.wipe=Iw;const Bw={},Pw=Object.freeze(Object.defineProperty({__proto__:null,default:Bw},Symbol.toStringTag,{value:"Module"})),so=Ah(Pw);Object.defineProperty(V0,"__esModule",{value:!0});V0.NodeRandomSource=void 0;const Fw=xr;class Rw{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof av<"u"){const e=so;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Fw.wipe)(r),n}}V0.NodeRandomSource=Rw;Object.defineProperty(H0,"__esModule",{value:!0});H0.SystemRandomSource=void 0;const Ow=K0,Tw=V0;class Nw{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Ow.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Tw.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}H0.SystemRandomSource=Nw;var Ze={},ov={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,f){var c=o>>>16&65535,h=o&65535,d=f>>>16&65535,p=f&65535;return h*p+(c*p+h*d<<16>>>0)|0}t.mul=Math.imul||e;function r(o,f){return o+f|0}t.add=r;function n(o,f){return o-f|0}t.sub=n;function i(o,f){return o<<f|o>>>32-f}t.rotl=i;function s(o,f){return o<<32-f|o>>>f}t.rotr=s;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(ov);Object.defineProperty(Ze,"__esModule",{value:!0});var cv=ov;function $w(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ze.readInt16BE=$w;function Lw(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ze.readUint16BE=Lw;function kw(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ze.readInt16LE=kw;function qw(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ze.readUint16LE=qw;function fv(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ze.writeUint16BE=fv;Ze.writeInt16BE=fv;function uv(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ze.writeUint16LE=uv;Ze.writeInt16LE=uv;function wu(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ze.readInt32BE=wu;function _u(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ze.readUint32BE=_u;function Eu(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ze.readInt32LE=Eu;function Au(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ze.readUint32LE=Au;function r0(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ze.writeUint32BE=r0;Ze.writeInt32BE=r0;function n0(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ze.writeUint32LE=n0;Ze.writeInt32LE=n0;function zw(t,e){e===void 0&&(e=0);var r=wu(t,e),n=wu(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Ze.readInt64BE=zw;function Uw(t,e){e===void 0&&(e=0);var r=_u(t,e),n=_u(t,e+4);return r*4294967296+n}Ze.readUint64BE=Uw;function jw(t,e){e===void 0&&(e=0);var r=Eu(t,e),n=Eu(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Ze.readInt64LE=jw;function Hw(t,e){e===void 0&&(e=0);var r=Au(t,e),n=Au(t,e+4);return n*4294967296+r}Ze.readUint64LE=Hw;function hv(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),r0(t/4294967296>>>0,e,r),r0(t>>>0,e,r+4),e}Ze.writeUint64BE=hv;Ze.writeInt64BE=hv;function dv(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),n0(t>>>0,e,r),n0(t/4294967296>>>0,e,r+4),e}Ze.writeUint64LE=dv;Ze.writeInt64LE=dv;function Kw(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Ze.readUintBE=Kw;function Vw(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Ze.readUintLE=Vw;function Gw(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!cv.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Ze.writeUintBE=Gw;function Ww(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!cv.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Ze.writeUintLE=Ww;function Zw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ze.readFloat32BE=Zw;function Xw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ze.readFloat32LE=Xw;function Yw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ze.readFloat64BE=Yw;function Jw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ze.readFloat64LE=Jw;function Qw(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Ze.writeFloat32BE=Qw;function e9(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Ze.writeFloat32LE=e9;function t9(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Ze.writeFloat64BE=t9;function r9(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Ze.writeFloat64LE=r9;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=H0,r=Ze,n=xr;t.defaultRandomSource=new e.SystemRandomSource;function i(c,h=t.defaultRandomSource){return h.randomBytes(c)}t.randomBytes=i;function s(c=t.defaultRandomSource){const h=i(4,c),d=(0,r.readUint32LE)(h);return(0,n.wipe)(h),d}t.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(c,h=a,d=t.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let p="";const v=h.length,x=256-256%v;for(;c>0;){const D=i(Math.ceil(c*256/x),d);for(let S=0;S<D.length&&c>0;S++){const O=D[S];O<x&&(p+=h.charAt(O%v),c--)}(0,n.wipe)(D)}return p}t.randomString=o;function f(c,h=a,d=t.defaultRandomSource){const p=Math.ceil(c/(Math.log(h.length)/Math.LN2));return o(p,h,d)}t.randomStringForEntropy=f})(vi);var lv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ze,r=xr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(f,c){if(c===void 0&&(c=f.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=f[h++],c--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(h=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,f,h,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=f[h++],c--;return this},o.prototype.finish=function(f){if(!this._finished){var c=this._bytesHashed,h=this._bufferLength,d=c/536870912|0,p=c<<3,v=c%128<112?128:256;this._buffer[h]=128;for(var x=h+1;x<v-8;x++)this._buffer[x]=0;e.writeUint32BE(d,this._buffer,v-8),e.writeUint32BE(p,this._buffer,v-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var x=0;x<this.digestLength/8;x++)e.writeUint32BE(this._stateHi[x],f,x*8),e.writeUint32BE(this._stateLo[x],f,x*8+4);return this},o.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(f){return this._stateHi.set(f.stateHi),this._stateLo.set(f.stateLo),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(f){r.wipe(f.stateHi),r.wipe(f.stateLo),f.buffer&&r.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},o}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(o,f,c,h,d,p,v){for(var x=c[0],D=c[1],S=c[2],O=c[3],A=c[4],F=c[5],P=c[6],k=c[7],L=h[0],m=h[1],T=h[2],j=h[3],U=h[4],N=h[5],g=h[6],b=h[7],u,l,w,I,B,C,y,E;v>=128;){for(var _=0;_<16;_++){var $=8*_+p;o[_]=e.readUint32BE(d,$),f[_]=e.readUint32BE(d,$+4)}for(var _=0;_<80;_++){var V=x,R=D,W=S,z=O,q=A,H=F,M=P,K=k,Z=L,Y=m,J=T,Q=j,be=U,Se=N,de=g,Re=b;if(u=k,l=b,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=(A>>>14|U<<18)^(A>>>18|U<<14)^(U>>>9|A<<23),l=(U>>>14|A<<18)^(U>>>18|A<<14)^(A>>>9|U<<23),B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,u=A&F^~A&P,l=U&N^~U&g,B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,u=i[_*2],l=i[_*2+1],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,u=o[_%16],l=f[_%16],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,w=y&65535|E<<16,I=B&65535|C<<16,u=w,l=I,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=(x>>>28|L<<4)^(L>>>2|x<<30)^(L>>>7|x<<25),l=(L>>>28|x<<4)^(x>>>2|L<<30)^(x>>>7|L<<25),B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,u=x&D^x&S^D&S,l=L&m^L&T^m&T,B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,K=y&65535|E<<16,Re=B&65535|C<<16,u=z,l=Q,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=w,l=I,B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,z=y&65535|E<<16,Q=B&65535|C<<16,D=V,S=R,O=W,A=z,F=q,P=H,k=M,x=K,m=Z,T=Y,j=J,U=Q,N=be,g=Se,b=de,L=Re,_%16===15)for(var $=0;$<16;$++)u=o[$],l=f[$],B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=o[($+9)%16],l=f[($+9)%16],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,w=o[($+1)%16],I=f[($+1)%16],u=(w>>>1|I<<31)^(w>>>8|I<<24)^w>>>7,l=(I>>>1|w<<31)^(I>>>8|w<<24)^(I>>>7|w<<25),B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,w=o[($+14)%16],I=f[($+14)%16],u=(w>>>19|I<<13)^(I>>>29|w<<3)^w>>>6,l=(I>>>19|w<<13)^(w>>>29|I<<3)^(I>>>6|w<<26),B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,o[$]=y&65535|E<<16,f[$]=B&65535|C<<16}u=x,l=L,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[0],l=h[0],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[0]=x=y&65535|E<<16,h[0]=L=B&65535|C<<16,u=D,l=m,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[1],l=h[1],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[1]=D=y&65535|E<<16,h[1]=m=B&65535|C<<16,u=S,l=T,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[2],l=h[2],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[2]=S=y&65535|E<<16,h[2]=T=B&65535|C<<16,u=O,l=j,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[3],l=h[3],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[3]=O=y&65535|E<<16,h[3]=j=B&65535|C<<16,u=A,l=U,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[4],l=h[4],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[4]=A=y&65535|E<<16,h[4]=U=B&65535|C<<16,u=F,l=N,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[5],l=h[5],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[5]=F=y&65535|E<<16,h[5]=N=B&65535|C<<16,u=P,l=g,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[6],l=h[6],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[6]=P=y&65535|E<<16,h[6]=g=B&65535|C<<16,u=k,l=b,B=l&65535,C=l>>>16,y=u&65535,E=u>>>16,u=c[7],l=h[7],B+=l&65535,C+=l>>>16,y+=u&65535,E+=u>>>16,C+=B>>>16,y+=C>>>16,E+=y>>>16,c[7]=k=y&65535|E<<16,h[7]=b=B&65535|C<<16,p+=128,v-=128}return p}function a(o){var f=new n;f.update(o);var c=f.digest();return f.clean(),c}t.hash=a})(lv);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=vi,r=lv,n=xr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(z){const q=new Float64Array(16);if(z)for(let H=0;H<z.length;H++)q[H]=z[H];return q}const s=new Uint8Array(32);s[0]=9;const a=i(),o=i([1]),f=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(z,q){for(let H=0;H<16;H++)z[H]=q[H]|0}function x(z){let q=1;for(let H=0;H<16;H++){let M=z[H]+q+65535;q=Math.floor(M/65536),z[H]=M-q*65536}z[0]+=q-1+37*(q-1)}function D(z,q,H){const M=~(H-1);for(let K=0;K<16;K++){const Z=M&(z[K]^q[K]);z[K]^=Z,q[K]^=Z}}function S(z,q){const H=i(),M=i();for(let K=0;K<16;K++)M[K]=q[K];x(M),x(M),x(M);for(let K=0;K<2;K++){H[0]=M[0]-65517;for(let Y=1;Y<15;Y++)H[Y]=M[Y]-65535-(H[Y-1]>>16&1),H[Y-1]&=65535;H[15]=M[15]-32767-(H[14]>>16&1);const Z=H[15]>>16&1;H[14]&=65535,D(M,H,1-Z)}for(let K=0;K<16;K++)z[2*K]=M[K]&255,z[2*K+1]=M[K]>>8}function O(z,q){let H=0;for(let M=0;M<32;M++)H|=z[M]^q[M];return(1&H-1>>>8)-1}function A(z,q){const H=new Uint8Array(32),M=new Uint8Array(32);return S(H,z),S(M,q),O(H,M)}function F(z){const q=new Uint8Array(32);return S(q,z),q[0]&1}function P(z,q){for(let H=0;H<16;H++)z[H]=q[2*H]+(q[2*H+1]<<8);z[15]&=32767}function k(z,q,H){for(let M=0;M<16;M++)z[M]=q[M]+H[M]}function L(z,q,H){for(let M=0;M<16;M++)z[M]=q[M]-H[M]}function m(z,q,H){let M,K,Z=0,Y=0,J=0,Q=0,be=0,Se=0,de=0,Re=0,ge=0,ne=0,fe=0,he=0,se=0,le=0,ue=0,re=0,xe=0,_e=0,ie=0,ve=0,Ee=0,ce=0,Ce=0,Me=0,Pe=0,Xe=0,Je=0,Ie=0,Qe=0,rt=0,Oe=0,ke=H[0],Te=H[1],ye=H[2],$e=H[3],qe=H[4],pe=H[5],je=H[6],He=H[7],we=H[8],Be=H[9],Fe=H[10],me=H[11],ze=H[12],Ne=H[13],De=H[14],Ge=H[15];M=q[0],Z+=M*ke,Y+=M*Te,J+=M*ye,Q+=M*$e,be+=M*qe,Se+=M*pe,de+=M*je,Re+=M*He,ge+=M*we,ne+=M*Be,fe+=M*Fe,he+=M*me,se+=M*ze,le+=M*Ne,ue+=M*De,re+=M*Ge,M=q[1],Y+=M*ke,J+=M*Te,Q+=M*ye,be+=M*$e,Se+=M*qe,de+=M*pe,Re+=M*je,ge+=M*He,ne+=M*we,fe+=M*Be,he+=M*Fe,se+=M*me,le+=M*ze,ue+=M*Ne,re+=M*De,xe+=M*Ge,M=q[2],J+=M*ke,Q+=M*Te,be+=M*ye,Se+=M*$e,de+=M*qe,Re+=M*pe,ge+=M*je,ne+=M*He,fe+=M*we,he+=M*Be,se+=M*Fe,le+=M*me,ue+=M*ze,re+=M*Ne,xe+=M*De,_e+=M*Ge,M=q[3],Q+=M*ke,be+=M*Te,Se+=M*ye,de+=M*$e,Re+=M*qe,ge+=M*pe,ne+=M*je,fe+=M*He,he+=M*we,se+=M*Be,le+=M*Fe,ue+=M*me,re+=M*ze,xe+=M*Ne,_e+=M*De,ie+=M*Ge,M=q[4],be+=M*ke,Se+=M*Te,de+=M*ye,Re+=M*$e,ge+=M*qe,ne+=M*pe,fe+=M*je,he+=M*He,se+=M*we,le+=M*Be,ue+=M*Fe,re+=M*me,xe+=M*ze,_e+=M*Ne,ie+=M*De,ve+=M*Ge,M=q[5],Se+=M*ke,de+=M*Te,Re+=M*ye,ge+=M*$e,ne+=M*qe,fe+=M*pe,he+=M*je,se+=M*He,le+=M*we,ue+=M*Be,re+=M*Fe,xe+=M*me,_e+=M*ze,ie+=M*Ne,ve+=M*De,Ee+=M*Ge,M=q[6],de+=M*ke,Re+=M*Te,ge+=M*ye,ne+=M*$e,fe+=M*qe,he+=M*pe,se+=M*je,le+=M*He,ue+=M*we,re+=M*Be,xe+=M*Fe,_e+=M*me,ie+=M*ze,ve+=M*Ne,Ee+=M*De,ce+=M*Ge,M=q[7],Re+=M*ke,ge+=M*Te,ne+=M*ye,fe+=M*$e,he+=M*qe,se+=M*pe,le+=M*je,ue+=M*He,re+=M*we,xe+=M*Be,_e+=M*Fe,ie+=M*me,ve+=M*ze,Ee+=M*Ne,ce+=M*De,Ce+=M*Ge,M=q[8],ge+=M*ke,ne+=M*Te,fe+=M*ye,he+=M*$e,se+=M*qe,le+=M*pe,ue+=M*je,re+=M*He,xe+=M*we,_e+=M*Be,ie+=M*Fe,ve+=M*me,Ee+=M*ze,ce+=M*Ne,Ce+=M*De,Me+=M*Ge,M=q[9],ne+=M*ke,fe+=M*Te,he+=M*ye,se+=M*$e,le+=M*qe,ue+=M*pe,re+=M*je,xe+=M*He,_e+=M*we,ie+=M*Be,ve+=M*Fe,Ee+=M*me,ce+=M*ze,Ce+=M*Ne,Me+=M*De,Pe+=M*Ge,M=q[10],fe+=M*ke,he+=M*Te,se+=M*ye,le+=M*$e,ue+=M*qe,re+=M*pe,xe+=M*je,_e+=M*He,ie+=M*we,ve+=M*Be,Ee+=M*Fe,ce+=M*me,Ce+=M*ze,Me+=M*Ne,Pe+=M*De,Xe+=M*Ge,M=q[11],he+=M*ke,se+=M*Te,le+=M*ye,ue+=M*$e,re+=M*qe,xe+=M*pe,_e+=M*je,ie+=M*He,ve+=M*we,Ee+=M*Be,ce+=M*Fe,Ce+=M*me,Me+=M*ze,Pe+=M*Ne,Xe+=M*De,Je+=M*Ge,M=q[12],se+=M*ke,le+=M*Te,ue+=M*ye,re+=M*$e,xe+=M*qe,_e+=M*pe,ie+=M*je,ve+=M*He,Ee+=M*we,ce+=M*Be,Ce+=M*Fe,Me+=M*me,Pe+=M*ze,Xe+=M*Ne,Je+=M*De,Ie+=M*Ge,M=q[13],le+=M*ke,ue+=M*Te,re+=M*ye,xe+=M*$e,_e+=M*qe,ie+=M*pe,ve+=M*je,Ee+=M*He,ce+=M*we,Ce+=M*Be,Me+=M*Fe,Pe+=M*me,Xe+=M*ze,Je+=M*Ne,Ie+=M*De,Qe+=M*Ge,M=q[14],ue+=M*ke,re+=M*Te,xe+=M*ye,_e+=M*$e,ie+=M*qe,ve+=M*pe,Ee+=M*je,ce+=M*He,Ce+=M*we,Me+=M*Be,Pe+=M*Fe,Xe+=M*me,Je+=M*ze,Ie+=M*Ne,Qe+=M*De,rt+=M*Ge,M=q[15],re+=M*ke,xe+=M*Te,_e+=M*ye,ie+=M*$e,ve+=M*qe,Ee+=M*pe,ce+=M*je,Ce+=M*He,Me+=M*we,Pe+=M*Be,Xe+=M*Fe,Je+=M*me,Ie+=M*ze,Qe+=M*Ne,rt+=M*De,Oe+=M*Ge,Z+=38*xe,Y+=38*_e,J+=38*ie,Q+=38*ve,be+=38*Ee,Se+=38*ce,de+=38*Ce,Re+=38*Me,ge+=38*Pe,ne+=38*Xe,fe+=38*Je,he+=38*Ie,se+=38*Qe,le+=38*rt,ue+=38*Oe,K=1,M=Z+K+65535,K=Math.floor(M/65536),Z=M-K*65536,M=Y+K+65535,K=Math.floor(M/65536),Y=M-K*65536,M=J+K+65535,K=Math.floor(M/65536),J=M-K*65536,M=Q+K+65535,K=Math.floor(M/65536),Q=M-K*65536,M=be+K+65535,K=Math.floor(M/65536),be=M-K*65536,M=Se+K+65535,K=Math.floor(M/65536),Se=M-K*65536,M=de+K+65535,K=Math.floor(M/65536),de=M-K*65536,M=Re+K+65535,K=Math.floor(M/65536),Re=M-K*65536,M=ge+K+65535,K=Math.floor(M/65536),ge=M-K*65536,M=ne+K+65535,K=Math.floor(M/65536),ne=M-K*65536,M=fe+K+65535,K=Math.floor(M/65536),fe=M-K*65536,M=he+K+65535,K=Math.floor(M/65536),he=M-K*65536,M=se+K+65535,K=Math.floor(M/65536),se=M-K*65536,M=le+K+65535,K=Math.floor(M/65536),le=M-K*65536,M=ue+K+65535,K=Math.floor(M/65536),ue=M-K*65536,M=re+K+65535,K=Math.floor(M/65536),re=M-K*65536,Z+=K-1+37*(K-1),K=1,M=Z+K+65535,K=Math.floor(M/65536),Z=M-K*65536,M=Y+K+65535,K=Math.floor(M/65536),Y=M-K*65536,M=J+K+65535,K=Math.floor(M/65536),J=M-K*65536,M=Q+K+65535,K=Math.floor(M/65536),Q=M-K*65536,M=be+K+65535,K=Math.floor(M/65536),be=M-K*65536,M=Se+K+65535,K=Math.floor(M/65536),Se=M-K*65536,M=de+K+65535,K=Math.floor(M/65536),de=M-K*65536,M=Re+K+65535,K=Math.floor(M/65536),Re=M-K*65536,M=ge+K+65535,K=Math.floor(M/65536),ge=M-K*65536,M=ne+K+65535,K=Math.floor(M/65536),ne=M-K*65536,M=fe+K+65535,K=Math.floor(M/65536),fe=M-K*65536,M=he+K+65535,K=Math.floor(M/65536),he=M-K*65536,M=se+K+65535,K=Math.floor(M/65536),se=M-K*65536,M=le+K+65535,K=Math.floor(M/65536),le=M-K*65536,M=ue+K+65535,K=Math.floor(M/65536),ue=M-K*65536,M=re+K+65535,K=Math.floor(M/65536),re=M-K*65536,Z+=K-1+37*(K-1),z[0]=Z,z[1]=Y,z[2]=J,z[3]=Q,z[4]=be,z[5]=Se,z[6]=de,z[7]=Re,z[8]=ge,z[9]=ne,z[10]=fe,z[11]=he,z[12]=se,z[13]=le,z[14]=ue,z[15]=re}function T(z,q){m(z,q,q)}function j(z,q){const H=i();let M;for(M=0;M<16;M++)H[M]=q[M];for(M=253;M>=0;M--)T(H,H),M!==2&&M!==4&&m(H,H,q);for(M=0;M<16;M++)z[M]=H[M]}function U(z,q){const H=i();let M;for(M=0;M<16;M++)H[M]=q[M];for(M=250;M>=0;M--)T(H,H),M!==1&&m(H,H,q);for(M=0;M<16;M++)z[M]=H[M]}function N(z,q){const H=i(),M=i(),K=i(),Z=i(),Y=i(),J=i(),Q=i(),be=i(),Se=i();L(H,z[1],z[0]),L(Se,q[1],q[0]),m(H,H,Se),k(M,z[0],z[1]),k(Se,q[0],q[1]),m(M,M,Se),m(K,z[3],q[3]),m(K,K,c),m(Z,z[2],q[2]),k(Z,Z,Z),L(Y,M,H),L(J,Z,K),k(Q,Z,K),k(be,M,H),m(z[0],Y,J),m(z[1],be,Q),m(z[2],Q,J),m(z[3],Y,be)}function g(z,q,H){for(let M=0;M<4;M++)D(z[M],q[M],H)}function b(z,q){const H=i(),M=i(),K=i();j(K,q[2]),m(H,q[0],K),m(M,q[1],K),S(z,M),z[31]^=F(H)<<7}function u(z,q,H){v(z[0],a),v(z[1],o),v(z[2],o),v(z[3],a);for(let M=255;M>=0;--M){const K=H[M/8|0]>>(M&7)&1;g(z,q,K),N(q,z),N(z,z),g(z,q,K)}}function l(z,q){const H=[i(),i(),i(),i()];v(H[0],h),v(H[1],d),v(H[2],o),m(H[3],h,d),u(z,H,q)}function w(z){if(z.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const q=(0,r.hash)(z);q[0]&=248,q[31]&=127,q[31]|=64;const H=new Uint8Array(32),M=[i(),i(),i(),i()];l(M,q),b(H,M);const K=new Uint8Array(64);return K.set(z),K.set(H,32),{publicKey:H,secretKey:K}}t.generateKeyPairFromSeed=w;function I(z){const q=(0,e.randomBytes)(32,z),H=w(q);return(0,n.wipe)(q),H}t.generateKeyPair=I;function B(z){if(z.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}t.extractPublicKeyFromSecretKey=B;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function y(z,q){let H,M,K,Z;for(M=63;M>=32;--M){for(H=0,K=M-32,Z=M-12;K<Z;++K)q[K]+=H-16*q[M]*C[K-(M-32)],H=Math.floor((q[K]+128)/256),q[K]-=H*256;q[K]+=H,q[M]=0}for(H=0,K=0;K<32;K++)q[K]+=H-(q[31]>>4)*C[K],H=q[K]>>8,q[K]&=255;for(K=0;K<32;K++)q[K]-=H*C[K];for(M=0;M<32;M++)q[M+1]+=q[M]>>8,z[M]=q[M]&255}function E(z){const q=new Float64Array(64);for(let H=0;H<64;H++)q[H]=z[H];for(let H=0;H<64;H++)z[H]=0;y(z,q)}function _(z,q){const H=new Float64Array(64),M=[i(),i(),i(),i()],K=(0,r.hash)(z.subarray(0,32));K[0]&=248,K[31]&=127,K[31]|=64;const Z=new Uint8Array(64);Z.set(K.subarray(32),32);const Y=new r.SHA512;Y.update(Z.subarray(32)),Y.update(q);const J=Y.digest();Y.clean(),E(J),l(M,J),b(Z,M),Y.reset(),Y.update(Z.subarray(0,32)),Y.update(z.subarray(32)),Y.update(q);const Q=Y.digest();E(Q);for(let be=0;be<32;be++)H[be]=J[be];for(let be=0;be<32;be++)for(let Se=0;Se<32;Se++)H[be+Se]+=Q[be]*K[Se];return y(Z.subarray(32),H),Z}t.sign=_;function $(z,q){const H=i(),M=i(),K=i(),Z=i(),Y=i(),J=i(),Q=i();return v(z[2],o),P(z[1],q),T(K,z[1]),m(Z,K,f),L(K,K,z[2]),k(Z,z[2],Z),T(Y,Z),T(J,Y),m(Q,J,Y),m(H,Q,K),m(H,H,Z),U(H,H),m(H,H,K),m(H,H,Z),m(H,H,Z),m(z[0],H,Z),T(M,z[0]),m(M,M,Z),A(M,K)&&m(z[0],z[0],p),T(M,z[0]),m(M,M,Z),A(M,K)?-1:(F(z[0])===q[31]>>7&&L(z[0],a,z[0]),m(z[3],z[0],z[1]),0)}function V(z,q,H){const M=new Uint8Array(32),K=[i(),i(),i(),i()],Z=[i(),i(),i(),i()];if(H.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if($(Z,z))return!1;const Y=new r.SHA512;Y.update(H.subarray(0,32)),Y.update(z),Y.update(q);const J=Y.digest();return E(J),u(K,Z,J),l(Z,H.subarray(32)),N(K,Z),b(M,K),!O(H,M)}t.verify=V;function R(z){let q=[i(),i(),i(),i()];if($(q,z))throw new Error("Ed25519: invalid public key");let H=i(),M=i(),K=q[1];k(H,o,K),L(M,o,K),j(M,M),m(H,H,M);let Z=new Uint8Array(32);return S(Z,H),Z}t.convertPublicKeyToX25519=R;function W(z){const q=(0,r.hash)(z.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const H=new Uint8Array(q.subarray(0,32));return(0,n.wipe)(q),H}t.convertSecretKeyToX25519=W})(Ch);const n9="EdDSA",i9="JWT",i0=".",G0="base64url",pv="utf8",bv="utf8",s9=":",a9="did",o9="key",El="base58btc",c9="z",f9="K36",u9=32;function gv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Lo(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=gv(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function h9(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,f=t.charAt(0),c=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function d(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var D=0,S=0,O=0,A=x.length;O!==A&&x[O]===0;)O++,D++;for(var F=(A-O)*h+1>>>0,P=new Uint8Array(F);O!==A;){for(var k=x[O],L=0,m=F-1;(k!==0||L<S)&&m!==-1;m--,L++)k+=256*P[m]>>>0,P[m]=k%o>>>0,k=k/o>>>0;if(k!==0)throw new Error("Non-zero carry");S=L,O++}for(var T=F-S;T!==F&&P[T]===0;)T++;for(var j=f.repeat(D);T<F;++T)j+=t.charAt(P[T]);return j}function p(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var D=0;if(x[D]!==" "){for(var S=0,O=0;x[D]===f;)S++,D++;for(var A=(x.length-D)*c+1>>>0,F=new Uint8Array(A);x[D];){var P=r[x.charCodeAt(D)];if(P===255)return;for(var k=0,L=A-1;(P!==0||k<O)&&L!==-1;L--,k++)P+=o*F[L]>>>0,F[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");O=k,D++}if(x[D]!==" "){for(var m=A-O;m!==A&&F[m]===0;)m++;for(var T=new Uint8Array(S+(A-m)),j=S;m!==A;)T[j++]=F[m++];return T}}}function v(x){var D=p(x);if(D)return D;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:v}}var d9=h9,l9=d9;const p9=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},b9=t=>new TextEncoder().encode(t),g9=t=>new TextDecoder().decode(t);class v9{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class y9{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vv(this,e)}}class m9{constructor(e){this.decoders=e}or(e){return vv(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vv=(t,e)=>new m9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class x9{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new v9(e,r,n),this.decoder=new y9(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const W0=({name:t,prefix:e,encode:r,decode:n})=>new x9(t,e,r,n),ao=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=l9(r,e);return W0({prefix:t,name:e,encode:n,decode:s=>p9(i(s))})},w9=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,f=0,c=0;for(let h=0;h<s;++h){const d=i[t[h]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|d,o+=r,o>=8&&(o-=8,a[c++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return a},_9=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},Kt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>W0({prefix:e,name:t,encode(i){return _9(i,n,r)},decode(i){return w9(i,n,r,t)}}),E9=W0({prefix:"\0",name:"identity",encode:t=>g9(t),decode:t=>b9(t)}),A9=Object.freeze(Object.defineProperty({__proto__:null,identity:E9},Symbol.toStringTag,{value:"Module"})),S9=Kt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),D9=Object.freeze(Object.defineProperty({__proto__:null,base2:S9},Symbol.toStringTag,{value:"Module"})),M9=Kt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),C9=Object.freeze(Object.defineProperty({__proto__:null,base8:M9},Symbol.toStringTag,{value:"Module"})),I9=ao({prefix:"9",name:"base10",alphabet:"0123456789"}),B9=Object.freeze(Object.defineProperty({__proto__:null,base10:I9},Symbol.toStringTag,{value:"Module"})),P9=Kt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),F9=Kt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),R9=Object.freeze(Object.defineProperty({__proto__:null,base16:P9,base16upper:F9},Symbol.toStringTag,{value:"Module"})),O9=Kt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),T9=Kt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N9=Kt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$9=Kt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),L9=Kt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),k9=Kt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q9=Kt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),z9=Kt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),U9=Kt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),j9=Object.freeze(Object.defineProperty({__proto__:null,base32:O9,base32hex:L9,base32hexpad:q9,base32hexpadupper:z9,base32hexupper:k9,base32pad:N9,base32padupper:$9,base32upper:T9,base32z:U9},Symbol.toStringTag,{value:"Module"})),H9=ao({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),K9=ao({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),V9=Object.freeze(Object.defineProperty({__proto__:null,base36:H9,base36upper:K9},Symbol.toStringTag,{value:"Module"})),G9=ao({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W9=ao({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Z9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:G9,base58flickr:W9},Symbol.toStringTag,{value:"Module"})),X9=Kt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Y9=Kt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J9=Kt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q9=Kt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),e_=Object.freeze(Object.defineProperty({__proto__:null,base64:X9,base64pad:Y9,base64url:J9,base64urlpad:Q9},Symbol.toStringTag,{value:"Module"})),yv=Array.from(""),t_=yv.reduce((t,e,r)=>(t[r]=e,t),[]),r_=yv.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function n_(t){return t.reduce((e,r)=>(e+=t_[r],e),"")}function i_(t){const e=[];for(const r of t){const n=r_[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const s_=W0({prefix:"",name:"base256emoji",encode:n_,decode:i_}),a_=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:s_},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Al={...A9,...D9,...C9,...B9,...R9,...j9,...V9,...Z9,...e_,...a_};function mv(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Sl=mv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),qc=mv("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=gv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),xv={utf8:Sl,"utf-8":Sl,hex:Al.base16,latin1:qc,ascii:qc,binary:qc,...Al};function $t(t,e="utf8"){const r=xv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Tt(t,e="utf8"){const r=xv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Dl(t){return Is($t(Tt(t,G0),pv))}function s0(t){return $t(Tt(Vi(t),pv),G0)}function wv(t){const e=Tt(f9,El),r=c9+$t(Lo([e,t]),El);return[a9,o9,r].join(s9)}function o_(t){return $t(t,G0)}function c_(t){return Tt(t,G0)}function f_(t){return Tt([s0(t.header),s0(t.payload)].join(i0),bv)}function u_(t){return[s0(t.header),s0(t.payload),o_(t.signature)].join(i0)}function Su(t){const e=t.split(i0),r=Dl(e[0]),n=Dl(e[1]),i=c_(e[2]),s=Tt(e.slice(0,2).join(i0),bv);return{header:r,payload:n,signature:i,data:s}}function Ml(t=vi.randomBytes(u9)){return Ch.generateKeyPairFromSeed(t)}async function h_(t,e,r,n,i=ae.fromMiliseconds(Date.now())){const s={alg:n9,typ:i9},a=wv(n.publicKey),o=i+r,f={iss:a,sub:t,aud:e,iat:i,exp:o},c=f_({header:s,payload:f}),h=Ch.sign(n.secretKey,c);return u_({header:s,payload:f,signature:h})}var Cl=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},d_=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),l_=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),p_=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),b_=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),g_=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),v_=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,y_=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Il=3,m_=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",v_]],Bl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function x_(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new g_:typeof navigator<"u"?__(navigator.userAgent):A_()}function w_(t){return t!==""&&m_.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function __(t){var e=w_(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new b_;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Il&&(i=Cl(Cl([],i,!0),S_(Il-i.length),!0)):i=[];var s=i.join("."),a=E_(t),o=y_.exec(t);return o&&o[1]?new p_(r,s,a,o[1]):new d_(r,s,a)}function E_(t){for(var e=0,r=Bl.length;e<r;e++){var n=Bl[e],i=n[0],s=n[1],a=s.exec(t);if(a)return i}return null}function A_(){var t=typeof process<"u"&&process.version;return t?new l_(process.version.slice(1)):null}function S_(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=_v=dt.getLocation=dt.getLocationOrThrow=Ih=dt.getNavigator=dt.getNavigatorOrThrow=oo=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function Qi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}dt.getFromWindow=Qi;function zs(t){const e=Qi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}dt.getFromWindowOrThrow=zs;function D_(){return zs("document")}dt.getDocumentOrThrow=D_;function M_(){return Qi("document")}var oo=dt.getDocument=M_;function C_(){return zs("navigator")}dt.getNavigatorOrThrow=C_;function I_(){return Qi("navigator")}var Ih=dt.getNavigator=I_;function B_(){return zs("location")}dt.getLocationOrThrow=B_;function P_(){return Qi("location")}var _v=dt.getLocation=P_;function F_(){return zs("crypto")}dt.getCryptoOrThrow=F_;function R_(){return Qi("crypto")}dt.getCrypto=R_;function O_(){return zs("localStorage")}dt.getLocalStorageOrThrow=O_;function T_(){return Qi("localStorage")}dt.getLocalStorage=T_;var Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});var Ev=Bh.getWindowMetadata=void 0;const Pl=dt;function N_(){let t,e;try{t=Pl.getDocumentOrThrow(),e=Pl.getLocationOrThrow()}catch{return null}function r(){const d=t.getElementsByTagName("link"),p=[];for(let v=0;v<d.length;v++){const x=d[v],D=x.getAttribute("rel");if(D&&D.toLowerCase().indexOf("icon")>-1){const S=x.getAttribute("href");if(S)if(S.toLowerCase().indexOf("https:")===-1&&S.toLowerCase().indexOf("http:")===-1&&S.indexOf("//")!==0){let O=e.protocol+"//"+e.host;if(S.indexOf("/")===0)O+=S;else{const A=e.pathname.split("/");A.pop();const F=A.join("/");O+=F+"/"+S}p.push(O)}else if(S.indexOf("//")===0){const O=e.protocol+S;p.push(O)}else p.push(S)}}return p}function n(...d){const p=t.getElementsByTagName("meta");for(let v=0;v<p.length;v++){const x=p[v],D=["itemprop","property","name"].map(S=>x.getAttribute(S)).filter(S=>S?d.includes(S):!1);if(D.length&&D){const S=x.getAttribute("content");if(S)return S}}return""}function i(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return n("description","og:description","twitter:description","keywords")}const a=i(),o=s(),f=e.origin,c=r();return{description:o,url:f,icons:c,name:a}}Ev=Bh.getWindowMetadata=N_;var za={},$_=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Av="%[a-f0-9]{2}",Fl=new RegExp("("+Av+")|([^%]+?)","gi"),Rl=new RegExp("("+Av+")+","gi");function Du(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Du(r),Du(n))}function L_(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Fl)||[],r=1;r<e.length;r++)t=Du(e,r).join(""),e=t.match(Fl)||[];return t}}function k_(t){for(var e={"%FE%FF":"","%FF%FE":""},r=Rl.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=L_(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Rl.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];t=t.replace(new RegExp(a,"g"),e[a])}return t}var q_=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return k_(t)}},z_=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},U_=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var a=n[s],o=t[a];(i?e.indexOf(a)!==-1:e(a,o,t))&&(r[a]=o)}return r};(function(t){const e=$_,r=q_,n=z_,i=U_,s=A=>A==null,a=Symbol("encodeFragmentIdentifier");function o(A){switch(A.arrayFormat){case"index":return F=>(P,k)=>{const L=P.length;return k===void 0||A.skipNull&&k===null||A.skipEmptyString&&k===""?P:k===null?[...P,[h(F,A),"[",L,"]"].join("")]:[...P,[h(F,A),"[",h(L,A),"]=",h(k,A)].join("")]};case"bracket":return F=>(P,k)=>k===void 0||A.skipNull&&k===null||A.skipEmptyString&&k===""?P:k===null?[...P,[h(F,A),"[]"].join("")]:[...P,[h(F,A),"[]=",h(k,A)].join("")];case"colon-list-separator":return F=>(P,k)=>k===void 0||A.skipNull&&k===null||A.skipEmptyString&&k===""?P:k===null?[...P,[h(F,A),":list="].join("")]:[...P,[h(F,A),":list=",h(k,A)].join("")];case"comma":case"separator":case"bracket-separator":{const F=A.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(k,L)=>L===void 0||A.skipNull&&L===null||A.skipEmptyString&&L===""?k:(L=L===null?"":L,k.length===0?[[h(P,A),F,h(L,A)].join("")]:[[k,h(L,A)].join(A.arrayFormatSeparator)])}default:return F=>(P,k)=>k===void 0||A.skipNull&&k===null||A.skipEmptyString&&k===""?P:k===null?[...P,h(F,A)]:[...P,[h(F,A),"=",h(k,A)].join("")]}}function f(A){let F;switch(A.arrayFormat){case"index":return(P,k,L)=>{if(F=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!F){L[P]=k;return}L[P]===void 0&&(L[P]={}),L[P][F[1]]=k};case"bracket":return(P,k,L)=>{if(F=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!F){L[P]=k;return}if(L[P]===void 0){L[P]=[k];return}L[P]=[].concat(L[P],k)};case"colon-list-separator":return(P,k,L)=>{if(F=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!F){L[P]=k;return}if(L[P]===void 0){L[P]=[k];return}L[P]=[].concat(L[P],k)};case"comma":case"separator":return(P,k,L)=>{const m=typeof k=="string"&&k.includes(A.arrayFormatSeparator),T=typeof k=="string"&&!m&&d(k,A).includes(A.arrayFormatSeparator);k=T?d(k,A):k;const j=m||T?k.split(A.arrayFormatSeparator).map(U=>d(U,A)):k===null?k:d(k,A);L[P]=j};case"bracket-separator":return(P,k,L)=>{const m=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!m){L[P]=k&&d(k,A);return}const T=k===null?[]:k.split(A.arrayFormatSeparator).map(j=>d(j,A));if(L[P]===void 0){L[P]=T;return}L[P]=[].concat(L[P],T)};default:return(P,k,L)=>{if(L[P]===void 0){L[P]=k;return}L[P]=[].concat(L[P],k)}}}function c(A){if(typeof A!="string"||A.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(A,F){return F.encode?F.strict?e(A):encodeURIComponent(A):A}function d(A,F){return F.decode?r(A):A}function p(A){return Array.isArray(A)?A.sort():typeof A=="object"?p(Object.keys(A)).sort((F,P)=>Number(F)-Number(P)).map(F=>A[F]):A}function v(A){const F=A.indexOf("#");return F!==-1&&(A=A.slice(0,F)),A}function x(A){let F="";const P=A.indexOf("#");return P!==-1&&(F=A.slice(P)),F}function D(A){A=v(A);const F=A.indexOf("?");return F===-1?"":A.slice(F+1)}function S(A,F){return F.parseNumbers&&!Number.isNaN(Number(A))&&typeof A=="string"&&A.trim()!==""?A=Number(A):F.parseBooleans&&A!==null&&(A.toLowerCase()==="true"||A.toLowerCase()==="false")&&(A=A.toLowerCase()==="true"),A}function O(A,F){F=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},F),c(F.arrayFormatSeparator);const P=f(F),k=Object.create(null);if(typeof A!="string"||(A=A.trim().replace(/^[?#&]/,""),!A))return k;for(const L of A.split("&")){if(L==="")continue;let[m,T]=n(F.decode?L.replace(/\+/g," "):L,"=");T=T===void 0?null:["comma","separator","bracket-separator"].includes(F.arrayFormat)?T:d(T,F),P(d(m,F),T,k)}for(const L of Object.keys(k)){const m=k[L];if(typeof m=="object"&&m!==null)for(const T of Object.keys(m))m[T]=S(m[T],F);else k[L]=S(m,F)}return F.sort===!1?k:(F.sort===!0?Object.keys(k).sort():Object.keys(k).sort(F.sort)).reduce((L,m)=>{const T=k[m];return T&&typeof T=="object"&&!Array.isArray(T)?L[m]=p(T):L[m]=T,L},Object.create(null))}t.extract=D,t.parse=O,t.stringify=(A,F)=>{if(!A)return"";F=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},F),c(F.arrayFormatSeparator);const P=T=>F.skipNull&&s(A[T])||F.skipEmptyString&&A[T]==="",k=o(F),L={};for(const T of Object.keys(A))P(T)||(L[T]=A[T]);const m=Object.keys(L);return F.sort!==!1&&m.sort(F.sort),m.map(T=>{const j=A[T];return j===void 0?"":j===null?h(T,F):Array.isArray(j)?j.length===0&&F.arrayFormat==="bracket-separator"?h(T,F)+"[]":j.reduce(k(T),[]).join("&"):h(T,F)+"="+h(j,F)}).filter(T=>T.length>0).join("&")},t.parseUrl=(A,F)=>{F=Object.assign({decode:!0},F);const[P,k]=n(A,"#");return Object.assign({url:P.split("?")[0]||"",query:O(D(A),F)},F&&F.parseFragmentIdentifier&&k?{fragmentIdentifier:d(k,F)}:{})},t.stringifyUrl=(A,F)=>{F=Object.assign({encode:!0,strict:!0,[a]:!0},F);const P=v(A.url).split("?")[0]||"",k=t.extract(A.url),L=t.parse(k,{sort:!1}),m=Object.assign(L,A.query);let T=t.stringify(m,F);T&&(T=`?${T}`);let j=x(A.url);return A.fragmentIdentifier&&(j=`#${F[a]?h(A.fragmentIdentifier,F):A.fragmentIdentifier}`),`${P}${T}${j}`},t.pick=(A,F,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[a]:!1},P);const{url:k,query:L,fragmentIdentifier:m}=t.parseUrl(A,P);return t.stringifyUrl({url:k,query:i(L,F),fragmentIdentifier:m},P)},t.exclude=(A,F,P)=>{const k=Array.isArray(F)?L=>!F.includes(L):(L,m)=>!F(L,m);return t.pick(A,k,P)}})(za);var Sv={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?i=Le:s&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,f=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),h=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],p=[1,256,65536,16777216],v=[6,1536,393216,100663296],x=[0,8,16,24],D=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],S=[224,256,384,512],O=[128,256],A=["hex","buffer","arrayBuffer","array","digest"],F={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(R){return Object.prototype.toString.call(R)==="[object Array]"}),f&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(R){return typeof R=="object"&&R.buffer&&R.buffer.constructor===ArrayBuffer});for(var P=function(R,W,z){return function(q){return new _(R,W,R).update(q)[z]()}},k=function(R,W,z){return function(q,H){return new _(R,W,H).update(q)[z]()}},L=function(R,W,z){return function(q,H,M,K){return u["cshake"+R].update(q,H,M,K)[z]()}},m=function(R,W,z){return function(q,H,M,K){return u["kmac"+R].update(q,H,M,K)[z]()}},T=function(R,W,z,q){for(var H=0;H<A.length;++H){var M=A[H];R[M]=W(z,q,M)}return R},j=function(R,W){var z=P(R,W,"hex");return z.create=function(){return new _(R,W,R)},z.update=function(q){return z.create().update(q)},T(z,P,R,W)},U=function(R,W){var z=k(R,W,"hex");return z.create=function(q){return new _(R,W,q)},z.update=function(q,H){return z.create(H).update(q)},T(z,k,R,W)},N=function(R,W){var z=F[R],q=L(R,W,"hex");return q.create=function(H,M,K){return!M&&!K?u["shake"+R].create(H):new _(R,W,H).bytepad([M,K],z)},q.update=function(H,M,K,Z){return q.create(M,K,Z).update(H)},T(q,L,R,W)},g=function(R,W){var z=F[R],q=m(R,W,"hex");return q.create=function(H,M,K){return new $(R,W,M).bytepad(["KMAC",K],z).bytepad([H],z)},q.update=function(H,M,K,Z){return q.create(H,K,Z).update(M)},T(q,m,R,W)},b=[{name:"keccak",padding:p,bits:S,createMethod:j},{name:"sha3",padding:v,bits:S,createMethod:j},{name:"shake",padding:h,bits:O,createMethod:U},{name:"cshake",padding:d,bits:O,createMethod:N},{name:"kmac",padding:d,bits:O,createMethod:g}],u={},l=[],w=0;w<b.length;++w)for(var I=b[w],B=I.bits,C=0;C<B.length;++C){var y=I.name+"_"+B[C];if(l.push(y),u[y]=I.createMethod(B[C],I.padding),I.name!=="sha3"){var E=I.name+B[C];l.push(E),u[E]=u[y]}}function _(R,W,z){this.blocks=[],this.s=[],this.padding=W,this.outputBits=z,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(R<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=z>>5,this.extraBytes=(z&31)>>3;for(var q=0;q<50;++q)this.s[q]=0}_.prototype.update=function(R){if(this.finalized)throw new Error(r);var W,z=typeof R;if(z!=="string"){if(z==="object"){if(R===null)throw new Error(e);if(f&&R.constructor===ArrayBuffer)R=new Uint8Array(R);else if(!Array.isArray(R)&&(!f||!ArrayBuffer.isView(R)))throw new Error(e)}else throw new Error(e);W=!0}for(var q=this.blocks,H=this.byteCount,M=R.length,K=this.blockCount,Z=0,Y=this.s,J,Q;Z<M;){if(this.reset)for(this.reset=!1,q[0]=this.block,J=1;J<K+1;++J)q[J]=0;if(W)for(J=this.start;Z<M&&J<H;++Z)q[J>>2]|=R[Z]<<x[J++&3];else for(J=this.start;Z<M&&J<H;++Z)Q=R.charCodeAt(Z),Q<128?q[J>>2]|=Q<<x[J++&3]:Q<2048?(q[J>>2]|=(192|Q>>6)<<x[J++&3],q[J>>2]|=(128|Q&63)<<x[J++&3]):Q<55296||Q>=57344?(q[J>>2]|=(224|Q>>12)<<x[J++&3],q[J>>2]|=(128|Q>>6&63)<<x[J++&3],q[J>>2]|=(128|Q&63)<<x[J++&3]):(Q=65536+((Q&1023)<<10|R.charCodeAt(++Z)&1023),q[J>>2]|=(240|Q>>18)<<x[J++&3],q[J>>2]|=(128|Q>>12&63)<<x[J++&3],q[J>>2]|=(128|Q>>6&63)<<x[J++&3],q[J>>2]|=(128|Q&63)<<x[J++&3]);if(this.lastByteIndex=J,J>=H){for(this.start=J-H,this.block=q[K],J=0;J<K;++J)Y[J]^=q[J];V(Y),this.reset=!0}else this.start=J}return this},_.prototype.encode=function(R,W){var z=R&255,q=1,H=[z];for(R=R>>8,z=R&255;z>0;)H.unshift(z),R=R>>8,z=R&255,++q;return W?H.push(q):H.unshift(q),this.update(H),H.length},_.prototype.encodeString=function(R){var W,z=typeof R;if(z!=="string"){if(z==="object"){if(R===null)throw new Error(e);if(f&&R.constructor===ArrayBuffer)R=new Uint8Array(R);else if(!Array.isArray(R)&&(!f||!ArrayBuffer.isView(R)))throw new Error(e)}else throw new Error(e);W=!0}var q=0,H=R.length;if(W)q=H;else for(var M=0;M<R.length;++M){var K=R.charCodeAt(M);K<128?q+=1:K<2048?q+=2:K<55296||K>=57344?q+=3:(K=65536+((K&1023)<<10|R.charCodeAt(++M)&1023),q+=4)}return q+=this.encode(q*8),this.update(R),q},_.prototype.bytepad=function(R,W){for(var z=this.encode(W),q=0;q<R.length;++q)z+=this.encodeString(R[q]);var H=W-z%W,M=[];return M.length=H,this.update(M),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var R=this.blocks,W=this.lastByteIndex,z=this.blockCount,q=this.s;if(R[W>>2]|=this.padding[W&3],this.lastByteIndex===this.byteCount)for(R[0]=R[z],W=1;W<z+1;++W)R[W]=0;for(R[z-1]|=2147483648,W=0;W<z;++W)q[W]^=R[W];V(q)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var R=this.blockCount,W=this.s,z=this.outputBlocks,q=this.extraBytes,H=0,M=0,K="",Z;M<z;){for(H=0;H<R&&M<z;++H,++M)Z=W[H],K+=c[Z>>4&15]+c[Z&15]+c[Z>>12&15]+c[Z>>8&15]+c[Z>>20&15]+c[Z>>16&15]+c[Z>>28&15]+c[Z>>24&15];M%R===0&&(V(W),H=0)}return q&&(Z=W[H],K+=c[Z>>4&15]+c[Z&15],q>1&&(K+=c[Z>>12&15]+c[Z>>8&15]),q>2&&(K+=c[Z>>20&15]+c[Z>>16&15])),K},_.prototype.arrayBuffer=function(){this.finalize();var R=this.blockCount,W=this.s,z=this.outputBlocks,q=this.extraBytes,H=0,M=0,K=this.outputBits>>3,Z;q?Z=new ArrayBuffer(z+1<<2):Z=new ArrayBuffer(K);for(var Y=new Uint32Array(Z);M<z;){for(H=0;H<R&&M<z;++H,++M)Y[M]=W[H];M%R===0&&V(W)}return q&&(Y[H]=W[H],Z=Z.slice(0,K)),Z},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var R=this.blockCount,W=this.s,z=this.outputBlocks,q=this.extraBytes,H=0,M=0,K=[],Z,Y;M<z;){for(H=0;H<R&&M<z;++H,++M)Z=M<<2,Y=W[H],K[Z]=Y&255,K[Z+1]=Y>>8&255,K[Z+2]=Y>>16&255,K[Z+3]=Y>>24&255;M%R===0&&V(W)}return q&&(Z=M<<2,Y=W[H],K[Z]=Y&255,q>1&&(K[Z+1]=Y>>8&255),q>2&&(K[Z+2]=Y>>16&255)),K};function $(R,W,z){_.call(this,R,W,z)}$.prototype=new _,$.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var V=function(R){var W,z,q,H,M,K,Z,Y,J,Q,be,Se,de,Re,ge,ne,fe,he,se,le,ue,re,xe,_e,ie,ve,Ee,ce,Ce,Me,Pe,Xe,Je,Ie,Qe,rt,Oe,ke,Te,ye,$e,qe,pe,je,He,we,Be,Fe,me,ze,Ne,De,Ge,at,Ke,ot,et,st,nr,ir,sr,ar,At;for(q=0;q<48;q+=2)H=R[0]^R[10]^R[20]^R[30]^R[40],M=R[1]^R[11]^R[21]^R[31]^R[41],K=R[2]^R[12]^R[22]^R[32]^R[42],Z=R[3]^R[13]^R[23]^R[33]^R[43],Y=R[4]^R[14]^R[24]^R[34]^R[44],J=R[5]^R[15]^R[25]^R[35]^R[45],Q=R[6]^R[16]^R[26]^R[36]^R[46],be=R[7]^R[17]^R[27]^R[37]^R[47],Se=R[8]^R[18]^R[28]^R[38]^R[48],de=R[9]^R[19]^R[29]^R[39]^R[49],W=Se^(K<<1|Z>>>31),z=de^(Z<<1|K>>>31),R[0]^=W,R[1]^=z,R[10]^=W,R[11]^=z,R[20]^=W,R[21]^=z,R[30]^=W,R[31]^=z,R[40]^=W,R[41]^=z,W=H^(Y<<1|J>>>31),z=M^(J<<1|Y>>>31),R[2]^=W,R[3]^=z,R[12]^=W,R[13]^=z,R[22]^=W,R[23]^=z,R[32]^=W,R[33]^=z,R[42]^=W,R[43]^=z,W=K^(Q<<1|be>>>31),z=Z^(be<<1|Q>>>31),R[4]^=W,R[5]^=z,R[14]^=W,R[15]^=z,R[24]^=W,R[25]^=z,R[34]^=W,R[35]^=z,R[44]^=W,R[45]^=z,W=Y^(Se<<1|de>>>31),z=J^(de<<1|Se>>>31),R[6]^=W,R[7]^=z,R[16]^=W,R[17]^=z,R[26]^=W,R[27]^=z,R[36]^=W,R[37]^=z,R[46]^=W,R[47]^=z,W=Q^(H<<1|M>>>31),z=be^(M<<1|H>>>31),R[8]^=W,R[9]^=z,R[18]^=W,R[19]^=z,R[28]^=W,R[29]^=z,R[38]^=W,R[39]^=z,R[48]^=W,R[49]^=z,Re=R[0],ge=R[1],we=R[11]<<4|R[10]>>>28,Be=R[10]<<4|R[11]>>>28,ce=R[20]<<3|R[21]>>>29,Ce=R[21]<<3|R[20]>>>29,ir=R[31]<<9|R[30]>>>23,sr=R[30]<<9|R[31]>>>23,qe=R[40]<<18|R[41]>>>14,pe=R[41]<<18|R[40]>>>14,Ie=R[2]<<1|R[3]>>>31,Qe=R[3]<<1|R[2]>>>31,ne=R[13]<<12|R[12]>>>20,fe=R[12]<<12|R[13]>>>20,Fe=R[22]<<10|R[23]>>>22,me=R[23]<<10|R[22]>>>22,Me=R[33]<<13|R[32]>>>19,Pe=R[32]<<13|R[33]>>>19,ar=R[42]<<2|R[43]>>>30,At=R[43]<<2|R[42]>>>30,at=R[5]<<30|R[4]>>>2,Ke=R[4]<<30|R[5]>>>2,rt=R[14]<<6|R[15]>>>26,Oe=R[15]<<6|R[14]>>>26,he=R[25]<<11|R[24]>>>21,se=R[24]<<11|R[25]>>>21,ze=R[34]<<15|R[35]>>>17,Ne=R[35]<<15|R[34]>>>17,Xe=R[45]<<29|R[44]>>>3,Je=R[44]<<29|R[45]>>>3,_e=R[6]<<28|R[7]>>>4,ie=R[7]<<28|R[6]>>>4,ot=R[17]<<23|R[16]>>>9,et=R[16]<<23|R[17]>>>9,ke=R[26]<<25|R[27]>>>7,Te=R[27]<<25|R[26]>>>7,le=R[36]<<21|R[37]>>>11,ue=R[37]<<21|R[36]>>>11,De=R[47]<<24|R[46]>>>8,Ge=R[46]<<24|R[47]>>>8,je=R[8]<<27|R[9]>>>5,He=R[9]<<27|R[8]>>>5,ve=R[18]<<20|R[19]>>>12,Ee=R[19]<<20|R[18]>>>12,st=R[29]<<7|R[28]>>>25,nr=R[28]<<7|R[29]>>>25,ye=R[38]<<8|R[39]>>>24,$e=R[39]<<8|R[38]>>>24,re=R[48]<<14|R[49]>>>18,xe=R[49]<<14|R[48]>>>18,R[0]=Re^~ne&he,R[1]=ge^~fe&se,R[10]=_e^~ve&ce,R[11]=ie^~Ee&Ce,R[20]=Ie^~rt&ke,R[21]=Qe^~Oe&Te,R[30]=je^~we&Fe,R[31]=He^~Be&me,R[40]=at^~ot&st,R[41]=Ke^~et&nr,R[2]=ne^~he&le,R[3]=fe^~se&ue,R[12]=ve^~ce&Me,R[13]=Ee^~Ce&Pe,R[22]=rt^~ke&ye,R[23]=Oe^~Te&$e,R[32]=we^~Fe&ze,R[33]=Be^~me&Ne,R[42]=ot^~st&ir,R[43]=et^~nr&sr,R[4]=he^~le&re,R[5]=se^~ue&xe,R[14]=ce^~Me&Xe,R[15]=Ce^~Pe&Je,R[24]=ke^~ye&qe,R[25]=Te^~$e&pe,R[34]=Fe^~ze&De,R[35]=me^~Ne&Ge,R[44]=st^~ir&ar,R[45]=nr^~sr&At,R[6]=le^~re&Re,R[7]=ue^~xe&ge,R[16]=Me^~Xe&_e,R[17]=Pe^~Je&ie,R[26]=ye^~qe&Ie,R[27]=$e^~pe&Qe,R[36]=ze^~De&je,R[37]=Ne^~Ge&He,R[46]=ir^~ar&at,R[47]=sr^~At&Ke,R[8]=re^~Re&ne,R[9]=xe^~ge&fe,R[18]=Xe^~_e&ve,R[19]=Je^~ie&Ee,R[28]=qe^~Ie&rt,R[29]=pe^~Qe&Oe,R[38]=De^~je&we,R[39]=Ge^~He&Be,R[48]=ar^~at&ot,R[49]=At^~Ke&et,R[0]^=D[q],R[1]^=D[q+1]};if(o)t.exports=u;else for(w=0;w<l.length;++w)i[l[w]]=u[l[w]]})()})(Sv);var j_=Sv.exports;const H_=Xi(j_),K_="logger/5.7.0";let Ol=!1,Tl=!1;const ko={debug:1,default:2,info:2,warning:3,error:4,off:5};let Nl=ko.default,zc=null;function V_(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const $l=V_();var Mu;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Mu||(Mu={}));var jr;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(jr||(jr={}));const Ll="0123456789abcdef";class bt{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();ko[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Nl>ko[n])&&console.log.apply(console,r)}debug(...e){this._log(bt.levels.DEBUG,e)}info(...e){this._log(bt.levels.INFO,e)}warn(...e){this._log(bt.levels.WARNING,e)}makeError(e,r,n){if(Tl)return this.makeError("censored error",r,{});r||(r=bt.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(f=>{const c=n[f];try{if(c instanceof Uint8Array){let h="";for(let d=0;d<c.length;d++)h+=Ll[c[d]>>4],h+=Ll[c[d]&15];i.push(f+"=Uint8Array(0x"+h+")")}else i.push(f+"="+JSON.stringify(c))}catch{i.push(f+"="+JSON.stringify(n[f].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case jr.NUMERIC_FAULT:{a="NUMERIC_FAULT";const f=e;switch(f){case"overflow":case"underflow":case"division-by-zero":a+="-"+f;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case jr.CALL_EXCEPTION:case jr.INSUFFICIENT_FUNDS:case jr.MISSING_NEW:case jr.NONCE_EXPIRED:case jr.REPLACEMENT_UNDERPRICED:case jr.TRANSACTION_REPLACED:case jr.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(f){o[f]=n[f]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,bt.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){$l&&this.throwError("platform missing String.prototype.normalize",bt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:$l})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,bt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,bt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,bt.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,bt.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",bt.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",bt.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",bt.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return zc||(zc=new bt(K_)),zc}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",bt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ol){if(!e)return;this.globalLogger().throwError("error censorship permanent",bt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Tl=!!e,Ol=!!r}static setLogLevel(e){const r=ko[e.toLowerCase()];if(r==null){bt.globalLogger().warn("invalid log level - "+e);return}Nl=r}static from(e){return new bt(e)}}bt.errors=jr;bt.levels=Mu;const G_="bytes/5.7.0",xt=new bt(G_);function Dv(t){return!!t.toHexString}function ms(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return ms(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function W_(t){return on(t)&&!(t.length%2)||Ph(t)}function kl(t){return typeof t=="number"&&t==t&&t%1===0}function Ph(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!kl(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!kl(r)||r<0||r>=256)return!1}return!0}function St(t,e){if(e||(e={}),typeof t=="number"){xt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),ms(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Dv(t)&&(t=t.toHexString()),on(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":xt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return ms(new Uint8Array(n))}return Ph(t)?ms(new Uint8Array(t)):xt.throwArgumentError("invalid arrayify value","value",t)}function Z_(t){const e=t.map(i=>St(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),ms(n)}function X_(t,e){t=St(t),t.length>e&&xt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),ms(r)}function on(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Uc="0123456789abcdef";function vr(t,e){if(e||(e={}),typeof t=="number"){xt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Uc[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Dv(t))return t.toHexString();if(on(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":xt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ph(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Uc[(i&240)>>4]+Uc[i&15]}return r}return xt.throwArgumentError("invalid hexlify value","value",t)}function Y_(t){if(typeof t!="string")t=vr(t);else if(!on(t)||t.length%2)return null;return(t.length-2)/2}function ql(t,e,r){return typeof t!="string"?t=vr(t):(!on(t)||t.length%2)&&xt.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function xs(t,e){for(typeof t!="string"?t=vr(t):on(t)||xt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&xt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Mv(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(W_(t)){let r=St(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=vr(r.slice(0,32)),e.s=vr(r.slice(32,64))):r.length===65?(e.r=vr(r.slice(0,32)),e.s=vr(r.slice(32,64)),e.v=r[64]):xt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:xt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=vr(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=X_(St(e._vs),32);e._vs=vr(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&xt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=vr(i);e.s==null?e.s=a:e.s!==a&&xt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?xt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&xt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!on(e.r)?xt.throwArgumentError("signature missing or invalid r","signature",t):e.r=xs(e.r,32),e.s==null||!on(e.s)?xt.throwArgumentError("signature missing or invalid s","signature",t):e.s=xs(e.s,32);const r=St(e.s);r[0]>=128&&xt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=vr(r);e._vs&&(on(e._vs)||xt.throwArgumentError("signature invalid _vs","signature",t),e._vs=xs(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&xt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Fh(t){return"0x"+H_.keccak_256(St(t))}var Rh={exports:{}};Rh.exports;(function(t){(function(e,r){function n(b,u){if(!b)throw new Error(u||"Assertion failed")}function i(b,u){b.super_=u;var l=function(){};l.prototype=u.prototype,b.prototype=new l,b.prototype.constructor=b}function s(b,u,l){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((u==="le"||u==="be")&&(l=u,u=10),this._init(b||0,u||10,l||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=so.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,l){return u.cmp(l)>0?u:l},s.min=function(u,l){return u.cmp(l)<0?u:l},s.prototype._init=function(u,l,w){if(typeof u=="number")return this._initNumber(u,l,w);if(typeof u=="object")return this._initArray(u,l,w);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),u=u.toString().replace(/\s+/g,"");var I=0;u[0]==="-"&&(I++,this.negative=1),I<u.length&&(l===16?this._parseHex(u,I,w):(this._parseBase(u,l,I),w==="le"&&this._initArray(this.toArray(),l,w)))},s.prototype._initNumber=function(u,l,w){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),l,w)},s.prototype._initArray=function(u,l,w){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var B,C,y=0;if(w==="be")for(I=u.length-1,B=0;I>=0;I-=3)C=u[I]|u[I-1]<<8|u[I-2]<<16,this.words[B]|=C<<y&67108863,this.words[B+1]=C>>>26-y&67108863,y+=24,y>=26&&(y-=26,B++);else if(w==="le")for(I=0,B=0;I<u.length;I+=3)C=u[I]|u[I+1]<<8|u[I+2]<<16,this.words[B]|=C<<y&67108863,this.words[B+1]=C>>>26-y&67108863,y+=24,y>=26&&(y-=26,B++);return this._strip()};function o(b,u){var l=b.charCodeAt(u);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+b)}function f(b,u,l){var w=o(b,l);return l-1>=u&&(w|=o(b,l-1)<<4),w}s.prototype._parseHex=function(u,l,w){this.length=Math.ceil((u.length-l)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var B=0,C=0,y;if(w==="be")for(I=u.length-1;I>=l;I-=2)y=f(u,l,I)<<B,this.words[C]|=y&67108863,B>=18?(B-=18,C+=1,this.words[C]|=y>>>26):B+=8;else{var E=u.length-l;for(I=E%2===0?l+1:l;I<u.length;I+=2)y=f(u,l,I)<<B,this.words[C]|=y&67108863,B>=18?(B-=18,C+=1,this.words[C]|=y>>>26):B+=8}this._strip()};function c(b,u,l,w){for(var I=0,B=0,C=Math.min(b.length,l),y=u;y<C;y++){var E=b.charCodeAt(y)-48;I*=w,E>=49?B=E-49+10:E>=17?B=E-17+10:B=E,n(E>=0&&B<w,"Invalid character"),I+=B}return I}s.prototype._parseBase=function(u,l,w){this.words=[0],this.length=1;for(var I=0,B=1;B<=67108863;B*=l)I++;I--,B=B/l|0;for(var C=u.length-w,y=C%I,E=Math.min(C,C-y)+w,_=0,$=w;$<E;$+=I)_=c(u,$,$+I,l),this.imuln(B),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(y!==0){var V=1;for(_=c(u,$,u.length,l),$=0;$<y;$++)V*=l;this.imuln(V),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var l=0;l<this.length;l++)u.words[l]=this.words[l];u.length=this.length,u.negative=this.negative,u.red=this.red};function h(b,u){b.words=u.words,b.length=u.length,b.negative=u.negative,b.red=u.red}if(s.prototype._move=function(u){h(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,l){u=u||10,l=l|0||1;var w;if(u===16||u==="hex"){w="";for(var I=0,B=0,C=0;C<this.length;C++){var y=this.words[C],E=((y<<I|B)&16777215).toString(16);B=y>>>24-I&16777215,I+=2,I>=26&&(I-=26,C--),B!==0||C!==this.length-1?w=p[6-E.length]+E+w:w=E+w}for(B!==0&&(w=B.toString(16)+w);w.length%l!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(u===(u|0)&&u>=2&&u<=36){var _=v[u],$=x[u];w="";var V=this.clone();for(V.negative=0;!V.isZero();){var R=V.modrn($).toString(u);V=V.idivn($),V.isZero()?w=R+w:w=p[_-R.length]+R+w}for(this.isZero()&&(w="0"+w);w.length%l!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(u,l){return this.toArrayLike(a,u,l)}),s.prototype.toArray=function(u,l){return this.toArrayLike(Array,u,l)};var D=function(u,l){return u.allocUnsafe?u.allocUnsafe(l):new u(l)};s.prototype.toArrayLike=function(u,l,w){this._strip();var I=this.byteLength(),B=w||Math.max(1,I);n(I<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0");var C=D(u,B),y=l==="le"?"LE":"BE";return this["_toArrayLike"+y](C,I),C},s.prototype._toArrayLikeLE=function(u,l){for(var w=0,I=0,B=0,C=0;B<this.length;B++){var y=this.words[B]<<C|I;u[w++]=y&255,w<u.length&&(u[w++]=y>>8&255),w<u.length&&(u[w++]=y>>16&255),C===6?(w<u.length&&(u[w++]=y>>24&255),I=0,C=0):(I=y>>>24,C+=2)}if(w<u.length)for(u[w++]=I;w<u.length;)u[w++]=0},s.prototype._toArrayLikeBE=function(u,l){for(var w=u.length-1,I=0,B=0,C=0;B<this.length;B++){var y=this.words[B]<<C|I;u[w--]=y&255,w>=0&&(u[w--]=y>>8&255),w>=0&&(u[w--]=y>>16&255),C===6?(w>=0&&(u[w--]=y>>24&255),I=0,C=0):(I=y>>>24,C+=2)}if(w>=0)for(u[w--]=I;w>=0;)u[w--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var l=u,w=0;return l>=4096&&(w+=13,l>>>=13),l>=64&&(w+=7,l>>>=7),l>=8&&(w+=4,l>>>=4),l>=2&&(w+=2,l>>>=2),w+l},s.prototype._zeroBits=function(u){if(u===0)return 26;var l=u,w=0;return l&8191||(w+=13,l>>>=13),l&127||(w+=7,l>>>=7),l&15||(w+=4,l>>>=4),l&3||(w+=2,l>>>=2),l&1||w++,w},s.prototype.bitLength=function(){var u=this.words[this.length-1],l=this._countBits(u);return(this.length-1)*26+l};function S(b){for(var u=new Array(b.bitLength()),l=0;l<u.length;l++){var w=l/26|0,I=l%26;u[l]=b.words[w]>>>I&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,l=0;l<this.length;l++){var w=this._zeroBits(this.words[l]);if(u+=w,w!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]|u.words[l];return this._strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var l;this.length>u.length?l=u:l=this;for(var w=0;w<l.length;w++)this.words[w]=this.words[w]&u.words[w];return this.length=l.length,this._strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var l,w;this.length>u.length?(l=this,w=u):(l=u,w=this);for(var I=0;I<w.length;I++)this.words[I]=l.words[I]^w.words[I];if(this!==l)for(;I<l.length;I++)this.words[I]=l.words[I];return this.length=l.length,this._strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var l=Math.ceil(u/26)|0,w=u%26;this._expand(l),w>0&&l--;for(var I=0;I<l;I++)this.words[I]=~this.words[I]&67108863;return w>0&&(this.words[I]=~this.words[I]&67108863>>26-w),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,l){n(typeof u=="number"&&u>=0);var w=u/26|0,I=u%26;return this._expand(w+1),l?this.words[w]=this.words[w]|1<<I:this.words[w]=this.words[w]&~(1<<I),this._strip()},s.prototype.iadd=function(u){var l;if(this.negative!==0&&u.negative===0)return this.negative=0,l=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,l=this.isub(u),u.negative=1,l._normSign();var w,I;this.length>u.length?(w=this,I=u):(w=u,I=this);for(var B=0,C=0;C<I.length;C++)l=(w.words[C]|0)+(I.words[C]|0)+B,this.words[C]=l&67108863,B=l>>>26;for(;B!==0&&C<w.length;C++)l=(w.words[C]|0)+B,this.words[C]=l&67108863,B=l>>>26;if(this.length=w.length,B!==0)this.words[this.length]=B,this.length++;else if(w!==this)for(;C<w.length;C++)this.words[C]=w.words[C];return this},s.prototype.add=function(u){var l;return u.negative!==0&&this.negative===0?(u.negative=0,l=this.sub(u),u.negative^=1,l):u.negative===0&&this.negative!==0?(this.negative=0,l=u.sub(this),this.negative=1,l):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var l=this.iadd(u);return u.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w=this.cmp(u);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var I,B;w>0?(I=this,B=u):(I=u,B=this);for(var C=0,y=0;y<B.length;y++)l=(I.words[y]|0)-(B.words[y]|0)+C,C=l>>26,this.words[y]=l&67108863;for(;C!==0&&y<I.length;y++)l=(I.words[y]|0)+C,C=l>>26,this.words[y]=l&67108863;if(C===0&&y<I.length&&I!==this)for(;y<I.length;y++)this.words[y]=I.words[y];return this.length=Math.max(this.length,y),I!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function O(b,u,l){l.negative=u.negative^b.negative;var w=b.length+u.length|0;l.length=w,w=w-1|0;var I=b.words[0]|0,B=u.words[0]|0,C=I*B,y=C&67108863,E=C/67108864|0;l.words[0]=y;for(var _=1;_<w;_++){for(var $=E>>>26,V=E&67108863,R=Math.min(_,u.length-1),W=Math.max(0,_-b.length+1);W<=R;W++){var z=_-W|0;I=b.words[z]|0,B=u.words[W]|0,C=I*B+V,$+=C/67108864|0,V=C&67108863}l.words[_]=V|0,E=$|0}return E!==0?l.words[_]=E|0:l.length--,l._strip()}var A=function(u,l,w){var I=u.words,B=l.words,C=w.words,y=0,E,_,$,V=I[0]|0,R=V&8191,W=V>>>13,z=I[1]|0,q=z&8191,H=z>>>13,M=I[2]|0,K=M&8191,Z=M>>>13,Y=I[3]|0,J=Y&8191,Q=Y>>>13,be=I[4]|0,Se=be&8191,de=be>>>13,Re=I[5]|0,ge=Re&8191,ne=Re>>>13,fe=I[6]|0,he=fe&8191,se=fe>>>13,le=I[7]|0,ue=le&8191,re=le>>>13,xe=I[8]|0,_e=xe&8191,ie=xe>>>13,ve=I[9]|0,Ee=ve&8191,ce=ve>>>13,Ce=B[0]|0,Me=Ce&8191,Pe=Ce>>>13,Xe=B[1]|0,Je=Xe&8191,Ie=Xe>>>13,Qe=B[2]|0,rt=Qe&8191,Oe=Qe>>>13,ke=B[3]|0,Te=ke&8191,ye=ke>>>13,$e=B[4]|0,qe=$e&8191,pe=$e>>>13,je=B[5]|0,He=je&8191,we=je>>>13,Be=B[6]|0,Fe=Be&8191,me=Be>>>13,ze=B[7]|0,Ne=ze&8191,De=ze>>>13,Ge=B[8]|0,at=Ge&8191,Ke=Ge>>>13,ot=B[9]|0,et=ot&8191,st=ot>>>13;w.negative=u.negative^l.negative,w.length=19,E=Math.imul(R,Me),_=Math.imul(R,Pe),_=_+Math.imul(W,Me)|0,$=Math.imul(W,Pe);var nr=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(nr>>>26)|0,nr&=67108863,E=Math.imul(q,Me),_=Math.imul(q,Pe),_=_+Math.imul(H,Me)|0,$=Math.imul(H,Pe),E=E+Math.imul(R,Je)|0,_=_+Math.imul(R,Ie)|0,_=_+Math.imul(W,Je)|0,$=$+Math.imul(W,Ie)|0;var ir=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(ir>>>26)|0,ir&=67108863,E=Math.imul(K,Me),_=Math.imul(K,Pe),_=_+Math.imul(Z,Me)|0,$=Math.imul(Z,Pe),E=E+Math.imul(q,Je)|0,_=_+Math.imul(q,Ie)|0,_=_+Math.imul(H,Je)|0,$=$+Math.imul(H,Ie)|0,E=E+Math.imul(R,rt)|0,_=_+Math.imul(R,Oe)|0,_=_+Math.imul(W,rt)|0,$=$+Math.imul(W,Oe)|0;var sr=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(sr>>>26)|0,sr&=67108863,E=Math.imul(J,Me),_=Math.imul(J,Pe),_=_+Math.imul(Q,Me)|0,$=Math.imul(Q,Pe),E=E+Math.imul(K,Je)|0,_=_+Math.imul(K,Ie)|0,_=_+Math.imul(Z,Je)|0,$=$+Math.imul(Z,Ie)|0,E=E+Math.imul(q,rt)|0,_=_+Math.imul(q,Oe)|0,_=_+Math.imul(H,rt)|0,$=$+Math.imul(H,Oe)|0,E=E+Math.imul(R,Te)|0,_=_+Math.imul(R,ye)|0,_=_+Math.imul(W,Te)|0,$=$+Math.imul(W,ye)|0;var ar=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(ar>>>26)|0,ar&=67108863,E=Math.imul(Se,Me),_=Math.imul(Se,Pe),_=_+Math.imul(de,Me)|0,$=Math.imul(de,Pe),E=E+Math.imul(J,Je)|0,_=_+Math.imul(J,Ie)|0,_=_+Math.imul(Q,Je)|0,$=$+Math.imul(Q,Ie)|0,E=E+Math.imul(K,rt)|0,_=_+Math.imul(K,Oe)|0,_=_+Math.imul(Z,rt)|0,$=$+Math.imul(Z,Oe)|0,E=E+Math.imul(q,Te)|0,_=_+Math.imul(q,ye)|0,_=_+Math.imul(H,Te)|0,$=$+Math.imul(H,ye)|0,E=E+Math.imul(R,qe)|0,_=_+Math.imul(R,pe)|0,_=_+Math.imul(W,qe)|0,$=$+Math.imul(W,pe)|0;var At=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(At>>>26)|0,At&=67108863,E=Math.imul(ge,Me),_=Math.imul(ge,Pe),_=_+Math.imul(ne,Me)|0,$=Math.imul(ne,Pe),E=E+Math.imul(Se,Je)|0,_=_+Math.imul(Se,Ie)|0,_=_+Math.imul(de,Je)|0,$=$+Math.imul(de,Ie)|0,E=E+Math.imul(J,rt)|0,_=_+Math.imul(J,Oe)|0,_=_+Math.imul(Q,rt)|0,$=$+Math.imul(Q,Oe)|0,E=E+Math.imul(K,Te)|0,_=_+Math.imul(K,ye)|0,_=_+Math.imul(Z,Te)|0,$=$+Math.imul(Z,ye)|0,E=E+Math.imul(q,qe)|0,_=_+Math.imul(q,pe)|0,_=_+Math.imul(H,qe)|0,$=$+Math.imul(H,pe)|0,E=E+Math.imul(R,He)|0,_=_+Math.imul(R,we)|0,_=_+Math.imul(W,He)|0,$=$+Math.imul(W,we)|0;var mn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(mn>>>26)|0,mn&=67108863,E=Math.imul(he,Me),_=Math.imul(he,Pe),_=_+Math.imul(se,Me)|0,$=Math.imul(se,Pe),E=E+Math.imul(ge,Je)|0,_=_+Math.imul(ge,Ie)|0,_=_+Math.imul(ne,Je)|0,$=$+Math.imul(ne,Ie)|0,E=E+Math.imul(Se,rt)|0,_=_+Math.imul(Se,Oe)|0,_=_+Math.imul(de,rt)|0,$=$+Math.imul(de,Oe)|0,E=E+Math.imul(J,Te)|0,_=_+Math.imul(J,ye)|0,_=_+Math.imul(Q,Te)|0,$=$+Math.imul(Q,ye)|0,E=E+Math.imul(K,qe)|0,_=_+Math.imul(K,pe)|0,_=_+Math.imul(Z,qe)|0,$=$+Math.imul(Z,pe)|0,E=E+Math.imul(q,He)|0,_=_+Math.imul(q,we)|0,_=_+Math.imul(H,He)|0,$=$+Math.imul(H,we)|0,E=E+Math.imul(R,Fe)|0,_=_+Math.imul(R,me)|0,_=_+Math.imul(W,Fe)|0,$=$+Math.imul(W,me)|0;var xn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(xn>>>26)|0,xn&=67108863,E=Math.imul(ue,Me),_=Math.imul(ue,Pe),_=_+Math.imul(re,Me)|0,$=Math.imul(re,Pe),E=E+Math.imul(he,Je)|0,_=_+Math.imul(he,Ie)|0,_=_+Math.imul(se,Je)|0,$=$+Math.imul(se,Ie)|0,E=E+Math.imul(ge,rt)|0,_=_+Math.imul(ge,Oe)|0,_=_+Math.imul(ne,rt)|0,$=$+Math.imul(ne,Oe)|0,E=E+Math.imul(Se,Te)|0,_=_+Math.imul(Se,ye)|0,_=_+Math.imul(de,Te)|0,$=$+Math.imul(de,ye)|0,E=E+Math.imul(J,qe)|0,_=_+Math.imul(J,pe)|0,_=_+Math.imul(Q,qe)|0,$=$+Math.imul(Q,pe)|0,E=E+Math.imul(K,He)|0,_=_+Math.imul(K,we)|0,_=_+Math.imul(Z,He)|0,$=$+Math.imul(Z,we)|0,E=E+Math.imul(q,Fe)|0,_=_+Math.imul(q,me)|0,_=_+Math.imul(H,Fe)|0,$=$+Math.imul(H,me)|0,E=E+Math.imul(R,Ne)|0,_=_+Math.imul(R,De)|0,_=_+Math.imul(W,Ne)|0,$=$+Math.imul(W,De)|0;var wn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(wn>>>26)|0,wn&=67108863,E=Math.imul(_e,Me),_=Math.imul(_e,Pe),_=_+Math.imul(ie,Me)|0,$=Math.imul(ie,Pe),E=E+Math.imul(ue,Je)|0,_=_+Math.imul(ue,Ie)|0,_=_+Math.imul(re,Je)|0,$=$+Math.imul(re,Ie)|0,E=E+Math.imul(he,rt)|0,_=_+Math.imul(he,Oe)|0,_=_+Math.imul(se,rt)|0,$=$+Math.imul(se,Oe)|0,E=E+Math.imul(ge,Te)|0,_=_+Math.imul(ge,ye)|0,_=_+Math.imul(ne,Te)|0,$=$+Math.imul(ne,ye)|0,E=E+Math.imul(Se,qe)|0,_=_+Math.imul(Se,pe)|0,_=_+Math.imul(de,qe)|0,$=$+Math.imul(de,pe)|0,E=E+Math.imul(J,He)|0,_=_+Math.imul(J,we)|0,_=_+Math.imul(Q,He)|0,$=$+Math.imul(Q,we)|0,E=E+Math.imul(K,Fe)|0,_=_+Math.imul(K,me)|0,_=_+Math.imul(Z,Fe)|0,$=$+Math.imul(Z,me)|0,E=E+Math.imul(q,Ne)|0,_=_+Math.imul(q,De)|0,_=_+Math.imul(H,Ne)|0,$=$+Math.imul(H,De)|0,E=E+Math.imul(R,at)|0,_=_+Math.imul(R,Ke)|0,_=_+Math.imul(W,at)|0,$=$+Math.imul(W,Ke)|0;var _n=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(_n>>>26)|0,_n&=67108863,E=Math.imul(Ee,Me),_=Math.imul(Ee,Pe),_=_+Math.imul(ce,Me)|0,$=Math.imul(ce,Pe),E=E+Math.imul(_e,Je)|0,_=_+Math.imul(_e,Ie)|0,_=_+Math.imul(ie,Je)|0,$=$+Math.imul(ie,Ie)|0,E=E+Math.imul(ue,rt)|0,_=_+Math.imul(ue,Oe)|0,_=_+Math.imul(re,rt)|0,$=$+Math.imul(re,Oe)|0,E=E+Math.imul(he,Te)|0,_=_+Math.imul(he,ye)|0,_=_+Math.imul(se,Te)|0,$=$+Math.imul(se,ye)|0,E=E+Math.imul(ge,qe)|0,_=_+Math.imul(ge,pe)|0,_=_+Math.imul(ne,qe)|0,$=$+Math.imul(ne,pe)|0,E=E+Math.imul(Se,He)|0,_=_+Math.imul(Se,we)|0,_=_+Math.imul(de,He)|0,$=$+Math.imul(de,we)|0,E=E+Math.imul(J,Fe)|0,_=_+Math.imul(J,me)|0,_=_+Math.imul(Q,Fe)|0,$=$+Math.imul(Q,me)|0,E=E+Math.imul(K,Ne)|0,_=_+Math.imul(K,De)|0,_=_+Math.imul(Z,Ne)|0,$=$+Math.imul(Z,De)|0,E=E+Math.imul(q,at)|0,_=_+Math.imul(q,Ke)|0,_=_+Math.imul(H,at)|0,$=$+Math.imul(H,Ke)|0,E=E+Math.imul(R,et)|0,_=_+Math.imul(R,st)|0,_=_+Math.imul(W,et)|0,$=$+Math.imul(W,st)|0;var En=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(En>>>26)|0,En&=67108863,E=Math.imul(Ee,Je),_=Math.imul(Ee,Ie),_=_+Math.imul(ce,Je)|0,$=Math.imul(ce,Ie),E=E+Math.imul(_e,rt)|0,_=_+Math.imul(_e,Oe)|0,_=_+Math.imul(ie,rt)|0,$=$+Math.imul(ie,Oe)|0,E=E+Math.imul(ue,Te)|0,_=_+Math.imul(ue,ye)|0,_=_+Math.imul(re,Te)|0,$=$+Math.imul(re,ye)|0,E=E+Math.imul(he,qe)|0,_=_+Math.imul(he,pe)|0,_=_+Math.imul(se,qe)|0,$=$+Math.imul(se,pe)|0,E=E+Math.imul(ge,He)|0,_=_+Math.imul(ge,we)|0,_=_+Math.imul(ne,He)|0,$=$+Math.imul(ne,we)|0,E=E+Math.imul(Se,Fe)|0,_=_+Math.imul(Se,me)|0,_=_+Math.imul(de,Fe)|0,$=$+Math.imul(de,me)|0,E=E+Math.imul(J,Ne)|0,_=_+Math.imul(J,De)|0,_=_+Math.imul(Q,Ne)|0,$=$+Math.imul(Q,De)|0,E=E+Math.imul(K,at)|0,_=_+Math.imul(K,Ke)|0,_=_+Math.imul(Z,at)|0,$=$+Math.imul(Z,Ke)|0,E=E+Math.imul(q,et)|0,_=_+Math.imul(q,st)|0,_=_+Math.imul(H,et)|0,$=$+Math.imul(H,st)|0;var Er=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Er>>>26)|0,Er&=67108863,E=Math.imul(Ee,rt),_=Math.imul(Ee,Oe),_=_+Math.imul(ce,rt)|0,$=Math.imul(ce,Oe),E=E+Math.imul(_e,Te)|0,_=_+Math.imul(_e,ye)|0,_=_+Math.imul(ie,Te)|0,$=$+Math.imul(ie,ye)|0,E=E+Math.imul(ue,qe)|0,_=_+Math.imul(ue,pe)|0,_=_+Math.imul(re,qe)|0,$=$+Math.imul(re,pe)|0,E=E+Math.imul(he,He)|0,_=_+Math.imul(he,we)|0,_=_+Math.imul(se,He)|0,$=$+Math.imul(se,we)|0,E=E+Math.imul(ge,Fe)|0,_=_+Math.imul(ge,me)|0,_=_+Math.imul(ne,Fe)|0,$=$+Math.imul(ne,me)|0,E=E+Math.imul(Se,Ne)|0,_=_+Math.imul(Se,De)|0,_=_+Math.imul(de,Ne)|0,$=$+Math.imul(de,De)|0,E=E+Math.imul(J,at)|0,_=_+Math.imul(J,Ke)|0,_=_+Math.imul(Q,at)|0,$=$+Math.imul(Q,Ke)|0,E=E+Math.imul(K,et)|0,_=_+Math.imul(K,st)|0,_=_+Math.imul(Z,et)|0,$=$+Math.imul(Z,st)|0;var An=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(An>>>26)|0,An&=67108863,E=Math.imul(Ee,Te),_=Math.imul(Ee,ye),_=_+Math.imul(ce,Te)|0,$=Math.imul(ce,ye),E=E+Math.imul(_e,qe)|0,_=_+Math.imul(_e,pe)|0,_=_+Math.imul(ie,qe)|0,$=$+Math.imul(ie,pe)|0,E=E+Math.imul(ue,He)|0,_=_+Math.imul(ue,we)|0,_=_+Math.imul(re,He)|0,$=$+Math.imul(re,we)|0,E=E+Math.imul(he,Fe)|0,_=_+Math.imul(he,me)|0,_=_+Math.imul(se,Fe)|0,$=$+Math.imul(se,me)|0,E=E+Math.imul(ge,Ne)|0,_=_+Math.imul(ge,De)|0,_=_+Math.imul(ne,Ne)|0,$=$+Math.imul(ne,De)|0,E=E+Math.imul(Se,at)|0,_=_+Math.imul(Se,Ke)|0,_=_+Math.imul(de,at)|0,$=$+Math.imul(de,Ke)|0,E=E+Math.imul(J,et)|0,_=_+Math.imul(J,st)|0,_=_+Math.imul(Q,et)|0,$=$+Math.imul(Q,st)|0;var Sn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,E=Math.imul(Ee,qe),_=Math.imul(Ee,pe),_=_+Math.imul(ce,qe)|0,$=Math.imul(ce,pe),E=E+Math.imul(_e,He)|0,_=_+Math.imul(_e,we)|0,_=_+Math.imul(ie,He)|0,$=$+Math.imul(ie,we)|0,E=E+Math.imul(ue,Fe)|0,_=_+Math.imul(ue,me)|0,_=_+Math.imul(re,Fe)|0,$=$+Math.imul(re,me)|0,E=E+Math.imul(he,Ne)|0,_=_+Math.imul(he,De)|0,_=_+Math.imul(se,Ne)|0,$=$+Math.imul(se,De)|0,E=E+Math.imul(ge,at)|0,_=_+Math.imul(ge,Ke)|0,_=_+Math.imul(ne,at)|0,$=$+Math.imul(ne,Ke)|0,E=E+Math.imul(Se,et)|0,_=_+Math.imul(Se,st)|0,_=_+Math.imul(de,et)|0,$=$+Math.imul(de,st)|0;var Zt=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,E=Math.imul(Ee,He),_=Math.imul(Ee,we),_=_+Math.imul(ce,He)|0,$=Math.imul(ce,we),E=E+Math.imul(_e,Fe)|0,_=_+Math.imul(_e,me)|0,_=_+Math.imul(ie,Fe)|0,$=$+Math.imul(ie,me)|0,E=E+Math.imul(ue,Ne)|0,_=_+Math.imul(ue,De)|0,_=_+Math.imul(re,Ne)|0,$=$+Math.imul(re,De)|0,E=E+Math.imul(he,at)|0,_=_+Math.imul(he,Ke)|0,_=_+Math.imul(se,at)|0,$=$+Math.imul(se,Ke)|0,E=E+Math.imul(ge,et)|0,_=_+Math.imul(ge,st)|0,_=_+Math.imul(ne,et)|0,$=$+Math.imul(ne,st)|0;var Dn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,E=Math.imul(Ee,Fe),_=Math.imul(Ee,me),_=_+Math.imul(ce,Fe)|0,$=Math.imul(ce,me),E=E+Math.imul(_e,Ne)|0,_=_+Math.imul(_e,De)|0,_=_+Math.imul(ie,Ne)|0,$=$+Math.imul(ie,De)|0,E=E+Math.imul(ue,at)|0,_=_+Math.imul(ue,Ke)|0,_=_+Math.imul(re,at)|0,$=$+Math.imul(re,Ke)|0,E=E+Math.imul(he,et)|0,_=_+Math.imul(he,st)|0,_=_+Math.imul(se,et)|0,$=$+Math.imul(se,st)|0;var Mn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,E=Math.imul(Ee,Ne),_=Math.imul(Ee,De),_=_+Math.imul(ce,Ne)|0,$=Math.imul(ce,De),E=E+Math.imul(_e,at)|0,_=_+Math.imul(_e,Ke)|0,_=_+Math.imul(ie,at)|0,$=$+Math.imul(ie,Ke)|0,E=E+Math.imul(ue,et)|0,_=_+Math.imul(ue,st)|0,_=_+Math.imul(re,et)|0,$=$+Math.imul(re,st)|0;var Cn=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,E=Math.imul(Ee,at),_=Math.imul(Ee,Ke),_=_+Math.imul(ce,at)|0,$=Math.imul(ce,Ke),E=E+Math.imul(_e,et)|0,_=_+Math.imul(_e,st)|0,_=_+Math.imul(ie,et)|0,$=$+Math.imul(ie,st)|0;var Xs=(y+E|0)+((_&8191)<<13)|0;y=($+(_>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,E=Math.imul(Ee,et),_=Math.imul(Ee,st),_=_+Math.imul(ce,et)|0,$=Math.imul(ce,st);var Ys=(y+E|0)+((_&8191)<<13)|0;return y=($+(_>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,C[0]=nr,C[1]=ir,C[2]=sr,C[3]=ar,C[4]=At,C[5]=mn,C[6]=xn,C[7]=wn,C[8]=_n,C[9]=En,C[10]=Er,C[11]=An,C[12]=Sn,C[13]=Zt,C[14]=Dn,C[15]=Mn,C[16]=Cn,C[17]=Xs,C[18]=Ys,y!==0&&(C[19]=y,w.length++),w};Math.imul||(A=O);function F(b,u,l){l.negative=u.negative^b.negative,l.length=b.length+u.length;for(var w=0,I=0,B=0;B<l.length-1;B++){var C=I;I=0;for(var y=w&67108863,E=Math.min(B,u.length-1),_=Math.max(0,B-b.length+1);_<=E;_++){var $=B-_,V=b.words[$]|0,R=u.words[_]|0,W=V*R,z=W&67108863;C=C+(W/67108864|0)|0,z=z+y|0,y=z&67108863,C=C+(z>>>26)|0,I+=C>>>26,C&=67108863}l.words[B]=y,w=C,C=I}return w!==0?l.words[B]=w:l.length--,l._strip()}function P(b,u,l){return F(b,u,l)}s.prototype.mulTo=function(u,l){var w,I=this.length+u.length;return this.length===10&&u.length===10?w=A(this,u,l):I<63?w=O(this,u,l):I<1024?w=F(this,u,l):w=P(this,u,l),w},s.prototype.mul=function(u){var l=new s(null);return l.words=new Array(this.length+u.length),this.mulTo(u,l)},s.prototype.mulf=function(u){var l=new s(null);return l.words=new Array(this.length+u.length),P(this,u,l)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var l=u<0;l&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var w=0,I=0;I<this.length;I++){var B=(this.words[I]|0)*u,C=(B&67108863)+(w&67108863);w>>=26,w+=B/67108864|0,w+=C>>>26,this.words[I]=C&67108863}return w!==0&&(this.words[I]=w,this.length++),l?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var l=S(u);if(l.length===0)return new s(1);for(var w=this,I=0;I<l.length&&l[I]===0;I++,w=w.sqr());if(++I<l.length)for(var B=w.sqr();I<l.length;I++,B=B.sqr())l[I]!==0&&(w=w.mul(B));return w},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var l=u%26,w=(u-l)/26,I=67108863>>>26-l<<26-l,B;if(l!==0){var C=0;for(B=0;B<this.length;B++){var y=this.words[B]&I,E=(this.words[B]|0)-y<<l;this.words[B]=E|C,C=y>>>26-l}C&&(this.words[B]=C,this.length++)}if(w!==0){for(B=this.length-1;B>=0;B--)this.words[B+w]=this.words[B];for(B=0;B<w;B++)this.words[B]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,l,w){n(typeof u=="number"&&u>=0);var I;l?I=(l-l%26)/26:I=0;var B=u%26,C=Math.min((u-B)/26,this.length),y=67108863^67108863>>>B<<B,E=w;if(I-=C,I=Math.max(0,I),E){for(var _=0;_<C;_++)E.words[_]=this.words[_];E.length=C}if(C!==0)if(this.length>C)for(this.length-=C,_=0;_<this.length;_++)this.words[_]=this.words[_+C];else this.words[0]=0,this.length=1;var $=0;for(_=this.length-1;_>=0&&($!==0||_>=I);_--){var V=this.words[_]|0;this.words[_]=$<<26-B|V>>>B,$=V&y}return E&&$!==0&&(E.words[E.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,l,w){return n(this.negative===0),this.iushrn(u,l,w)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var l=u%26,w=(u-l)/26,I=1<<l;if(this.length<=w)return!1;var B=this.words[w];return!!(B&I)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var l=u%26,w=(u-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(l!==0&&w++,this.length=Math.min(w,this.length),l!==0){var I=67108863^67108863>>>l<<l;this.words[this.length-1]&=I}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,l,w){var I=u.length+w,B;this._expand(I);var C,y=0;for(B=0;B<u.length;B++){C=(this.words[B+w]|0)+y;var E=(u.words[B]|0)*l;C-=E&67108863,y=(C>>26)-(E/67108864|0),this.words[B+w]=C&67108863}for(;B<this.length-w;B++)C=(this.words[B+w]|0)+y,y=C>>26,this.words[B+w]=C&67108863;if(y===0)return this._strip();for(n(y===-1),y=0,B=0;B<this.length;B++)C=-(this.words[B]|0)+y,y=C>>26,this.words[B]=C&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,l){var w=this.length-u.length,I=this.clone(),B=u,C=B.words[B.length-1]|0,y=this._countBits(C);w=26-y,w!==0&&(B=B.ushln(w),I.iushln(w),C=B.words[B.length-1]|0);var E=I.length-B.length,_;if(l!=="mod"){_=new s(null),_.length=E+1,_.words=new Array(_.length);for(var $=0;$<_.length;$++)_.words[$]=0}var V=I.clone()._ishlnsubmul(B,1,E);V.negative===0&&(I=V,_&&(_.words[E]=1));for(var R=E-1;R>=0;R--){var W=(I.words[B.length+R]|0)*67108864+(I.words[B.length+R-1]|0);for(W=Math.min(W/C|0,67108863),I._ishlnsubmul(B,W,R);I.negative!==0;)W--,I.negative=0,I._ishlnsubmul(B,1,R),I.isZero()||(I.negative^=1);_&&(_.words[R]=W)}return _&&_._strip(),I._strip(),l!=="div"&&w!==0&&I.iushrn(w),{div:_||null,mod:I}},s.prototype.divmod=function(u,l,w){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var I,B,C;return this.negative!==0&&u.negative===0?(C=this.neg().divmod(u,l),l!=="mod"&&(I=C.div.neg()),l!=="div"&&(B=C.mod.neg(),w&&B.negative!==0&&B.iadd(u)),{div:I,mod:B}):this.negative===0&&u.negative!==0?(C=this.divmod(u.neg(),l),l!=="mod"&&(I=C.div.neg()),{div:I,mod:C.mod}):this.negative&u.negative?(C=this.neg().divmod(u.neg(),l),l!=="div"&&(B=C.mod.neg(),w&&B.negative!==0&&B.isub(u)),{div:C.div,mod:B}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?l==="div"?{div:this.divn(u.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,l)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var l=this.divmod(u);if(l.mod.isZero())return l.div;var w=l.div.negative!==0?l.mod.isub(u):l.mod,I=u.ushrn(1),B=u.andln(1),C=w.cmp(I);return C<0||B===1&&C===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(u){var l=u<0;l&&(u=-u),n(u<=67108863);for(var w=(1<<26)%u,I=0,B=this.length-1;B>=0;B--)I=(w*I+(this.words[B]|0))%u;return l?-I:I},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var l=u<0;l&&(u=-u),n(u<=67108863);for(var w=0,I=this.length-1;I>=0;I--){var B=(this.words[I]|0)+w*67108864;this.words[I]=B/u|0,w=B%u}return this._strip(),l?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var l=this,w=u.clone();l.negative!==0?l=l.umod(u):l=l.clone();for(var I=new s(1),B=new s(0),C=new s(0),y=new s(1),E=0;l.isEven()&&w.isEven();)l.iushrn(1),w.iushrn(1),++E;for(var _=w.clone(),$=l.clone();!l.isZero();){for(var V=0,R=1;!(l.words[0]&R)&&V<26;++V,R<<=1);if(V>0)for(l.iushrn(V);V-- >0;)(I.isOdd()||B.isOdd())&&(I.iadd(_),B.isub($)),I.iushrn(1),B.iushrn(1);for(var W=0,z=1;!(w.words[0]&z)&&W<26;++W,z<<=1);if(W>0)for(w.iushrn(W);W-- >0;)(C.isOdd()||y.isOdd())&&(C.iadd(_),y.isub($)),C.iushrn(1),y.iushrn(1);l.cmp(w)>=0?(l.isub(w),I.isub(C),B.isub(y)):(w.isub(l),C.isub(I),y.isub(B))}return{a:C,b:y,gcd:w.iushln(E)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var l=this,w=u.clone();l.negative!==0?l=l.umod(u):l=l.clone();for(var I=new s(1),B=new s(0),C=w.clone();l.cmpn(1)>0&&w.cmpn(1)>0;){for(var y=0,E=1;!(l.words[0]&E)&&y<26;++y,E<<=1);if(y>0)for(l.iushrn(y);y-- >0;)I.isOdd()&&I.iadd(C),I.iushrn(1);for(var _=0,$=1;!(w.words[0]&$)&&_<26;++_,$<<=1);if(_>0)for(w.iushrn(_);_-- >0;)B.isOdd()&&B.iadd(C),B.iushrn(1);l.cmp(w)>=0?(l.isub(w),I.isub(B)):(w.isub(l),B.isub(I))}var V;return l.cmpn(1)===0?V=I:V=B,V.cmpn(0)<0&&V.iadd(u),V},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var l=this.clone(),w=u.clone();l.negative=0,w.negative=0;for(var I=0;l.isEven()&&w.isEven();I++)l.iushrn(1),w.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;w.isEven();)w.iushrn(1);var B=l.cmp(w);if(B<0){var C=l;l=w,w=C}else if(B===0||w.cmpn(1)===0)break;l.isub(w)}while(!0);return w.iushln(I)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var l=u%26,w=(u-l)/26,I=1<<l;if(this.length<=w)return this._expand(w+1),this.words[w]|=I,this;for(var B=I,C=w;B!==0&&C<this.length;C++){var y=this.words[C]|0;y+=B,B=y>>>26,y&=67108863,this.words[C]=y}return B!==0&&(this.words[C]=B,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var l=u<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var w;if(this.length>1)w=1;else{l&&(u=-u),n(u<=67108863,"Number is too big");var I=this.words[0]|0;w=I===u?0:I<u?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var l=this.ucmp(u);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var l=0,w=this.length-1;w>=0;w--){var I=this.words[w]|0,B=u.words[w]|0;if(I!==B){I<B?l=-1:I>B&&(l=1);break}}return l},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new N(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var k={k256:null,p224:null,p192:null,p25519:null};function L(b,u){this.name=b,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},L.prototype.ireduce=function(u){var l=u,w;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),w=l.bitLength();while(w>this.n);var I=w<this.n?-1:l.ucmp(this.p);return I===0?(l.words[0]=0,l.length=1):I>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},L.prototype.split=function(u,l){u.iushrn(this.n,0,l)},L.prototype.imulK=function(u){return u.imul(this.k)};function m(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(m,L),m.prototype.split=function(u,l){for(var w=4194303,I=Math.min(u.length,9),B=0;B<I;B++)l.words[B]=u.words[B];if(l.length=I,u.length<=9){u.words[0]=0,u.length=1;return}var C=u.words[9];for(l.words[l.length++]=C&w,B=10;B<u.length;B++){var y=u.words[B]|0;u.words[B-10]=(y&w)<<4|C>>>22,C=y}C>>>=22,u.words[B-10]=C,C===0&&u.length>10?u.length-=10:u.length-=9},m.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var l=0,w=0;w<u.length;w++){var I=u.words[w]|0;l+=I*977,u.words[w]=l&67108863,l=I*64+(l/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function T(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(T,L);function j(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(j,L);function U(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,L),U.prototype.imulK=function(u){for(var l=0,w=0;w<u.length;w++){var I=(u.words[w]|0)*19+l,B=I&67108863;I>>>=26,u.words[w]=B,l=I}return l!==0&&(u.words[u.length++]=l),u},s._prime=function(u){if(k[u])return k[u];var l;if(u==="k256")l=new m;else if(u==="p224")l=new T;else if(u==="p192")l=new j;else if(u==="p25519")l=new U;else throw new Error("Unknown prime "+u);return k[u]=l,l};function N(b){if(typeof b=="string"){var u=s._prime(b);this.m=u.p,this.prime=u}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}N.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},N.prototype._verify2=function(u,l){n((u.negative|l.negative)===0,"red works only with positives"),n(u.red&&u.red===l.red,"red works only with red numbers")},N.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(h(u,u.umod(this.m)._forceRed(this)),u)},N.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},N.prototype.add=function(u,l){this._verify2(u,l);var w=u.add(l);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},N.prototype.iadd=function(u,l){this._verify2(u,l);var w=u.iadd(l);return w.cmp(this.m)>=0&&w.isub(this.m),w},N.prototype.sub=function(u,l){this._verify2(u,l);var w=u.sub(l);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},N.prototype.isub=function(u,l){this._verify2(u,l);var w=u.isub(l);return w.cmpn(0)<0&&w.iadd(this.m),w},N.prototype.shl=function(u,l){return this._verify1(u),this.imod(u.ushln(l))},N.prototype.imul=function(u,l){return this._verify2(u,l),this.imod(u.imul(l))},N.prototype.mul=function(u,l){return this._verify2(u,l),this.imod(u.mul(l))},N.prototype.isqr=function(u){return this.imul(u,u.clone())},N.prototype.sqr=function(u){return this.mul(u,u)},N.prototype.sqrt=function(u){if(u.isZero())return u.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(u,w)}for(var I=this.m.subn(1),B=0;!I.isZero()&&I.andln(1)===0;)B++,I.iushrn(1);n(!I.isZero());var C=new s(1).toRed(this),y=C.redNeg(),E=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,E).cmp(y)!==0;)_.redIAdd(y);for(var $=this.pow(_,I),V=this.pow(u,I.addn(1).iushrn(1)),R=this.pow(u,I),W=B;R.cmp(C)!==0;){for(var z=R,q=0;z.cmp(C)!==0;q++)z=z.redSqr();n(q<W);var H=this.pow($,new s(1).iushln(W-q-1));V=V.redMul(H),$=H.redSqr(),R=R.redMul($),W=q}return V},N.prototype.invm=function(u){var l=u._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},N.prototype.pow=function(u,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return u.clone();var w=4,I=new Array(1<<w);I[0]=new s(1).toRed(this),I[1]=u;for(var B=2;B<I.length;B++)I[B]=this.mul(I[B-1],u);var C=I[0],y=0,E=0,_=l.bitLength()%26;for(_===0&&(_=26),B=l.length-1;B>=0;B--){for(var $=l.words[B],V=_-1;V>=0;V--){var R=$>>V&1;if(C!==I[0]&&(C=this.sqr(C)),R===0&&y===0){E=0;continue}y<<=1,y|=R,E++,!(E!==w&&(B!==0||V!==0))&&(C=this.mul(C,I[y]),E=0,y=0)}_=26}return C},N.prototype.convertTo=function(u){var l=u.umod(this.m);return l===u?l.clone():l},N.prototype.convertFrom=function(u){var l=u.clone();return l.red=null,l},s.mont=function(u){return new g(u)};function g(b){N.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(g,N),g.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},g.prototype.convertFrom=function(u){var l=this.imod(u.mul(this.rinv));return l.red=null,l},g.prototype.imul=function(u,l){if(u.isZero()||l.isZero())return u.words[0]=0,u.length=1,u;var w=u.imul(l),I=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=w.isub(I).iushrn(this.shift),C=B;return B.cmp(this.m)>=0?C=B.isub(this.m):B.cmpn(0)<0&&(C=B.iadd(this.m)),C._forceRed(this)},g.prototype.mul=function(u,l){if(u.isZero()||l.isZero())return new s(0)._forceRed(this);var w=u.mul(l),I=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=w.isub(I).iushrn(this.shift),C=B;return B.cmp(this.m)>=0?C=B.isub(this.m):B.cmpn(0)<0&&(C=B.iadd(this.m)),C._forceRed(this)},g.prototype.invm=function(u){var l=this.imod(u._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,Le)})(Rh);var J_=Rh.exports;const We=Xi(J_);var Q_=We.BN;function e7(t){return new Q_(t,36).toString(16)}const t7="strings/5.7.0",r7=new bt(t7);var a0;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(a0||(a0={}));var zl;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(zl||(zl={}));function jc(t,e=a0.current){e!=a0.current&&(r7.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return St(r)}const n7=`Ethereum Signed Message:
`;function Cv(t){return typeof t=="string"&&(t=jc(t)),Fh(Z_([jc(n7),jc(String(t.length)),t]))}const i7="address/5.7.0",ba=new bt(i7);function Ul(t){on(t,20)||ba.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=St(Fh(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const s7=9007199254740991;function a7(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Oh={};for(let t=0;t<10;t++)Oh[String(t)]=String(t);for(let t=0;t<26;t++)Oh[String.fromCharCode(65+t)]=String(10+t);const jl=Math.floor(a7(s7));function o7(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Oh[n]).join("");for(;e.length>=jl;){let n=e.substring(0,jl);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function c7(t){let e=null;if(typeof t!="string"&&ba.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Ul(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&ba.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==o7(t)&&ba.throwArgumentError("bad icap checksum","address",t),e=e7(t.substring(4));e.length<40;)e="0"+e;e=Ul("0x"+e)}else ba.throwArgumentError("invalid address","address",t);return e}function sa(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var co={},nt={},es=Iv;function Iv(t,e){if(!t)throw new Error(e||"Assertion failed")}Iv.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Cu={exports:{}};typeof Object.create=="function"?Cu.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Cu.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Z0=Cu.exports,f7=es,u7=Z0;nt.inherits=u7;function h7(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function d7(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):h7(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}nt.toArray=d7;function l7(t){for(var e="",r=0;r<t.length;r++)e+=Pv(t[r].toString(16));return e}nt.toHex=l7;function Bv(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}nt.htonl=Bv;function p7(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Bv(i)),r+=Fv(i.toString(16))}return r}nt.toHex32=p7;function Pv(t){return t.length===1?"0"+t:t}nt.zero2=Pv;function Fv(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}nt.zero8=Fv;function b7(t,e,r,n){var i=r-e;f7(i%4===0);for(var s=new Array(i/4),a=0,o=e;a<s.length;a++,o+=4){var f;n==="big"?f=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:f=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],s[a]=f>>>0}return s}nt.join32=b7;function g7(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}nt.split32=g7;function v7(t,e){return t>>>e|t<<32-e}nt.rotr32=v7;function y7(t,e){return t<<e|t>>>32-e}nt.rotl32=y7;function m7(t,e){return t+e>>>0}nt.sum32=m7;function x7(t,e,r){return t+e+r>>>0}nt.sum32_3=x7;function w7(t,e,r,n){return t+e+r+n>>>0}nt.sum32_4=w7;function _7(t,e,r,n,i){return t+e+r+n+i>>>0}nt.sum32_5=_7;function E7(t,e,r,n){var i=t[e],s=t[e+1],a=n+s>>>0,o=(a<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=a}nt.sum64=E7;function A7(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}nt.sum64_hi=A7;function S7(t,e,r,n){var i=e+n;return i>>>0}nt.sum64_lo=S7;function D7(t,e,r,n,i,s,a,o){var f=0,c=e;c=c+n>>>0,f+=c<e?1:0,c=c+s>>>0,f+=c<s?1:0,c=c+o>>>0,f+=c<o?1:0;var h=t+r+i+a+f;return h>>>0}nt.sum64_4_hi=D7;function M7(t,e,r,n,i,s,a,o){var f=e+n+s+o;return f>>>0}nt.sum64_4_lo=M7;function C7(t,e,r,n,i,s,a,o,f,c){var h=0,d=e;d=d+n>>>0,h+=d<e?1:0,d=d+s>>>0,h+=d<s?1:0,d=d+o>>>0,h+=d<o?1:0,d=d+c>>>0,h+=d<c?1:0;var p=t+r+i+a+f+h;return p>>>0}nt.sum64_5_hi=C7;function I7(t,e,r,n,i,s,a,o,f,c){var h=e+n+s+o+c;return h>>>0}nt.sum64_5_lo=I7;function B7(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}nt.rotr64_hi=B7;function P7(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}nt.rotr64_lo=P7;function F7(t,e,r){return t>>>r}nt.shr64_hi=F7;function R7(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}nt.shr64_lo=R7;var Us={},Hl=nt,O7=es;function X0(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Us.BlockHash=X0;X0.prototype.update=function(e,r){if(e=Hl.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Hl.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};X0.prototype.digest=function(e){return this.update(this._pad()),O7(this.pending===null),this._digest(e)};X0.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var js={},vn={},T7=nt,cn=T7.rotr32;function N7(t,e,r,n){if(t===0)return Rv(e,r,n);if(t===1||t===3)return Tv(e,r,n);if(t===2)return Ov(e,r,n)}vn.ft_1=N7;function Rv(t,e,r){return t&e^~t&r}vn.ch32=Rv;function Ov(t,e,r){return t&e^t&r^e&r}vn.maj32=Ov;function Tv(t,e,r){return t^e^r}vn.p32=Tv;function $7(t){return cn(t,2)^cn(t,13)^cn(t,22)}vn.s0_256=$7;function L7(t){return cn(t,6)^cn(t,11)^cn(t,25)}vn.s1_256=L7;function k7(t){return cn(t,7)^cn(t,18)^t>>>3}vn.g0_256=k7;function q7(t){return cn(t,17)^cn(t,19)^t>>>10}vn.g1_256=q7;var Bs=nt,z7=Us,U7=vn,Hc=Bs.rotl32,aa=Bs.sum32,j7=Bs.sum32_5,H7=U7.ft_1,Nv=z7.BlockHash,K7=[1518500249,1859775393,2400959708,3395469782];function ln(){if(!(this instanceof ln))return new ln;Nv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Bs.inherits(ln,Nv);var V7=ln;ln.blockSize=512;ln.outSize=160;ln.hmacStrength=80;ln.padLength=64;ln.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Hc(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],a=this.h[1],o=this.h[2],f=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var h=~~(i/20),d=j7(Hc(s,5),H7(h,a,o,f),c,n[i],K7[h]);c=f,f=o,o=Hc(a,30),a=s,s=d}this.h[0]=aa(this.h[0],s),this.h[1]=aa(this.h[1],a),this.h[2]=aa(this.h[2],o),this.h[3]=aa(this.h[3],f),this.h[4]=aa(this.h[4],c)};ln.prototype._digest=function(e){return e==="hex"?Bs.toHex32(this.h,"big"):Bs.split32(this.h,"big")};var Ps=nt,G7=Us,Hs=vn,W7=es,Lr=Ps.sum32,Z7=Ps.sum32_4,X7=Ps.sum32_5,Y7=Hs.ch32,J7=Hs.maj32,Q7=Hs.s0_256,eE=Hs.s1_256,tE=Hs.g0_256,rE=Hs.g1_256,$v=G7.BlockHash,nE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function pn(){if(!(this instanceof pn))return new pn;$v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=nE,this.W=new Array(64)}Ps.inherits(pn,$v);var Lv=pn;pn.blockSize=512;pn.outSize=256;pn.hmacStrength=192;pn.padLength=64;pn.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Z7(rE(n[i-2]),n[i-7],tE(n[i-15]),n[i-16]);var s=this.h[0],a=this.h[1],o=this.h[2],f=this.h[3],c=this.h[4],h=this.h[5],d=this.h[6],p=this.h[7];for(W7(this.k.length===n.length),i=0;i<n.length;i++){var v=X7(p,eE(c),Y7(c,h,d),this.k[i],n[i]),x=Lr(Q7(s),J7(s,a,o));p=d,d=h,h=c,c=Lr(f,v),f=o,o=a,a=s,s=Lr(v,x)}this.h[0]=Lr(this.h[0],s),this.h[1]=Lr(this.h[1],a),this.h[2]=Lr(this.h[2],o),this.h[3]=Lr(this.h[3],f),this.h[4]=Lr(this.h[4],c),this.h[5]=Lr(this.h[5],h),this.h[6]=Lr(this.h[6],d),this.h[7]=Lr(this.h[7],p)};pn.prototype._digest=function(e){return e==="hex"?Ps.toHex32(this.h,"big"):Ps.split32(this.h,"big")};var Iu=nt,kv=Lv;function Gn(){if(!(this instanceof Gn))return new Gn;kv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Iu.inherits(Gn,kv);var iE=Gn;Gn.blockSize=512;Gn.outSize=224;Gn.hmacStrength=192;Gn.padLength=64;Gn.prototype._digest=function(e){return e==="hex"?Iu.toHex32(this.h.slice(0,7),"big"):Iu.split32(this.h.slice(0,7),"big")};var hr=nt,sE=Us,aE=es,fn=hr.rotr64_hi,un=hr.rotr64_lo,qv=hr.shr64_hi,zv=hr.shr64_lo,ni=hr.sum64,Kc=hr.sum64_hi,Vc=hr.sum64_lo,oE=hr.sum64_4_hi,cE=hr.sum64_4_lo,fE=hr.sum64_5_hi,uE=hr.sum64_5_lo,Uv=sE.BlockHash,hE=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Zr(){if(!(this instanceof Zr))return new Zr;Uv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=hE,this.W=new Array(160)}hr.inherits(Zr,Uv);var jv=Zr;Zr.blockSize=1024;Zr.outSize=512;Zr.hmacStrength=192;Zr.padLength=128;Zr.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=_E(n[i-4],n[i-3]),a=EE(n[i-4],n[i-3]),o=n[i-14],f=n[i-13],c=xE(n[i-30],n[i-29]),h=wE(n[i-30],n[i-29]),d=n[i-32],p=n[i-31];n[i]=oE(s,a,o,f,c,h,d,p),n[i+1]=cE(s,a,o,f,c,h,d,p)}};Zr.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],f=this.h[4],c=this.h[5],h=this.h[6],d=this.h[7],p=this.h[8],v=this.h[9],x=this.h[10],D=this.h[11],S=this.h[12],O=this.h[13],A=this.h[14],F=this.h[15];aE(this.k.length===n.length);for(var P=0;P<n.length;P+=2){var k=A,L=F,m=yE(p,v),T=mE(p,v),j=dE(p,v,x,D,S),U=lE(p,v,x,D,S,O),N=this.k[P],g=this.k[P+1],b=n[P],u=n[P+1],l=fE(k,L,m,T,j,U,N,g,b,u),w=uE(k,L,m,T,j,U,N,g,b,u);k=gE(i,s),L=vE(i,s),m=pE(i,s,a,o,f),T=bE(i,s,a,o,f,c);var I=Kc(k,L,m,T),B=Vc(k,L,m,T);A=S,F=O,S=x,O=D,x=p,D=v,p=Kc(h,d,l,w),v=Vc(d,d,l,w),h=f,d=c,f=a,c=o,a=i,o=s,i=Kc(l,w,I,B),s=Vc(l,w,I,B)}ni(this.h,0,i,s),ni(this.h,2,a,o),ni(this.h,4,f,c),ni(this.h,6,h,d),ni(this.h,8,p,v),ni(this.h,10,x,D),ni(this.h,12,S,O),ni(this.h,14,A,F)};Zr.prototype._digest=function(e){return e==="hex"?hr.toHex32(this.h,"big"):hr.split32(this.h,"big")};function dE(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function lE(t,e,r,n,i,s){var a=e&n^~e&s;return a<0&&(a+=4294967296),a}function pE(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function bE(t,e,r,n,i,s){var a=e&n^e&s^n&s;return a<0&&(a+=4294967296),a}function gE(t,e){var r=fn(t,e,28),n=fn(e,t,2),i=fn(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function vE(t,e){var r=un(t,e,28),n=un(e,t,2),i=un(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function yE(t,e){var r=fn(t,e,14),n=fn(t,e,18),i=fn(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function mE(t,e){var r=un(t,e,14),n=un(t,e,18),i=un(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function xE(t,e){var r=fn(t,e,1),n=fn(t,e,8),i=qv(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function wE(t,e){var r=un(t,e,1),n=un(t,e,8),i=zv(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function _E(t,e){var r=fn(t,e,19),n=fn(e,t,29),i=qv(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function EE(t,e){var r=un(t,e,19),n=un(e,t,29),i=zv(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Bu=nt,Hv=jv;function Wn(){if(!(this instanceof Wn))return new Wn;Hv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Bu.inherits(Wn,Hv);var AE=Wn;Wn.blockSize=1024;Wn.outSize=384;Wn.hmacStrength=192;Wn.padLength=128;Wn.prototype._digest=function(e){return e==="hex"?Bu.toHex32(this.h.slice(0,12),"big"):Bu.split32(this.h.slice(0,12),"big")};js.sha1=V7;js.sha224=iE;js.sha256=Lv;js.sha384=AE;js.sha512=jv;var Kv={},Gi=nt,SE=Us,Fo=Gi.rotl32,Kl=Gi.sum32,oa=Gi.sum32_3,Vl=Gi.sum32_4,Vv=SE.BlockHash;function bn(){if(!(this instanceof bn))return new bn;Vv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Gi.inherits(bn,Vv);Kv.ripemd160=bn;bn.blockSize=512;bn.outSize=160;bn.hmacStrength=192;bn.padLength=64;bn.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],f=n,c=i,h=s,d=a,p=o,v=0;v<80;v++){var x=Kl(Fo(Vl(n,Gl(v,i,s,a),e[CE[v]+r],DE(v)),BE[v]),o);n=o,o=a,a=Fo(s,10),s=i,i=x,x=Kl(Fo(Vl(f,Gl(79-v,c,h,d),e[IE[v]+r],ME(v)),PE[v]),p),f=p,p=d,d=Fo(h,10),h=c,c=x}x=oa(this.h[1],s,d),this.h[1]=oa(this.h[2],a,p),this.h[2]=oa(this.h[3],o,f),this.h[3]=oa(this.h[4],n,c),this.h[4]=oa(this.h[0],i,h),this.h[0]=x};bn.prototype._digest=function(e){return e==="hex"?Gi.toHex32(this.h,"little"):Gi.split32(this.h,"little")};function Gl(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function DE(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function ME(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var CE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],IE=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],BE=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],PE=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],FE=nt,RE=es;function Fs(t,e,r){if(!(this instanceof Fs))return new Fs(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(FE.toArray(e,r))}var OE=Fs;Fs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),RE(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Fs.prototype.update=function(e,r){return this.inner.update(e,r),this};Fs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=nt,e.common=Us,e.sha=js,e.ripemd=Kv,e.hmac=OE,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(co);const On=Xi(co);function Ks(t,e,r){return r={path:e,exports:{},require:function(n,i){return TE(n,i??r.path)}},t(r,r.exports),r.exports}function TE(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Th=Gv;function Gv(t,e){if(!t)throw new Error(e||"Assertion failed")}Gv.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Kr=Ks(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var f=[];if(typeof a!="string"){for(var c=0;c<a.length;c++)f[c]=a[c]|0;return f}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var c=0;c<a.length;c+=2)f.push(parseInt(a[c]+a[c+1],16))}else for(var c=0;c<a.length;c++){var h=a.charCodeAt(c),d=h>>8,p=h&255;d?f.push(d,p):f.push(p)}return f}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",f=0;f<a.length;f++)o+=i(a[f].toString(16));return o}r.toHex=s,r.encode=function(o,f){return f==="hex"?s(o):o}}),wr=Ks(function(t,e){var r=e;r.assert=Th,r.toArray=Kr.toArray,r.zero2=Kr.zero2,r.toHex=Kr.toHex,r.encode=Kr.encode;function n(f,c,h){var d=new Array(Math.max(f.bitLength(),h)+1);d.fill(0);for(var p=1<<c+1,v=f.clone(),x=0;x<d.length;x++){var D,S=v.andln(p-1);v.isOdd()?(S>(p>>1)-1?D=(p>>1)-S:D=S,v.isubn(D)):D=0,d[x]=D,v.iushrn(1)}return d}r.getNAF=n;function i(f,c){var h=[[],[]];f=f.clone(),c=c.clone();for(var d=0,p=0,v;f.cmpn(-d)>0||c.cmpn(-p)>0;){var x=f.andln(3)+d&3,D=c.andln(3)+p&3;x===3&&(x=-1),D===3&&(D=-1);var S;x&1?(v=f.andln(7)+d&7,(v===3||v===5)&&D===2?S=-x:S=x):S=0,h[0].push(S);var O;D&1?(v=c.andln(7)+p&7,(v===3||v===5)&&x===2?O=-D:O=D):O=0,h[1].push(O),2*d===S+1&&(d=1-d),2*p===O+1&&(p=1-p),f.iushrn(1),c.iushrn(1)}return h}r.getJSF=i;function s(f,c,h){var d="_"+c;f.prototype[c]=function(){return this[d]!==void 0?this[d]:this[d]=h.call(this)}}r.cachedProperty=s;function a(f){return typeof f=="string"?r.toArray(f,"hex"):f}r.parseBytes=a;function o(f){return new We(f,"hex","le")}r.intFromLE=o}),o0=wr.getNAF,NE=wr.getJSF,c0=wr.assert;function yi(t,e){this.type=t,this.p=new We(e.p,16),this.red=e.prime?We.red(e.prime):We.mont(this.p),this.zero=new We(0).toRed(this.red),this.one=new We(1).toRed(this.red),this.two=new We(2).toRed(this.red),this.n=e.n&&new We(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ts=yi;yi.prototype.point=function(){throw new Error("Not implemented")};yi.prototype.validate=function(){throw new Error("Not implemented")};yi.prototype._fixedNafMul=function(e,r){c0(e.precomputed);var n=e._getDoubles(),i=o0(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}for(var h=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=s;p>0;p--){for(o=0;o<a.length;o++)f=a[o],f===p?d=d.mixedAdd(n.points[o]):f===-p&&(d=d.mixedAdd(n.points[o].neg()));h=h.add(d)}return h.toP()};yi.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=o0(r,n,this._bitLength),o=this.jpoint(null,null,null),f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0&&c++,o=o.dblp(c),f<0)break;var h=a[f];c0(h!==0),e.type==="affine"?h>0?o=o.mixedAdd(s[h-1>>1]):o=o.mixedAdd(s[-h-1>>1].neg()):h>0?o=o.add(s[h-1>>1]):o=o.add(s[-h-1>>1].neg())}return e.type==="affine"?o.toP():o};yi.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,f=this._wnafT3,c=0,h,d,p;for(h=0;h<i;h++){p=r[h];var v=p._getNAFPoints(e);a[h]=v.wnd,o[h]=v.points}for(h=i-1;h>=1;h-=2){var x=h-1,D=h;if(a[x]!==1||a[D]!==1){f[x]=o0(n[x],a[x],this._bitLength),f[D]=o0(n[D],a[D],this._bitLength),c=Math.max(f[x].length,c),c=Math.max(f[D].length,c);continue}var S=[r[x],null,null,r[D]];r[x].y.cmp(r[D].y)===0?(S[1]=r[x].add(r[D]),S[2]=r[x].toJ().mixedAdd(r[D].neg())):r[x].y.cmp(r[D].y.redNeg())===0?(S[1]=r[x].toJ().mixedAdd(r[D]),S[2]=r[x].add(r[D].neg())):(S[1]=r[x].toJ().mixedAdd(r[D]),S[2]=r[x].toJ().mixedAdd(r[D].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],A=NE(n[x],n[D]);for(c=Math.max(A[0].length,c),f[x]=new Array(c),f[D]=new Array(c),d=0;d<c;d++){var F=A[0][d]|0,P=A[1][d]|0;f[x][d]=O[(F+1)*3+(P+1)],f[D][d]=0,o[x]=S}}var k=this.jpoint(null,null,null),L=this._wnafT4;for(h=c;h>=0;h--){for(var m=0;h>=0;){var T=!0;for(d=0;d<i;d++)L[d]=f[d][h]|0,L[d]!==0&&(T=!1);if(!T)break;m++,h--}if(h>=0&&m++,k=k.dblp(m),h<0)break;for(d=0;d<i;d++){var j=L[d];j!==0&&(j>0?p=o[d][j-1>>1]:j<0&&(p=o[d][-j-1>>1].neg()),p.type==="affine"?k=k.mixedAdd(p):k=k.add(p))}}for(h=0;h<i;h++)o[h]=null;return s?k:k.toP()};function Rr(t,e){this.curve=t,this.type=e,this.precomputed=null}yi.BasePoint=Rr;Rr.prototype.eq=function(){throw new Error("Not implemented")};Rr.prototype.validate=function(){return this.curve.validate(this)};yi.prototype.decodePoint=function(e,r){e=wr.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?c0(e[e.length-1]%2===0):e[0]===7&&c0(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Rr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Rr.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Rr.prototype.encode=function(e,r){return wr.encode(this._encode(r),e)};Rr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Rr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Rr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Rr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Rr.prototype._getBeta=function(){return null};Rr.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Nh=Ks(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),$E=wr.assert;function Or(t){ts.call(this,"short",t),this.a=new We(t.a,16).toRed(this.red),this.b=new We(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Nh(Or,ts);var LE=Or;Or.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new We(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new We(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],$E(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new We(o.a,16),b:new We(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};Or.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:We.mont(e),n=new We(2).toRed(r).redInvm(),i=n.redNeg(),s=new We(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};Or.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new We(1),a=new We(0),o=new We(0),f=new We(1),c,h,d,p,v,x,D,S=0,O,A;n.cmpn(0)!==0;){var F=i.div(n);O=i.sub(F.mul(n)),A=o.sub(F.mul(s));var P=f.sub(F.mul(a));if(!d&&O.cmp(r)<0)c=D.neg(),h=s,d=O.neg(),p=A;else if(d&&++S===2)break;D=O,i=n,n=O,o=s,s=A,f=a,a=P}v=O.neg(),x=A;var k=d.sqr().add(p.sqr()),L=v.sqr().add(x.sqr());return L.cmp(k)>=0&&(v=c,x=h),d.negative&&(d=d.neg(),p=p.neg()),v.negative&&(v=v.neg(),x=x.neg()),[{a:d,b:p},{a:v,b:x}]};Or.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),f=a.mul(i.a),c=s.mul(n.b),h=a.mul(i.b),d=e.sub(o).sub(f),p=c.add(h).neg();return{k1:d,k2:p}};Or.prototype.pointFromX=function(e,r){e=new We(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Or.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Or.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),f=e[a],c=f._getBeta();o.k1.negative&&(o.k1.ineg(),f=f.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[a*2]=f,i[a*2+1]=c,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var h=this._wnafMulAdd(1,i,s,a*2,n),d=0;d<a*2;d++)i[d]=null,s[d]=null;return h};function qt(t,e,r,n){ts.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new We(e,16),this.y=new We(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Nh(qt,ts.BasePoint);Or.prototype.point=function(e,r,n){return new qt(this,e,r,n)};Or.prototype.pointFromJSON=function(e,r){return qt.fromJSON(this,e,r)};qt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};qt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};qt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};qt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};qt.prototype.isInfinity=function(){return this.inf};qt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};qt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};qt.prototype.getX=function(){return this.x.fromRed()};qt.prototype.getY=function(){return this.y.fromRed()};qt.prototype.mul=function(e){return e=new We(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};qt.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};qt.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};qt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};qt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};qt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Vt(t,e,r,n){ts.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new We(0)):(this.x=new We(e,16),this.y=new We(r,16),this.z=new We(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Nh(Vt,ts.BasePoint);Or.prototype.jpoint=function(e,r,n){return new Vt(this,e,r,n)};Vt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Vt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Vt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),f=i.redSub(s),c=a.redSub(o);if(f.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=f.redSqr(),d=h.redMul(f),p=i.redMul(h),v=c.redSqr().redIAdd(d).redISub(p).redISub(p),x=c.redMul(p.redISub(v)).redISub(a.redMul(d)),D=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(v,x,D)};Vt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),f=s.redSub(a);if(o.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),h=c.redMul(o),d=n.redMul(c),p=f.redSqr().redIAdd(h).redISub(d).redISub(d),v=f.redMul(d.redISub(p)).redISub(s.redMul(h)),x=this.z.redMul(o);return this.curve.jpoint(p,v,x)};Vt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,f=this.z,c=f.redSqr().redSqr(),h=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),p=h.redSqr(),v=p.redSqr(),x=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(c)),D=a.redMul(p),S=x.redSqr().redISub(D.redAdd(D)),O=D.redISub(S),A=x.redMul(O);A=A.redIAdd(A).redISub(v);var F=h.redMul(f);r+1<e&&(c=c.redMul(v)),a=S,f=F,h=A}return this.curve.jpoint(a,h.redMul(s),f)};Vt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Vt.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i),c=f.redSqr().redISub(o).redISub(o),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),e=c,r=f.redMul(o.redISub(c)).redISub(h),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),p=this.y.redSqr(),v=p.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(v);x=x.redIAdd(x);var D=d.redAdd(d).redIAdd(d),S=D.redSqr(),O=v.redIAdd(v);O=O.redIAdd(O),O=O.redIAdd(O),e=S.redISub(x).redISub(x),r=D.redMul(x.redISub(e)).redISub(O),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Vt.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=f.redSqr().redISub(o).redISub(o);e=c;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=f.redMul(o.redISub(c)).redISub(h),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),p=this.y.redSqr(),v=this.x.redMul(p),x=this.x.redSub(d).redMul(this.x.redAdd(d));x=x.redAdd(x).redIAdd(x);var D=v.redIAdd(v);D=D.redIAdd(D);var S=D.redAdd(D);e=x.redSqr().redISub(S),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(d);var O=p.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=x.redMul(D.redISub(e)).redISub(O)}return this.curve.jpoint(e,r,n)};Vt.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),f=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var h=c.redMul(o),d=f.redSqr().redISub(h.redAdd(h)),p=h.redISub(d),v=o.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var x=f.redMul(p).redISub(v),D=n.redAdd(n).redMul(i);return this.curve.jpoint(d,x,D)};Vt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var f=o.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var h=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c),d=r.redMul(h);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.x.redMul(f).redISub(d);p=p.redIAdd(p),p=p.redIAdd(p);var v=this.y.redMul(h.redMul(c.redISub(h)).redISub(o.redMul(f)));v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var x=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(p,v,x)};Vt.prototype.mul=function(e,r){return e=new We(e,r),this.curve._wnafMul(this,e)};Vt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Vt.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Vt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Vt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var qo=Ks(function(t,e){var r=e;r.base=ts,r.short=LE,r.mont=null,r.edwards=null}),zo=Ks(function(t,e){var r=e,n=wr.assert;function i(o){o.type==="short"?this.curve=new qo.short(o):o.type==="edwards"?this.curve=new qo.edwards(o):this.curve=new qo.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,f){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var c=new i(f);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:On.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:On.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:On.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:On.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:On.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:On.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:On.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:On.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function pi(t){if(!(this instanceof pi))return new pi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Kr.toArray(t.entropy,t.entropyEnc||"hex"),r=Kr.toArray(t.nonce,t.nonceEnc||"hex"),n=Kr.toArray(t.pers,t.persEnc||"hex");Th(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Wv=pi;pi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};pi.prototype._hmac=function(){return new On.hmac(this.hash,this.K)};pi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};pi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Kr.toArray(e,r),n=Kr.toArray(n,i),Th(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};pi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Kr.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Kr.encode(a,r)};var Pu=wr.assert;function Jt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var $h=Jt;Jt.fromPublic=function(e,r,n){return r instanceof Jt?r:new Jt(e,{pub:r,pubEnc:n})};Jt.fromPrivate=function(e,r,n){return r instanceof Jt?r:new Jt(e,{priv:r,privEnc:n})};Jt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Jt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Jt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Jt.prototype._importPrivate=function(e,r){this.priv=new We(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Jt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Pu(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Pu(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Jt.prototype.derive=function(e){return e.validate()||Pu(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Jt.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Jt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Jt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var kE=wr.assert;function Y0(t,e){if(t instanceof Y0)return t;this._importDER(t,e)||(kE(t.r&&t.s,"Signature without r or s"),this.r=new We(t.r,16),this.s=new We(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var J0=Y0;function qE(){this.place=0}function Gc(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function Wl(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Y0.prototype._importDER=function(e,r){e=wr.toArray(e,r);var n=new qE;if(e[n.place++]!==48)return!1;var i=Gc(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Gc(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=Gc(e,n);if(o===!1||e.length!==o+n.place)return!1;var f=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new We(a),this.s=new We(f),this.recoveryParam=null,!0};function Wc(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Y0.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Wl(r),n=Wl(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Wc(i,r.length),i=i.concat(r),i.push(2),Wc(i,n.length);var s=i.concat(n),a=[48];return Wc(a,s.length),a=a.concat(s),wr.encode(a,e)};var zE=function(){throw new Error("unsupported")},Zv=wr.assert;function Br(t){if(!(this instanceof Br))return new Br(t);typeof t=="string"&&(Zv(Object.prototype.hasOwnProperty.call(zo,t),"Unknown curve "+t),t=zo[t]),t instanceof zo.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var UE=Br;Br.prototype.keyPair=function(e){return new $h(this,e)};Br.prototype.keyFromPrivate=function(e,r){return $h.fromPrivate(this,e,r)};Br.prototype.keyFromPublic=function(e,r){return $h.fromPublic(this,e,r)};Br.prototype.genKeyPair=function(e){e||(e={});for(var r=new Wv({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||zE(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new We(2));;){var s=new We(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Br.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Br.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new We(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),f=new Wv({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new We(1)),h=0;;h++){var d=i.k?i.k(h):new We(f.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(c)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var v=p.getX(),x=v.umod(this.n);if(x.cmpn(0)!==0){var D=d.invm(this.n).mul(x.mul(r.getPrivate()).iadd(e));if(D=D.umod(this.n),D.cmpn(0)!==0){var S=(p.getY().isOdd()?1:0)|(v.cmp(x)!==0?2:0);return i.canonical&&D.cmp(this.nh)>0&&(D=this.n.sub(D),S^=1),new J0({r:x,s:D,recoveryParam:S})}}}}}};Br.prototype.verify=function(e,r,n,i){e=this._truncateToN(new We(e,16)),n=this.keyFromPublic(n,i),r=new J0(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),f=o.mul(e).umod(this.n),c=o.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(f,n.getPublic(),c),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(f,n.getPublic(),c),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};Br.prototype.recoverPubKey=function(t,e,r,n){Zv((3&r)===r,"The recovery param is more than two bits"),e=new J0(e,n);var i=this.n,s=new We(t),a=e.r,o=e.s,f=r&1,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),f):a=this.curve.pointFromX(a,f);var h=e.r.invm(i),d=i.sub(s).mul(h).umod(i),p=o.mul(h).umod(i);return this.g.mulAdd(d,a,p)};Br.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new J0(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var jE=Ks(function(t,e){var r=e;r.version="6.5.4",r.utils=wr,r.rand=function(){throw new Error("unsupported")},r.curve=qo,r.curves=zo,r.ec=UE,r.eddsa=null}),HE=jE.ec;const KE="signing-key/5.7.0",Fu=new bt(KE);let Zc=null;function ii(){return Zc||(Zc=new HE("secp256k1")),Zc}class VE{constructor(e){sa(this,"curve","secp256k1"),sa(this,"privateKey",vr(e)),Y_(this.privateKey)!==32&&Fu.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=ii().keyFromPrivate(St(this.privateKey));sa(this,"publicKey","0x"+r.getPublic(!1,"hex")),sa(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),sa(this,"_isSigningKey",!0)}_addPoint(e){const r=ii().keyFromPublic(St(this.publicKey)),n=ii().keyFromPublic(St(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=ii().keyFromPrivate(St(this.privateKey)),n=St(e);n.length!==32&&Fu.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Mv({recoveryParam:i.recoveryParam,r:xs("0x"+i.r.toString(16),32),s:xs("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=ii().keyFromPrivate(St(this.privateKey)),n=ii().keyFromPublic(St(Xv(e)));return xs("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function GE(t,e){const r=Mv(e),n={r:St(r.r),s:St(r.s)};return"0x"+ii().recoverPubKey(St(t),n,r.recoveryParam).encode("hex",!1)}function Xv(t,e){const r=St(t);return r.length===32?new VE(r).publicKey:r.length===33?"0x"+ii().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?vr(r):Fu.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Zl;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Zl||(Zl={}));function WE(t){const e=Xv(t);return c7(ql(Fh(ql(e,1)),12))}function ZE(t,e){return WE(GE(St(t),e))}var Lh={},Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});var Yt=Ze,Ru=xr,XE=20;function YE(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,a=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],f=r[7]<<24|r[6]<<16|r[5]<<8|r[4],c=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],x=r[31]<<24|r[30]<<16|r[29]<<8|r[28],D=e[3]<<24|e[2]<<16|e[1]<<8|e[0],S=e[7]<<24|e[6]<<16|e[5]<<8|e[4],O=e[11]<<24|e[10]<<16|e[9]<<8|e[8],A=e[15]<<24|e[14]<<16|e[13]<<8|e[12],F=n,P=i,k=s,L=a,m=o,T=f,j=c,U=h,N=d,g=p,b=v,u=x,l=D,w=S,I=O,B=A,C=0;C<XE;C+=2)F=F+m|0,l^=F,l=l>>>16|l<<16,N=N+l|0,m^=N,m=m>>>20|m<<12,P=P+T|0,w^=P,w=w>>>16|w<<16,g=g+w|0,T^=g,T=T>>>20|T<<12,k=k+j|0,I^=k,I=I>>>16|I<<16,b=b+I|0,j^=b,j=j>>>20|j<<12,L=L+U|0,B^=L,B=B>>>16|B<<16,u=u+B|0,U^=u,U=U>>>20|U<<12,k=k+j|0,I^=k,I=I>>>24|I<<8,b=b+I|0,j^=b,j=j>>>25|j<<7,L=L+U|0,B^=L,B=B>>>24|B<<8,u=u+B|0,U^=u,U=U>>>25|U<<7,P=P+T|0,w^=P,w=w>>>24|w<<8,g=g+w|0,T^=g,T=T>>>25|T<<7,F=F+m|0,l^=F,l=l>>>24|l<<8,N=N+l|0,m^=N,m=m>>>25|m<<7,F=F+T|0,B^=F,B=B>>>16|B<<16,b=b+B|0,T^=b,T=T>>>20|T<<12,P=P+j|0,l^=P,l=l>>>16|l<<16,u=u+l|0,j^=u,j=j>>>20|j<<12,k=k+U|0,w^=k,w=w>>>16|w<<16,N=N+w|0,U^=N,U=U>>>20|U<<12,L=L+m|0,I^=L,I=I>>>16|I<<16,g=g+I|0,m^=g,m=m>>>20|m<<12,k=k+U|0,w^=k,w=w>>>24|w<<8,N=N+w|0,U^=N,U=U>>>25|U<<7,L=L+m|0,I^=L,I=I>>>24|I<<8,g=g+I|0,m^=g,m=m>>>25|m<<7,P=P+j|0,l^=P,l=l>>>24|l<<8,u=u+l|0,j^=u,j=j>>>25|j<<7,F=F+T|0,B^=F,B=B>>>24|B<<8,b=b+B|0,T^=b,T=T>>>25|T<<7;Yt.writeUint32LE(F+n|0,t,0),Yt.writeUint32LE(P+i|0,t,4),Yt.writeUint32LE(k+s|0,t,8),Yt.writeUint32LE(L+a|0,t,12),Yt.writeUint32LE(m+o|0,t,16),Yt.writeUint32LE(T+f|0,t,20),Yt.writeUint32LE(j+c|0,t,24),Yt.writeUint32LE(U+h|0,t,28),Yt.writeUint32LE(N+d|0,t,32),Yt.writeUint32LE(g+p|0,t,36),Yt.writeUint32LE(b+v|0,t,40),Yt.writeUint32LE(u+x|0,t,44),Yt.writeUint32LE(l+D|0,t,48),Yt.writeUint32LE(w+S|0,t,52),Yt.writeUint32LE(I+O|0,t,56),Yt.writeUint32LE(B+A|0,t,60)}function Yv(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-e.length,s.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,a=i}for(var o=new Uint8Array(64),f=0;f<r.length;f+=64){YE(o,s,t);for(var c=f;c<f+64&&c<r.length;c++)n[c]=r[c]^o[c-f];QE(s,0,a)}return Ru.wipe(o),i===0&&Ru.wipe(s),n}Q0.streamXOR=Yv;function JE(t,e,r,n){return n===void 0&&(n=0),Ru.wipe(r),Yv(t,e,r,r,n)}Q0.stream=JE;function QE(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Jv={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});function eA(t,e,r){return~(t-1)&e|t-1&r}mi.select=eA;function tA(t,e){return(t|0)-(e|0)-1>>>31&1}mi.lessOrEqual=tA;function Qv(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}mi.compare=Qv;function rA(t,e){return t.length===0||e.length===0?!1:Qv(t,e)!==0}mi.equal=rA;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=mi,r=xr;t.DIGEST_LENGTH=16;var n=function(){function a(o){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var f=o[0]|o[1]<<8;this._r[0]=f&8191;var c=o[2]|o[3]<<8;this._r[1]=(f>>>13|c<<3)&8191;var h=o[4]|o[5]<<8;this._r[2]=(c>>>10|h<<6)&7939;var d=o[6]|o[7]<<8;this._r[3]=(h>>>7|d<<9)&8191;var p=o[8]|o[9]<<8;this._r[4]=(d>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var v=o[10]|o[11]<<8;this._r[6]=(p>>>14|v<<2)&8191;var x=o[12]|o[13]<<8;this._r[7]=(v>>>11|x<<5)&8065;var D=o[14]|o[15]<<8;this._r[8]=(x>>>8|D<<8)&8191,this._r[9]=D>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return a.prototype._blocks=function(o,f,c){for(var h=this._fin?0:2048,d=this._h[0],p=this._h[1],v=this._h[2],x=this._h[3],D=this._h[4],S=this._h[5],O=this._h[6],A=this._h[7],F=this._h[8],P=this._h[9],k=this._r[0],L=this._r[1],m=this._r[2],T=this._r[3],j=this._r[4],U=this._r[5],N=this._r[6],g=this._r[7],b=this._r[8],u=this._r[9];c>=16;){var l=o[f+0]|o[f+1]<<8;d+=l&8191;var w=o[f+2]|o[f+3]<<8;p+=(l>>>13|w<<3)&8191;var I=o[f+4]|o[f+5]<<8;v+=(w>>>10|I<<6)&8191;var B=o[f+6]|o[f+7]<<8;x+=(I>>>7|B<<9)&8191;var C=o[f+8]|o[f+9]<<8;D+=(B>>>4|C<<12)&8191,S+=C>>>1&8191;var y=o[f+10]|o[f+11]<<8;O+=(C>>>14|y<<2)&8191;var E=o[f+12]|o[f+13]<<8;A+=(y>>>11|E<<5)&8191;var _=o[f+14]|o[f+15]<<8;F+=(E>>>8|_<<8)&8191,P+=_>>>5|h;var $=0,V=$;V+=d*k,V+=p*(5*u),V+=v*(5*b),V+=x*(5*g),V+=D*(5*N),$=V>>>13,V&=8191,V+=S*(5*U),V+=O*(5*j),V+=A*(5*T),V+=F*(5*m),V+=P*(5*L),$+=V>>>13,V&=8191;var R=$;R+=d*L,R+=p*k,R+=v*(5*u),R+=x*(5*b),R+=D*(5*g),$=R>>>13,R&=8191,R+=S*(5*N),R+=O*(5*U),R+=A*(5*j),R+=F*(5*T),R+=P*(5*m),$+=R>>>13,R&=8191;var W=$;W+=d*m,W+=p*L,W+=v*k,W+=x*(5*u),W+=D*(5*b),$=W>>>13,W&=8191,W+=S*(5*g),W+=O*(5*N),W+=A*(5*U),W+=F*(5*j),W+=P*(5*T),$+=W>>>13,W&=8191;var z=$;z+=d*T,z+=p*m,z+=v*L,z+=x*k,z+=D*(5*u),$=z>>>13,z&=8191,z+=S*(5*b),z+=O*(5*g),z+=A*(5*N),z+=F*(5*U),z+=P*(5*j),$+=z>>>13,z&=8191;var q=$;q+=d*j,q+=p*T,q+=v*m,q+=x*L,q+=D*k,$=q>>>13,q&=8191,q+=S*(5*u),q+=O*(5*b),q+=A*(5*g),q+=F*(5*N),q+=P*(5*U),$+=q>>>13,q&=8191;var H=$;H+=d*U,H+=p*j,H+=v*T,H+=x*m,H+=D*L,$=H>>>13,H&=8191,H+=S*k,H+=O*(5*u),H+=A*(5*b),H+=F*(5*g),H+=P*(5*N),$+=H>>>13,H&=8191;var M=$;M+=d*N,M+=p*U,M+=v*j,M+=x*T,M+=D*m,$=M>>>13,M&=8191,M+=S*L,M+=O*k,M+=A*(5*u),M+=F*(5*b),M+=P*(5*g),$+=M>>>13,M&=8191;var K=$;K+=d*g,K+=p*N,K+=v*U,K+=x*j,K+=D*T,$=K>>>13,K&=8191,K+=S*m,K+=O*L,K+=A*k,K+=F*(5*u),K+=P*(5*b),$+=K>>>13,K&=8191;var Z=$;Z+=d*b,Z+=p*g,Z+=v*N,Z+=x*U,Z+=D*j,$=Z>>>13,Z&=8191,Z+=S*T,Z+=O*m,Z+=A*L,Z+=F*k,Z+=P*(5*u),$+=Z>>>13,Z&=8191;var Y=$;Y+=d*u,Y+=p*b,Y+=v*g,Y+=x*N,Y+=D*U,$=Y>>>13,Y&=8191,Y+=S*j,Y+=O*T,Y+=A*m,Y+=F*L,Y+=P*k,$+=Y>>>13,Y&=8191,$=($<<2)+$|0,$=$+V|0,V=$&8191,$=$>>>13,R+=$,d=V,p=R,v=W,x=z,D=q,S=H,O=M,A=K,F=Z,P=Y,f+=16,c-=16}this._h[0]=d,this._h[1]=p,this._h[2]=v,this._h[3]=x,this._h[4]=D,this._h[5]=S,this._h[6]=O,this._h[7]=A,this._h[8]=F,this._h[9]=P},a.prototype.finish=function(o,f){f===void 0&&(f=0);var c=new Uint16Array(10),h,d,p,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=h,h=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,c[0]=this._h[0]+5,h=c[0]>>>13,c[0]&=8191,v=1;v<10;v++)c[v]=this._h[v]+h,h=c[v]>>>13,c[v]&=8191;for(c[9]-=8192,d=(h^1)-1,v=0;v<10;v++)c[v]&=d;for(d=~d,v=0;v<10;v++)this._h[v]=this._h[v]&d|c[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,v=1;v<8;v++)p=(this._h[v]+this._pad[v]|0)+(p>>>16)|0,this._h[v]=p&65535;return o[f+0]=this._h[0]>>>0,o[f+1]=this._h[0]>>>8,o[f+2]=this._h[1]>>>0,o[f+3]=this._h[1]>>>8,o[f+4]=this._h[2]>>>0,o[f+5]=this._h[2]>>>8,o[f+6]=this._h[3]>>>0,o[f+7]=this._h[3]>>>8,o[f+8]=this._h[4]>>>0,o[f+9]=this._h[4]>>>8,o[f+10]=this._h[5]>>>0,o[f+11]=this._h[5]>>>8,o[f+12]=this._h[6]>>>0,o[f+13]=this._h[6]>>>8,o[f+14]=this._h[7]>>>0,o[f+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(o){var f=0,c=o.length,h;if(this._leftover){h=16-this._leftover,h>c&&(h=c);for(var d=0;d<h;d++)this._buffer[this._leftover+d]=o[f+d];if(c-=h,f+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(c>=16&&(h=c-c%16,this._blocks(o,f,h),f+=h,c-=h),c){for(var d=0;d<c;d++)this._buffer[this._leftover+d]=o[f+d];this._leftover+=c}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},a.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=n;function i(a,o){var f=new n(a);f.update(o);var c=f.digest();return f.clean(),c}t.oneTimeAuth=i;function s(a,o){return a.length!==t.DIGEST_LENGTH||o.length!==t.DIGEST_LENGTH?!1:e.equal(a,o)}t.equal=s})(Jv);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Q0,r=Jv,n=xr,i=Ze,s=mi;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),o=function(){function f(c){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,c.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(c)}return f.prototype.seal=function(c,h,d,p){if(c.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(c,v.length-c.length);var x=new Uint8Array(32);e.stream(this._key,v,x,4);var D=h.length+this.tagLength,S;if(p){if(p.length!==D)throw new Error("ChaCha20Poly1305: incorrect destination length");S=p}else S=new Uint8Array(D);return e.streamXOR(this._key,v,h,S,4),this._authenticate(S.subarray(S.length-this.tagLength,S.length),x,S.subarray(0,S.length-this.tagLength),d),n.wipe(v),S},f.prototype.open=function(c,h,d,p){if(c.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(c,v.length-c.length);var x=new Uint8Array(32);e.stream(this._key,v,x,4);var D=new Uint8Array(this.tagLength);if(this._authenticate(D,x,h.subarray(0,h.length-this.tagLength),d),!s.equal(D,h.subarray(h.length-this.tagLength,h.length)))return null;var S=h.length-this.tagLength,O;if(p){if(p.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");O=p}else O=new Uint8Array(S);return e.streamXOR(this._key,v,h.subarray(0,h.length-this.tagLength),O,4),n.wipe(v),O},f.prototype.clean=function(){return n.wipe(this._key),this},f.prototype._authenticate=function(c,h,d,p){var v=new r.Poly1305(h);p&&(v.update(p),p.length%16>0&&v.update(a.subarray(p.length%16))),v.update(d),d.length%16>0&&v.update(a.subarray(d.length%16));var x=new Uint8Array(8);p&&i.writeUint64LE(p.length,x),v.update(x),i.writeUint64LE(d.length,x),v.update(x);for(var D=v.digest(),S=0;S<D.length;S++)c[S]=D[S];v.clean(),n.wipe(D),n.wipe(x)},f}();t.ChaCha20Poly1305=o})(Lh);var e2={},fo={},kh={};Object.defineProperty(kh,"__esModule",{value:!0});function nA(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}kh.isSerializableHash=nA;Object.defineProperty(fo,"__esModule",{value:!0});var en=kh,iA=mi,sA=xr,t2=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),en.isSerializableHash(this._inner)&&en.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),sA.wipe(n)}return t.prototype.reset=function(){if(!en.isSerializableHash(this._inner)||!en.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){en.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),en.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!en.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!en.isSerializableHash(this._inner)||!en.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!en.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();fo.HMAC=t2;function aA(t,e,r){var n=new t2(t,e);n.update(r);var i=n.digest();return n.clean(),i}fo.hmac=aA;fo.equal=iA.equal;Object.defineProperty(e2,"__esModule",{value:!0});var Xl=fo,Yl=xr,oA=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Xl.hmac(this._hash,n,r);this._hmac=new Xl.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Yl.wipe(this._buffer),Yl.wipe(this._counter),this._bufpos=0},t}(),cA=e2.HKDF=oA,uo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ze,r=xr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},o.prototype.update=function(f,c){if(c===void 0&&(c=f.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&c>0;)this._buffer[this._bufferLength++]=f[h++],c--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(h=s(this._temp,this._state,f,h,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=f[h++],c--;return this},o.prototype.finish=function(f){if(!this._finished){var c=this._bytesHashed,h=this._bufferLength,d=c/536870912|0,p=c<<3,v=c%64<56?64:128;this._buffer[h]=128;for(var x=h+1;x<v-8;x++)this._buffer[x]=0;e.writeUint32BE(d,this._buffer,v-8),e.writeUint32BE(p,this._buffer,v-4),s(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var x=0;x<this.digestLength/4;x++)e.writeUint32BE(this._state[x],f,x*4);return this},o.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(f){return this._state.set(f.state),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(f){r.wipe(f.state),f.buffer&&r.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},o}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(o,f,c,h,d){for(;d>=64;){for(var p=f[0],v=f[1],x=f[2],D=f[3],S=f[4],O=f[5],A=f[6],F=f[7],P=0;P<16;P++){var k=h+P*4;o[P]=e.readUint32BE(c,k)}for(var P=16;P<64;P++){var L=o[P-2],m=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10;L=o[P-15];var T=(L>>>7|L<<25)^(L>>>18|L<<14)^L>>>3;o[P]=(m+o[P-7]|0)+(T+o[P-16]|0)}for(var P=0;P<64;P++){var m=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&O^~S&A)|0)+(F+(i[P]+o[P]|0)|0)|0,T=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&v^p&x^v&x)|0;F=A,A=O,O=S,S=D+m|0,D=x,x=v,v=p,p=m+T|0}f[0]+=p,f[1]+=v,f[2]+=x,f[3]+=D,f[4]+=S,f[5]+=O,f[6]+=A,f[7]+=F,h+=64,d-=64}return h}function a(o){var f=new n;f.update(o);var c=f.digest();return f.clean(),c}t.hash=a})(uo);var qh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=vi,r=xr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(P){const k=new Float64Array(16);if(P)for(let L=0;L<P.length;L++)k[L]=P[L];return k}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function a(P){let k=1;for(let L=0;L<16;L++){let m=P[L]+k+65535;k=Math.floor(m/65536),P[L]=m-k*65536}P[0]+=k-1+37*(k-1)}function o(P,k,L){const m=~(L-1);for(let T=0;T<16;T++){const j=m&(P[T]^k[T]);P[T]^=j,k[T]^=j}}function f(P,k){const L=n(),m=n();for(let T=0;T<16;T++)m[T]=k[T];a(m),a(m),a(m);for(let T=0;T<2;T++){L[0]=m[0]-65517;for(let U=1;U<15;U++)L[U]=m[U]-65535-(L[U-1]>>16&1),L[U-1]&=65535;L[15]=m[15]-32767-(L[14]>>16&1);const j=L[15]>>16&1;L[14]&=65535,o(m,L,1-j)}for(let T=0;T<16;T++)P[2*T]=m[T]&255,P[2*T+1]=m[T]>>8}function c(P,k){for(let L=0;L<16;L++)P[L]=k[2*L]+(k[2*L+1]<<8);P[15]&=32767}function h(P,k,L){for(let m=0;m<16;m++)P[m]=k[m]+L[m]}function d(P,k,L){for(let m=0;m<16;m++)P[m]=k[m]-L[m]}function p(P,k,L){let m,T,j=0,U=0,N=0,g=0,b=0,u=0,l=0,w=0,I=0,B=0,C=0,y=0,E=0,_=0,$=0,V=0,R=0,W=0,z=0,q=0,H=0,M=0,K=0,Z=0,Y=0,J=0,Q=0,be=0,Se=0,de=0,Re=0,ge=L[0],ne=L[1],fe=L[2],he=L[3],se=L[4],le=L[5],ue=L[6],re=L[7],xe=L[8],_e=L[9],ie=L[10],ve=L[11],Ee=L[12],ce=L[13],Ce=L[14],Me=L[15];m=k[0],j+=m*ge,U+=m*ne,N+=m*fe,g+=m*he,b+=m*se,u+=m*le,l+=m*ue,w+=m*re,I+=m*xe,B+=m*_e,C+=m*ie,y+=m*ve,E+=m*Ee,_+=m*ce,$+=m*Ce,V+=m*Me,m=k[1],U+=m*ge,N+=m*ne,g+=m*fe,b+=m*he,u+=m*se,l+=m*le,w+=m*ue,I+=m*re,B+=m*xe,C+=m*_e,y+=m*ie,E+=m*ve,_+=m*Ee,$+=m*ce,V+=m*Ce,R+=m*Me,m=k[2],N+=m*ge,g+=m*ne,b+=m*fe,u+=m*he,l+=m*se,w+=m*le,I+=m*ue,B+=m*re,C+=m*xe,y+=m*_e,E+=m*ie,_+=m*ve,$+=m*Ee,V+=m*ce,R+=m*Ce,W+=m*Me,m=k[3],g+=m*ge,b+=m*ne,u+=m*fe,l+=m*he,w+=m*se,I+=m*le,B+=m*ue,C+=m*re,y+=m*xe,E+=m*_e,_+=m*ie,$+=m*ve,V+=m*Ee,R+=m*ce,W+=m*Ce,z+=m*Me,m=k[4],b+=m*ge,u+=m*ne,l+=m*fe,w+=m*he,I+=m*se,B+=m*le,C+=m*ue,y+=m*re,E+=m*xe,_+=m*_e,$+=m*ie,V+=m*ve,R+=m*Ee,W+=m*ce,z+=m*Ce,q+=m*Me,m=k[5],u+=m*ge,l+=m*ne,w+=m*fe,I+=m*he,B+=m*se,C+=m*le,y+=m*ue,E+=m*re,_+=m*xe,$+=m*_e,V+=m*ie,R+=m*ve,W+=m*Ee,z+=m*ce,q+=m*Ce,H+=m*Me,m=k[6],l+=m*ge,w+=m*ne,I+=m*fe,B+=m*he,C+=m*se,y+=m*le,E+=m*ue,_+=m*re,$+=m*xe,V+=m*_e,R+=m*ie,W+=m*ve,z+=m*Ee,q+=m*ce,H+=m*Ce,M+=m*Me,m=k[7],w+=m*ge,I+=m*ne,B+=m*fe,C+=m*he,y+=m*se,E+=m*le,_+=m*ue,$+=m*re,V+=m*xe,R+=m*_e,W+=m*ie,z+=m*ve,q+=m*Ee,H+=m*ce,M+=m*Ce,K+=m*Me,m=k[8],I+=m*ge,B+=m*ne,C+=m*fe,y+=m*he,E+=m*se,_+=m*le,$+=m*ue,V+=m*re,R+=m*xe,W+=m*_e,z+=m*ie,q+=m*ve,H+=m*Ee,M+=m*ce,K+=m*Ce,Z+=m*Me,m=k[9],B+=m*ge,C+=m*ne,y+=m*fe,E+=m*he,_+=m*se,$+=m*le,V+=m*ue,R+=m*re,W+=m*xe,z+=m*_e,q+=m*ie,H+=m*ve,M+=m*Ee,K+=m*ce,Z+=m*Ce,Y+=m*Me,m=k[10],C+=m*ge,y+=m*ne,E+=m*fe,_+=m*he,$+=m*se,V+=m*le,R+=m*ue,W+=m*re,z+=m*xe,q+=m*_e,H+=m*ie,M+=m*ve,K+=m*Ee,Z+=m*ce,Y+=m*Ce,J+=m*Me,m=k[11],y+=m*ge,E+=m*ne,_+=m*fe,$+=m*he,V+=m*se,R+=m*le,W+=m*ue,z+=m*re,q+=m*xe,H+=m*_e,M+=m*ie,K+=m*ve,Z+=m*Ee,Y+=m*ce,J+=m*Ce,Q+=m*Me,m=k[12],E+=m*ge,_+=m*ne,$+=m*fe,V+=m*he,R+=m*se,W+=m*le,z+=m*ue,q+=m*re,H+=m*xe,M+=m*_e,K+=m*ie,Z+=m*ve,Y+=m*Ee,J+=m*ce,Q+=m*Ce,be+=m*Me,m=k[13],_+=m*ge,$+=m*ne,V+=m*fe,R+=m*he,W+=m*se,z+=m*le,q+=m*ue,H+=m*re,M+=m*xe,K+=m*_e,Z+=m*ie,Y+=m*ve,J+=m*Ee,Q+=m*ce,be+=m*Ce,Se+=m*Me,m=k[14],$+=m*ge,V+=m*ne,R+=m*fe,W+=m*he,z+=m*se,q+=m*le,H+=m*ue,M+=m*re,K+=m*xe,Z+=m*_e,Y+=m*ie,J+=m*ve,Q+=m*Ee,be+=m*ce,Se+=m*Ce,de+=m*Me,m=k[15],V+=m*ge,R+=m*ne,W+=m*fe,z+=m*he,q+=m*se,H+=m*le,M+=m*ue,K+=m*re,Z+=m*xe,Y+=m*_e,J+=m*ie,Q+=m*ve,be+=m*Ee,Se+=m*ce,de+=m*Ce,Re+=m*Me,j+=38*R,U+=38*W,N+=38*z,g+=38*q,b+=38*H,u+=38*M,l+=38*K,w+=38*Z,I+=38*Y,B+=38*J,C+=38*Q,y+=38*be,E+=38*Se,_+=38*de,$+=38*Re,T=1,m=j+T+65535,T=Math.floor(m/65536),j=m-T*65536,m=U+T+65535,T=Math.floor(m/65536),U=m-T*65536,m=N+T+65535,T=Math.floor(m/65536),N=m-T*65536,m=g+T+65535,T=Math.floor(m/65536),g=m-T*65536,m=b+T+65535,T=Math.floor(m/65536),b=m-T*65536,m=u+T+65535,T=Math.floor(m/65536),u=m-T*65536,m=l+T+65535,T=Math.floor(m/65536),l=m-T*65536,m=w+T+65535,T=Math.floor(m/65536),w=m-T*65536,m=I+T+65535,T=Math.floor(m/65536),I=m-T*65536,m=B+T+65535,T=Math.floor(m/65536),B=m-T*65536,m=C+T+65535,T=Math.floor(m/65536),C=m-T*65536,m=y+T+65535,T=Math.floor(m/65536),y=m-T*65536,m=E+T+65535,T=Math.floor(m/65536),E=m-T*65536,m=_+T+65535,T=Math.floor(m/65536),_=m-T*65536,m=$+T+65535,T=Math.floor(m/65536),$=m-T*65536,m=V+T+65535,T=Math.floor(m/65536),V=m-T*65536,j+=T-1+37*(T-1),T=1,m=j+T+65535,T=Math.floor(m/65536),j=m-T*65536,m=U+T+65535,T=Math.floor(m/65536),U=m-T*65536,m=N+T+65535,T=Math.floor(m/65536),N=m-T*65536,m=g+T+65535,T=Math.floor(m/65536),g=m-T*65536,m=b+T+65535,T=Math.floor(m/65536),b=m-T*65536,m=u+T+65535,T=Math.floor(m/65536),u=m-T*65536,m=l+T+65535,T=Math.floor(m/65536),l=m-T*65536,m=w+T+65535,T=Math.floor(m/65536),w=m-T*65536,m=I+T+65535,T=Math.floor(m/65536),I=m-T*65536,m=B+T+65535,T=Math.floor(m/65536),B=m-T*65536,m=C+T+65535,T=Math.floor(m/65536),C=m-T*65536,m=y+T+65535,T=Math.floor(m/65536),y=m-T*65536,m=E+T+65535,T=Math.floor(m/65536),E=m-T*65536,m=_+T+65535,T=Math.floor(m/65536),_=m-T*65536,m=$+T+65535,T=Math.floor(m/65536),$=m-T*65536,m=V+T+65535,T=Math.floor(m/65536),V=m-T*65536,j+=T-1+37*(T-1),P[0]=j,P[1]=U,P[2]=N,P[3]=g,P[4]=b,P[5]=u,P[6]=l,P[7]=w,P[8]=I,P[9]=B,P[10]=C,P[11]=y,P[12]=E,P[13]=_,P[14]=$,P[15]=V}function v(P,k){p(P,k,k)}function x(P,k){const L=n();for(let m=0;m<16;m++)L[m]=k[m];for(let m=253;m>=0;m--)v(L,L),m!==2&&m!==4&&p(L,L,k);for(let m=0;m<16;m++)P[m]=L[m]}function D(P,k){const L=new Uint8Array(32),m=new Float64Array(80),T=n(),j=n(),U=n(),N=n(),g=n(),b=n();for(let I=0;I<31;I++)L[I]=P[I];L[31]=P[31]&127|64,L[0]&=248,c(m,k);for(let I=0;I<16;I++)j[I]=m[I];T[0]=N[0]=1;for(let I=254;I>=0;--I){const B=L[I>>>3]>>>(I&7)&1;o(T,j,B),o(U,N,B),h(g,T,U),d(T,T,U),h(U,j,N),d(j,j,N),v(N,g),v(b,T),p(T,U,T),p(U,j,g),h(g,T,U),d(T,T,U),v(j,T),d(U,N,b),p(T,U,s),h(T,T,N),p(U,U,T),p(T,N,b),p(N,j,m),v(j,g),o(T,j,B),o(U,N,B)}for(let I=0;I<16;I++)m[I+16]=T[I],m[I+32]=U[I],m[I+48]=j[I],m[I+64]=N[I];const u=m.subarray(32),l=m.subarray(16);x(u,u),p(l,l,u);const w=new Uint8Array(32);return f(w,l),w}t.scalarMult=D;function S(P){return D(P,i)}t.scalarMultBase=S;function O(P){if(P.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const k=new Uint8Array(P);return{publicKey:S(k),secretKey:k}}t.generateKeyPairFromSeed=O;function A(P){const k=(0,e.randomBytes)(32,P),L=O(k);return(0,r.wipe)(k),L}t.generateKeyPair=A;function F(P,k,L=!1){if(P.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(k.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const m=D(P,k);if(L){let T=0;for(let j=0;j<m.length;j++)T|=m[j];if(T===0)throw new Error("X25519: invalid shared key")}return m}t.sharedKey=F})(qh);var r2={};const fA="elliptic",uA="6.6.1",hA="EC cryptography",dA="lib/elliptic.js",lA=["lib"],pA={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},bA={type:"git",url:"git@github.com:indutny/elliptic"},gA=["EC","Elliptic","curve","Cryptography"],vA="Fedor Indutny <fedor@indutny.com>",yA="MIT",mA={url:"https://github.com/indutny/elliptic/issues"},xA="https://github.com/indutny/elliptic",wA={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},_A={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},EA={name:fA,version:uA,description:hA,main:dA,files:lA,scripts:pA,repository:bA,keywords:gA,author:vA,license:yA,bugs:mA,homepage:xA,devDependencies:wA,dependencies:_A};var _r={},zh={exports:{}};zh.exports;(function(t){(function(e,r){function n(N,g){if(!N)throw new Error(g||"Assertion failed")}function i(N,g){N.super_=g;var b=function(){};b.prototype=g.prototype,N.prototype=new b,N.prototype.constructor=N}function s(N,g,b){if(s.isBN(N))return N;this.negative=0,this.words=null,this.length=0,this.red=null,N!==null&&((g==="le"||g==="be")&&(b=g,g=10),this._init(N||0,g||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=so.Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,b){return g.cmp(b)>0?g:b},s.min=function(g,b){return g.cmp(b)<0?g:b},s.prototype._init=function(g,b,u){if(typeof g=="number")return this._initNumber(g,b,u);if(typeof g=="object")return this._initArray(g,b,u);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),g=g.toString().replace(/\s+/g,"");var l=0;g[0]==="-"&&(l++,this.negative=1),l<g.length&&(b===16?this._parseHex(g,l,u):(this._parseBase(g,b,l),u==="le"&&this._initArray(this.toArray(),b,u)))},s.prototype._initNumber=function(g,b,u){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(n(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),b,u)},s.prototype._initArray=function(g,b,u){if(n(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var w,I,B=0;if(u==="be")for(l=g.length-1,w=0;l>=0;l-=3)I=g[l]|g[l-1]<<8|g[l-2]<<16,this.words[w]|=I<<B&67108863,this.words[w+1]=I>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);else if(u==="le")for(l=0,w=0;l<g.length;l+=3)I=g[l]|g[l+1]<<8|g[l+2]<<16,this.words[w]|=I<<B&67108863,this.words[w+1]=I>>>26-B&67108863,B+=24,B>=26&&(B-=26,w++);return this.strip()};function o(N,g){var b=N.charCodeAt(g);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function f(N,g,b){var u=o(N,b);return b-1>=g&&(u|=o(N,b-1)<<4),u}s.prototype._parseHex=function(g,b,u){this.length=Math.ceil((g.length-b)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var w=0,I=0,B;if(u==="be")for(l=g.length-1;l>=b;l-=2)B=f(g,b,l)<<w,this.words[I]|=B&67108863,w>=18?(w-=18,I+=1,this.words[I]|=B>>>26):w+=8;else{var C=g.length-b;for(l=C%2===0?b+1:b;l<g.length;l+=2)B=f(g,b,l)<<w,this.words[I]|=B&67108863,w>=18?(w-=18,I+=1,this.words[I]|=B>>>26):w+=8}this.strip()};function c(N,g,b,u){for(var l=0,w=Math.min(N.length,b),I=g;I<w;I++){var B=N.charCodeAt(I)-48;l*=u,B>=49?l+=B-49+10:B>=17?l+=B-17+10:l+=B}return l}s.prototype._parseBase=function(g,b,u){this.words=[0],this.length=1;for(var l=0,w=1;w<=67108863;w*=b)l++;l--,w=w/b|0;for(var I=g.length-u,B=I%l,C=Math.min(I,I-B)+u,y=0,E=u;E<C;E+=l)y=c(g,E,E+l,b),this.imuln(w),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(B!==0){var _=1;for(y=c(g,E,g.length,b),E=0;E<B;E++)_*=b;this.imuln(_),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var b=0;b<this.length;b++)g.words[b]=this.words[b];g.length=this.length,g.negative=this.negative,g.red=this.red},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,b){g=g||10,b=b|0||1;var u;if(g===16||g==="hex"){u="";for(var l=0,w=0,I=0;I<this.length;I++){var B=this.words[I],C=((B<<l|w)&16777215).toString(16);w=B>>>24-l&16777215,l+=2,l>=26&&(l-=26,I--),w!==0||I!==this.length-1?u=h[6-C.length]+C+u:u=C+u}for(w!==0&&(u=w.toString(16)+u);u.length%b!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(g===(g|0)&&g>=2&&g<=36){var y=d[g],E=p[g];u="";var _=this.clone();for(_.negative=0;!_.isZero();){var $=_.modn(E).toString(g);_=_.idivn(E),_.isZero()?u=$+u:u=h[y-$.length]+$+u}for(this.isZero()&&(u="0"+u);u.length%b!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(g,b){return n(typeof a<"u"),this.toArrayLike(a,g,b)},s.prototype.toArray=function(g,b){return this.toArrayLike(Array,g,b)},s.prototype.toArrayLike=function(g,b,u){var l=this.byteLength(),w=u||Math.max(1,l);n(l<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0"),this.strip();var I=b==="le",B=new g(w),C,y,E=this.clone();if(I){for(y=0;!E.isZero();y++)C=E.andln(255),E.iushrn(8),B[y]=C;for(;y<w;y++)B[y]=0}else{for(y=0;y<w-l;y++)B[y]=0;for(y=0;!E.isZero();y++)C=E.andln(255),E.iushrn(8),B[w-y-1]=C}return B},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var b=g,u=0;return b>=4096&&(u+=13,b>>>=13),b>=64&&(u+=7,b>>>=7),b>=8&&(u+=4,b>>>=4),b>=2&&(u+=2,b>>>=2),u+b},s.prototype._zeroBits=function(g){if(g===0)return 26;var b=g,u=0;return b&8191||(u+=13,b>>>=13),b&127||(u+=7,b>>>=7),b&15||(u+=4,b>>>=4),b&3||(u+=2,b>>>=2),b&1||u++,u},s.prototype.bitLength=function(){var g=this.words[this.length-1],b=this._countBits(g);return(this.length-1)*26+b};function v(N){for(var g=new Array(N.bitLength()),b=0;b<g.length;b++){var u=b/26|0,l=b%26;g[b]=(N.words[u]&1<<l)>>>l}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,b=0;b<this.length;b++){var u=this._zeroBits(this.words[b]);if(g+=u,u!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var b=0;b<g.length;b++)this.words[b]=this.words[b]|g.words[b];return this.strip()},s.prototype.ior=function(g){return n((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var b;this.length>g.length?b=g:b=this;for(var u=0;u<b.length;u++)this.words[u]=this.words[u]&g.words[u];return this.length=b.length,this.strip()},s.prototype.iand=function(g){return n((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var b,u;this.length>g.length?(b=this,u=g):(b=g,u=this);for(var l=0;l<u.length;l++)this.words[l]=b.words[l]^u.words[l];if(this!==b)for(;l<b.length;l++)this.words[l]=b.words[l];return this.length=b.length,this.strip()},s.prototype.ixor=function(g){return n((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){n(typeof g=="number"&&g>=0);var b=Math.ceil(g/26)|0,u=g%26;this._expand(b),u>0&&b--;for(var l=0;l<b;l++)this.words[l]=~this.words[l]&67108863;return u>0&&(this.words[l]=~this.words[l]&67108863>>26-u),this.strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,b){n(typeof g=="number"&&g>=0);var u=g/26|0,l=g%26;return this._expand(u+1),b?this.words[u]=this.words[u]|1<<l:this.words[u]=this.words[u]&~(1<<l),this.strip()},s.prototype.iadd=function(g){var b;if(this.negative!==0&&g.negative===0)return this.negative=0,b=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,b=this.isub(g),g.negative=1,b._normSign();var u,l;this.length>g.length?(u=this,l=g):(u=g,l=this);for(var w=0,I=0;I<l.length;I++)b=(u.words[I]|0)+(l.words[I]|0)+w,this.words[I]=b&67108863,w=b>>>26;for(;w!==0&&I<u.length;I++)b=(u.words[I]|0)+w,this.words[I]=b&67108863,w=b>>>26;if(this.length=u.length,w!==0)this.words[this.length]=w,this.length++;else if(u!==this)for(;I<u.length;I++)this.words[I]=u.words[I];return this},s.prototype.add=function(g){var b;return g.negative!==0&&this.negative===0?(g.negative=0,b=this.sub(g),g.negative^=1,b):g.negative===0&&this.negative!==0?(this.negative=0,b=g.sub(this),this.negative=1,b):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var b=this.iadd(g);return g.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var u=this.cmp(g);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,w;u>0?(l=this,w=g):(l=g,w=this);for(var I=0,B=0;B<w.length;B++)b=(l.words[B]|0)-(w.words[B]|0)+I,I=b>>26,this.words[B]=b&67108863;for(;I!==0&&B<l.length;B++)b=(l.words[B]|0)+I,I=b>>26,this.words[B]=b&67108863;if(I===0&&B<l.length&&l!==this)for(;B<l.length;B++)this.words[B]=l.words[B];return this.length=Math.max(this.length,B),l!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function x(N,g,b){b.negative=g.negative^N.negative;var u=N.length+g.length|0;b.length=u,u=u-1|0;var l=N.words[0]|0,w=g.words[0]|0,I=l*w,B=I&67108863,C=I/67108864|0;b.words[0]=B;for(var y=1;y<u;y++){for(var E=C>>>26,_=C&67108863,$=Math.min(y,g.length-1),V=Math.max(0,y-N.length+1);V<=$;V++){var R=y-V|0;l=N.words[R]|0,w=g.words[V]|0,I=l*w+_,E+=I/67108864|0,_=I&67108863}b.words[y]=_|0,C=E|0}return C!==0?b.words[y]=C|0:b.length--,b.strip()}var D=function(g,b,u){var l=g.words,w=b.words,I=u.words,B=0,C,y,E,_=l[0]|0,$=_&8191,V=_>>>13,R=l[1]|0,W=R&8191,z=R>>>13,q=l[2]|0,H=q&8191,M=q>>>13,K=l[3]|0,Z=K&8191,Y=K>>>13,J=l[4]|0,Q=J&8191,be=J>>>13,Se=l[5]|0,de=Se&8191,Re=Se>>>13,ge=l[6]|0,ne=ge&8191,fe=ge>>>13,he=l[7]|0,se=he&8191,le=he>>>13,ue=l[8]|0,re=ue&8191,xe=ue>>>13,_e=l[9]|0,ie=_e&8191,ve=_e>>>13,Ee=w[0]|0,ce=Ee&8191,Ce=Ee>>>13,Me=w[1]|0,Pe=Me&8191,Xe=Me>>>13,Je=w[2]|0,Ie=Je&8191,Qe=Je>>>13,rt=w[3]|0,Oe=rt&8191,ke=rt>>>13,Te=w[4]|0,ye=Te&8191,$e=Te>>>13,qe=w[5]|0,pe=qe&8191,je=qe>>>13,He=w[6]|0,we=He&8191,Be=He>>>13,Fe=w[7]|0,me=Fe&8191,ze=Fe>>>13,Ne=w[8]|0,De=Ne&8191,Ge=Ne>>>13,at=w[9]|0,Ke=at&8191,ot=at>>>13;u.negative=g.negative^b.negative,u.length=19,C=Math.imul($,ce),y=Math.imul($,Ce),y=y+Math.imul(V,ce)|0,E=Math.imul(V,Ce);var et=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(et>>>26)|0,et&=67108863,C=Math.imul(W,ce),y=Math.imul(W,Ce),y=y+Math.imul(z,ce)|0,E=Math.imul(z,Ce),C=C+Math.imul($,Pe)|0,y=y+Math.imul($,Xe)|0,y=y+Math.imul(V,Pe)|0,E=E+Math.imul(V,Xe)|0;var st=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(st>>>26)|0,st&=67108863,C=Math.imul(H,ce),y=Math.imul(H,Ce),y=y+Math.imul(M,ce)|0,E=Math.imul(M,Ce),C=C+Math.imul(W,Pe)|0,y=y+Math.imul(W,Xe)|0,y=y+Math.imul(z,Pe)|0,E=E+Math.imul(z,Xe)|0,C=C+Math.imul($,Ie)|0,y=y+Math.imul($,Qe)|0,y=y+Math.imul(V,Ie)|0,E=E+Math.imul(V,Qe)|0;var nr=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(nr>>>26)|0,nr&=67108863,C=Math.imul(Z,ce),y=Math.imul(Z,Ce),y=y+Math.imul(Y,ce)|0,E=Math.imul(Y,Ce),C=C+Math.imul(H,Pe)|0,y=y+Math.imul(H,Xe)|0,y=y+Math.imul(M,Pe)|0,E=E+Math.imul(M,Xe)|0,C=C+Math.imul(W,Ie)|0,y=y+Math.imul(W,Qe)|0,y=y+Math.imul(z,Ie)|0,E=E+Math.imul(z,Qe)|0,C=C+Math.imul($,Oe)|0,y=y+Math.imul($,ke)|0,y=y+Math.imul(V,Oe)|0,E=E+Math.imul(V,ke)|0;var ir=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(ir>>>26)|0,ir&=67108863,C=Math.imul(Q,ce),y=Math.imul(Q,Ce),y=y+Math.imul(be,ce)|0,E=Math.imul(be,Ce),C=C+Math.imul(Z,Pe)|0,y=y+Math.imul(Z,Xe)|0,y=y+Math.imul(Y,Pe)|0,E=E+Math.imul(Y,Xe)|0,C=C+Math.imul(H,Ie)|0,y=y+Math.imul(H,Qe)|0,y=y+Math.imul(M,Ie)|0,E=E+Math.imul(M,Qe)|0,C=C+Math.imul(W,Oe)|0,y=y+Math.imul(W,ke)|0,y=y+Math.imul(z,Oe)|0,E=E+Math.imul(z,ke)|0,C=C+Math.imul($,ye)|0,y=y+Math.imul($,$e)|0,y=y+Math.imul(V,ye)|0,E=E+Math.imul(V,$e)|0;var sr=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(sr>>>26)|0,sr&=67108863,C=Math.imul(de,ce),y=Math.imul(de,Ce),y=y+Math.imul(Re,ce)|0,E=Math.imul(Re,Ce),C=C+Math.imul(Q,Pe)|0,y=y+Math.imul(Q,Xe)|0,y=y+Math.imul(be,Pe)|0,E=E+Math.imul(be,Xe)|0,C=C+Math.imul(Z,Ie)|0,y=y+Math.imul(Z,Qe)|0,y=y+Math.imul(Y,Ie)|0,E=E+Math.imul(Y,Qe)|0,C=C+Math.imul(H,Oe)|0,y=y+Math.imul(H,ke)|0,y=y+Math.imul(M,Oe)|0,E=E+Math.imul(M,ke)|0,C=C+Math.imul(W,ye)|0,y=y+Math.imul(W,$e)|0,y=y+Math.imul(z,ye)|0,E=E+Math.imul(z,$e)|0,C=C+Math.imul($,pe)|0,y=y+Math.imul($,je)|0,y=y+Math.imul(V,pe)|0,E=E+Math.imul(V,je)|0;var ar=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(ar>>>26)|0,ar&=67108863,C=Math.imul(ne,ce),y=Math.imul(ne,Ce),y=y+Math.imul(fe,ce)|0,E=Math.imul(fe,Ce),C=C+Math.imul(de,Pe)|0,y=y+Math.imul(de,Xe)|0,y=y+Math.imul(Re,Pe)|0,E=E+Math.imul(Re,Xe)|0,C=C+Math.imul(Q,Ie)|0,y=y+Math.imul(Q,Qe)|0,y=y+Math.imul(be,Ie)|0,E=E+Math.imul(be,Qe)|0,C=C+Math.imul(Z,Oe)|0,y=y+Math.imul(Z,ke)|0,y=y+Math.imul(Y,Oe)|0,E=E+Math.imul(Y,ke)|0,C=C+Math.imul(H,ye)|0,y=y+Math.imul(H,$e)|0,y=y+Math.imul(M,ye)|0,E=E+Math.imul(M,$e)|0,C=C+Math.imul(W,pe)|0,y=y+Math.imul(W,je)|0,y=y+Math.imul(z,pe)|0,E=E+Math.imul(z,je)|0,C=C+Math.imul($,we)|0,y=y+Math.imul($,Be)|0,y=y+Math.imul(V,we)|0,E=E+Math.imul(V,Be)|0;var At=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(At>>>26)|0,At&=67108863,C=Math.imul(se,ce),y=Math.imul(se,Ce),y=y+Math.imul(le,ce)|0,E=Math.imul(le,Ce),C=C+Math.imul(ne,Pe)|0,y=y+Math.imul(ne,Xe)|0,y=y+Math.imul(fe,Pe)|0,E=E+Math.imul(fe,Xe)|0,C=C+Math.imul(de,Ie)|0,y=y+Math.imul(de,Qe)|0,y=y+Math.imul(Re,Ie)|0,E=E+Math.imul(Re,Qe)|0,C=C+Math.imul(Q,Oe)|0,y=y+Math.imul(Q,ke)|0,y=y+Math.imul(be,Oe)|0,E=E+Math.imul(be,ke)|0,C=C+Math.imul(Z,ye)|0,y=y+Math.imul(Z,$e)|0,y=y+Math.imul(Y,ye)|0,E=E+Math.imul(Y,$e)|0,C=C+Math.imul(H,pe)|0,y=y+Math.imul(H,je)|0,y=y+Math.imul(M,pe)|0,E=E+Math.imul(M,je)|0,C=C+Math.imul(W,we)|0,y=y+Math.imul(W,Be)|0,y=y+Math.imul(z,we)|0,E=E+Math.imul(z,Be)|0,C=C+Math.imul($,me)|0,y=y+Math.imul($,ze)|0,y=y+Math.imul(V,me)|0,E=E+Math.imul(V,ze)|0;var mn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(mn>>>26)|0,mn&=67108863,C=Math.imul(re,ce),y=Math.imul(re,Ce),y=y+Math.imul(xe,ce)|0,E=Math.imul(xe,Ce),C=C+Math.imul(se,Pe)|0,y=y+Math.imul(se,Xe)|0,y=y+Math.imul(le,Pe)|0,E=E+Math.imul(le,Xe)|0,C=C+Math.imul(ne,Ie)|0,y=y+Math.imul(ne,Qe)|0,y=y+Math.imul(fe,Ie)|0,E=E+Math.imul(fe,Qe)|0,C=C+Math.imul(de,Oe)|0,y=y+Math.imul(de,ke)|0,y=y+Math.imul(Re,Oe)|0,E=E+Math.imul(Re,ke)|0,C=C+Math.imul(Q,ye)|0,y=y+Math.imul(Q,$e)|0,y=y+Math.imul(be,ye)|0,E=E+Math.imul(be,$e)|0,C=C+Math.imul(Z,pe)|0,y=y+Math.imul(Z,je)|0,y=y+Math.imul(Y,pe)|0,E=E+Math.imul(Y,je)|0,C=C+Math.imul(H,we)|0,y=y+Math.imul(H,Be)|0,y=y+Math.imul(M,we)|0,E=E+Math.imul(M,Be)|0,C=C+Math.imul(W,me)|0,y=y+Math.imul(W,ze)|0,y=y+Math.imul(z,me)|0,E=E+Math.imul(z,ze)|0,C=C+Math.imul($,De)|0,y=y+Math.imul($,Ge)|0,y=y+Math.imul(V,De)|0,E=E+Math.imul(V,Ge)|0;var xn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(xn>>>26)|0,xn&=67108863,C=Math.imul(ie,ce),y=Math.imul(ie,Ce),y=y+Math.imul(ve,ce)|0,E=Math.imul(ve,Ce),C=C+Math.imul(re,Pe)|0,y=y+Math.imul(re,Xe)|0,y=y+Math.imul(xe,Pe)|0,E=E+Math.imul(xe,Xe)|0,C=C+Math.imul(se,Ie)|0,y=y+Math.imul(se,Qe)|0,y=y+Math.imul(le,Ie)|0,E=E+Math.imul(le,Qe)|0,C=C+Math.imul(ne,Oe)|0,y=y+Math.imul(ne,ke)|0,y=y+Math.imul(fe,Oe)|0,E=E+Math.imul(fe,ke)|0,C=C+Math.imul(de,ye)|0,y=y+Math.imul(de,$e)|0,y=y+Math.imul(Re,ye)|0,E=E+Math.imul(Re,$e)|0,C=C+Math.imul(Q,pe)|0,y=y+Math.imul(Q,je)|0,y=y+Math.imul(be,pe)|0,E=E+Math.imul(be,je)|0,C=C+Math.imul(Z,we)|0,y=y+Math.imul(Z,Be)|0,y=y+Math.imul(Y,we)|0,E=E+Math.imul(Y,Be)|0,C=C+Math.imul(H,me)|0,y=y+Math.imul(H,ze)|0,y=y+Math.imul(M,me)|0,E=E+Math.imul(M,ze)|0,C=C+Math.imul(W,De)|0,y=y+Math.imul(W,Ge)|0,y=y+Math.imul(z,De)|0,E=E+Math.imul(z,Ge)|0,C=C+Math.imul($,Ke)|0,y=y+Math.imul($,ot)|0,y=y+Math.imul(V,Ke)|0,E=E+Math.imul(V,ot)|0;var wn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(wn>>>26)|0,wn&=67108863,C=Math.imul(ie,Pe),y=Math.imul(ie,Xe),y=y+Math.imul(ve,Pe)|0,E=Math.imul(ve,Xe),C=C+Math.imul(re,Ie)|0,y=y+Math.imul(re,Qe)|0,y=y+Math.imul(xe,Ie)|0,E=E+Math.imul(xe,Qe)|0,C=C+Math.imul(se,Oe)|0,y=y+Math.imul(se,ke)|0,y=y+Math.imul(le,Oe)|0,E=E+Math.imul(le,ke)|0,C=C+Math.imul(ne,ye)|0,y=y+Math.imul(ne,$e)|0,y=y+Math.imul(fe,ye)|0,E=E+Math.imul(fe,$e)|0,C=C+Math.imul(de,pe)|0,y=y+Math.imul(de,je)|0,y=y+Math.imul(Re,pe)|0,E=E+Math.imul(Re,je)|0,C=C+Math.imul(Q,we)|0,y=y+Math.imul(Q,Be)|0,y=y+Math.imul(be,we)|0,E=E+Math.imul(be,Be)|0,C=C+Math.imul(Z,me)|0,y=y+Math.imul(Z,ze)|0,y=y+Math.imul(Y,me)|0,E=E+Math.imul(Y,ze)|0,C=C+Math.imul(H,De)|0,y=y+Math.imul(H,Ge)|0,y=y+Math.imul(M,De)|0,E=E+Math.imul(M,Ge)|0,C=C+Math.imul(W,Ke)|0,y=y+Math.imul(W,ot)|0,y=y+Math.imul(z,Ke)|0,E=E+Math.imul(z,ot)|0;var _n=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(_n>>>26)|0,_n&=67108863,C=Math.imul(ie,Ie),y=Math.imul(ie,Qe),y=y+Math.imul(ve,Ie)|0,E=Math.imul(ve,Qe),C=C+Math.imul(re,Oe)|0,y=y+Math.imul(re,ke)|0,y=y+Math.imul(xe,Oe)|0,E=E+Math.imul(xe,ke)|0,C=C+Math.imul(se,ye)|0,y=y+Math.imul(se,$e)|0,y=y+Math.imul(le,ye)|0,E=E+Math.imul(le,$e)|0,C=C+Math.imul(ne,pe)|0,y=y+Math.imul(ne,je)|0,y=y+Math.imul(fe,pe)|0,E=E+Math.imul(fe,je)|0,C=C+Math.imul(de,we)|0,y=y+Math.imul(de,Be)|0,y=y+Math.imul(Re,we)|0,E=E+Math.imul(Re,Be)|0,C=C+Math.imul(Q,me)|0,y=y+Math.imul(Q,ze)|0,y=y+Math.imul(be,me)|0,E=E+Math.imul(be,ze)|0,C=C+Math.imul(Z,De)|0,y=y+Math.imul(Z,Ge)|0,y=y+Math.imul(Y,De)|0,E=E+Math.imul(Y,Ge)|0,C=C+Math.imul(H,Ke)|0,y=y+Math.imul(H,ot)|0,y=y+Math.imul(M,Ke)|0,E=E+Math.imul(M,ot)|0;var En=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(En>>>26)|0,En&=67108863,C=Math.imul(ie,Oe),y=Math.imul(ie,ke),y=y+Math.imul(ve,Oe)|0,E=Math.imul(ve,ke),C=C+Math.imul(re,ye)|0,y=y+Math.imul(re,$e)|0,y=y+Math.imul(xe,ye)|0,E=E+Math.imul(xe,$e)|0,C=C+Math.imul(se,pe)|0,y=y+Math.imul(se,je)|0,y=y+Math.imul(le,pe)|0,E=E+Math.imul(le,je)|0,C=C+Math.imul(ne,we)|0,y=y+Math.imul(ne,Be)|0,y=y+Math.imul(fe,we)|0,E=E+Math.imul(fe,Be)|0,C=C+Math.imul(de,me)|0,y=y+Math.imul(de,ze)|0,y=y+Math.imul(Re,me)|0,E=E+Math.imul(Re,ze)|0,C=C+Math.imul(Q,De)|0,y=y+Math.imul(Q,Ge)|0,y=y+Math.imul(be,De)|0,E=E+Math.imul(be,Ge)|0,C=C+Math.imul(Z,Ke)|0,y=y+Math.imul(Z,ot)|0,y=y+Math.imul(Y,Ke)|0,E=E+Math.imul(Y,ot)|0;var Er=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(Er>>>26)|0,Er&=67108863,C=Math.imul(ie,ye),y=Math.imul(ie,$e),y=y+Math.imul(ve,ye)|0,E=Math.imul(ve,$e),C=C+Math.imul(re,pe)|0,y=y+Math.imul(re,je)|0,y=y+Math.imul(xe,pe)|0,E=E+Math.imul(xe,je)|0,C=C+Math.imul(se,we)|0,y=y+Math.imul(se,Be)|0,y=y+Math.imul(le,we)|0,E=E+Math.imul(le,Be)|0,C=C+Math.imul(ne,me)|0,y=y+Math.imul(ne,ze)|0,y=y+Math.imul(fe,me)|0,E=E+Math.imul(fe,ze)|0,C=C+Math.imul(de,De)|0,y=y+Math.imul(de,Ge)|0,y=y+Math.imul(Re,De)|0,E=E+Math.imul(Re,Ge)|0,C=C+Math.imul(Q,Ke)|0,y=y+Math.imul(Q,ot)|0,y=y+Math.imul(be,Ke)|0,E=E+Math.imul(be,ot)|0;var An=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(An>>>26)|0,An&=67108863,C=Math.imul(ie,pe),y=Math.imul(ie,je),y=y+Math.imul(ve,pe)|0,E=Math.imul(ve,je),C=C+Math.imul(re,we)|0,y=y+Math.imul(re,Be)|0,y=y+Math.imul(xe,we)|0,E=E+Math.imul(xe,Be)|0,C=C+Math.imul(se,me)|0,y=y+Math.imul(se,ze)|0,y=y+Math.imul(le,me)|0,E=E+Math.imul(le,ze)|0,C=C+Math.imul(ne,De)|0,y=y+Math.imul(ne,Ge)|0,y=y+Math.imul(fe,De)|0,E=E+Math.imul(fe,Ge)|0,C=C+Math.imul(de,Ke)|0,y=y+Math.imul(de,ot)|0,y=y+Math.imul(Re,Ke)|0,E=E+Math.imul(Re,ot)|0;var Sn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,C=Math.imul(ie,we),y=Math.imul(ie,Be),y=y+Math.imul(ve,we)|0,E=Math.imul(ve,Be),C=C+Math.imul(re,me)|0,y=y+Math.imul(re,ze)|0,y=y+Math.imul(xe,me)|0,E=E+Math.imul(xe,ze)|0,C=C+Math.imul(se,De)|0,y=y+Math.imul(se,Ge)|0,y=y+Math.imul(le,De)|0,E=E+Math.imul(le,Ge)|0,C=C+Math.imul(ne,Ke)|0,y=y+Math.imul(ne,ot)|0,y=y+Math.imul(fe,Ke)|0,E=E+Math.imul(fe,ot)|0;var Zt=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,C=Math.imul(ie,me),y=Math.imul(ie,ze),y=y+Math.imul(ve,me)|0,E=Math.imul(ve,ze),C=C+Math.imul(re,De)|0,y=y+Math.imul(re,Ge)|0,y=y+Math.imul(xe,De)|0,E=E+Math.imul(xe,Ge)|0,C=C+Math.imul(se,Ke)|0,y=y+Math.imul(se,ot)|0,y=y+Math.imul(le,Ke)|0,E=E+Math.imul(le,ot)|0;var Dn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,C=Math.imul(ie,De),y=Math.imul(ie,Ge),y=y+Math.imul(ve,De)|0,E=Math.imul(ve,Ge),C=C+Math.imul(re,Ke)|0,y=y+Math.imul(re,ot)|0,y=y+Math.imul(xe,Ke)|0,E=E+Math.imul(xe,ot)|0;var Mn=(B+C|0)+((y&8191)<<13)|0;B=(E+(y>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,C=Math.imul(ie,Ke),y=Math.imul(ie,ot),y=y+Math.imul(ve,Ke)|0,E=Math.imul(ve,ot);var Cn=(B+C|0)+((y&8191)<<13)|0;return B=(E+(y>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,I[0]=et,I[1]=st,I[2]=nr,I[3]=ir,I[4]=sr,I[5]=ar,I[6]=At,I[7]=mn,I[8]=xn,I[9]=wn,I[10]=_n,I[11]=En,I[12]=Er,I[13]=An,I[14]=Sn,I[15]=Zt,I[16]=Dn,I[17]=Mn,I[18]=Cn,B!==0&&(I[19]=B,u.length++),u};Math.imul||(D=x);function S(N,g,b){b.negative=g.negative^N.negative,b.length=N.length+g.length;for(var u=0,l=0,w=0;w<b.length-1;w++){var I=l;l=0;for(var B=u&67108863,C=Math.min(w,g.length-1),y=Math.max(0,w-N.length+1);y<=C;y++){var E=w-y,_=N.words[E]|0,$=g.words[y]|0,V=_*$,R=V&67108863;I=I+(V/67108864|0)|0,R=R+B|0,B=R&67108863,I=I+(R>>>26)|0,l+=I>>>26,I&=67108863}b.words[w]=B,u=I,I=l}return u!==0?b.words[w]=u:b.length--,b.strip()}function O(N,g,b){var u=new A;return u.mulp(N,g,b)}s.prototype.mulTo=function(g,b){var u,l=this.length+g.length;return this.length===10&&g.length===10?u=D(this,g,b):l<63?u=x(this,g,b):l<1024?u=S(this,g,b):u=O(this,g,b),u};function A(N,g){this.x=N,this.y=g}A.prototype.makeRBT=function(g){for(var b=new Array(g),u=s.prototype._countBits(g)-1,l=0;l<g;l++)b[l]=this.revBin(l,u,g);return b},A.prototype.revBin=function(g,b,u){if(g===0||g===u-1)return g;for(var l=0,w=0;w<b;w++)l|=(g&1)<<b-w-1,g>>=1;return l},A.prototype.permute=function(g,b,u,l,w,I){for(var B=0;B<I;B++)l[B]=b[g[B]],w[B]=u[g[B]]},A.prototype.transform=function(g,b,u,l,w,I){this.permute(I,g,b,u,l,w);for(var B=1;B<w;B<<=1)for(var C=B<<1,y=Math.cos(2*Math.PI/C),E=Math.sin(2*Math.PI/C),_=0;_<w;_+=C)for(var $=y,V=E,R=0;R<B;R++){var W=u[_+R],z=l[_+R],q=u[_+R+B],H=l[_+R+B],M=$*q-V*H;H=$*H+V*q,q=M,u[_+R]=W+q,l[_+R]=z+H,u[_+R+B]=W-q,l[_+R+B]=z-H,R!==C&&(M=y*$-E*V,V=y*V+E*$,$=M)}},A.prototype.guessLen13b=function(g,b){var u=Math.max(b,g)|1,l=u&1,w=0;for(u=u/2|0;u;u=u>>>1)w++;return 1<<w+1+l},A.prototype.conjugate=function(g,b,u){if(!(u<=1))for(var l=0;l<u/2;l++){var w=g[l];g[l]=g[u-l-1],g[u-l-1]=w,w=b[l],b[l]=-b[u-l-1],b[u-l-1]=-w}},A.prototype.normalize13b=function(g,b){for(var u=0,l=0;l<b/2;l++){var w=Math.round(g[2*l+1]/b)*8192+Math.round(g[2*l]/b)+u;g[l]=w&67108863,w<67108864?u=0:u=w/67108864|0}return g},A.prototype.convert13b=function(g,b,u,l){for(var w=0,I=0;I<b;I++)w=w+(g[I]|0),u[2*I]=w&8191,w=w>>>13,u[2*I+1]=w&8191,w=w>>>13;for(I=2*b;I<l;++I)u[I]=0;n(w===0),n((w&-8192)===0)},A.prototype.stub=function(g){for(var b=new Array(g),u=0;u<g;u++)b[u]=0;return b},A.prototype.mulp=function(g,b,u){var l=2*this.guessLen13b(g.length,b.length),w=this.makeRBT(l),I=this.stub(l),B=new Array(l),C=new Array(l),y=new Array(l),E=new Array(l),_=new Array(l),$=new Array(l),V=u.words;V.length=l,this.convert13b(g.words,g.length,B,l),this.convert13b(b.words,b.length,E,l),this.transform(B,I,C,y,l,w),this.transform(E,I,_,$,l,w);for(var R=0;R<l;R++){var W=C[R]*_[R]-y[R]*$[R];y[R]=C[R]*$[R]+y[R]*_[R],C[R]=W}return this.conjugate(C,y,l),this.transform(C,y,V,I,l,w),this.conjugate(V,I,l),this.normalize13b(V,l),u.negative=g.negative^b.negative,u.length=g.length+b.length,u.strip()},s.prototype.mul=function(g){var b=new s(null);return b.words=new Array(this.length+g.length),this.mulTo(g,b)},s.prototype.mulf=function(g){var b=new s(null);return b.words=new Array(this.length+g.length),O(this,g,b)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){n(typeof g=="number"),n(g<67108864);for(var b=0,u=0;u<this.length;u++){var l=(this.words[u]|0)*g,w=(l&67108863)+(b&67108863);b>>=26,b+=l/67108864|0,b+=w>>>26,this.words[u]=w&67108863}return b!==0&&(this.words[u]=b,this.length++),this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var b=v(g);if(b.length===0)return new s(1);for(var u=this,l=0;l<b.length&&b[l]===0;l++,u=u.sqr());if(++l<b.length)for(var w=u.sqr();l<b.length;l++,w=w.sqr())b[l]!==0&&(u=u.mul(w));return u},s.prototype.iushln=function(g){n(typeof g=="number"&&g>=0);var b=g%26,u=(g-b)/26,l=67108863>>>26-b<<26-b,w;if(b!==0){var I=0;for(w=0;w<this.length;w++){var B=this.words[w]&l,C=(this.words[w]|0)-B<<b;this.words[w]=C|I,I=B>>>26-b}I&&(this.words[w]=I,this.length++)}if(u!==0){for(w=this.length-1;w>=0;w--)this.words[w+u]=this.words[w];for(w=0;w<u;w++)this.words[w]=0;this.length+=u}return this.strip()},s.prototype.ishln=function(g){return n(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,b,u){n(typeof g=="number"&&g>=0);var l;b?l=(b-b%26)/26:l=0;var w=g%26,I=Math.min((g-w)/26,this.length),B=67108863^67108863>>>w<<w,C=u;if(l-=I,l=Math.max(0,l),C){for(var y=0;y<I;y++)C.words[y]=this.words[y];C.length=I}if(I!==0)if(this.length>I)for(this.length-=I,y=0;y<this.length;y++)this.words[y]=this.words[y+I];else this.words[0]=0,this.length=1;var E=0;for(y=this.length-1;y>=0&&(E!==0||y>=l);y--){var _=this.words[y]|0;this.words[y]=E<<26-w|_>>>w,E=_&B}return C&&E!==0&&(C.words[C.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(g,b,u){return n(this.negative===0),this.iushrn(g,b,u)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){n(typeof g=="number"&&g>=0);var b=g%26,u=(g-b)/26,l=1<<b;if(this.length<=u)return!1;var w=this.words[u];return!!(w&l)},s.prototype.imaskn=function(g){n(typeof g=="number"&&g>=0);var b=g%26,u=(g-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(b!==0&&u++,this.length=Math.min(u,this.length),b!==0){var l=67108863^67108863>>>b<<b;this.words[this.length-1]&=l}return this.strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return n(typeof g=="number"),n(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(g){if(n(typeof g=="number"),n(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,b,u){var l=g.length+u,w;this._expand(l);var I,B=0;for(w=0;w<g.length;w++){I=(this.words[w+u]|0)+B;var C=(g.words[w]|0)*b;I-=C&67108863,B=(I>>26)-(C/67108864|0),this.words[w+u]=I&67108863}for(;w<this.length-u;w++)I=(this.words[w+u]|0)+B,B=I>>26,this.words[w+u]=I&67108863;if(B===0)return this.strip();for(n(B===-1),B=0,w=0;w<this.length;w++)I=-(this.words[w]|0)+B,B=I>>26,this.words[w]=I&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(g,b){var u=this.length-g.length,l=this.clone(),w=g,I=w.words[w.length-1]|0,B=this._countBits(I);u=26-B,u!==0&&(w=w.ushln(u),l.iushln(u),I=w.words[w.length-1]|0);var C=l.length-w.length,y;if(b!=="mod"){y=new s(null),y.length=C+1,y.words=new Array(y.length);for(var E=0;E<y.length;E++)y.words[E]=0}var _=l.clone()._ishlnsubmul(w,1,C);_.negative===0&&(l=_,y&&(y.words[C]=1));for(var $=C-1;$>=0;$--){var V=(l.words[w.length+$]|0)*67108864+(l.words[w.length+$-1]|0);for(V=Math.min(V/I|0,67108863),l._ishlnsubmul(w,V,$);l.negative!==0;)V--,l.negative=0,l._ishlnsubmul(w,1,$),l.isZero()||(l.negative^=1);y&&(y.words[$]=V)}return y&&y.strip(),l.strip(),b!=="div"&&u!==0&&l.iushrn(u),{div:y||null,mod:l}},s.prototype.divmod=function(g,b,u){if(n(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var l,w,I;return this.negative!==0&&g.negative===0?(I=this.neg().divmod(g,b),b!=="mod"&&(l=I.div.neg()),b!=="div"&&(w=I.mod.neg(),u&&w.negative!==0&&w.iadd(g)),{div:l,mod:w}):this.negative===0&&g.negative!==0?(I=this.divmod(g.neg(),b),b!=="mod"&&(l=I.div.neg()),{div:l,mod:I.mod}):this.negative&g.negative?(I=this.neg().divmod(g.neg(),b),b!=="div"&&(w=I.mod.neg(),u&&w.negative!==0&&w.isub(g)),{div:I.div,mod:w}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?b==="div"?{div:this.divn(g.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modn(g.words[0]))}:this._wordDiv(g,b)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var b=this.divmod(g);if(b.mod.isZero())return b.div;var u=b.div.negative!==0?b.mod.isub(g):b.mod,l=g.ushrn(1),w=g.andln(1),I=u.cmp(l);return I<0||w===1&&I===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modn=function(g){n(g<=67108863);for(var b=(1<<26)%g,u=0,l=this.length-1;l>=0;l--)u=(b*u+(this.words[l]|0))%g;return u},s.prototype.idivn=function(g){n(g<=67108863);for(var b=0,u=this.length-1;u>=0;u--){var l=(this.words[u]|0)+b*67108864;this.words[u]=l/g|0,b=l%g}return this.strip()},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){n(g.negative===0),n(!g.isZero());var b=this,u=g.clone();b.negative!==0?b=b.umod(g):b=b.clone();for(var l=new s(1),w=new s(0),I=new s(0),B=new s(1),C=0;b.isEven()&&u.isEven();)b.iushrn(1),u.iushrn(1),++C;for(var y=u.clone(),E=b.clone();!b.isZero();){for(var _=0,$=1;!(b.words[0]&$)&&_<26;++_,$<<=1);if(_>0)for(b.iushrn(_);_-- >0;)(l.isOdd()||w.isOdd())&&(l.iadd(y),w.isub(E)),l.iushrn(1),w.iushrn(1);for(var V=0,R=1;!(u.words[0]&R)&&V<26;++V,R<<=1);if(V>0)for(u.iushrn(V);V-- >0;)(I.isOdd()||B.isOdd())&&(I.iadd(y),B.isub(E)),I.iushrn(1),B.iushrn(1);b.cmp(u)>=0?(b.isub(u),l.isub(I),w.isub(B)):(u.isub(b),I.isub(l),B.isub(w))}return{a:I,b:B,gcd:u.iushln(C)}},s.prototype._invmp=function(g){n(g.negative===0),n(!g.isZero());var b=this,u=g.clone();b.negative!==0?b=b.umod(g):b=b.clone();for(var l=new s(1),w=new s(0),I=u.clone();b.cmpn(1)>0&&u.cmpn(1)>0;){for(var B=0,C=1;!(b.words[0]&C)&&B<26;++B,C<<=1);if(B>0)for(b.iushrn(B);B-- >0;)l.isOdd()&&l.iadd(I),l.iushrn(1);for(var y=0,E=1;!(u.words[0]&E)&&y<26;++y,E<<=1);if(y>0)for(u.iushrn(y);y-- >0;)w.isOdd()&&w.iadd(I),w.iushrn(1);b.cmp(u)>=0?(b.isub(u),l.isub(w)):(u.isub(b),w.isub(l))}var _;return b.cmpn(1)===0?_=l:_=w,_.cmpn(0)<0&&_.iadd(g),_},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var b=this.clone(),u=g.clone();b.negative=0,u.negative=0;for(var l=0;b.isEven()&&u.isEven();l++)b.iushrn(1),u.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;u.isEven();)u.iushrn(1);var w=b.cmp(u);if(w<0){var I=b;b=u,u=I}else if(w===0||u.cmpn(1)===0)break;b.isub(u)}while(!0);return u.iushln(l)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){n(typeof g=="number");var b=g%26,u=(g-b)/26,l=1<<b;if(this.length<=u)return this._expand(u+1),this.words[u]|=l,this;for(var w=l,I=u;w!==0&&I<this.length;I++){var B=this.words[I]|0;B+=w,w=B>>>26,B&=67108863,this.words[I]=B}return w!==0&&(this.words[I]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var b=g<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var u;if(this.length>1)u=1;else{b&&(g=-g),n(g<=67108863,"Number is too big");var l=this.words[0]|0;u=l===g?0:l<g?-1:1}return this.negative!==0?-u|0:u},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var b=this.ucmp(g);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var b=0,u=this.length-1;u>=0;u--){var l=this.words[u]|0,w=g.words[u]|0;if(l!==w){l<w?b=-1:l>w&&(b=1);break}}return b},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new j(g)},s.prototype.toRed=function(g){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return n(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return n(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var F={k256:null,p224:null,p192:null,p25519:null};function P(N,g){this.name=N,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},P.prototype.ireduce=function(g){var b=g,u;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),u=b.bitLength();while(u>this.n);var l=u<this.n?-1:b.ucmp(this.p);return l===0?(b.words[0]=0,b.length=1):l>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},P.prototype.split=function(g,b){g.iushrn(this.n,0,b)},P.prototype.imulK=function(g){return g.imul(this.k)};function k(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,P),k.prototype.split=function(g,b){for(var u=4194303,l=Math.min(g.length,9),w=0;w<l;w++)b.words[w]=g.words[w];if(b.length=l,g.length<=9){g.words[0]=0,g.length=1;return}var I=g.words[9];for(b.words[b.length++]=I&u,w=10;w<g.length;w++){var B=g.words[w]|0;g.words[w-10]=(B&u)<<4|I>>>22,I=B}I>>>=22,g.words[w-10]=I,I===0&&g.length>10?g.length-=10:g.length-=9},k.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var b=0,u=0;u<g.length;u++){var l=g.words[u]|0;b+=l*977,g.words[u]=b&67108863,b=l*64+(b/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function L(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(L,P);function m(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(m,P);function T(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(T,P),T.prototype.imulK=function(g){for(var b=0,u=0;u<g.length;u++){var l=(g.words[u]|0)*19+b,w=l&67108863;l>>>=26,g.words[u]=w,b=l}return b!==0&&(g.words[g.length++]=b),g},s._prime=function(g){if(F[g])return F[g];var b;if(g==="k256")b=new k;else if(g==="p224")b=new L;else if(g==="p192")b=new m;else if(g==="p25519")b=new T;else throw new Error("Unknown prime "+g);return F[g]=b,b};function j(N){if(typeof N=="string"){var g=s._prime(N);this.m=g.p,this.prime=g}else n(N.gtn(1),"modulus must be greater than 1"),this.m=N,this.prime=null}j.prototype._verify1=function(g){n(g.negative===0,"red works only with positives"),n(g.red,"red works only with red numbers")},j.prototype._verify2=function(g,b){n((g.negative|b.negative)===0,"red works only with positives"),n(g.red&&g.red===b.red,"red works only with red numbers")},j.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},j.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},j.prototype.add=function(g,b){this._verify2(g,b);var u=g.add(b);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},j.prototype.iadd=function(g,b){this._verify2(g,b);var u=g.iadd(b);return u.cmp(this.m)>=0&&u.isub(this.m),u},j.prototype.sub=function(g,b){this._verify2(g,b);var u=g.sub(b);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},j.prototype.isub=function(g,b){this._verify2(g,b);var u=g.isub(b);return u.cmpn(0)<0&&u.iadd(this.m),u},j.prototype.shl=function(g,b){return this._verify1(g),this.imod(g.ushln(b))},j.prototype.imul=function(g,b){return this._verify2(g,b),this.imod(g.imul(b))},j.prototype.mul=function(g,b){return this._verify2(g,b),this.imod(g.mul(b))},j.prototype.isqr=function(g){return this.imul(g,g.clone())},j.prototype.sqr=function(g){return this.mul(g,g)},j.prototype.sqrt=function(g){if(g.isZero())return g.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var u=this.m.add(new s(1)).iushrn(2);return this.pow(g,u)}for(var l=this.m.subn(1),w=0;!l.isZero()&&l.andln(1)===0;)w++,l.iushrn(1);n(!l.isZero());var I=new s(1).toRed(this),B=I.redNeg(),C=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,C).cmp(B)!==0;)y.redIAdd(B);for(var E=this.pow(y,l),_=this.pow(g,l.addn(1).iushrn(1)),$=this.pow(g,l),V=w;$.cmp(I)!==0;){for(var R=$,W=0;R.cmp(I)!==0;W++)R=R.redSqr();n(W<V);var z=this.pow(E,new s(1).iushln(V-W-1));_=_.redMul(z),E=z.redSqr(),$=$.redMul(E),V=W}return _},j.prototype.invm=function(g){var b=g._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},j.prototype.pow=function(g,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return g.clone();var u=4,l=new Array(1<<u);l[0]=new s(1).toRed(this),l[1]=g;for(var w=2;w<l.length;w++)l[w]=this.mul(l[w-1],g);var I=l[0],B=0,C=0,y=b.bitLength()%26;for(y===0&&(y=26),w=b.length-1;w>=0;w--){for(var E=b.words[w],_=y-1;_>=0;_--){var $=E>>_&1;if(I!==l[0]&&(I=this.sqr(I)),$===0&&B===0){C=0;continue}B<<=1,B|=$,C++,!(C!==u&&(w!==0||_!==0))&&(I=this.mul(I,l[B]),C=0,B=0)}y=26}return I},j.prototype.convertTo=function(g){var b=g.umod(this.m);return b===g?b.clone():b},j.prototype.convertFrom=function(g){var b=g.clone();return b.red=null,b},s.mont=function(g){return new U(g)};function U(N){j.call(this,N),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(U,j),U.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},U.prototype.convertFrom=function(g){var b=this.imod(g.mul(this.rinv));return b.red=null,b},U.prototype.imul=function(g,b){if(g.isZero()||b.isZero())return g.words[0]=0,g.length=1,g;var u=g.imul(b),l=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=u.isub(l).iushrn(this.shift),I=w;return w.cmp(this.m)>=0?I=w.isub(this.m):w.cmpn(0)<0&&(I=w.iadd(this.m)),I._forceRed(this)},U.prototype.mul=function(g,b){if(g.isZero()||b.isZero())return new s(0)._forceRed(this);var u=g.mul(b),l=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=u.isub(l).iushrn(this.shift),I=w;return w.cmp(this.m)>=0?I=w.isub(this.m):w.cmpn(0)<0&&(I=w.iadd(this.m)),I._forceRed(this)},U.prototype.invm=function(g){var b=this.imod(g._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,Le)})(zh);var Xn=zh.exports,Uh={};(function(t){var e=t;function r(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var f=0;f<s.length;f++)o[f]=s[f]|0;return o}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var f=0;f<s.length;f+=2)o.push(parseInt(s[f]+s[f+1],16))}else for(var f=0;f<s.length;f++){var c=s.charCodeAt(f),h=c>>8,d=c&255;h?o.push(h,d):o.push(d)}return o}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var a="",o=0;o<s.length;o++)a+=n(s[o].toString(16));return a}e.toHex=i,e.encode=function(a,o){return o==="hex"?i(a):a}})(Uh);(function(t){var e=t,r=Xn,n=es,i=Uh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(h,d,p){var v=new Array(Math.max(h.bitLength(),p)+1),x;for(x=0;x<v.length;x+=1)v[x]=0;var D=1<<d+1,S=h.clone();for(x=0;x<v.length;x++){var O,A=S.andln(D-1);S.isOdd()?(A>(D>>1)-1?O=(D>>1)-A:O=A,S.isubn(O)):O=0,v[x]=O,S.iushrn(1)}return v}e.getNAF=s;function a(h,d){var p=[[],[]];h=h.clone(),d=d.clone();for(var v=0,x=0,D;h.cmpn(-v)>0||d.cmpn(-x)>0;){var S=h.andln(3)+v&3,O=d.andln(3)+x&3;S===3&&(S=-1),O===3&&(O=-1);var A;S&1?(D=h.andln(7)+v&7,(D===3||D===5)&&O===2?A=-S:A=S):A=0,p[0].push(A);var F;O&1?(D=d.andln(7)+x&7,(D===3||D===5)&&S===2?F=-O:F=O):F=0,p[1].push(F),2*v===A+1&&(v=1-v),2*x===F+1&&(x=1-x),h.iushrn(1),d.iushrn(1)}return p}e.getJSF=a;function o(h,d,p){var v="_"+d;h.prototype[d]=function(){return this[v]!==void 0?this[v]:this[v]=p.call(this)}}e.cachedProperty=o;function f(h){return typeof h=="string"?e.toArray(h,"hex"):h}e.parseBytes=f;function c(h){return new r(h,"hex","le")}e.intFromLE=c})(_r);var jh={exports:{}},Xc;jh.exports=function(e){return Xc||(Xc=new ai(null)),Xc.generate(e)};function ai(t){this.rand=t}jh.exports.Rand=ai;ai.prototype.generate=function(e){return this._rand(e)};ai.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ai.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ai.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ai.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Jl=so;if(typeof Jl.randomBytes!="function")throw new Error("Not supported");ai.prototype._rand=function(e){return Jl.randomBytes(e)}}catch{}var n2=jh.exports,Hh={},Mi=Xn,ho=_r,f0=ho.getNAF,AA=ho.getJSF,u0=ho.assert;function xi(t,e){this.type=t,this.p=new Mi(e.p,16),this.red=e.prime?Mi.red(e.prime):Mi.mont(this.p),this.zero=new Mi(0).toRed(this.red),this.one=new Mi(1).toRed(this.red),this.two=new Mi(2).toRed(this.red),this.n=e.n&&new Mi(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ec=xi;xi.prototype.point=function(){throw new Error("Not implemented")};xi.prototype.validate=function(){throw new Error("Not implemented")};xi.prototype._fixedNafMul=function(e,r){u0(e.precomputed);var n=e._getDoubles(),i=f0(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}for(var h=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=s;p>0;p--){for(o=0;o<a.length;o++)f=a[o],f===p?d=d.mixedAdd(n.points[o]):f===-p&&(d=d.mixedAdd(n.points[o].neg()));h=h.add(d)}return h.toP()};xi.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=f0(r,n,this._bitLength),o=this.jpoint(null,null,null),f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0&&c++,o=o.dblp(c),f<0)break;var h=a[f];u0(h!==0),e.type==="affine"?h>0?o=o.mixedAdd(s[h-1>>1]):o=o.mixedAdd(s[-h-1>>1].neg()):h>0?o=o.add(s[h-1>>1]):o=o.add(s[-h-1>>1].neg())}return e.type==="affine"?o.toP():o};xi.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,f=this._wnafT3,c=0,h,d,p;for(h=0;h<i;h++){p=r[h];var v=p._getNAFPoints(e);a[h]=v.wnd,o[h]=v.points}for(h=i-1;h>=1;h-=2){var x=h-1,D=h;if(a[x]!==1||a[D]!==1){f[x]=f0(n[x],a[x],this._bitLength),f[D]=f0(n[D],a[D],this._bitLength),c=Math.max(f[x].length,c),c=Math.max(f[D].length,c);continue}var S=[r[x],null,null,r[D]];r[x].y.cmp(r[D].y)===0?(S[1]=r[x].add(r[D]),S[2]=r[x].toJ().mixedAdd(r[D].neg())):r[x].y.cmp(r[D].y.redNeg())===0?(S[1]=r[x].toJ().mixedAdd(r[D]),S[2]=r[x].add(r[D].neg())):(S[1]=r[x].toJ().mixedAdd(r[D]),S[2]=r[x].toJ().mixedAdd(r[D].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],A=AA(n[x],n[D]);for(c=Math.max(A[0].length,c),f[x]=new Array(c),f[D]=new Array(c),d=0;d<c;d++){var F=A[0][d]|0,P=A[1][d]|0;f[x][d]=O[(F+1)*3+(P+1)],f[D][d]=0,o[x]=S}}var k=this.jpoint(null,null,null),L=this._wnafT4;for(h=c;h>=0;h--){for(var m=0;h>=0;){var T=!0;for(d=0;d<i;d++)L[d]=f[d][h]|0,L[d]!==0&&(T=!1);if(!T)break;m++,h--}if(h>=0&&m++,k=k.dblp(m),h<0)break;for(d=0;d<i;d++){var j=L[d];j!==0&&(j>0?p=o[d][j-1>>1]:j<0&&(p=o[d][-j-1>>1].neg()),p.type==="affine"?k=k.mixedAdd(p):k=k.add(p))}}for(h=0;h<i;h++)o[h]=null;return s?k:k.toP()};function Tr(t,e){this.curve=t,this.type=e,this.precomputed=null}xi.BasePoint=Tr;Tr.prototype.eq=function(){throw new Error("Not implemented")};Tr.prototype.validate=function(){return this.curve.validate(this)};xi.prototype.decodePoint=function(e,r){e=ho.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?u0(e[e.length-1]%2===0):e[0]===7&&u0(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Tr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Tr.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Tr.prototype.encode=function(e,r){return ho.encode(this._encode(r),e)};Tr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Tr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Tr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Tr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Tr.prototype._getBeta=function(){return null};Tr.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var SA=_r,mt=Xn,Kh=Z0,Vs=ec,DA=SA.assert;function Nr(t){Vs.call(this,"short",t),this.a=new mt(t.a,16).toRed(this.red),this.b=new mt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Kh(Nr,Vs);var MA=Nr;Nr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new mt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new mt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],DA(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new mt(o.a,16),b:new mt(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};Nr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:mt.mont(e),n=new mt(2).toRed(r).redInvm(),i=n.redNeg(),s=new mt(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};Nr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new mt(1),a=new mt(0),o=new mt(0),f=new mt(1),c,h,d,p,v,x,D,S=0,O,A;n.cmpn(0)!==0;){var F=i.div(n);O=i.sub(F.mul(n)),A=o.sub(F.mul(s));var P=f.sub(F.mul(a));if(!d&&O.cmp(r)<0)c=D.neg(),h=s,d=O.neg(),p=A;else if(d&&++S===2)break;D=O,i=n,n=O,o=s,s=A,f=a,a=P}v=O.neg(),x=A;var k=d.sqr().add(p.sqr()),L=v.sqr().add(x.sqr());return L.cmp(k)>=0&&(v=c,x=h),d.negative&&(d=d.neg(),p=p.neg()),v.negative&&(v=v.neg(),x=x.neg()),[{a:d,b:p},{a:v,b:x}]};Nr.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),f=a.mul(i.a),c=s.mul(n.b),h=a.mul(i.b),d=e.sub(o).sub(f),p=c.add(h).neg();return{k1:d,k2:p}};Nr.prototype.pointFromX=function(e,r){e=new mt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Nr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Nr.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),f=e[a],c=f._getBeta();o.k1.negative&&(o.k1.ineg(),f=f.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[a*2]=f,i[a*2+1]=c,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var h=this._wnafMulAdd(1,i,s,a*2,n),d=0;d<a*2;d++)i[d]=null,s[d]=null;return h};function zt(t,e,r,n){Vs.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new mt(e,16),this.y=new mt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Kh(zt,Vs.BasePoint);Nr.prototype.point=function(e,r,n){return new zt(this,e,r,n)};Nr.prototype.pointFromJSON=function(e,r){return zt.fromJSON(this,e,r)};zt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};zt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};zt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};zt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};zt.prototype.isInfinity=function(){return this.inf};zt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};zt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};zt.prototype.getX=function(){return this.x.fromRed()};zt.prototype.getY=function(){return this.y.fromRed()};zt.prototype.mul=function(e){return e=new mt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};zt.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};zt.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};zt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};zt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};zt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Gt(t,e,r,n){Vs.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new mt(0)):(this.x=new mt(e,16),this.y=new mt(r,16),this.z=new mt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Kh(Gt,Vs.BasePoint);Nr.prototype.jpoint=function(e,r,n){return new Gt(this,e,r,n)};Gt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Gt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Gt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),f=i.redSub(s),c=a.redSub(o);if(f.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=f.redSqr(),d=h.redMul(f),p=i.redMul(h),v=c.redSqr().redIAdd(d).redISub(p).redISub(p),x=c.redMul(p.redISub(v)).redISub(a.redMul(d)),D=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(v,x,D)};Gt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),f=s.redSub(a);if(o.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),h=c.redMul(o),d=n.redMul(c),p=f.redSqr().redIAdd(h).redISub(d).redISub(d),v=f.redMul(d.redISub(p)).redISub(s.redMul(h)),x=this.z.redMul(o);return this.curve.jpoint(p,v,x)};Gt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,f=this.z,c=f.redSqr().redSqr(),h=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),p=h.redSqr(),v=p.redSqr(),x=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(c)),D=a.redMul(p),S=x.redSqr().redISub(D.redAdd(D)),O=D.redISub(S),A=x.redMul(O);A=A.redIAdd(A).redISub(v);var F=h.redMul(f);r+1<e&&(c=c.redMul(v)),a=S,f=F,h=A}return this.curve.jpoint(a,h.redMul(s),f)};Gt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Gt.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i),c=f.redSqr().redISub(o).redISub(o),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),e=c,r=f.redMul(o.redISub(c)).redISub(h),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),p=this.y.redSqr(),v=p.redSqr(),x=this.x.redAdd(p).redSqr().redISub(d).redISub(v);x=x.redIAdd(x);var D=d.redAdd(d).redIAdd(d),S=D.redSqr(),O=v.redIAdd(v);O=O.redIAdd(O),O=O.redIAdd(O),e=S.redISub(x).redISub(x),r=D.redMul(x.redISub(e)).redISub(O),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Gt.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=f.redSqr().redISub(o).redISub(o);e=c;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=f.redMul(o.redISub(c)).redISub(h),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),p=this.y.redSqr(),v=this.x.redMul(p),x=this.x.redSub(d).redMul(this.x.redAdd(d));x=x.redAdd(x).redIAdd(x);var D=v.redIAdd(v);D=D.redIAdd(D);var S=D.redAdd(D);e=x.redSqr().redISub(S),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(d);var O=p.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=x.redMul(D.redISub(e)).redISub(O)}return this.curve.jpoint(e,r,n)};Gt.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),f=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var h=c.redMul(o),d=f.redSqr().redISub(h.redAdd(h)),p=h.redISub(d),v=o.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var x=f.redMul(p).redISub(v),D=n.redAdd(n).redMul(i);return this.curve.jpoint(d,x,D)};Gt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var f=o.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var h=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c),d=r.redMul(h);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.x.redMul(f).redISub(d);p=p.redIAdd(p),p=p.redIAdd(p);var v=this.y.redMul(h.redMul(c.redISub(h)).redISub(o.redMul(f)));v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var x=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(p,v,x)};Gt.prototype.mul=function(e,r){return e=new mt(e,r),this.curve._wnafMul(this,e)};Gt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Gt.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Gt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Gt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var bs=Xn,i2=Z0,tc=ec,CA=_r;function Gs(t){tc.call(this,"mont",t),this.a=new bs(t.a,16).toRed(this.red),this.b=new bs(t.b,16).toRed(this.red),this.i4=new bs(4).toRed(this.red).redInvm(),this.two=new bs(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}i2(Gs,tc);var IA=Gs;Gs.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function kt(t,e,r){tc.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bs(e,16),this.z=new bs(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i2(kt,tc.BasePoint);Gs.prototype.decodePoint=function(e,r){return this.point(CA.toArray(e,r),1)};Gs.prototype.point=function(e,r){return new kt(this,e,r)};Gs.prototype.pointFromJSON=function(e){return kt.fromJSON(this,e)};kt.prototype.precompute=function(){};kt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};kt.fromJSON=function(e,r){return new kt(e,r[0],r[1]||e.one)};kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};kt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};kt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),a=r.redMul(i),o=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};kt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};kt.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z),o=a.redMul(n),f=s.redMul(i),c=r.z.redMul(o.redAdd(f).redSqr()),h=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(c,h)};kt.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--)a[o]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};kt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};kt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};kt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};kt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};kt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var BA=_r,qn=Xn,s2=Z0,rc=ec,PA=BA.assert;function yn(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,rc.call(this,"edwards",t),this.a=new qn(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new qn(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new qn(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),PA(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}s2(yn,rc);var FA=yn;yn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};yn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};yn.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};yn.prototype.pointFromX=function(e,r){e=new qn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(s.redInvm()),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();return(r&&!f||!r&&f)&&(o=o.redNeg()),this.point(e,o)};yn.prototype.pointFromY=function(e,r){e=new qn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==r&&(o=o.redNeg()),this.point(o,e)};yn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function lt(t,e,r,n,i){rc.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new qn(e,16),this.y=new qn(r,16),this.z=n?new qn(n,16):this.curve.one,this.t=i&&new qn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s2(lt,rc.BasePoint);yn.prototype.pointFromJSON=function(e){return lt.fromJSON(this,e)};yn.prototype.point=function(e,r,n,i){return new lt(this,e,r,n,i)};lt.fromJSON=function(e,r){return new lt(e,r[0],r[1],r[2])};lt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};lt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};lt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),a=i.redAdd(r),o=a.redSub(n),f=i.redSub(r),c=s.redMul(o),h=a.redMul(f),d=s.redMul(f),p=o.redMul(a);return this.curve.point(c,h,p,d)};lt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,a,o,f,c;if(this.curve.twisted){o=this.curve._mulA(r);var h=o.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(h.redSub(this.curve.two)),s=h.redMul(o.redSub(n)),a=h.redSqr().redSub(h).redSub(h)):(f=this.z.redSqr(),c=h.redSub(f).redISub(f),i=e.redSub(r).redISub(n).redMul(c),s=h.redMul(o.redSub(n)),a=h.redMul(c))}else o=r.redAdd(n),f=this.curve._mulC(this.z).redSqr(),c=o.redSub(f).redSub(f),i=this.curve._mulC(e.redISub(o)).redMul(c),s=this.curve._mulC(o).redMul(r.redISub(n)),a=o.redMul(c);return this.curve.point(i,s,a)};lt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};lt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(r),o=s.redSub(i),f=s.redAdd(i),c=n.redAdd(r),h=a.redMul(o),d=f.redMul(c),p=a.redMul(c),v=o.redMul(f);return this.curve.point(h,d,v,p)};lt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(s),o=n.redSub(a),f=n.redAdd(a),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),h=r.redMul(o).redMul(c),d,p;return this.curve.twisted?(d=r.redMul(f).redMul(s.redSub(this.curve._mulA(i))),p=o.redMul(f)):(d=r.redMul(f).redMul(s.redSub(i)),p=this.curve._mulC(o).redMul(f)),this.curve.point(h,d,p)};lt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};lt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};lt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};lt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};lt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};lt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};lt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};lt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};lt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};lt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};lt.prototype.toP=lt.prototype.normalize;lt.prototype.mixedAdd=lt.prototype.add;(function(t){var e=t;e.base=ec,e.short=MA,e.mont=IA,e.edwards=FA})(Hh);var nc={},Yc,Ql;function RA(){return Ql||(Ql=1,Yc={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Yc}(function(t){var e=t,r=co,n=Hh,i=_r,s=i.assert;function a(c){c.type==="short"?this.curve=new n.short(c):c.type==="edwards"?this.curve=new n.edwards(c):this.curve=new n.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(c,h){Object.defineProperty(e,c,{configurable:!0,enumerable:!0,get:function(){var d=new a(h);return Object.defineProperty(e,c,{configurable:!0,enumerable:!0,value:d}),d}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=RA()}catch{f=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})})(nc);var OA=co,Ui=Uh,a2=es;function bi(t){if(!(this instanceof bi))return new bi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ui.toArray(t.entropy,t.entropyEnc||"hex"),r=Ui.toArray(t.nonce,t.nonceEnc||"hex"),n=Ui.toArray(t.pers,t.persEnc||"hex");a2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var TA=bi;bi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};bi.prototype._hmac=function(){return new OA.hmac(this.hash,this.K)};bi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};bi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Ui.toArray(e,r),n=Ui.toArray(n,i),a2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};bi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Ui.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Ui.encode(a,r)};var NA=Xn,$A=_r,Ou=$A.assert;function Qt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var LA=Qt;Qt.fromPublic=function(e,r,n){return r instanceof Qt?r:new Qt(e,{pub:r,pubEnc:n})};Qt.fromPrivate=function(e,r,n){return r instanceof Qt?r:new Qt(e,{priv:r,privEnc:n})};Qt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Qt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Qt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Qt.prototype._importPrivate=function(e,r){this.priv=new NA(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Qt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Ou(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ou(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Qt.prototype.derive=function(e){return e.validate()||Ou(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Qt.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Qt.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};Qt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var h0=Xn,Vh=_r,kA=Vh.assert;function ic(t,e){if(t instanceof ic)return t;this._importDER(t,e)||(kA(t.r&&t.s,"Signature without r or s"),this.r=new h0(t.r,16),this.s=new h0(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var qA=ic;function zA(){this.place=0}function Jc(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function ep(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ic.prototype._importDER=function(e,r){e=Vh.toArray(e,r);var n=new zA;if(e[n.place++]!==48)return!1;var i=Jc(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Jc(e,n);if(s===!1||e[n.place]&128)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=Jc(e,n);if(o===!1||e.length!==o+n.place||e[n.place]&128)return!1;var f=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new h0(a),this.s=new h0(f),this.recoveryParam=null,!0};function Qc(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ic.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=ep(r),n=ep(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Qc(i,r.length),i=i.concat(r),i.push(2),Qc(i,n.length);var s=i.concat(n),a=[48];return Qc(a,s.length),a=a.concat(s),Vh.encode(a,e)};var Vr=Xn,o2=TA,UA=_r,ef=nc,jA=n2,Ri=UA.assert,Gh=LA,sc=qA;function Pr(t){if(!(this instanceof Pr))return new Pr(t);typeof t=="string"&&(Ri(Object.prototype.hasOwnProperty.call(ef,t),"Unknown curve "+t),t=ef[t]),t instanceof ef.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var HA=Pr;Pr.prototype.keyPair=function(e){return new Gh(this,e)};Pr.prototype.keyFromPrivate=function(e,r){return Gh.fromPrivate(this,e,r)};Pr.prototype.keyFromPublic=function(e,r){return Gh.fromPublic(this,e,r)};Pr.prototype.genKeyPair=function(e){e||(e={});for(var r=new o2({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||jA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Vr(2));;){var s=new Vr(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Pr.prototype._truncateToN=function(e,r,n){var i;if(Vr.isBN(e)||typeof e=="number")e=new Vr(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Vr(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Vr(s,16)}typeof n!="number"&&(n=i*8);var a=n-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Pr.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Vr.isBN(e)){Ri(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ri(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Ri((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),Ri(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),o=r.getPrivate().toArray("be",a),f=e.toArray("be",a);Ri(new Vr(f).eq(e),"Can not sign message");for(var c=new o2({hash:this.hash,entropy:o,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),h=this.n.sub(new Vr(1)),d=0;;d++){var p=i.k?i.k(d):new Vr(c.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(h)>=0)){var v=this.g.mul(p);if(!v.isInfinity()){var x=v.getX(),D=x.umod(this.n);if(D.cmpn(0)!==0){var S=p.invm(this.n).mul(D.mul(r.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var O=(v.getY().isOdd()?1:0)|(x.cmp(D)!==0?2:0);return i.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),O^=1),new sc({r:D,s:S,recoveryParam:O})}}}}}};Pr.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new sc(r,"hex");var a=r.r,o=r.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),c=f.mul(e).umod(this.n),h=f.mul(a).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(c,n.getPublic(),h),d.isInfinity()?!1:d.eqXToP(a)):(d=this.g.mulAdd(c,n.getPublic(),h),d.isInfinity()?!1:d.getX().umod(this.n).cmp(a)===0)};Pr.prototype.recoverPubKey=function(t,e,r,n){Ri((3&r)===r,"The recovery param is more than two bits"),e=new sc(e,n);var i=this.n,s=new Vr(t),a=e.r,o=e.s,f=r&1,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),f):a=this.curve.pointFromX(a,f);var h=e.r.invm(i),d=i.sub(s).mul(h).umod(i),p=o.mul(h).umod(i);return this.g.mulAdd(d,a,p)};Pr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new sc(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var lo=_r,c2=lo.assert,tp=lo.parseBytes,Ws=lo.cachedProperty;function Lt(t,e){this.eddsa=t,this._secret=tp(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=tp(e.pub)}Lt.fromPublic=function(e,r){return r instanceof Lt?r:new Lt(e,{pub:r})};Lt.fromSecret=function(e,r){return r instanceof Lt?r:new Lt(e,{secret:r})};Lt.prototype.secret=function(){return this._secret};Ws(Lt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ws(Lt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ws(Lt,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ws(Lt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ws(Lt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ws(Lt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Lt.prototype.sign=function(e){return c2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Lt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Lt.prototype.getSecret=function(e){return c2(this._secret,"KeyPair is public only"),lo.encode(this.secret(),e)};Lt.prototype.getPublic=function(e){return lo.encode(this.pubBytes(),e)};var KA=Lt,VA=Xn,ac=_r,rp=ac.assert,oc=ac.cachedProperty,GA=ac.parseBytes;function rs(t,e){this.eddsa=t,typeof e!="object"&&(e=GA(e)),Array.isArray(e)&&(rp(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),rp(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof VA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}oc(rs,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});oc(rs,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});oc(rs,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});oc(rs,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});rs.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};rs.prototype.toHex=function(){return ac.encode(this.toBytes(),"hex").toUpperCase()};var WA=rs,ZA=co,XA=nc,Rs=_r,YA=Rs.assert,f2=Rs.parseBytes,u2=KA,np=WA;function dr(t){if(YA(t==="ed25519","only tested with ed25519 so far"),!(this instanceof dr))return new dr(t);t=XA[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=ZA.sha512}var JA=dr;dr.prototype.sign=function(e,r){e=f2(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),a=this.encodePoint(s),o=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),f=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};dr.prototype.verify=function(e,r,n){if(e=f2(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),a=this.g.mul(r.S()),o=r.R().add(i.pub().mul(s));return o.eq(a)};dr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Rs.intFromLE(e.digest()).umod(this.curve.n)};dr.prototype.keyFromPublic=function(e){return u2.fromPublic(this,e)};dr.prototype.keyFromSecret=function(e){return u2.fromSecret(this,e)};dr.prototype.makeSignature=function(e){return e instanceof np?e:new np(this,e)};dr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};dr.prototype.decodePoint=function(e){e=Rs.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Rs.intFromLE(n);return this.curve.pointFromY(s,i)};dr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};dr.prototype.decodeInt=function(e){return Rs.intFromLE(e)};dr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=EA.version,e.utils=_r,e.rand=n2,e.curve=Hh,e.curves=nc,e.ec=HA,e.eddsa=JA})(r2);const QA={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var eS={ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\lolo\\AppData\\Roaming","asl.log":"Destination=file",ChocolateyInstall:"C:\\ProgramData\\chocolatey",ChocolateyLastPathUpdate:"133493881718016983",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_2220_HTZDQZXEQIJWQRZM",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"MOBILE-UNIT-LKS",ComSpec:"C:\\WINDOWS\\system32\\cmd.exe",DOTNET_CLI_TELEMETRY_OPTOUT:"1",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\WINDOWS\\notepad.exe",EFC_6828:"1",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\lolo\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",HOME:"C:\\Users\\lolo",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\lolo",INIT_CWD:"C:\\Users\\lolo\\Desktop\\tap3ipfs",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\lolo\\AppData\\Local",LOGONSERVER:"\\\\MOBILE-UNIT-LKS",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Users\\lolo\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\lolo\\AppData\\Local\\npm-cache",npm_config_engine_strict:"true",npm_config_globalconfig:"C:\\Users\\lolo\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\lolo\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\lolo\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\lolo\\Desktop\\tap3ipfs",npm_config_node_gyp:"C:\\Users\\lolo\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_npm_version:"10.9.2",npm_config_prefix:"C:\\Users\\lolo\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\lolo\\.npmrc",npm_config_user_agent:"npm/10.9.2 node/v20.12.0 win32 x64 workspaces/false",npm_execpath:"C:\\Users\\lolo\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"vite build && npm run package",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\lolo\\Desktop\\tap3ipfs\\package.json",npm_package_name:"tap3ipfs",npm_package_version:"0.0.1",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\lolo\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"6",OneDrive:"C:\\Users\\lolo\\OneDrive",OneDriveConsumer:"C:\\Users\\lolo\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\lolo\\Desktop\\tap3ipfs\\node_modules\\.bin;C:\\Users\\lolo\\Desktop\\node_modules\\.bin;C:\\Users\\lolo\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Users\\lolo\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;C:\\ProgramData\\chocolatey\\bin;;C:\\Program Files\\WebStorage Drive\\1.2.0.1\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\nodejs\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Users\\lolo\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lolo\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lolo\\.cargo\\bin;C:\\Users\\lolo\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lolo\\.dotnet\\tools;C:\\Users\\lolo\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lolo\\AppData\\Roaming\\npm;C:\\Users\\lolo\\AppData\\Local\\GitHubDesktop\\bin;;c:\\Users\\lolo\\AppData\\Roaming\\Code\\User\\globalStorage\\github.copilot-chat\\debugCommand",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 154 Stepping 4, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"9a04",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\lolo\\Documents\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\WINDOWS",TEMP:"C:\\Users\\lolo\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.96.2",TMP:"C:\\Users\\lolo\\AppData\\Local\\Temp",USERDOMAIN:"MOBILE-UNIT-LKS",USERDOMAIN_ROAMINGPROFILE:"MOBILE-UNIT-LKS",USERNAME:"lolo",USERPROFILE:"C:\\Users\\lolo",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\lolo\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\lolo\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-b6fee01ac0-sock",VSCODE_INJECTION:"1",VSCODE_NONCE:"64dcf5d3-ce4f-4c9e-b00d-edc9086eef4d",VSCODE_STABLE:"1",windir:"C:\\WINDOWS",ZES_ENABLE_SYSMAN:"1"};const tS=":";function Uo(t){const[e,r]=t.split(tS);return{namespace:e,reference:r}}function h2(t,e){return t.includes(":")?[t]:e.chains||[]}var rS=Object.defineProperty,ip=Object.getOwnPropertySymbols,nS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,sp=(t,e,r)=>e in t?rS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ap=(t,e)=>{for(var r in e||(e={}))nS.call(e,r)&&sp(t,r,e[r]);if(ip)for(var r of ip(e))iS.call(e,r)&&sp(t,r,e[r]);return t};const sS="ReactNative",yr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},aS="js";function d0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function wi(){return!oo()&&!!Ih()&&navigator.product===sS}function oS(){return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function cS(){return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function po(){return!d0()&&!!Ih()&&!!oo()}function bo(){return wi()?yr.reactNative:d0()?yr.node:po()?yr.browser:yr.unknown}function op(){var t;try{return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function fS(t,e){let r=za.parse(t);return r=ap(ap({},r),e),t=za.stringify(r),t}function d2(){return Ev()||{name:"",description:"",url:"",icons:[""]}}function uS(){if(bo()===yr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=x_();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function hS(){var t;const e=bo();return e===yr.browser?[e,((t=_v())==null?void 0:t.host)||"unknown"].join(":"):e}function l2(t,e,r){const n=uS(),i=hS();return[[t,e].join("-"),[aS,r].join("-"),n,i].join("/")}function dS({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:a,bundleId:o,packageName:f}){const c=r.split("?"),h=l2(t,e,n),d={auth:i,ua:h,projectId:s,useOnCloseEvent:a||void 0,packageName:f||void 0,bundleId:o||void 0},p=fS(c[1]||"",d);return c[0]+"?"+p}function Ti(t,e){return t.filter(r=>e.includes(r)).length===t.length}function p2(t){return Object.fromEntries(t.entries())}function b2(t){return new Map(Object.entries(t))}function Bi(t=ae.FIVE_MINUTES,e){const r=ae.toMiliseconds(t||ae.FIVE_MINUTES);let n,i,s,a;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o),a=Promise.resolve(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,f)=>{if(a)return o(a);s=setTimeout(()=>{const c=new Error(e);a=Promise.reject(c),f(c)},r),n=o,i=f})}}function oi(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const a=await t;n(a)}catch(a){i(a)}clearTimeout(s)})}function g2(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function lS(t){return g2("topic",t)}function pS(t){return g2("id",t)}function v2(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Dt(t,e){return ae.fromMiliseconds(Date.now()+ae.toMiliseconds(t))}function si(t){return Date.now()>=ae.toMiliseconds(t)}function tt(t,e){return`${t}${e?`:${e}`:""}`}function bS(t=[],e=[]){return[...new Set([...t,...e])]}async function gS({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i?.href;if(typeof s!="string")return;const a=vS(s,t,e),o=bo();if(o===yr.browser){if(!((n=oo())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}a.startsWith("https://")||a.startsWith("http://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,mS()?"_blank":"_self","noreferrer noopener")}else o===yr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(a)}catch(i){console.error(i)}}function vS(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${xS(n,!0)}`}else i=`${i}/wc?${n}`;return i}async function yS(t,e){let r="";try{if(po()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function cp(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function fp(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Wh(){return typeof process<"u"&&eS.IS_VITEST==="true"}function mS(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function xS(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function y2(t){return Buffer.from(t,"base64").toString("utf-8")}function wS(t){return new Promise(e=>setTimeout(e,t))}const _S="https://rpc.walletconnect.org/v1";async function ES(t,e,r,n,i,s){switch(r.t){case"eip191":return AS(t,e,r.s);case"eip1271":return await SS(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function AS(t,e,r){return ZE(Cv(e),r).toLowerCase()===t.toLowerCase()}async function SS(t,e,r,n,i,s){const a=Uo(n);if(!a.namespace||!a.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",h=r.substring(2),d=Cv(e).substring(2),p=o+d+f+c+h,v=await fetch(`${s||_S}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:DS(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:p},"latest"]})}),{result:x}=await v.json();return x?x.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function DS(){return Date.now()+Math.floor(Math.random()*1e3)}var MS=Object.defineProperty,CS=Object.defineProperties,IS=Object.getOwnPropertyDescriptors,up=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,PS=Object.prototype.propertyIsEnumerable,hp=(t,e,r)=>e in t?MS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,FS=(t,e)=>{for(var r in e||(e={}))BS.call(e,r)&&hp(t,r,e[r]);if(up)for(var r of up(e))PS.call(e,r)&&hp(t,r,e[r]);return t},RS=(t,e)=>CS(t,IS(e));const OS="did:pkh:",Zh=t=>t?.split(":"),TS=t=>{const e=t&&Zh(t);if(e)return t.includes(OS)?e[3]:e[1]},Tu=t=>{const e=t&&Zh(t);if(e)return e[2]+":"+e[3]},l0=t=>{const e=t&&Zh(t);if(e)return e.pop()};async function dp(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=m2(i,i.iss),a=l0(i.iss);return await ES(a,s,n,Tu(i.iss),r)}const m2=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=l0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,o=`Chain ID: ${TS(e)}`,f=`Nonce: ${t.nonce}`,c=`Issued At: ${t.iat}`,h=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,p=t.requestId?`Request ID: ${t.requestId}`:void 0,v=t.resources?`Resources:${t.resources.map(D=>`
- ${D}`).join("")}`:void 0,x=jo(t.resources);if(x){const D=Ua(x);i=HS(i,D)}return[r,n,"",i,"",s,a,o,f,c,h,d,p,v].filter(D=>D!=null).join(`
`)};function NS(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function $S(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Wi(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(a=>{if(typeof a!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${a}`)})})})}function LS(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:kS(e,r,n)}}}function kS(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function x2(t){return Wi(t),`urn:recap:${NS(t).replace(/=/g,"")}`}function Ua(t){const e=$S(t.replace("urn:recap:",""));return Wi(e),e}function qS(t,e,r){const n=LS(t,e,r);return x2(n)}function zS(t){return t&&t.includes("urn:recap:")}function US(t,e){const r=Ua(t),n=Ua(e),i=jS(r,n);return x2(i)}function jS(t,e){Wi(t),Wi(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,a;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((a=e.att)==null?void 0:a[i])||{})).sort((o,f)=>o.localeCompare(f)).forEach(o=>{var f,c;n.att[i]=RS(FS({},n.att[i]),{[o]:((f=t.att[i])==null?void 0:f[o])||((c=e.att[i])==null?void 0:c[o])})})}),n}function HS(t="",e){Wi(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(o=>{const f=Object.keys(e.att[o]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));f.sort((d,p)=>d.action.localeCompare(p.action));const c={};f.forEach(d=>{c[d.ability]||(c[d.ability]=[]),c[d.ability].push(d.action)});const h=Object.keys(c).map(d=>(i++,`(${i}) '${d}': '${c[d].join("', '")}' for '${o}'.`));n.push(h.join(", ").replace(".,","."))});const s=n.join(" "),a=`${r}${s}`;return`${t?t+" ":""}${a}`}function lp(t){var e;const r=Ua(t);Wi(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function pp(t){const e=Ua(t);Wi(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function jo(t){if(!t)return;const e=t?.[t.length-1];return zS(e)?e:void 0}const w2="base10",tr="base16",ci="base64pad",ca="base64url",go="utf8",_2=0,Un=1,vo=2,KS=0,bp=1,ya=12,Xh=32;function VS(){const t=qh.generateKeyPair();return{privateKey:$t(t.secretKey,tr),publicKey:$t(t.publicKey,tr)}}function Nu(){const t=vi.randomBytes(Xh);return $t(t,tr)}function GS(t,e){const r=qh.sharedKey(Tt(t,tr),Tt(e,tr),!0),n=new cA(uo.SHA256,r).expand(Xh);return $t(n,tr)}function Ho(t){const e=uo.hash(Tt(t,tr));return $t(e,tr)}function Ln(t){const e=uo.hash(Tt(t,go));return $t(e,tr)}function E2(t){return Tt(`${t}`,w2)}function Zi(t){return Number($t(t,w2))}function WS(t){const e=E2(typeof t.type<"u"?t.type:_2);if(Zi(e)===Un&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Tt(t.senderPublicKey,tr):void 0,n=typeof t.iv<"u"?Tt(t.iv,tr):vi.randomBytes(ya),i=new Lh.ChaCha20Poly1305(Tt(t.symKey,tr)).seal(n,Tt(t.message,go));return A2({type:e,sealed:i,iv:n,senderPublicKey:r,encoding:t.encoding})}function ZS(t,e){const r=E2(vo),n=vi.randomBytes(ya),i=Tt(t,go);return A2({type:r,sealed:i,iv:n,encoding:e})}function XS(t){const e=new Lh.ChaCha20Poly1305(Tt(t.symKey,tr)),{sealed:r,iv:n}=ja({encoded:t.encoded,encoding:t?.encoding}),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return $t(i,go)}function YS(t,e){const{sealed:r}=ja({encoded:t,encoding:e});return $t(r,go)}function A2(t){const{encoding:e=ci}=t;if(Zi(t.type)===vo)return $t(Lo([t.type,t.sealed]),e);if(Zi(t.type)===Un){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return $t(Lo([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return $t(Lo([t.type,t.iv,t.sealed]),e)}function ja(t){const{encoded:e,encoding:r=ci}=t,n=Tt(e,r),i=n.slice(KS,bp),s=bp;if(Zi(i)===Un){const c=s+Xh,h=c+ya,d=n.slice(s,c),p=n.slice(c,h),v=n.slice(h);return{type:i,sealed:v,iv:p,senderPublicKey:d}}if(Zi(i)===vo){const c=n.slice(s),h=vi.randomBytes(ya);return{type:i,sealed:c,iv:h}}const a=s+ya,o=n.slice(s,a),f=n.slice(a);return{type:i,sealed:f,iv:o}}function JS(t,e){const r=ja({encoded:t,encoding:e?.encoding});return S2({type:Zi(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?$t(r.senderPublicKey,tr):void 0,receiverPublicKey:e?.receiverPublicKey})}function S2(t){const e=t?.type||_2;if(e===Un){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function gp(t){return t.type===Un&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function vp(t){return t.type===vo}function QS(t){return new r2.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function eD(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function tD(t){return Buffer.from(eD(t),"base64")}function rD(t,e){const[r,n,i]=t.split("."),s=tD(i);if(s.length!==64)throw new Error("Invalid signature length");const a=s.slice(0,32).toString("hex"),o=s.slice(32,64).toString("hex"),f=`${r}.${n}`,c=new uo.SHA256().update(Buffer.from(f)).digest(),h=QS(e),d=Buffer.from(c).toString("hex");if(!h.verify(d,{r:a,s:o}))throw new Error("Invalid signature");return Su(t).payload}const nD="irn";function p0(t){return t?.relay||{protocol:nD}}function ga(t){const e=QA[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var iD=Object.defineProperty,sD=Object.defineProperties,aD=Object.getOwnPropertyDescriptors,yp=Object.getOwnPropertySymbols,oD=Object.prototype.hasOwnProperty,cD=Object.prototype.propertyIsEnumerable,mp=(t,e,r)=>e in t?iD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xp=(t,e)=>{for(var r in e||(e={}))oD.call(e,r)&&mp(t,r,e[r]);if(yp)for(var r of yp(e))cD.call(e,r)&&mp(t,r,e[r]);return t},fD=(t,e)=>sD(t,aD(e));function uD(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),a=t[i];r[s]=a}}),r}function wp(t){if(!t.includes("wc:")){const f=y2(t);f!=null&&f.includes("wc:")&&(t=f)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",a=za.parse(s),o=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:hD(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:uD(a),methods:o,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function hD(t){return t.startsWith("//")?t.substring(2):t}function dD(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function _p(t){return`${t.protocol}:${t.topic}@${t.version}?`+za.stringify(xp(fD(xp({symKey:t.symKey},dD(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function Ro(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Zs(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function lD(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Zs(r.accounts))}),e}function pD(t,e){const r=[];return Object.values(t).forEach(n=>{Zs(n.accounts).includes(e)&&r.push(...n.methods)}),r}function bD(t,e){const r=[];return Object.values(t).forEach(n=>{Zs(n.accounts).includes(e)&&r.push(...n.events)}),r}function gD(t){const e={};return t?.forEach(r=>{const[n,i]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[]}),e[n].accounts.push(r),e[n].chains.push(`${n}:${i}`)}),e}function Ep(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=gD(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=bS(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const vD={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},yD={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function oe(t,e){const{message:r,code:n}=yD[t];return{message:e?`${r} ${e}`:r,code:n}}function ht(t,e){const{message:r,code:n}=vD[t];return{message:e?`${r} ${e}`:r,code:n}}function cc(t,e){return!!Array.isArray(t)}function b0(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function er(t){return typeof t>"u"}function wt(t,e){return e&&er(t)?!0:typeof t=="string"&&!!t.trim().length}function Yh(t,e){return e&&er(t)?!0:typeof t=="number"&&!isNaN(t)}function mD(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Ti(i,n)?(n.forEach(a=>{const{accounts:o,methods:f,events:c}=t.namespaces[a],h=Zs(o),d=r[a];(!Ti(h2(a,d),h)||!Ti(d.methods,f)||!Ti(d.events,c))&&(s=!1)}),s):!1}function g0(t){return wt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function xD(t){if(wt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&g0(r)}}return!1}function wD(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(wt(t,!1)){if(e(t))return!0;const r=y2(t);return e(r)}}catch{}return!1}function _D(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function ED(t){return t?.topic}function AD(t,e){let r=null;return wt(t?.publicKey,!1)||(r=oe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Ap(t){let e=!0;return cc(t)?t.length&&(e=t.every(r=>wt(r,!1))):e=!1,e}function SD(t,e,r){let n=null;return cc(e)&&e.length?e.forEach(i=>{n||g0(i)||(n=ht("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):g0(t)||(n=ht("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function DD(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const a=SD(i,h2(i,s),`${e} ${r}`);a&&(n=a)}),n}function MD(t,e){let r=null;return cc(t)?t.forEach(n=>{r||xD(n)||(r=ht("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ht("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function CD(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=MD(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function ID(t,e){let r=null;return Ap(t?.methods)?Ap(t?.events)||(r=ht("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ht("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function D2(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ID(n,`${e}, namespace`);i&&(r=i)}),r}function BD(t,e,r){let n=null;if(t&&b0(t)){const i=D2(t,e);i&&(n=i);const s=DD(t,e,r);s&&(n=s)}else n=oe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function tf(t,e){let r=null;if(t&&b0(t)){const n=D2(t,e);n&&(r=n);const i=CD(t,e);i&&(r=i)}else r=oe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function M2(t){return wt(t.protocol,!0)}function PD(t,e){let r=!1;return t?t&&cc(t)&&t.length&&t.forEach(n=>{r=M2(n)}):r=!0,r}function FD(t){return typeof t=="number"}function cr(t){return typeof t<"u"&&typeof t!==null}function RD(t){return!(!t||typeof t!="object"||!t.code||!Yh(t.code,!1)||!t.message||!wt(t.message,!1))}function OD(t){return!(er(t)||!wt(t.method,!1))}function TD(t){return!(er(t)||er(t.result)&&er(t.error)||!Yh(t.id,!1)||!wt(t.jsonrpc,!1))}function ND(t){return!(er(t)||!wt(t.name,!1))}function Sp(t,e){return!(!g0(e)||!lD(t).includes(e))}function $D(t,e,r){return wt(r,!1)?pD(t,e).includes(r):!1}function LD(t,e,r){return wt(r,!1)?bD(t,e).includes(r):!1}function Dp(t,e,r){let n=null;const i=kD(t),s=qD(e),a=Object.keys(i),o=Object.keys(s),f=Mp(Object.keys(t)),c=Mp(Object.keys(e)),h=f.filter(d=>!c.includes(d));return h.length&&(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),Ti(a,o)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const p=Zs(e[d].accounts);p.includes(d)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${p.toString()}`))}),a.forEach(d=>{n||(Ti(i[d].methods,s[d].methods)?Ti(i[d].events,s[d].events)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function kD(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Mp(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function qD(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:Zs(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function zD(t,e){return Yh(t,!1)&&t<=e.max&&t>=e.min}function Cp(){const t=bo();return new Promise(e=>{switch(t){case yr.browser:e(UD());break;case yr.reactNative:e(jD());break;case yr.node:e(HD());break;default:e(!0)}})}function UD(){return po()&&navigator?.onLine}async function jD(){return wi()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function HD(){return!0}function KD(t){switch(bo()){case yr.browser:VD(t);break;case yr.reactNative:GD(t);break}}function VD(t){!wi()&&po()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function GD(t){wi()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const rf={};class fa{static get(e){return rf[e]}static set(e,r){rf[e]=r}static delete(e){delete rf[e]}}const WD="PARSE_ERROR",ZD="INVALID_REQUEST",XD="METHOD_NOT_FOUND",YD="INVALID_PARAMS",C2="INTERNAL_ERROR",Jh="SERVER_ERROR",JD=[-32700,-32600,-32601,-32602,-32603],ma={[WD]:{code:-32700,message:"Parse error"},[ZD]:{code:-32600,message:"Invalid Request"},[XD]:{code:-32601,message:"Method not found"},[YD]:{code:-32602,message:"Invalid params"},[C2]:{code:-32603,message:"Internal error"},[Jh]:{code:-32e3,message:"Server error"}},I2=Jh;function QD(t){return JD.includes(t)}function Ip(t){return Object.keys(ma).includes(t)?ma[t]:ma[I2]}function eM(t){const e=Object.values(ma).find(r=>r.code===t);return e||ma[I2]}function tM(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var B2={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $u=function(t,e){return $u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},$u(t,e)};function rM(t,e){$u(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Lu=function(){return Lu=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lu.apply(this,arguments)};function nM(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function iM(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function sM(t,e){return function(r,n){e(r,n,t)}}function aM(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oM(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(d){a(d)}}function f(h){try{c(n.throw(h))}catch(d){a(d)}}function c(h){h.done?s(h.value):i(h.value).then(o,f)}c((n=n.apply(t,e||[])).next())})}function cM(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return f([c,h])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(h){c=[6,h],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function fM(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function uM(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ku(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function hM(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P2(arguments[e]));return t}function dM(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function Ha(t){return this instanceof Ha?(this.v=t,this):new Ha(t)}function lM(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(v){return new Promise(function(x,D){s.push([p,v,x,D])>1||o(p,v)})})}function o(p,v){try{f(n[p](v))}catch(x){d(s[0][3],x)}}function f(p){p.value instanceof Ha?Promise.resolve(p.value.v).then(c,h):d(s[0][2],p)}function c(p){o("next",p)}function h(p){o("throw",p)}function d(p,v){p(v),s.shift(),s.length&&o(s[0][0],s[0][1])}}function pM(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Ha(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function bM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ku=="function"?ku(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(o,f){a=t[s](a),i(o,f,a.done,a.value)})}}function i(s,a,o,f){Promise.resolve(f).then(function(c){s({value:c,done:o})},a)}}function gM(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function vM(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function yM(t){return t&&t.__esModule?t:{default:t}}function mM(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function xM(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const wM=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Lu},__asyncDelegator:pM,__asyncGenerator:lM,__asyncValues:bM,__await:Ha,__awaiter:oM,__classPrivateFieldGet:mM,__classPrivateFieldSet:xM,__createBinding:fM,__decorate:iM,__exportStar:uM,__extends:rM,__generator:cM,__importDefault:yM,__importStar:vM,__makeTemplateObject:gM,__metadata:aM,__param:sM,__read:P2,__rest:nM,__spread:hM,__spreadArrays:dM,__values:ku},Symbol.toStringTag,{value:"Module"})),_M=Ah(wM);var Fn={},Bp;function EM(){if(Bp)return Fn;Bp=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.isBrowserCryptoAvailable=Fn.getSubtleCrypto=Fn.getBrowerCrypto=void 0;function t(){return Le?.crypto||Le?.msCrypto||{}}Fn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Fn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Fn.isBrowserCryptoAvailable=r,Fn}var Rn={},Pp;function AM(){if(Pp)return Rn;Pp=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.isBrowser=Rn.isNode=Rn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Rn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Rn.isNode=e;function r(){return!t()&&!e()}return Rn.isBrowser=r,Rn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_M;e.__exportStar(EM(),t),e.__exportStar(AM(),t)})(B2);function Nn(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Ni(t=6){return BigInt(Nn(t))}function $i(t,e,r){return{id:r||Nn(),jsonrpc:"2.0",method:t,params:e}}function Qh(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ed(t,e,r){return{id:t,jsonrpc:"2.0",error:SM(e)}}function SM(t,e){return typeof t>"u"?Ip(C2):(typeof t=="string"&&(t=Object.assign(Object.assign({},Ip(Jh)),{message:t})),QD(t.code)&&(t=eM(t.code)),t)}class DM{}class MM extends DM{constructor(){super()}}class CM extends MM{constructor(e){super()}}const IM="^wss?:";function BM(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function PM(t,e){const r=BM(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Fp(t){return PM(t,IM)}function FM(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function F2(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function td(t){return F2(t)&&"method"in t}function fc(t){return F2(t)&&(nn(t)||Ir(t))}function nn(t){return"result"in t}function Ir(t){return"error"in t}let RM=class extends CM{constructor(e){super(e),this.events=new Yr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict($i(e.method,e.params||[],e.id||Ni().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Ir(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),fc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const OM=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),TM=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Rp=t=>t.split("?")[0],Op=10,NM=OM();let $M=class{constructor(e){if(this.url=e,this.events=new Yr.EventEmitter,this.registering=!1,!Fp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Vi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Fp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=B2.isReactNative()?void 0:{rejectUnauthorized:!FM(e)},s=new NM(e,[],i);TM()?s.onerror=a=>{const o=a;n(this.emitError(o.error))}:s.on("error",a=>{n(this.emitError(a))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Is(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=ed(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return tM(e,Rp(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Op&&this.events.setMaxListeners(Op)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Rp(this.url)}`));return this.events.emit("register_error",r),r}};var v0={exports:{}};v0.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",f="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",p="[object Error]",v="[object Function]",x="[object GeneratorFunction]",D="[object Map]",S="[object Number]",O="[object Null]",A="[object Object]",F="[object Promise]",P="[object Proxy]",k="[object RegExp]",L="[object Set]",m="[object String]",T="[object Symbol]",j="[object Undefined]",U="[object WeakMap]",N="[object ArrayBuffer]",g="[object DataView]",b="[object Float32Array]",u="[object Float64Array]",l="[object Int8Array]",w="[object Int16Array]",I="[object Int32Array]",B="[object Uint8Array]",C="[object Uint8ClampedArray]",y="[object Uint16Array]",E="[object Uint32Array]",_=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,R={};R[b]=R[u]=R[l]=R[w]=R[I]=R[B]=R[C]=R[y]=R[E]=!0,R[o]=R[f]=R[N]=R[h]=R[g]=R[d]=R[p]=R[v]=R[D]=R[S]=R[A]=R[k]=R[L]=R[m]=R[U]=!1;var W=typeof Le=="object"&&Le&&Le.Object===Object&&Le,z=typeof self=="object"&&self&&self.Object===Object&&self,q=W||z||Function("return this")(),H=e&&!e.nodeType&&e,M=H&&!0&&t&&!t.nodeType&&t,K=M&&M.exports===H,Z=K&&W.process,Y=function(){try{return Z&&Z.binding&&Z.binding("util")}catch{}}(),J=Y&&Y.isTypedArray;function Q(G,X){for(var ee=-1,Ae=G==null?0:G.length,pt=0,Ye=[];++ee<Ae;){var vt=G[ee];X(vt,ee,G)&&(Ye[pt++]=vt)}return Ye}function be(G,X){for(var ee=-1,Ae=X.length,pt=G.length;++ee<Ae;)G[pt+ee]=X[ee];return G}function Se(G,X){for(var ee=-1,Ae=G==null?0:G.length;++ee<Ae;)if(X(G[ee],ee,G))return!0;return!1}function de(G,X){for(var ee=-1,Ae=Array(G);++ee<G;)Ae[ee]=X(ee);return Ae}function Re(G){return function(X){return G(X)}}function ge(G,X){return G.has(X)}function ne(G,X){return G?.[X]}function fe(G){var X=-1,ee=Array(G.size);return G.forEach(function(Ae,pt){ee[++X]=[pt,Ae]}),ee}function he(G,X){return function(ee){return G(X(ee))}}function se(G){var X=-1,ee=Array(G.size);return G.forEach(function(Ae){ee[++X]=Ae}),ee}var le=Array.prototype,ue=Function.prototype,re=Object.prototype,xe=q["__core-js_shared__"],_e=ue.toString,ie=re.hasOwnProperty,ve=function(){var G=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Ee=re.toString,ce=RegExp("^"+_e.call(ie).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=K?q.Buffer:void 0,Me=q.Symbol,Pe=q.Uint8Array,Xe=re.propertyIsEnumerable,Je=le.splice,Ie=Me?Me.toStringTag:void 0,Qe=Object.getOwnPropertySymbols,rt=Ce?Ce.isBuffer:void 0,Oe=he(Object.keys,Object),ke=as(q,"DataView"),Te=as(q,"Map"),ye=as(q,"Promise"),$e=as(q,"Set"),qe=as(q,"WeakMap"),pe=as(Object,"create"),je=Ei(ke),He=Ei(Te),we=Ei(ye),Be=Ei($e),Fe=Ei(qe),me=Me?Me.prototype:void 0,ze=me?me.valueOf:void 0;function Ne(G){var X=-1,ee=G==null?0:G.length;for(this.clear();++X<ee;){var Ae=G[X];this.set(Ae[0],Ae[1])}}function De(){this.__data__=pe?pe(null):{},this.size=0}function Ge(G){var X=this.has(G)&&delete this.__data__[G];return this.size-=X?1:0,X}function at(G){var X=this.__data__;if(pe){var ee=X[G];return ee===n?void 0:ee}return ie.call(X,G)?X[G]:void 0}function Ke(G){var X=this.__data__;return pe?X[G]!==void 0:ie.call(X,G)}function ot(G,X){var ee=this.__data__;return this.size+=this.has(G)?0:1,ee[G]=pe&&X===void 0?n:X,this}Ne.prototype.clear=De,Ne.prototype.delete=Ge,Ne.prototype.get=at,Ne.prototype.has=Ke,Ne.prototype.set=ot;function et(G){var X=-1,ee=G==null?0:G.length;for(this.clear();++X<ee;){var Ae=G[X];this.set(Ae[0],Ae[1])}}function st(){this.__data__=[],this.size=0}function nr(G){var X=this.__data__,ee=mo(X,G);if(ee<0)return!1;var Ae=X.length-1;return ee==Ae?X.pop():Je.call(X,ee,1),--this.size,!0}function ir(G){var X=this.__data__,ee=mo(X,G);return ee<0?void 0:X[ee][1]}function sr(G){return mo(this.__data__,G)>-1}function ar(G,X){var ee=this.__data__,Ae=mo(ee,G);return Ae<0?(++this.size,ee.push([G,X])):ee[Ae][1]=X,this}et.prototype.clear=st,et.prototype.delete=nr,et.prototype.get=ir,et.prototype.has=sr,et.prototype.set=ar;function At(G){var X=-1,ee=G==null?0:G.length;for(this.clear();++X<ee;){var Ae=G[X];this.set(Ae[0],Ae[1])}}function mn(){this.size=0,this.__data__={hash:new Ne,map:new(Te||et),string:new Ne}}function xn(G){var X=xo(this,G).delete(G);return this.size-=X?1:0,X}function wn(G){return xo(this,G).get(G)}function _n(G){return xo(this,G).has(G)}function En(G,X){var ee=xo(this,G),Ae=ee.size;return ee.set(G,X),this.size+=ee.size==Ae?0:1,this}At.prototype.clear=mn,At.prototype.delete=xn,At.prototype.get=wn,At.prototype.has=_n,At.prototype.set=En;function Er(G){var X=-1,ee=G==null?0:G.length;for(this.__data__=new At;++X<ee;)this.add(G[X])}function An(G){return this.__data__.set(G,n),this}function Sn(G){return this.__data__.has(G)}Er.prototype.add=Er.prototype.push=An,Er.prototype.has=Sn;function Zt(G){var X=this.__data__=new et(G);this.size=X.size}function Dn(){this.__data__=new et,this.size=0}function Mn(G){var X=this.__data__,ee=X.delete(G);return this.size=X.size,ee}function Cn(G){return this.__data__.get(G)}function Xs(G){return this.__data__.has(G)}function Ys(G,X){var ee=this.__data__;if(ee instanceof et){var Ae=ee.__data__;if(!Te||Ae.length<r-1)return Ae.push([G,X]),this.size=++ee.size,this;ee=this.__data__=new At(Ae)}return ee.set(G,X),this.size=ee.size,this}Zt.prototype.clear=Dn,Zt.prototype.delete=Mn,Zt.prototype.get=Cn,Zt.prototype.has=Xs,Zt.prototype.set=Ys;function cy(G,X){var ee=wo(G),Ae=!ee&&Ey(G),pt=!ee&&!Ae&&lc(G),Ye=!ee&&!Ae&&!pt&&pd(G),vt=ee||Ae||pt||Ye,Ct=vt?de(G.length,String):[],jt=Ct.length;for(var gt in G)ie.call(G,gt)&&!(vt&&(gt=="length"||pt&&(gt=="offset"||gt=="parent")||Ye&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||yy(gt,jt)))&&Ct.push(gt);return Ct}function mo(G,X){for(var ee=G.length;ee--;)if(ud(G[ee][0],X))return ee;return-1}function fy(G,X,ee){var Ae=X(G);return wo(G)?Ae:be(Ae,ee(G))}function Js(G){return G==null?G===void 0?j:O:Ie&&Ie in Object(G)?gy(G):_y(G)}function ad(G){return Qs(G)&&Js(G)==o}function od(G,X,ee,Ae,pt){return G===X?!0:G==null||X==null||!Qs(G)&&!Qs(X)?G!==G&&X!==X:uy(G,X,ee,Ae,od,pt)}function uy(G,X,ee,Ae,pt,Ye){var vt=wo(G),Ct=wo(X),jt=vt?f:Yn(G),gt=Ct?f:Yn(X);jt=jt==o?A:jt,gt=gt==o?A:gt;var br=jt==A,$r=gt==A,Xt=jt==gt;if(Xt&&lc(G)){if(!lc(X))return!1;vt=!0,br=!1}if(Xt&&!br)return Ye||(Ye=new Zt),vt||pd(G)?cd(G,X,ee,Ae,pt,Ye):py(G,X,jt,ee,Ae,pt,Ye);if(!(ee&i)){var Ar=br&&ie.call(G,"__wrapped__"),Sr=$r&&ie.call(X,"__wrapped__");if(Ar||Sr){var Jn=Ar?G.value():G,In=Sr?X.value():X;return Ye||(Ye=new Zt),pt(Jn,In,ee,Ae,Ye)}}return Xt?(Ye||(Ye=new Zt),by(G,X,ee,Ae,pt,Ye)):!1}function hy(G){if(!ld(G)||xy(G))return!1;var X=hd(G)?ce:$;return X.test(Ei(G))}function dy(G){return Qs(G)&&dd(G.length)&&!!R[Js(G)]}function ly(G){if(!wy(G))return Oe(G);var X=[];for(var ee in Object(G))ie.call(G,ee)&&ee!="constructor"&&X.push(ee);return X}function cd(G,X,ee,Ae,pt,Ye){var vt=ee&i,Ct=G.length,jt=X.length;if(Ct!=jt&&!(vt&&jt>Ct))return!1;var gt=Ye.get(G);if(gt&&Ye.get(X))return gt==X;var br=-1,$r=!0,Xt=ee&s?new Er:void 0;for(Ye.set(G,X),Ye.set(X,G);++br<Ct;){var Ar=G[br],Sr=X[br];if(Ae)var Jn=vt?Ae(Sr,Ar,br,X,G,Ye):Ae(Ar,Sr,br,G,X,Ye);if(Jn!==void 0){if(Jn)continue;$r=!1;break}if(Xt){if(!Se(X,function(In,Ai){if(!ge(Xt,Ai)&&(Ar===In||pt(Ar,In,ee,Ae,Ye)))return Xt.push(Ai)})){$r=!1;break}}else if(!(Ar===Sr||pt(Ar,Sr,ee,Ae,Ye))){$r=!1;break}}return Ye.delete(G),Ye.delete(X),$r}function py(G,X,ee,Ae,pt,Ye,vt){switch(ee){case g:if(G.byteLength!=X.byteLength||G.byteOffset!=X.byteOffset)return!1;G=G.buffer,X=X.buffer;case N:return!(G.byteLength!=X.byteLength||!Ye(new Pe(G),new Pe(X)));case h:case d:case S:return ud(+G,+X);case p:return G.name==X.name&&G.message==X.message;case k:case m:return G==X+"";case D:var Ct=fe;case L:var jt=Ae&i;if(Ct||(Ct=se),G.size!=X.size&&!jt)return!1;var gt=vt.get(G);if(gt)return gt==X;Ae|=s,vt.set(G,X);var br=cd(Ct(G),Ct(X),Ae,pt,Ye,vt);return vt.delete(G),br;case T:if(ze)return ze.call(G)==ze.call(X)}return!1}function by(G,X,ee,Ae,pt,Ye){var vt=ee&i,Ct=fd(G),jt=Ct.length,gt=fd(X),br=gt.length;if(jt!=br&&!vt)return!1;for(var $r=jt;$r--;){var Xt=Ct[$r];if(!(vt?Xt in X:ie.call(X,Xt)))return!1}var Ar=Ye.get(G);if(Ar&&Ye.get(X))return Ar==X;var Sr=!0;Ye.set(G,X),Ye.set(X,G);for(var Jn=vt;++$r<jt;){Xt=Ct[$r];var In=G[Xt],Ai=X[Xt];if(Ae)var bd=vt?Ae(Ai,In,Xt,X,G,Ye):Ae(In,Ai,Xt,G,X,Ye);if(!(bd===void 0?In===Ai||pt(In,Ai,ee,Ae,Ye):bd)){Sr=!1;break}Jn||(Jn=Xt=="constructor")}if(Sr&&!Jn){var _o=G.constructor,Eo=X.constructor;_o!=Eo&&"constructor"in G&&"constructor"in X&&!(typeof _o=="function"&&_o instanceof _o&&typeof Eo=="function"&&Eo instanceof Eo)&&(Sr=!1)}return Ye.delete(G),Ye.delete(X),Sr}function fd(G){return fy(G,Dy,vy)}function xo(G,X){var ee=G.__data__;return my(X)?ee[typeof X=="string"?"string":"hash"]:ee.map}function as(G,X){var ee=ne(G,X);return hy(ee)?ee:void 0}function gy(G){var X=ie.call(G,Ie),ee=G[Ie];try{G[Ie]=void 0;var Ae=!0}catch{}var pt=Ee.call(G);return Ae&&(X?G[Ie]=ee:delete G[Ie]),pt}var vy=Qe?function(G){return G==null?[]:(G=Object(G),Q(Qe(G),function(X){return Xe.call(G,X)}))}:My,Yn=Js;(ke&&Yn(new ke(new ArrayBuffer(1)))!=g||Te&&Yn(new Te)!=D||ye&&Yn(ye.resolve())!=F||$e&&Yn(new $e)!=L||qe&&Yn(new qe)!=U)&&(Yn=function(G){var X=Js(G),ee=X==A?G.constructor:void 0,Ae=ee?Ei(ee):"";if(Ae)switch(Ae){case je:return g;case He:return D;case we:return F;case Be:return L;case Fe:return U}return X});function yy(G,X){return X=X??a,!!X&&(typeof G=="number"||V.test(G))&&G>-1&&G%1==0&&G<X}function my(G){var X=typeof G;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?G!=="__proto__":G===null}function xy(G){return!!ve&&ve in G}function wy(G){var X=G&&G.constructor,ee=typeof X=="function"&&X.prototype||re;return G===ee}function _y(G){return Ee.call(G)}function Ei(G){if(G!=null){try{return _e.call(G)}catch{}try{return G+""}catch{}}return""}function ud(G,X){return G===X||G!==G&&X!==X}var Ey=ad(function(){return arguments}())?ad:function(G){return Qs(G)&&ie.call(G,"callee")&&!Xe.call(G,"callee")},wo=Array.isArray;function Ay(G){return G!=null&&dd(G.length)&&!hd(G)}var lc=rt||Cy;function Sy(G,X){return od(G,X)}function hd(G){if(!ld(G))return!1;var X=Js(G);return X==v||X==x||X==c||X==P}function dd(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=a}function ld(G){var X=typeof G;return G!=null&&(X=="object"||X=="function")}function Qs(G){return G!=null&&typeof G=="object"}var pd=J?Re(J):dy;function Dy(G){return Ay(G)?cy(G):ly(G)}function My(){return[]}function Cy(){return!1}t.exports=Sy})(v0,v0.exports);var LM=v0.exports;const kM=Xi(LM),R2="wc",O2=2,y0="core",gn=`${R2}@2:${y0}:`,qM={name:y0,logger:"error"},zM={database:":memory:"},UM="crypto",Tp="client_ed25519_seed",jM=ae.ONE_DAY,HM="keychain",KM="0.3",VM="messages",GM="0.3",Np=ae.SIX_HOURS,WM="publisher",T2="irn",ZM="error",N2="wss://relay.walletconnect.org",XM="relayer",Ft={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},YM="_subscription",Mr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},JM=.1,qu="2.17.3",ut={link_mode:"link_mode",relay:"relay"},QM="0.3",eC="WALLETCONNECT_CLIENT_ID",$p="WALLETCONNECT_LINK_MODE_APPS",gr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tC="subscription",rC="0.3",nC=ae.FIVE_SECONDS*1e3,iC="pairing",sC="0.3",ua={wc_pairingDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:ae.ONE_DAY,prompt:!1,tag:0}}},Oi={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},aC="history",oC="0.3",cC="expirer",Cr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},fC="0.3",uC="verify-api",hC="https://verify.walletconnect.com",$2="https://verify.walletconnect.org",xa=$2,dC=`${xa}/v3`,lC=[hC,$2],pC="echo",bC="https://echo.walletconnect.com",rn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Tn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},qr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ci={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ii={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},ha={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},gC=.1,vC="event-client",yC=86400,mC="https://pulse.walletconnect.org/batch";function xC(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,f=t.charAt(0),c=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function d(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var D=0,S=0,O=0,A=x.length;O!==A&&x[O]===0;)O++,D++;for(var F=(A-O)*h+1>>>0,P=new Uint8Array(F);O!==A;){for(var k=x[O],L=0,m=F-1;(k!==0||L<S)&&m!==-1;m--,L++)k+=256*P[m]>>>0,P[m]=k%o>>>0,k=k/o>>>0;if(k!==0)throw new Error("Non-zero carry");S=L,O++}for(var T=F-S;T!==F&&P[T]===0;)T++;for(var j=f.repeat(D);T<F;++T)j+=t.charAt(P[T]);return j}function p(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var D=0;if(x[D]!==" "){for(var S=0,O=0;x[D]===f;)S++,D++;for(var A=(x.length-D)*c+1>>>0,F=new Uint8Array(A);x[D];){var P=r[x.charCodeAt(D)];if(P===255)return;for(var k=0,L=A-1;(P!==0||k<O)&&L!==-1;L--,k++)P+=o*F[L]>>>0,F[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");O=k,D++}if(x[D]!==" "){for(var m=A-O;m!==A&&F[m]===0;)m++;for(var T=new Uint8Array(S+(A-m)),j=S;m!==A;)T[j++]=F[m++];return T}}}function v(x){var D=p(x);if(D)return D;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:v}}var wC=xC,_C=wC;const L2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},EC=t=>new TextEncoder().encode(t),AC=t=>new TextDecoder().decode(t);class SC{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class DC{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return k2(this,e)}}class MC{constructor(e){this.decoders=e}or(e){return k2(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k2=(t,e)=>new MC({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class CC{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new SC(e,r,n),this.decoder=new DC(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uc=({name:t,prefix:e,encode:r,decode:n})=>new CC(t,e,r,n),yo=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=_C(r,e);return uc({prefix:t,name:e,encode:n,decode:s=>L2(i(s))})},IC=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,f=0,c=0;for(let h=0;h<s;++h){const d=i[t[h]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|d,o+=r,o>=8&&(o-=8,a[c++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return a},BC=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},Wt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>uc({prefix:e,name:t,encode(i){return BC(i,n,r)},decode(i){return IC(i,n,r,t)}}),PC=uc({prefix:"\0",name:"identity",encode:t=>AC(t),decode:t=>EC(t)});var FC=Object.freeze({__proto__:null,identity:PC});const RC=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var OC=Object.freeze({__proto__:null,base2:RC});const TC=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var NC=Object.freeze({__proto__:null,base8:TC});const $C=yo({prefix:"9",name:"base10",alphabet:"0123456789"});var LC=Object.freeze({__proto__:null,base10:$C});const kC=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qC=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zC=Object.freeze({__proto__:null,base16:kC,base16upper:qC});const UC=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jC=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),HC=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KC=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),VC=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),GC=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WC=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ZC=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XC=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var YC=Object.freeze({__proto__:null,base32:UC,base32upper:jC,base32pad:HC,base32padupper:KC,base32hex:VC,base32hexupper:GC,base32hexpad:WC,base32hexpadupper:ZC,base32z:XC});const JC=yo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),QC=yo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var eI=Object.freeze({__proto__:null,base36:JC,base36upper:QC});const tI=yo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rI=yo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nI=Object.freeze({__proto__:null,base58btc:tI,base58flickr:rI});const iI=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sI=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aI=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oI=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cI=Object.freeze({__proto__:null,base64:iI,base64pad:sI,base64url:aI,base64urlpad:oI});const q2=Array.from(""),fI=q2.reduce((t,e,r)=>(t[r]=e,t),[]),uI=q2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function hI(t){return t.reduce((e,r)=>(e+=fI[r],e),"")}function dI(t){const e=[];for(const r of t){const n=uI[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const lI=uc({prefix:"",name:"base256emoji",encode:hI,decode:dI});var pI=Object.freeze({__proto__:null,base256emoji:lI}),bI=z2,Lp=128,gI=127,vI=~gI,yI=Math.pow(2,31);function z2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=yI;)e[r++]=t&255|Lp,t/=128;for(;t&vI;)e[r++]=t&255|Lp,t>>>=7;return e[r]=t|0,z2.bytes=r-n+1,e}var mI=zu,xI=128,kp=127;function zu(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw zu.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&kp)<<i:(a&kp)*Math.pow(2,i),i+=7}while(a>=xI);return zu.bytes=s-n,r}var wI=Math.pow(2,7),_I=Math.pow(2,14),EI=Math.pow(2,21),AI=Math.pow(2,28),SI=Math.pow(2,35),DI=Math.pow(2,42),MI=Math.pow(2,49),CI=Math.pow(2,56),II=Math.pow(2,63),BI=function(t){return t<wI?1:t<_I?2:t<EI?3:t<AI?4:t<SI?5:t<DI?6:t<MI?7:t<CI?8:t<II?9:10},PI={encode:bI,decode:mI,encodingLength:BI},U2=PI;const qp=(t,e,r=0)=>(U2.encode(t,e,r),e),zp=t=>U2.encodingLength(t),Uu=(t,e)=>{const r=e.byteLength,n=zp(t),i=n+zp(r),s=new Uint8Array(i+r);return qp(t,s,0),qp(r,s,n),s.set(e,i),new FI(t,r,e,s)};class FI{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const j2=({name:t,code:e,encode:r})=>new RI(t,e,r);class RI{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Uu(this.code,r):r.then(n=>Uu(this.code,n))}else throw Error("Unknown type, must be binary type")}}const H2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),OI=j2({name:"sha2-256",code:18,encode:H2("SHA-256")}),TI=j2({name:"sha2-512",code:19,encode:H2("SHA-512")});var NI=Object.freeze({__proto__:null,sha256:OI,sha512:TI});const K2=0,$I="identity",V2=L2,LI=t=>Uu(K2,V2(t)),kI={code:K2,name:$I,encode:V2,digest:LI};var qI=Object.freeze({__proto__:null,identity:kI});new TextEncoder,new TextDecoder;const Up={...FC,...OC,...NC,...LC,...zC,...YC,...eI,...nI,...cI,...pI};({...NI,...qI});function zI(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function G2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const jp=G2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),nf=G2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=zI(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),UI={utf8:jp,"utf-8":jp,hex:Up.base16,latin1:nf,ascii:nf,binary:nf,...Up};function jI(t,e="utf8"){const r=UI[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}class HI{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=HM,this.version=KM,this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=oe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=rr(r,this.name)}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,p2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?b2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class KI{constructor(e,r,n){this.core=e,this.logger=r,this.name=UM,this.randomSessionIdentifier=Nu(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Ml(i);return wv(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=VS();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),a=Ml(s),o=this.randomSessionIdentifier;return await h_(o,i,jM,a)},this.generateSharedKey=(i,s,a)=>{this.isInitialized();const o=this.getPrivateKey(i),f=GS(o,s);return this.setSymKey(f,a)},this.setSymKey=async(i,s)=>{this.isInitialized();const a=s||Ho(i);return await this.keychain.set(a,i),a},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,a)=>{this.isInitialized();const o=S2(a),f=Vi(s);if(vp(o))return ZS(f,a?.encoding);if(gp(o)){const p=o.senderPublicKey,v=o.receiverPublicKey;i=await this.generateSharedKey(p,v)}const c=this.getSymKey(i),{type:h,senderPublicKey:d}=o;return WS({type:h,symKey:c,message:f,senderPublicKey:d,encoding:a?.encoding})},this.decode=async(i,s,a)=>{this.isInitialized();const o=JS(s,a);if(vp(o)){const f=YS(s,a?.encoding);return Is(f)}if(gp(o)){const f=o.receiverPublicKey,c=o.senderPublicKey;i=await this.generateSharedKey(f,c)}try{const f=this.getSymKey(i),c=XS({symKey:f,encoded:s,encoding:a?.encoding});return Is(c)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}},this.getPayloadType=(i,s=ci)=>{const a=ja({encoded:i,encoding:s});return Zi(a.type)},this.getPayloadSenderPublicKey=(i,s=ci)=>{const a=ja({encoded:i,encoding:s});return a.senderPublicKey?$t(a.senderPublicKey,tr):void 0},this.core=e,this.logger=rr(r,this.name),this.keychain=n||new HI(this.core,this.logger)}get context(){return pr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Tp)}catch{e=Nu(),await this.keychain.set(Tp,e)}return jI(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class VI extends vw{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=VM,this.version=GM,this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ln(i);let a=this.messages.get(n);return typeof a>"u"&&(a={}),typeof a[s]<"u"||(a[s]=i,this.messages.set(n,a),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),a=Ln(i);return typeof s[a]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=rr(e,this.name),this.core=r}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,p2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?b2(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var GI=Object.defineProperty,WI=Object.defineProperties,ZI=Object.getOwnPropertyDescriptors,Hp=Object.getOwnPropertySymbols,XI=Object.prototype.hasOwnProperty,YI=Object.prototype.propertyIsEnumerable,Kp=(t,e,r)=>e in t?GI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vp=(t,e)=>{for(var r in e||(e={}))XI.call(e,r)&&Kp(t,r,e[r]);if(Hp)for(var r of Hp(e))YI.call(e,r)&&Kp(t,r,e[r]);return t},Gp=(t,e)=>WI(t,ZI(e));class JI extends yw{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Yr.EventEmitter,this.name=WM,this.queue=new Map,this.publishTimeout=ae.toMiliseconds(ae.ONE_MINUTE),this.initialPublishTimeout=ae.toMiliseconds(ae.ONE_SECOND*15),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const o=s?.ttl||Np,f=p0(s),c=s?.prompt||!1,h=s?.tag||0,d=s?.id||Ni().toString(),p={topic:n,message:i,opts:{ttl:o,relay:f,prompt:c,tag:h,id:d,attestation:s?.attestation}},v=`Failed to publish payload, please try again. id:${d} tag:${h}`;try{const x=new Promise(async D=>{const S=({id:A})=>{p.opts.id===A&&(this.removeRequestFromQueue(A),this.relayer.events.removeListener(Ft.publish,S),D(p))};this.relayer.events.on(Ft.publish,S);const O=oi(new Promise((A,F)=>{this.rpcPublish({topic:n,message:i,ttl:o,prompt:c,tag:h,id:d,attestation:s?.attestation}).then(A).catch(P=>{this.logger.warn(P,P?.message),F(P)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${h}`);try{await O,this.events.removeListener(Ft.publish,S)}catch(A){this.queue.set(d,Gp(Vp({},p),{attempt:1})),this.logger.warn(A,A?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:i,opts:s}}),await oi(x,this.publishTimeout,v)}catch(x){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(x),(a=s?.internal)!=null&&a.throwOnFailedPublish)throw x}finally{this.queue.delete(d)}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=rr(r,this.name),this.registerEventListeners()}get context(){return pr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:a,message:o,ttl:f=Np,prompt:c,tag:h,id:d,attestation:p}=e,v={method:ga(p0().protocol).publish,params:{topic:a,message:o,ttl:f,prompt:c,tag:h,attestation:p},id:d};er((r=v.params)==null?void 0:r.prompt)&&((n=v.params)==null||delete n.prompt),er((i=v.params)==null?void 0:i.tag)&&((s=v.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const x=await this.relayer.request(v);return this.relayer.events.emit(Ft.publish,e),this.logger.debug("Successfully Published Payload"),x}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,Gp(Vp({},e),{attempt:n}));const{topic:i,message:s,opts:a,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish({topic:i,message:s,ttl:a.ttl,prompt:a.prompt,tag:a.tag,id:a.id,attestation:o}),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(qs.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ft.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ft.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class QI{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var eB=Object.defineProperty,tB=Object.defineProperties,rB=Object.getOwnPropertyDescriptors,Wp=Object.getOwnPropertySymbols,nB=Object.prototype.hasOwnProperty,iB=Object.prototype.propertyIsEnumerable,Zp=(t,e,r)=>e in t?eB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,da=(t,e)=>{for(var r in e||(e={}))nB.call(e,r)&&Zp(t,r,e[r]);if(Wp)for(var r of Wp(e))iB.call(e,r)&&Zp(t,r,e[r]);return t},sf=(t,e)=>tB(t,rB(e));class sB extends ww{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new QI,this.events=new Yr.EventEmitter,this.name=tC,this.version=rC,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=gn,this.subscribeTimeout=ae.toMiliseconds(ae.ONE_MINUTE),this.initialSubscribeTimeout=ae.toMiliseconds(ae.ONE_SECOND*15),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=p0(i),a={topic:n,relay:s,transportType:i?.transportType};this.pending.set(n,a);const o=await this.rpcSubscribe(n,s,i);return typeof o=="string"&&(this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),o}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,a)=>{const o=new ae.Watch;o.start(i);const f=setInterval(()=>{(!this.pending.has(n)&&this.topics.includes(n)||this.cached.some(c=>c.topic===n))&&(clearInterval(f),o.stop(i),s(!0)),o.elapsed(i)>=nC&&(clearInterval(f),o.stop(i),a(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(qs.pulse,async()=>{await this.checkPending()}),this.events.on(gr.created,async n=>{const i=gr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(gr.deleted,async n=>{const i=gr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})},this.relayer=e,this.logger=rr(r,this.name),this.clientId=""}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=p0(n);await this.rpcUnsubscribe(e,r,i);const s=ht("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;n?.transportType===ut.relay&&await this.restartToComplete();const s={method:ga(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const a=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{const o=this.getSubscriptionId(e);if(n?.transportType===ut.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(h=>this.logger.warn(h))},ae.toMiliseconds(ae.ONE_SECOND)),o;const f=new Promise(async h=>{const d=p=>{p.topic===e&&(this.events.removeListener(gr.created,d),h(p.id))};this.events.on(gr.created,d);try{const p=await oi(new Promise((v,x)=>{this.relayer.request(s).catch(D=>{this.logger.warn(D,D?.message),x(D)}).then(v)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(gr.created,d),h(p)}catch{}}),c=await oi(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!c&&a)throw new Error(`Subscribing to ${e} failed, please try again`);return c?o:null}catch(o){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ft.connection_stalled),a)throw o}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:ga(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await oi(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ft.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:ga(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await oi(new Promise((s,a)=>{this.relayer.request(n).catch(o=>{this.logger.warn(o),a(o)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ft.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:ga(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,sf(da({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,da({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,da({},r)),this.topicMap.set(r.topic,e),this.events.emit(gr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(gr.deleted,sf(da({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(gr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(gr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(e.map(r=>sf(da({},r),{id:this.getSubscriptionId(r.topic)}))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await wS(ae.toMiliseconds(ae.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(e){return Ln(e+this.clientId)}}var aB=Object.defineProperty,Xp=Object.getOwnPropertySymbols,oB=Object.prototype.hasOwnProperty,cB=Object.prototype.propertyIsEnumerable,Yp=(t,e,r)=>e in t?aB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jp=(t,e)=>{for(var r in e||(e={}))oB.call(e,r)&&Yp(t,r,e[r]);if(Xp)for(var r of Xp(e))cB.call(e,r)&&Yp(t,r,e[r]);return t};class fB extends mw{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Yr.EventEmitter,this.name=XM,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=ae.toMiliseconds(ae.THIRTY_SECONDS+ae.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=ae.toMiliseconds(ae.ONE_SECOND*15),this.request=async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Ni().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const a=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const o=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==a),o}catch(a){throw this.logger.debug(`Failed to Publish Request: ${s}`),a}},this.resetPingTimeout=()=>{if(d0())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r?.message)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Ft.connect)},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.fatal(r,`Fatal socket error: ${r?.message}`),this.events.emit(Ft.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Mr.payload,this.onPayloadHandler),this.provider.on(Mr.connect,this.onConnectHandler),this.provider.on(Mr.disconnect,this.onDisconnectHandler),this.provider.on(Mr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?rr(e.logger,this.name):j0(Mh({level:e.logger||ZM})),this.messages=new VI(this.logger,e.core),this.subscriber=new sB(this,this.logger),this.publisher=new JI(this,this.logger),this.relayUrl=e?.relayUrl||N2,this.projectId=e.projectId,oS()?this.packageName=op():cS()&&(this.bundleId=op()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return pr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:ut.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const a=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r?.internal)==null?void 0:i.throwOnFailedPublish;let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",f;const c=h=>{h.topic===e&&(this.subscriber.off(gr.created,c),f())};return await Promise.all([new Promise(h=>{f=h,this.subscriber.on(gr.created,c)}),new Promise(async(h,d)=>{o=await this.subscriber.subscribe(e,Jp({internal:{throwOnFailedPublish:a}},r)).catch(p=>{a&&d(p)})||o,h()})]),o}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await oi(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Cp())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Dt(ae.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Ft.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Mr.disconnect,s),await oi(new Promise((a,o)=>{this.provider.connect().then(a).catch(o)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{this.provider.off(Mr.disconnect,s),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(a,o)=>{const f=()=>{o(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Mr.disconnect,f),await this.subscriber.start().then(a).catch(o).finally(()=>{this.provider.off(Mr.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,ae.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(d0())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(a){this.logger.warn(a,a?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new RM(new $M(dS({sdkVersion:qu,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),td(e)){if(!e.method.endsWith(YM))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:a}=r.data,o={topic:n,message:i,publishedAt:s,transportType:ut.relay,attestation:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Jp({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else fc(e)&&this.events.emit(Ft.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ft.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Qh(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Mr.payload,this.onPayloadHandler),this.provider.off(Mr.connect,this.onConnectHandler),this.provider.off(Mr.disconnect,this.onDisconnectHandler),this.provider.off(Mr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Cp();KD(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(Ft.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(e=>this.logger.error(e,e?.message))},ae.toMiliseconds(JM))))}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var uB=Object.defineProperty,Qp=Object.getOwnPropertySymbols,hB=Object.prototype.hasOwnProperty,dB=Object.prototype.propertyIsEnumerable,e1=(t,e,r)=>e in t?uB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t1=(t,e)=>{for(var r in e||(e={}))hB.call(e,r)&&e1(t,r,e[r]);if(Qp)for(var r of Qp(e))dB.call(e,r)&&e1(t,r,e[r]);return t};class ns extends xw{constructor(e,r,n,i=gn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=QM,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!er(a)?this.map.set(this.getKey(a),a):_D(a)?this.map.set(a.id,a):ED(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(f=>kM(o[f],a[f]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const f=t1(t1({},this.getData(a)),o);this.map.set(a,f),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),this.addToRecentlyDeleted(a),await this.persist())},this.logger=rr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=oe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class lB{constructor(e,r){this.core=e,this.logger=r,this.name=iC,this.version=sC,this.events=new Jg,this.initialized=!1,this.storagePrefix=gn,this.ignoredPayloadTypes=[Un],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();const i=Nu(),s=await this.core.crypto.setSymKey(i),a=Dt(ae.FIVE_MINUTES),o={protocol:T2},f={topic:s,expiry:a,relay:o,active:!1,methods:n?.methods},c=_p({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:o,expiryTimestamp:a,methods:n?.methods});return this.events.emit(Oi.create,f),this.core.expirer.set(s,a),await this.pairings.set(s,f),await this.core.relayer.subscribe(s,{transportType:n?.transportType}),{topic:s,uri:c}},this.pair=async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[rn.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:a,relay:o,expiryTimestamp:f,methods:c}=wp(n.uri);i.props.properties.topic=s,i.addTrace(rn.pairing_uri_validation_success),i.addTrace(rn.pairing_uri_not_expired);let h;if(this.pairings.keys.includes(s)){if(h=this.pairings.get(s),i.addTrace(rn.existing_pairing),h.active)throw i.setError(Tn.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(rn.pairing_not_expired)}const d=f||Dt(ae.FIVE_MINUTES),p={topic:s,relay:o,expiry:d,active:!1,methods:c};this.core.expirer.set(s,d),await this.pairings.set(s,p),i.addTrace(rn.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Oi.create,p),i.addTrace(rn.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(a,s),i.addTrace(rn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Tn.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:o})}catch(v){throw i.setError(Tn.subscribe_pairing_topic_failure),v}return i.addTrace(rn.subscribe_pairing_topic_success),p},this.activate=async({topic:n})=>{this.isInitialized();const i=Dt(ae.THIRTY_DAYS);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:a,resolve:o,reject:f}=Bi();this.events.once(tt("pairing_ping",s),({error:c})=>{c?f(c):o()}),await a()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ht("USER_DISCONNECTED")),await this.deletePairing(i))},this.formatUriFromPairing=n=>{this.isInitialized();const{topic:i,relay:s,expiry:a,methods:o}=n,f=this.core.crypto.keychain.get(i);return _p({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:s,expiryTimestamp:a,methods:o})},this.sendRequest=async(n,i,s)=>{const a=$i(i,s),o=await this.core.crypto.encode(n,a),f=ua[i].req;return this.core.history.set(n,a),this.core.relayer.publish(n,o,f),a.id},this.sendResult=async(n,i,s)=>{const a=Qh(n,s),o=await this.core.crypto.encode(i,a),f=await this.core.history.get(i,n),c=ua[f.request.method].res;await this.core.relayer.publish(i,o,c),await this.core.history.resolve(a)},this.sendError=async(n,i,s)=>{const a=ed(n,s),o=await this.core.crypto.encode(i,a),f=await this.core.history.get(i,n),c=ua[f.request.method]?ua[f.request.method].res:ua.unregistered_method.res;await this.core.relayer.publish(i,o,c),await this.core.history.resolve(a)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ht("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>si(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,a=(await this.core.history.get(i,s.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Oi.ping,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{nn(i)?this.events.emit(tt("pairing_ping",s),{}):Ir(i)&&this.events.emit(tt("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Oi.delete,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:a}=i;try{if(this.registeredMethods.includes(a))return;const o=ht("WC_METHOD_UNSUPPORTED",a);await this.sendError(s,n,o),this.logger.error(o)}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(ht("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=(n,i)=>{var s;if(!cr(n)){const{message:o}=oe("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Tn.malformed_pairing_uri),new Error(o)}if(!wD(n.uri)){const{message:o}=oe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Tn.malformed_pairing_uri),new Error(o)}const a=wp(n?.uri);if(!((s=a?.relay)!=null&&s.protocol)){const{message:o}=oe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Tn.malformed_pairing_uri),new Error(o)}if(!(a!=null&&a.symKey)){const{message:o}=oe("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Tn.malformed_pairing_uri),new Error(o)}if(a!=null&&a.expiryTimestamp&&ae.toMiliseconds(a?.expiryTimestamp)<Date.now()){i.setError(Tn.pairing_expired);const{message:o}=oe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}},this.isValidPing=async n=>{if(!cr(n)){const{message:s}=oe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!cr(n)){const{message:s}=oe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!wt(n,!1)){const{message:i}=oe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=oe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(si(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=oe("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=rr(r,this.name),this.pairings=new ns(this.core,this.logger,this.name,this.storagePrefix)}get context(){return pr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ft.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===ut.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{td(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):fc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Cr.expired,async e=>{const{topic:r}=v2(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Oi.expire,{topic:r}))})}}class pB extends gw{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Yr.EventEmitter,this.name=aC,this.version=oC,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const a={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Dt(ae.THIRTY_DAYS)};this.records.set(a.id,a),this.persist(),this.events.emit(kr.created,a)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Ir(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(kr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(kr.deleted,s)}}),this.persist()},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=rr(r,this.name)}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:$i(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(kr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(kr.created,e=>{const r=kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(kr.updated,e=>{const r=kr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(kr.deleted,e=>{const r=kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(qs.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ae.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(kr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class bB extends _w{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Yr.EventEmitter,this.name=cC,this.version=fC,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),a={target:s,expiry:i};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(Cr.created,{target:s,expiration:a})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Cr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=rr(r,this.name)}get context(){return pr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lS(e);if(typeof e=="number")return pS(e);const{message:r}=oe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Cr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ae.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Cr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(qs.pulse,()=>this.checkExpirations()),this.events.on(Cr.created,e=>{const r=Cr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Cr.expired,e=>{const r=Cr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Cr.deleted,e=>{const r=Cr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class gB extends Ew{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,this.name=uC,this.verifyUrlV3=dC,this.storagePrefix=gn,this.version=O2,this.init=async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ae.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async i=>{if(!po()||this.isDevEnv)return;const s=window.location.origin,{id:a,decryptedId:o}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${a}&decryptedId=${o}`;try{const c=oo(),h=this.startAbortTimer(ae.ONE_SECOND*5),d=await new Promise((p,v)=>{const x=()=>{window.removeEventListener("message",S),c.body.removeChild(D),v("attestation aborted")};this.abortController.signal.addEventListener("abort",x);const D=c.createElement("iframe");D.src=f,D.style.display="none",D.addEventListener("error",x,{signal:this.abortController.signal});const S=O=>{if(O.data&&typeof O.data=="string")try{const A=JSON.parse(O.data);if(A.type==="verify_attestation"){if(Su(A.attestation).payload.id!==a)return;clearInterval(h),c.body.removeChild(D),this.abortController.signal.removeEventListener("abort",x),window.removeEventListener("message",S),p(A.attestation===null?"":A.attestation)}}catch(A){this.logger.warn(A)}};c.body.appendChild(D),window.addEventListener("message",S,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(c){this.logger.warn(c)}return""},this.resolve=async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:a,encryptedId:o}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Su(s).payload.id!==o)return;const c=await this.isValidJwtAttestation(s);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!a)return;const f=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(a,f)},this.fetchAttestation=async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const a=this.startAbortTimer(ae.ONE_SECOND*5),o=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(a),o.status===200?await o.json():void 0},this.getVerifyUrl=i=>{let s=i||xa;return lC.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${xa}`),s=xa),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(ae.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}},this.persistPublicKey=async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}const a=await this.fetchAndPersistPublicKey();try{if(a)return this.validateAttestation(i,a)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const a=await this.fetchPublicKey();a&&(await this.persistPublicKey(a),s(a))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i},this.validateAttestation=(i,s)=>{const a=rD(i,s.publicKey),o={hasExpired:ae.toMiliseconds(a.exp)<Date.now(),payload:a};if(o.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:o.payload.origin,isScam:o.payload.isScam,isVerified:o.payload.isVerified}},this.logger=rr(r,this.name),this.abortController=new AbortController,this.isDevEnv=Wh(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return pr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ae.toMiliseconds(e))}}class vB extends Aw{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=pC,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:a,enableEncrypted:o=!1}=n,f=`${bC}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:a,token:s,always_raw:o})})},this.logger=rr(r,this.context)}}var yB=Object.defineProperty,r1=Object.getOwnPropertySymbols,mB=Object.prototype.hasOwnProperty,xB=Object.prototype.propertyIsEnumerable,n1=(t,e,r)=>e in t?yB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,la=(t,e)=>{for(var r in e||(e={}))mB.call(e,r)&&n1(t,r,e[r]);if(r1)for(var r of r1(e))xB.call(e,r)&&n1(t,r,e[r]);return t};class wB extends Sw{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,this.context=vC,this.storagePrefix=gn,this.storageVersion=gC,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!Wh())try{const i={eventId:fp(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:l2(this.core.relayer.protocol,this.core.relayer.version,qu)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}},this.createEvent=i=>{const{event:s="ERROR",type:a="",properties:{topic:o,trace:f}}=i,c=fp(),h=this.core.projectId||"",d=Date.now(),p=la({eventId:c,timestamp:d,props:{event:s,type:a,properties:{topic:o,trace:f}},bundleId:h,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,p),this.shouldPersist=!0),p},this.getEvent=i=>{const{eventId:s,topic:a}=i;if(s)return this.events.get(s);const o=Array.from(this.events.values()).find(f=>f.props.properties.topic===a);if(o)return la(la({},o),this.setMethods(o.eventId))},this.deleteEvent=i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(qs.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{ae.fromMiliseconds(Date.now())-ae.fromMiliseconds(i.timestamp)>yC&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})},this.setMethods=i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)}),this.addTrace=(i,s)=>{const a=this.events.get(i);a&&(a.props.properties.trace.push(s),this.events.set(i,a),this.shouldPersist=!0)},this.setError=(i,s)=>{const a=this.events.get(i);a&&(a.props.type=s,a.timestamp=Date.now(),this.events.set(i,a),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,la(la({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,a]of this.events)a.props.type&&i.push(a);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${mC}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${qu}${s}`,{method:"POST",body:JSON.stringify(i)})},this.getAppDomain=()=>d2().url,this.logger=rr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var _B=Object.defineProperty,i1=Object.getOwnPropertySymbols,EB=Object.prototype.hasOwnProperty,AB=Object.prototype.propertyIsEnumerable,s1=(t,e,r)=>e in t?_B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,a1=(t,e)=>{for(var r in e||(e={}))EB.call(e,r)&&s1(t,r,e[r]);if(i1)for(var r of i1(e))AB.call(e,r)&&s1(t,r,e[r]);return t};let SB=class W2 extends bw{constructor(e){var r;super(e),this.protocol=R2,this.version=O2,this.name=y0,this.events=new Yr.EventEmitter,this.initialized=!1,this.on=(a,o)=>this.events.on(a,o),this.once=(a,o)=>this.events.once(a,o),this.off=(a,o)=>this.events.off(a,o),this.removeListener=(a,o)=>this.events.removeListener(a,o),this.dispatchEnvelope=({topic:a,message:o,sessionExists:f})=>{if(!a||!o)return;const c={topic:a,message:o,publishedAt:Date.now(),transportType:ut.link_mode};this.relayer.onLinkMessageEvent(c,{sessionExists:f})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||N2,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=Mh({level:typeof e?.logger=="string"&&e.logger?e.logger:qM.logger,name:y0}),{logger:i,chunkLoggerController:s}=pw({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,o;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((o=this.logChunkController)==null||o.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=rr(i,this.name),this.heartbeat=new a4,this.crypto=new KI(this,this.logger,e?.keychain),this.history=new pB(this,this.logger),this.expirer=new bB(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new q4(a1(a1({},zM),e?.storageOptions)),this.relayer=new fB({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new lB(this,this.logger),this.verify=new gB(this,this.logger,this.storage),this.echoClient=new vB(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new wB(this,this.logger,e?.telemetryEnabled)}static async init(e){const r=new W2(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(eC,n),r}get context(){return pr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem($p,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem($p)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const m0=SB,Z2="wc",X2=2,Y2="client",rd=`${Z2}@${X2}:${Y2}:`,af={name:Y2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},o1="WALLETCONNECT_DEEPLINK_CHOICE",DB="proposal",MB="Proposal expired",CB="session",hs=ae.SEVEN_DAYS,IB="engine",It={wc_sessionPropose:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ae.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ae.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1119}}},of={min:ae.FIVE_MINUTES,max:ae.SEVEN_DAYS},tn={idle:"IDLE",active:"ACTIVE"},BB="request",PB=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],FB="wc",RB="auth",OB="authKeys",TB="pairingTopics",NB="requests",hc=`${FB}@${1.5}:${RB}:`,Ko=`${hc}:PUB_KEY`;var $B=Object.defineProperty,LB=Object.defineProperties,kB=Object.getOwnPropertyDescriptors,c1=Object.getOwnPropertySymbols,qB=Object.prototype.hasOwnProperty,zB=Object.prototype.propertyIsEnumerable,f1=(t,e,r)=>e in t?$B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yt=(t,e)=>{for(var r in e||(e={}))qB.call(e,r)&&f1(t,r,e[r]);if(c1)for(var r of c1(e))zB.call(e,r)&&f1(t,r,e[r]);return t},zr=(t,e)=>LB(t,kB(e));class UB extends Mw{constructor(e){super(e),this.name=IB,this.events=new Jg,this.initialized=!1,this.requestQueue={state:tn.idle,queue:[]},this.sessionRequestQueue={state:tn.idle,queue:[]},this.requestQueueDelay=ae.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(It)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=zr(yt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:o,relays:f}=n;let c=i,h,d=!1;try{c&&(d=this.client.core.pairing.pairings.get(c).active)}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),P}if(!c||!d){const{topic:P,uri:k}=await this.client.core.pairing.create();c=P,h=k}if(!c){const{message:P}=oe("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(P)}const p=await this.client.core.crypto.generateKeyPair(),v=It.wc_sessionPropose.req.ttl||ae.FIVE_MINUTES,x=Dt(v),D=yt({requiredNamespaces:s,optionalNamespaces:a,relays:f??[{protocol:T2}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:x,pairingTopic:c},o&&{sessionProperties:o}),{reject:S,resolve:O,done:A}=Bi(v,MB);this.events.once(tt("session_connect"),async({error:P,session:k})=>{if(P)S(P);else if(k){k.self.publicKey=p;const L=zr(yt({},k),{pairingTopic:D.pairingTopic,requiredNamespaces:D.requiredNamespaces,optionalNamespaces:D.optionalNamespaces,transportType:ut.relay});await this.client.session.set(k.topic,L),await this.setExpiry(k.topic,k.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:k.peer.metadata}),this.cleanupDuplicatePairings(L),O(L)}});const F=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:D,throwOnFailedPublish:!0});return await this.setProposal(F,yt({id:F},D)),{uri:h,approval:A}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async r=>{var n,i,s;const a=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[qr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(T){throw a.setError(Ci.no_internet_connection),T}try{await this.isValidProposalId(r?.id)}catch(T){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),a.setError(Ci.proposal_not_found),T}try{await this.isValidApprove(r)}catch(T){throw this.client.logger.error("approve() -> isValidApprove() failed"),a.setError(Ci.session_approve_namespace_validation_failure),T}const{id:o,relayProtocol:f,namespaces:c,sessionProperties:h,sessionConfig:d}=r,p=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:a.eventId});const{pairingTopic:v,proposer:x,requiredNamespaces:D,optionalNamespaces:S}=p;let O=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});O||(O=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:qr.session_approve_started,properties:{topic:v,trace:[qr.session_approve_started,qr.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),F=x.publicKey,P=await this.client.core.crypto.generateSharedKey(A,F),k=yt(yt({relay:{protocol:f??"irn"},namespaces:c,controller:{publicKey:A,metadata:this.client.metadata},expiry:Dt(hs)},h&&{sessionProperties:h}),d&&{sessionConfig:d}),L=ut.relay;O.addTrace(qr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:L})}catch(T){throw O.setError(Ci.subscribe_session_topic_failure),T}O.addTrace(qr.subscribe_session_topic_success);const m=zr(yt({},k),{topic:P,requiredNamespaces:D,optionalNamespaces:S,pairingTopic:v,acknowledged:!1,self:k.controller,peer:{publicKey:x.publicKey,metadata:x.metadata},controller:A,transportType:ut.relay});await this.client.session.set(P,m),O.addTrace(qr.store_session);try{O.addTrace(qr.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(T=>{throw O?.setError(Ci.session_settle_publish_failure),T}),O.addTrace(qr.session_settle_publish_success),O.addTrace(qr.publishing_session_approve),await this.sendResult({id:o,topic:v,result:{relay:{protocol:f??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(T=>{throw O?.setError(Ci.session_approve_publish_failure),T}),O.addTrace(qr.session_approve_publish_success)}catch(T){throw this.client.logger.error(T),this.client.session.delete(P,ht("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),T}return this.client.core.eventClient.deleteEvent({eventId:O.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:x.metadata}),await this.client.proposal.delete(o,ht("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(P,Dt(hs)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(a){throw this.client.logger.error("reject() -> isValidReject() failed"),a}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(a){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),a}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:It.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ht("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:i}=r,{done:s,resolve:a,reject:o}=Bi(),f=Nn(),c=Ni().toString(),h=this.client.session.get(n).namespaces;return this.events.once(tt("session_update",f),({error:d})=>{d?o(d):a()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:c}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:h}),o(d)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:n}=r,i=Nn(),{done:s,resolve:a,reject:o}=Bi();return this.events.once(tt("session_extend",i),({error:f})=>{f?o(f):a()}),await this.setExpiry(n,Dt(hs)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{o(f)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(x){throw this.client.logger.error("request() -> isValidRequest() failed"),x}const{chainId:n,request:i,topic:s,expiry:a=It.wc_sessionRequest.req.ttl}=r,o=this.client.session.get(s);o?.transportType===ut.relay&&await this.confirmOnlineStateOrThrow();const f=Nn(),c=Ni().toString(),{done:h,resolve:d,reject:p}=Bi(a,"Request expired. Please try again.");this.events.once(tt("session_request",f),({error:x,result:D})=>{x?p(x):d(D)});const v=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);return v?(await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:zr(yt({},i),{expiryTimestamp:Dt(a)}),chainId:n},expiry:a,throwOnFailedPublish:!0,appLink:v}).catch(x=>p(x)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:f}),await h()):await Promise.all([new Promise(async x=>{await this.sendRequest({clientRpcId:f,relayRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:zr(yt({},i),{expiryTimestamp:Dt(a)}),chainId:n},expiry:a,throwOnFailedPublish:!0}).catch(D=>p(D)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:f}),x()}),new Promise(async x=>{var D;if(!((D=o.sessionConfig)!=null&&D.disableDeepLink)){const S=await yS(this.client.core.storage,o1);await gS({id:f,topic:s,wcDeepLink:S})}x()}),h()]).then(x=>x[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,a=this.client.session.get(n);a.transportType===ut.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);nn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:o}):Ir(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:o}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Nn(),s=Ni().toString(),{done:a,resolve:o,reject:f}=Bi();this.events.once(tt("session_ping",i),({error:c})=>{c?f(c):o()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),a()])}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,a=Ni().toString(),o=Nn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:a,clientRpcId:o})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ht("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=oe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>mD(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),a=s?ut.link_mode:ut.relay;a===ut.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:f="",uri:c,domain:h,nonce:d,type:p,exp:v,nbf:x,methods:D=[],expiry:S}=r,O=[...r.resources||[]],{topic:A,uri:F}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:A,uri:F}});const P=await this.client.core.crypto.generateKeyPair(),k=Ho(P);if(await Promise.all([this.client.auth.authKeys.set(Ko,{responseTopic:k,publicKey:P}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:A})]),await this.client.core.relayer.subscribe(k,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${A}`),D.length>0){const{namespace:B}=Uo(o[0]);let C=qS(B,"request",D);jo(O)&&(C=US(C,O.pop())),O.push(C)}const L=S&&S>It.wc_sessionAuthenticate.req.ttl?S:It.wc_sessionAuthenticate.req.ttl,m={authPayload:{type:p??"caip122",chains:o,statement:f,aud:c,domain:h,version:"1",nonce:d,iat:new Date().toISOString(),exp:v,nbf:x,resources:O},requester:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:Dt(L)},T={eip155:{chains:o,methods:[...new Set(["personal_sign",...D])],events:["chainChanged","accountsChanged"]}},j={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:A,proposer:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:Dt(It.wc_sessionPropose.req.ttl)},{done:U,resolve:N,reject:g}=Bi(L,"Request expired"),b=async({error:B,session:C})=>{if(this.events.off(tt("session_request",l),u),B)g(B);else if(C){C.self.publicKey=P,await this.client.session.set(C.topic,C),await this.setExpiry(C.topic,C.expiry),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:C.peer.metadata});const y=this.client.session.get(C.topic);await this.deleteProposal(w),N({session:y})}},u=async B=>{var C,y,E;if(await this.deletePendingAuthRequest(l,{message:"fulfilled",code:0}),B.error){const q=ht("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return B.error.code===q.code?void 0:(this.events.off(tt("session_connect"),b),g(B.error.message))}await this.deleteProposal(w),this.events.off(tt("session_connect"),b);const{cacaos:_,responder:$}=B.result,V=[],R=[];for(const q of _){await dp({cacao:q,projectId:this.client.core.projectId})||(this.client.logger.error(q,"Signature verification failed"),g(ht("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:H}=q,M=jo(H.resources),K=[Tu(H.iss)],Z=l0(H.iss);if(M){const Y=lp(M),J=pp(M);V.push(...Y),K.push(...J)}for(const Y of K)R.push(`${Y}:${Z}`)}const W=await this.client.core.crypto.generateSharedKey(P,$.publicKey);let z;V.length>0&&(z={topic:W,acknowledged:!0,self:{publicKey:P,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:Dt(hs),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:A,namespaces:Ep([...new Set(V)],[...new Set(R)]),transportType:a},await this.client.core.relayer.subscribe(W,{transportType:a}),await this.client.session.set(W,z),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:$.metadata}),z=this.client.session.get(W)),(C=this.client.metadata.redirect)!=null&&C.linkMode&&(y=$.metadata.redirect)!=null&&y.linkMode&&(E=$.metadata.redirect)!=null&&E.universal&&n&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(W,{transportType:ut.link_mode})),N({auths:_,session:z})},l=Nn(),w=Nn();this.events.once(tt("session_connect"),b),this.events.once(tt("session_request",l),u);let I;try{if(s){const B=$i("wc_sessionAuthenticate",m,l);this.client.core.history.set(A,B);const C=await this.client.core.crypto.encode("",B,{type:vo,encoding:ca});I=Ro(n,A,C)}else await Promise.all([this.sendRequest({topic:A,method:"wc_sessionAuthenticate",params:m,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:l}),this.sendRequest({topic:A,method:"wc_sessionPropose",params:j,expiry:It.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:w})])}catch(B){throw this.events.off(tt("session_connect"),b),this.events.off(tt("session_request",l),u),B}return await this.setProposal(w,yt({id:w},j)),await this.setAuthRequest(l,{request:zr(yt({},m),{verifyContext:{}}),pairingTopic:A,transportType:a}),{uri:I??F,response:U}},this.approveSessionAuthenticate=async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ii.authenticated_session_approve_started]}});try{this.isInitialized()}catch(S){throw s.setError(ha.no_internet_connection),S}const a=this.getPendingAuthRequest(n);if(!a)throw s.setError(ha.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const o=a.transportType||ut.relay;o===ut.relay&&await this.confirmOnlineStateOrThrow();const f=a.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),h=Ho(f),d={type:Un,receiverPublicKey:f,senderPublicKey:c},p=[],v=[];for(const S of i){if(!await dp({cacao:S,projectId:this.client.core.projectId})){s.setError(ha.invalid_cacao);const k=ht("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:h,error:k,encodeOpts:d}),new Error(k.message)}s.addTrace(Ii.cacaos_verified);const{p:O}=S,A=jo(O.resources),F=[Tu(O.iss)],P=l0(O.iss);if(A){const k=lp(A),L=pp(A);p.push(...k),F.push(...L)}for(const k of F)v.push(`${k}:${P}`)}const x=await this.client.core.crypto.generateSharedKey(c,f);s.addTrace(Ii.create_authenticated_session_topic);let D;if(p?.length>0){D={topic:x,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:f,metadata:a.requester.metadata},controller:f,expiry:Dt(hs),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:a.pairingTopic,namespaces:Ep([...new Set(p)],[...new Set(v)]),transportType:o},s.addTrace(Ii.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(x,{transportType:o})}catch(S){throw s.setError(ha.subscribe_authenticated_session_topic_failure),S}s.addTrace(Ii.subscribe_authenticated_session_topic_success),await this.client.session.set(x,D),s.addTrace(Ii.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:a.pairingTopic,metadata:a.requester.metadata})}s.addTrace(Ii.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:n,result:{cacaos:i,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(a.requester.metadata,o)})}catch(S){throw s.setError(ha.authenticated_session_approve_publish_failure),S}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:D}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===ut.relay&&await this.confirmOnlineStateOrThrow();const a=s.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),f=Ho(a),c={type:Un,receiverPublicKey:a,senderPublicKey:o};await this.sendError({id:n,topic:f,error:i,encodeOpts:c,rpcOpts:It.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ht("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:n,iss:i}=r;return m2(n,i)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var a,o;return((a=s.peerMetadata)==null?void 0:a.url)&&((o=s.peerMetadata)==null?void 0:o.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:a=!0,id:o=0}=r,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,ht("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(o1).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===i&&this.deletePendingSessionRequest(c.id,ht("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=tn.idle),a&&this.client.events.emit("session_delete",{id:o,topic:i})},this.deleteProposal=async(r,n)=>{if(n)try{const i=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Ci.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ht("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=tn.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))},this.setProposal=async(r,n)=>{this.client.core.expirer.set(r,Dt(It.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)},this.setAuthRequest=async(r,n)=>{const{request:i,pairingTopic:s,transportType:a=ut.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:a})},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:a}=r,o=s.request.expiryTimestamp||Dt(It.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,o),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:a})},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:a,relayRpcId:o,clientRpcId:f,throwOnFailedPublish:c,appLink:h}=r,d=$i(i,s,f);let p;const v=!!h;try{const S=v?ca:ci;p=await this.client.core.crypto.encode(n,d,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let x;if(PB.includes(i)){const S=Ln(JSON.stringify(d)),O=Ln(p);x=await this.client.core.verify.register({id:O,decryptedId:S})}const D=It[i].req;if(D.attestation=x,a&&(D.ttl=a),o&&(D.id=o),this.client.core.history.set(n,d),v){const S=Ro(h,n,p);await global.Linking.openURL(S,this.client.name)}else{const S=It[i].req;a&&(S.ttl=a),o&&(S.id=o),c?(S.internal=zr(yt({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,p,S)):this.client.core.relayer.publish(n,p,S).catch(O=>this.client.logger.error(O))}return d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:a,encodeOpts:o,appLink:f}=r,c=Qh(n,s);let h;const d=f&&typeof(global==null?void 0:global.Linking)<"u";try{const v=d?ca:ci;h=await this.client.core.crypto.encode(i,c,zr(yt({},o||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),v}let p;try{p=await this.client.core.history.get(i,n)}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),v}if(d){const v=Ro(f,i,h);await global.Linking.openURL(v,this.client.name)}else{const v=It[p.request.method].res;a?(v.internal=zr(yt({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,h,v)):this.client.core.relayer.publish(i,h,v).catch(x=>this.client.logger.error(x))}await this.client.core.history.resolve(c)},this.sendError=async r=>{const{id:n,topic:i,error:s,encodeOpts:a,rpcOpts:o,appLink:f}=r,c=ed(n,s);let h;const d=f&&typeof(global==null?void 0:global.Linking)<"u";try{const v=d?ca:ci;h=await this.client.core.crypto.encode(i,c,zr(yt({},a||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),v}let p;try{p=await this.client.core.history.get(i,n)}catch(v){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),v}if(d){const v=Ro(f,i,h);await global.Linking.openURL(v,this.client.name)}else{const v=o||It[p.request.method].res;this.client.core.relayer.publish(i,h,v)}await this.client.core.history.resolve(c)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;si(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{si(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===tn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tn.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=tn.idle},this.processRequest=async r=>{const{topic:n,payload:i,attestation:s,transportType:a,encryptedId:o}=r,f=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:o,transportType:a});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:o,transportType:a});default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i,transportType:s}=r,a=(await this.client.core.history.get(n,i.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${a}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=oe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:n,payload:i,attestation:s,encryptedId:a}=r,{params:o,id:f}=i;try{const c=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c?.setError(Tn.proposal_listener_not_found)),this.isValidConnect(yt({},i.params));const h=o.expiryTimestamp||Dt(It.wc_sessionPropose.req.ttl),d=yt({id:f,pairingTopic:n,expiryTimestamp:h},o);await this.setProposal(f,d);const p=await this.getVerifyContext({attestationId:s,hash:Ln(JSON.stringify(i)),encryptedId:a,metadata:d.proposer.metadata});c?.addTrace(rn.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:d,verifyContext:p})}catch(c){await this.sendError({id:f,topic:n,error:c,rpcOpts:It.wc_sessionPropose.autoReject}),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n,i)=>{const{id:s}=n;if(nn(n)){const{result:a}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const o=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const f=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const c=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const h=await this.client.core.crypto.generateSharedKey(f,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const d=await this.client.core.relayer.subscribe(h,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Ir(n)){await this.client.proposal.delete(s,ht("USER_DISCONNECTED"));const a=tt("session_connect");if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(tt("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:a,controller:o,expiry:f,namespaces:c,sessionProperties:h,sessionConfig:d}=n.params,p=zr(yt(yt({topic:r,relay:a,expiry:f,namespaces:c,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},h&&{sessionProperties:h}),d&&{sessionConfig:d}),{transportType:ut.relay}),v=tt("session_connect");if(this.events.listenerCount(v)===0)throw new Error(`emitting ${v} without any listeners 997`);this.events.emit(tt("session_connect"),{session:p}),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(a){await this.sendError({id:i,topic:r,error:a}),this.client.logger.error(a)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;nn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(tt("session_approve",i),{})):Ir(n)&&(await this.client.session.delete(r,ht("USER_DISCONNECTED")),this.events.emit(tt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const a=`${r}_session_update`,o=fa.get(a);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ht("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yt({topic:r},i));try{fa.set(a,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(f){throw fa.delete(a),f}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(a){await this.sendError({id:s,topic:r,error:a}),this.client.logger.error(a)}},this.isRequestOutOfSync=(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n,s=tt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nn(n)?this.events.emit(tt("session_update",i),{}):Ir(n)&&this.events.emit(tt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Dt(hs)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n,s=tt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nn(n)?this.events.emit(tt("session_extend",i),{}):Ir(n)&&this.events.emit(tt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n,s=tt("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{nn(n)?this.events.emit(tt("session_ping",i),{}):Ir(n)&&this.events.emit(tt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Ft.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ht("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var n,i,s;const{topic:a,payload:o,attestation:f,encryptedId:c,transportType:h}=r,{id:d,params:p}=o;try{await this.isValidRequest(yt({topic:a},p));const v=this.client.session.get(a),x=await this.getVerifyContext({attestationId:f,hash:Ln(JSON.stringify($i("wc_sessionRequest",p,d))),encryptedId:c,metadata:v.peer.metadata,transportType:h}),D={id:d,topic:a,params:p,verifyContext:x};await this.setPendingSessionRequest(D),h===ut.link_mode&&(n=v.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=v.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(D):(this.addSessionRequestToSessionRequestQueue(D),this.processSessionRequestQueue())}catch(v){await this.sendError({id:d,topic:a,error:v}),this.client.logger.error(v)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n,s=tt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nn(n)?this.events.emit(tt("session_request",i),{result:n.result}):Ir(n)&&this.events.emit(tt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const a=`${r}_session_event_${s.event.name}`,o=fa.get(a);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(yt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),fa.set(a,i)}catch(a){await this.sendError({id:i,topic:r,error:a}),this.client.logger.error(a)}},this.onSessionAuthenticateResponse=(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),nn(n)?this.events.emit(tt("session_request",i),{result:n.result}):Ir(n)&&this.events.emit(tt("session_request",i),{error:n.error})},this.onSessionAuthenticateRequest=async r=>{var n;const{topic:i,payload:s,attestation:a,encryptedId:o,transportType:f}=r;try{const{requester:c,authPayload:h,expiryTimestamp:d}=s.params,p=await this.getVerifyContext({attestationId:a,hash:Ln(JSON.stringify(s)),encryptedId:o,metadata:c.metadata,transportType:f}),v={requester:c,pairingTopic:i,id:s.id,authPayload:h,verifyContext:p,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:v,pairingTopic:i,transportType:f}),f===ut.link_mode&&(n=c.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:p})}catch(c){this.client.logger.error(c);const h=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=this.getAppLinkIfEnabled(s.params.requester.metadata,f),v={type:Un,receiverPublicKey:h,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:c,encodeOpts:v,rpcOpts:It.wc_sessionAuthenticate.autoReject,appLink:p})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=tn.idle,this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const a=s.request.id,o=tt("session_request",a);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(tt("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===tn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tn.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:$i("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})},this.isValidConnect=async r=>{if(!cr(r)){const{message:f}=oe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(f)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:a,relays:o}=r;if(er(n)||await this.isValidPairingTopic(n),!PD(o)){const{message:f}=oe("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(f)}!er(i)&&b0(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!er(s)&&b0(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),er(a)||this.validateSessionProps(a,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=BD(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!cr(r))throw new Error(oe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const o=this.client.proposal.get(n),f=tf(i,"approve()");if(f)throw new Error(f.message);const c=Dp(o.requiredNamespaces,i,"approve()");if(c)throw new Error(c.message);if(!wt(s,!0)){const{message:h}=oe("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}er(a)||this.validateSessionProps(a,"sessionProperties")},this.isValidReject=async r=>{if(!cr(r)){const{message:s}=oe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!RD(i)){const{message:s}=oe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!cr(r)){const{message:c}=oe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}const{relay:n,controller:i,namespaces:s,expiry:a}=r;if(!M2(n)){const{message:c}=oe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const o=AD(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);const f=tf(s,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(si(a)){const{message:c}=oe("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async r=>{if(!cr(r)){const{message:f}=oe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(f)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),a=tf(i,"update()");if(a)throw new Error(a.message);const o=Dp(s.requiredNamespaces,i,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async r=>{if(!cr(r)){const{message:i}=oe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!cr(r)){const{message:f}=oe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(f)}const{topic:n,request:i,chainId:s,expiry:a}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Sp(o,s)){const{message:f}=oe("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(f)}if(!OD(i)){const{message:f}=oe("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!$D(o,s,i.method)){const{message:f}=oe("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(a&&!zD(a,of)){const{message:f}=oe("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${of.min} and ${of.max}`);throw new Error(f)}},this.isValidRespond=async r=>{var n;if(!cr(r)){const{message:a}=oe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(a){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!TD(s)){const{message:a}=oe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidPing=async r=>{if(!cr(r)){const{message:i}=oe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!cr(r)){const{message:o}=oe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(o)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Sp(a,s)){const{message:o}=oe("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(o)}if(!ND(i)){const{message:o}=oe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}if(!LD(a,s,i.name)){const{message:o}=oe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidDisconnect=async r=>{if(!cr(r)){const{message:i}=oe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=r=>{const{chains:n,uri:i,domain:s,nonce:a}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!wt(i,!1))throw new Error("uri is required parameter");if(!wt(s,!1))throw new Error("domain is required parameter");if(!wt(a,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(f=>Uo(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=Uo(n[0]);if(o!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:a,transportType:o}=r,f={verified:{verifyUrl:a.verifyUrl||xa,validation:"UNKNOWN",origin:a.url||""}};try{if(o===ut.link_mode){const h=this.getAppLinkIfEnabled(a,o);return f.verified.validation=h&&new URL(h).origin===new URL(a.url).origin?"VALID":"INVALID",f}const c=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:a.verifyUrl});c&&(f.verified.origin=c.origin,f.verified.isScam=c.isScam,f.verified.validation=c.origin===new URL(a.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!wt(i,!1)){const{message:s}=oe("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const a of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(a)}}},this.checkRecentlyDeleted=r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=oe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}},this.isLinkModeEnabled=(r,n)=>{var i,s,a,o,f,c,h,d,p;return!r||n!==ut.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((o=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:o.universal)!==void 0&&((c=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:c.universal)!==""&&((h=r?.redirect)==null?void 0:h.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((p=r?.redirect)==null?void 0:p.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r?.redirect)==null?void 0:i.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=cp(r,"topic")||"",i=decodeURIComponent(cp(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:ut.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(Wh()||wi()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ft.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:a}=this.client.auth.authKeys.keys.includes(Ko)?this.client.auth.authKeys.get(Ko):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(r,n,{receiverPublicKey:a,encoding:s===ut.link_mode?ca:ci});try{td(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o,attestation:i,transportType:s,encryptedId:Ln(n)})):fc(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o,transportType:s}),this.client.core.history.delete(r,o.id)):this.onRelayEventUnknownPayload({topic:r,payload:o,transportType:s})}catch(f){this.client.logger.error(f)}}registerExpirerEvents(){this.client.core.expirer.on(Cr.expired,async e=>{const{topic:r,id:n}=v2(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,oe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,oe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Oi.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Oi.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!wt(e,!1)){const{message:r}=oe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(si(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=oe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!wt(e,!1)){const{message:r}=oe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(si(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=oe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=oe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(wt(e,!1)){const{message:r}=oe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=oe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!FD(e)){const{message:r}=oe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(si(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=oe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class jB extends ns{constructor(e,r){super(e,r,DB,rd),this.core=e,this.logger=r}}class J2 extends ns{constructor(e,r){super(e,r,CB,rd),this.core=e,this.logger=r}}class HB extends ns{constructor(e,r){super(e,r,BB,rd,n=>n.id),this.core=e,this.logger=r}}class KB extends ns{constructor(e,r){super(e,r,OB,hc,()=>Ko),this.core=e,this.logger=r}}class VB extends ns{constructor(e,r){super(e,r,TB,hc),this.core=e,this.logger=r}}class GB extends ns{constructor(e,r){super(e,r,NB,hc,n=>n.id),this.core=e,this.logger=r}}class WB{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new KB(this.core,this.logger),this.pairingTopics=new VB(this.core,this.logger),this.requests=new GB(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class nd extends Dw{constructor(e){super(e),this.protocol=Z2,this.version=X2,this.name=af.name,this.events=new Yr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||af.name,this.metadata=e?.metadata||d2(),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:j0(Mh({level:e?.logger||af.logger}));this.core=e?.core||new m0(e),this.logger=rr(r,this.name),this.session=new J2(this.core,this.logger),this.proposal=new jB(this.core,this.logger),this.pendingRequest=new HB(this.core,this.logger),this.engine=new UB(this),this.auth=new WB(this.core,this.logger)}static async init(e){const r=new nd(e);return await r.initialize(),r}get context(){return pr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ae.toMiliseconds(ae.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const ZB=J2,XB=nd;var ju={exports:{}},ws=typeof Reflect=="object"?Reflect:null,u1=ws&&typeof ws.apply=="function"?ws.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Vo;ws&&typeof ws.ownKeys=="function"?Vo=ws.ownKeys:Object.getOwnPropertySymbols?Vo=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Vo=function(t){return Object.getOwnPropertyNames(t)};function YB(t){console&&console.warn&&console.warn(t)}var h1=Number.isNaN||function(t){return t!==t};function ct(){ct.init.call(this)}ju.exports=ct,ju.exports.once=tP,ct.EventEmitter=ct,ct.prototype._events=void 0,ct.prototype._eventsCount=0,ct.prototype._maxListeners=void 0;var d1=10;function Go(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ct,"defaultMaxListeners",{enumerable:!0,get:function(){return d1},set:function(t){if(typeof t!="number"||t<0||h1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d1=t}}),ct.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ct.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||h1(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Q2(t){return t._maxListeners===void 0?ct.defaultMaxListeners:t._maxListeners}ct.prototype.getMaxListeners=function(){return Q2(this)},ct.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=i[t];if(o===void 0)return!1;if(typeof o=="function")u1(o,this,e);else for(var f=o.length,c=ey(o,f),r=0;r<f;++r)u1(c[r],this,e);return!0};function l1(t,e,r,n){var i,s,a;if(Go(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=Q2(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,YB(o)}return t}ct.prototype.addListener=function(t,e){return l1(this,t,e,!1)},ct.prototype.on=ct.prototype.addListener,ct.prototype.prependListener=function(t,e){return l1(this,t,e,!0)};function JB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=JB.bind(n);return i.listener=r,n.wrapFn=i,i}ct.prototype.once=function(t,e){return Go(e),this.on(t,p1(this,t,e)),this},ct.prototype.prependOnceListener=function(t,e){return Go(e),this.prependListener(t,p1(this,t,e)),this},ct.prototype.removeListener=function(t,e){var r,n,i,s,a;if(Go(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():QB(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},ct.prototype.off=ct.prototype.removeListener,ct.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function b1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?eP(i):ey(i,i.length)}ct.prototype.listeners=function(t){return b1(this,t,!0)},ct.prototype.rawListeners=function(t){return b1(this,t,!1)},ct.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):g1.call(t,e)},ct.prototype.listenerCount=g1;function g1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ct.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function ey(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function QB(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function eP(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function tP(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ty(t,e,s,{once:!0}),e!=="error"&&rP(t,i,{once:!0})})}function rP(t,e,r){typeof t.on=="function"&&ty(t,"error",e,r)}function ty(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const nP="WalletKit";class iP{constructor(e){this.opts=e}}class sP{constructor(e){this.client=e}}var aP=Object.defineProperty,oP=Object.defineProperties,cP=Object.getOwnPropertyDescriptors,v1=Object.getOwnPropertySymbols,fP=Object.prototype.hasOwnProperty,uP=Object.prototype.propertyIsEnumerable,y1=(t,e,r)=>e in t?aP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hP=(t,e)=>{for(var r in e||(e={}))fP.call(e,r)&&y1(t,r,e[r]);if(v1)for(var r of v1(e))uP.call(e,r)&&y1(t,r,e[r]);return t},dP=(t,e)=>oP(t,cP(e));class lP extends sP{constructor(e){super(e),this.init=async()=>{this.signClient=await XB.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig})},this.pair=async r=>{await this.client.core.pairing.pair(r)},this.approveSession=async r=>{const{topic:n,acknowledged:i}=await this.signClient.approve(dP(hP({},r),{id:r.id,namespaces:r.namespaces,sessionProperties:r.sessionProperties,sessionConfig:r.sessionConfig}));return await i(),this.signClient.session.get(n)},this.rejectSession=async r=>await this.signClient.reject(r),this.updateSession=async r=>await this.signClient.update(r),this.extendSession=async r=>await this.signClient.extend(r),this.respondSessionRequest=async r=>await this.signClient.respond(r),this.disconnectSession=async r=>await this.signClient.disconnect(r),this.emitSessionEvent=async r=>await this.signClient.emit(r),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((r,n)=>(r[n.topic]=n,r),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.approveSessionAuthenticate=async r=>await this.signClient.approveSessionAuthenticate(r),this.rejectSessionAuthenticate=async r=>await this.signClient.rejectSessionAuthenticate(r),this.formatAuthMessage=r=>this.signClient.formatAuthMessage(r),this.registerDeviceToken=r=>this.client.core.echoClient.registerDeviceToken(r),this.on=(r,n)=>(this.setEvent(r,"off"),this.setEvent(r,"on"),this.client.events.on(r,n)),this.once=(r,n)=>(this.setEvent(r,"off"),this.setEvent(r,"once"),this.client.events.once(r,n)),this.off=(r,n)=>(this.setEvent(r,"off"),this.client.events.off(r,n)),this.removeListener=(r,n)=>(this.setEvent(r,"removeListener"),this.client.events.removeListener(r,n)),this.onSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onSessionProposal=r=>{this.client.events.emit("session_proposal",r)},this.onSessionDelete=r=>{this.client.events.emit("session_delete",r)},this.onProposalExpire=r=>{this.client.events.emit("proposal_expire",r)},this.onSessionRequestExpire=r=>{this.client.events.emit("session_request_expire",r)},this.onSessionRequestAuthenticate=r=>{this.client.events.emit("session_authenticate",r)},this.setEvent=(r,n)=>{switch(r){case"session_request":this.signClient.events[n]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[n]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[n]("session_delete",this.onSessionDelete);break;case"proposal_expire":this.signClient.events[n]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[n]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[n]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={}}}const pP={decryptMessage:async t=>{const e={core:new m0({storageOptions:t.storageOptions,storage:t.storage})};await e.core.crypto.init();const r=e.core.crypto.decode(t.topic,t.encryptedMessage);return e.core=null,r},getMetadata:async t=>{const e={core:new m0({storageOptions:t.storageOptions,storage:t.storage}),sessionStore:null};e.sessionStore=new ZB(e.core,e.core.logger),await e.sessionStore.init();const r=e.sessionStore.get(t.topic),n=r?.peer.metadata;return e.core=null,e.sessionStore=null,n}},ry=class extends iP{constructor(t){super(t),this.events=new ju.exports,this.on=(e,r)=>this.engine.on(e,r),this.once=(e,r)=>this.engine.once(e,r),this.off=(e,r)=>this.engine.off(e,r),this.removeListener=(e,r)=>this.engine.removeListener(e,r),this.pair=async e=>{try{return await this.engine.pair(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(r){throw this.logger.error(r.message),r}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(r){throw this.logger.error(r.message),r}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(r){throw this.logger.error(r.message),r}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(r){throw this.logger.error(r.message),r}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(r){throw this.logger.error(r.message),r}},this.metadata=t.metadata,this.name=t.name||nP,this.signConfig=t.signConfig,this.core=t.core,this.logger=this.core.logger,this.engine=new lP(this)}static async init(t){const e=new ry(t);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("WalletKit Initialization Success")}catch(t){throw this.logger.info("WalletKit Initialization Failure"),this.logger.error(t.message),t}}};let ny=ry;ny.notifications=pP;const bP=ny,iy=$3({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}});let Ht;A8({chain:iy,transport:bg()});d8({chain:iy,transport:bg()});async function gP(){{const t="f3366354d9e5ebf241f6e0d4a9d6d7cf",e=new m0({projectId:t});return Ht=await bP.init({core:e,metadata:{name:"Tap3",description:"Physical NFT Cards on Polygon",url:"https://tap3.me",icons:["https://tap3.me/logo.png"]}}),Ht}}await gP();var sy={exports:{}},cf={exports:{}},m1;function it(){return m1||(m1=1,function(t,e){(function(r,n){t.exports=n()})(Le,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Le<"u"&&Le.crypto&&(s=Le.crypto),!s&&typeof av=="function")try{s=so}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function A(){}return function(F){var P;return A.prototype=F,P=new A,A.prototype=null,P}}(),f={},c=f.lib={},h=c.Base=function(){return{extend:function(A){var F=o(this);return A&&F.mixIn(A),(!F.hasOwnProperty("init")||this.init===F.init)&&(F.init=function(){F.$super.init.apply(this,arguments)}),F.init.prototype=F,F.$super=this,F},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var F in A)A.hasOwnProperty(F)&&(this[F]=A[F]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=h.extend({init:function(A,F){A=this.words=A||[],F!=i?this.sigBytes=F:this.sigBytes=A.length*4},toString:function(A){return(A||v).stringify(this)},concat:function(A){var F=this.words,P=A.words,k=this.sigBytes,L=A.sigBytes;if(this.clamp(),k%4)for(var m=0;m<L;m++){var T=P[m>>>2]>>>24-m%4*8&255;F[k+m>>>2]|=T<<24-(k+m)%4*8}else for(var j=0;j<L;j+=4)F[k+j>>>2]=P[j>>>2];return this.sigBytes+=L,this},clamp:function(){var A=this.words,F=this.sigBytes;A[F>>>2]&=4294967295<<32-F%4*8,A.length=n.ceil(F/4)},clone:function(){var A=h.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var F=[],P=0;P<A;P+=4)F.push(a());return new d.init(F,A)}}),p=f.enc={},v=p.Hex={stringify:function(A){for(var F=A.words,P=A.sigBytes,k=[],L=0;L<P;L++){var m=F[L>>>2]>>>24-L%4*8&255;k.push((m>>>4).toString(16)),k.push((m&15).toString(16))}return k.join("")},parse:function(A){for(var F=A.length,P=[],k=0;k<F;k+=2)P[k>>>3]|=parseInt(A.substr(k,2),16)<<24-k%8*4;return new d.init(P,F/2)}},x=p.Latin1={stringify:function(A){for(var F=A.words,P=A.sigBytes,k=[],L=0;L<P;L++){var m=F[L>>>2]>>>24-L%4*8&255;k.push(String.fromCharCode(m))}return k.join("")},parse:function(A){for(var F=A.length,P=[],k=0;k<F;k++)P[k>>>2]|=(A.charCodeAt(k)&255)<<24-k%4*8;return new d.init(P,F)}},D=p.Utf8={stringify:function(A){try{return decodeURIComponent(escape(x.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return x.parse(unescape(encodeURIComponent(A)))}},S=c.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=D.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var F,P=this._data,k=P.words,L=P.sigBytes,m=this.blockSize,T=m*4,j=L/T;A?j=n.ceil(j):j=n.max((j|0)-this._minBufferSize,0);var U=j*m,N=n.min(U*4,L);if(U){for(var g=0;g<U;g+=m)this._doProcessBlock(k,g);F=k.splice(0,U),P.sigBytes-=N}return new d.init(F,N)},clone:function(){var A=h.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});c.Hasher=S.extend({cfg:h.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){S.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var F=this._doFinalize();return F},blockSize:16,_createHelper:function(A){return function(F,P){return new A.init(P).finalize(F)}},_createHmacHelper:function(A){return function(F,P){return new O.HMAC.init(A,P).finalize(F)}}});var O=f.algo={};return f}(Math);return r})}(cf)),cf.exports}var ff={exports:{}},x1;function dc(){return x1||(x1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(n){var i=r,s=i.lib,a=s.Base,o=s.WordArray,f=i.x64={};f.Word=a.extend({init:function(c,h){this.high=c,this.low=h}}),f.WordArray=a.extend({init:function(c,h){c=this.words=c||[],h!=n?this.sigBytes=h:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,h=c.length,d=[],p=0;p<h;p++){var v=c[p];d.push(v.high),d.push(v.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),h=c.words=this.words.slice(0),d=h.length,p=0;p<d;p++)h[p]=h[p].clone();return c}})}(),r})}(ff)),ff.exports}var uf={exports:{}},w1;function vP(){return w1||(w1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,a=s.init,o=s.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var c=f.byteLength,h=[],d=0;d<c;d++)h[d>>>2]|=f[d]<<24-d%4*8;a.call(this,h,c)}else a.apply(this,arguments)};o.prototype=s}}(),r.lib.WordArray})}(uf)),uf.exports}var hf={exports:{}},_1;function yP(){return _1||(_1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(f){for(var c=f.words,h=f.sigBytes,d=[],p=0;p<h;p+=2){var v=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(v))}return d.join("")},parse:function(f){for(var c=f.length,h=[],d=0;d<c;d++)h[d>>>1]|=f.charCodeAt(d)<<16-d%2*16;return s.create(h,c*2)}},a.Utf16LE={stringify:function(f){for(var c=f.words,h=f.sigBytes,d=[],p=0;p<h;p+=2){var v=o(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(v))}return d.join("")},parse:function(f){for(var c=f.length,h=[],d=0;d<c;d++)h[d>>>1]|=o(f.charCodeAt(d)<<16-d%2*16);return s.create(h,c*2)}};function o(f){return f<<8&4278255360|f>>>8&16711935}}(),r.enc.Utf16})}(hf)),hf.exports}var df={exports:{}},E1;function is(){return E1||(E1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.enc;a.Base64={stringify:function(f){var c=f.words,h=f.sigBytes,d=this._map;f.clamp();for(var p=[],v=0;v<h;v+=3)for(var x=c[v>>>2]>>>24-v%4*8&255,D=c[v+1>>>2]>>>24-(v+1)%4*8&255,S=c[v+2>>>2]>>>24-(v+2)%4*8&255,O=x<<16|D<<8|S,A=0;A<4&&v+A*.75<h;A++)p.push(d.charAt(O>>>6*(3-A)&63));var F=d.charAt(64);if(F)for(;p.length%4;)p.push(F);return p.join("")},parse:function(f){var c=f.length,h=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<h.length;p++)d[h.charCodeAt(p)]=p}var v=h.charAt(64);if(v){var x=f.indexOf(v);x!==-1&&(c=x)}return o(f,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(f,c,h){for(var d=[],p=0,v=0;v<c;v++)if(v%4){var x=h[f.charCodeAt(v-1)]<<v%4*2,D=h[f.charCodeAt(v)]>>>6-v%4*2,S=x|D;d[p>>>2]|=S<<24-p%4*8,p++}return s.create(d,p)}}(),r.enc.Base64})}(df)),df.exports}var lf={exports:{}},A1;function mP(){return A1||(A1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.enc;a.Base64url={stringify:function(f,c){c===void 0&&(c=!0);var h=f.words,d=f.sigBytes,p=c?this._safe_map:this._map;f.clamp();for(var v=[],x=0;x<d;x+=3)for(var D=h[x>>>2]>>>24-x%4*8&255,S=h[x+1>>>2]>>>24-(x+1)%4*8&255,O=h[x+2>>>2]>>>24-(x+2)%4*8&255,A=D<<16|S<<8|O,F=0;F<4&&x+F*.75<d;F++)v.push(p.charAt(A>>>6*(3-F)&63));var P=p.charAt(64);if(P)for(;v.length%4;)v.push(P);return v.join("")},parse:function(f,c){c===void 0&&(c=!0);var h=f.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var v=0;v<d.length;v++)p[d.charCodeAt(v)]=v}var x=d.charAt(64);if(x){var D=f.indexOf(x);D!==-1&&(h=D)}return o(f,h,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(f,c,h){for(var d=[],p=0,v=0;v<c;v++)if(v%4){var x=h[f.charCodeAt(v-1)]<<v%4*2,D=h[f.charCodeAt(v)]>>>6-v%4*2,S=x|D;d[p>>>2]|=S<<24-p%4*8,p++}return s.create(d,p)}}(),r.enc.Base64url})}(lf)),lf.exports}var pf={exports:{}},S1;function ss(){return S1||(S1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,f=i.algo,c=[];(function(){for(var D=0;D<64;D++)c[D]=n.abs(n.sin(D+1))*4294967296|0})();var h=f.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(D,S){for(var O=0;O<16;O++){var A=S+O,F=D[A];D[A]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}var P=this._hash.words,k=D[S+0],L=D[S+1],m=D[S+2],T=D[S+3],j=D[S+4],U=D[S+5],N=D[S+6],g=D[S+7],b=D[S+8],u=D[S+9],l=D[S+10],w=D[S+11],I=D[S+12],B=D[S+13],C=D[S+14],y=D[S+15],E=P[0],_=P[1],$=P[2],V=P[3];E=d(E,_,$,V,k,7,c[0]),V=d(V,E,_,$,L,12,c[1]),$=d($,V,E,_,m,17,c[2]),_=d(_,$,V,E,T,22,c[3]),E=d(E,_,$,V,j,7,c[4]),V=d(V,E,_,$,U,12,c[5]),$=d($,V,E,_,N,17,c[6]),_=d(_,$,V,E,g,22,c[7]),E=d(E,_,$,V,b,7,c[8]),V=d(V,E,_,$,u,12,c[9]),$=d($,V,E,_,l,17,c[10]),_=d(_,$,V,E,w,22,c[11]),E=d(E,_,$,V,I,7,c[12]),V=d(V,E,_,$,B,12,c[13]),$=d($,V,E,_,C,17,c[14]),_=d(_,$,V,E,y,22,c[15]),E=p(E,_,$,V,L,5,c[16]),V=p(V,E,_,$,N,9,c[17]),$=p($,V,E,_,w,14,c[18]),_=p(_,$,V,E,k,20,c[19]),E=p(E,_,$,V,U,5,c[20]),V=p(V,E,_,$,l,9,c[21]),$=p($,V,E,_,y,14,c[22]),_=p(_,$,V,E,j,20,c[23]),E=p(E,_,$,V,u,5,c[24]),V=p(V,E,_,$,C,9,c[25]),$=p($,V,E,_,T,14,c[26]),_=p(_,$,V,E,b,20,c[27]),E=p(E,_,$,V,B,5,c[28]),V=p(V,E,_,$,m,9,c[29]),$=p($,V,E,_,g,14,c[30]),_=p(_,$,V,E,I,20,c[31]),E=v(E,_,$,V,U,4,c[32]),V=v(V,E,_,$,b,11,c[33]),$=v($,V,E,_,w,16,c[34]),_=v(_,$,V,E,C,23,c[35]),E=v(E,_,$,V,L,4,c[36]),V=v(V,E,_,$,j,11,c[37]),$=v($,V,E,_,g,16,c[38]),_=v(_,$,V,E,l,23,c[39]),E=v(E,_,$,V,B,4,c[40]),V=v(V,E,_,$,k,11,c[41]),$=v($,V,E,_,T,16,c[42]),_=v(_,$,V,E,N,23,c[43]),E=v(E,_,$,V,u,4,c[44]),V=v(V,E,_,$,I,11,c[45]),$=v($,V,E,_,y,16,c[46]),_=v(_,$,V,E,m,23,c[47]),E=x(E,_,$,V,k,6,c[48]),V=x(V,E,_,$,g,10,c[49]),$=x($,V,E,_,C,15,c[50]),_=x(_,$,V,E,U,21,c[51]),E=x(E,_,$,V,I,6,c[52]),V=x(V,E,_,$,T,10,c[53]),$=x($,V,E,_,l,15,c[54]),_=x(_,$,V,E,L,21,c[55]),E=x(E,_,$,V,b,6,c[56]),V=x(V,E,_,$,y,10,c[57]),$=x($,V,E,_,N,15,c[58]),_=x(_,$,V,E,B,21,c[59]),E=x(E,_,$,V,j,6,c[60]),V=x(V,E,_,$,w,10,c[61]),$=x($,V,E,_,m,15,c[62]),_=x(_,$,V,E,u,21,c[63]),P[0]=P[0]+E|0,P[1]=P[1]+_|0,P[2]=P[2]+$|0,P[3]=P[3]+V|0},_doFinalize:function(){var D=this._data,S=D.words,O=this._nDataBytes*8,A=D.sigBytes*8;S[A>>>5]|=128<<24-A%32;var F=n.floor(O/4294967296),P=O;S[(A+64>>>9<<4)+15]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,S[(A+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D.sigBytes=(S.length+1)*4,this._process();for(var k=this._hash,L=k.words,m=0;m<4;m++){var T=L[m];L[m]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return k},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function d(D,S,O,A,F,P,k){var L=D+(S&O|~S&A)+F+k;return(L<<P|L>>>32-P)+S}function p(D,S,O,A,F,P,k){var L=D+(S&A|O&~A)+F+k;return(L<<P|L>>>32-P)+S}function v(D,S,O,A,F,P,k){var L=D+(S^O^A)+F+k;return(L<<P|L>>>32-P)+S}function x(D,S,O,A,F,P,k){var L=D+(O^(S|~A))+F+k;return(L<<P|L>>>32-P)+S}i.MD5=o._createHelper(h),i.HmacMD5=o._createHmacHelper(h)}(Math),r.MD5})}(pf)),pf.exports}var bf={exports:{}},D1;function ay(){return D1||(D1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=i.Hasher,o=n.algo,f=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,d){for(var p=this._hash.words,v=p[0],x=p[1],D=p[2],S=p[3],O=p[4],A=0;A<80;A++){if(A<16)f[A]=h[d+A]|0;else{var F=f[A-3]^f[A-8]^f[A-14]^f[A-16];f[A]=F<<1|F>>>31}var P=(v<<5|v>>>27)+O+f[A];A<20?P+=(x&D|~x&S)+1518500249:A<40?P+=(x^D^S)+1859775393:A<60?P+=(x&D|x&S|D&S)-1894007588:P+=(x^D^S)-899497514,O=S,S=D,D=x<<30|x>>>2,x=v,v=P}p[0]=p[0]+v|0,p[1]=p[1]+x|0,p[2]=p[2]+D|0,p[3]=p[3]+S|0,p[4]=p[4]+O|0},_doFinalize:function(){var h=this._data,d=h.words,p=this._nDataBytes*8,v=h.sigBytes*8;return d[v>>>5]|=128<<24-v%32,d[(v+64>>>9<<4)+14]=Math.floor(p/4294967296),d[(v+64>>>9<<4)+15]=p,h.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(bf)),bf.exports}var gf={exports:{}},M1;function id(){return M1||(M1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,f=i.algo,c=[],h=[];(function(){function v(O){for(var A=n.sqrt(O),F=2;F<=A;F++)if(!(O%F))return!1;return!0}function x(O){return(O-(O|0))*4294967296|0}for(var D=2,S=0;S<64;)v(D)&&(S<8&&(c[S]=x(n.pow(D,1/2))),h[S]=x(n.pow(D,1/3)),S++),D++})();var d=[],p=f.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(v,x){for(var D=this._hash.words,S=D[0],O=D[1],A=D[2],F=D[3],P=D[4],k=D[5],L=D[6],m=D[7],T=0;T<64;T++){if(T<16)d[T]=v[x+T]|0;else{var j=d[T-15],U=(j<<25|j>>>7)^(j<<14|j>>>18)^j>>>3,N=d[T-2],g=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;d[T]=U+d[T-7]+g+d[T-16]}var b=P&k^~P&L,u=S&O^S&A^O&A,l=(S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22),w=(P<<26|P>>>6)^(P<<21|P>>>11)^(P<<7|P>>>25),I=m+w+b+h[T]+d[T],B=l+u;m=L,L=k,k=P,P=F+I|0,F=A,A=O,O=S,S=I+B|0}D[0]=D[0]+S|0,D[1]=D[1]+O|0,D[2]=D[2]+A|0,D[3]=D[3]+F|0,D[4]=D[4]+P|0,D[5]=D[5]+k|0,D[6]=D[6]+L|0,D[7]=D[7]+m|0},_doFinalize:function(){var v=this._data,x=v.words,D=this._nDataBytes*8,S=v.sigBytes*8;return x[S>>>5]|=128<<24-S%32,x[(S+64>>>9<<4)+14]=n.floor(D/4294967296),x[(S+64>>>9<<4)+15]=D,v.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});i.SHA256=o._createHelper(p),i.HmacSHA256=o._createHmacHelper(p)}(Math),r.SHA256})}(gf)),gf.exports}var vf={exports:{}},C1;function xP(){return C1||(C1=1,function(t,e){(function(r,n,i){t.exports=n(it(),id())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=n.algo,o=a.SHA256,f=a.SHA224=o.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(f),n.HmacSHA224=o._createHmacHelper(f)}(),r.SHA224})}(vf)),vf.exports}var yf={exports:{}},I1;function oy(){return I1||(I1=1,function(t,e){(function(r,n,i){t.exports=n(it(),dc())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,a=n.x64,o=a.Word,f=a.WordArray,c=n.algo;function h(){return o.create.apply(o,arguments)}var d=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],p=[];(function(){for(var x=0;x<80;x++)p[x]=h()})();var v=c.SHA512=s.extend({_doReset:function(){this._hash=new f.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(x,D){for(var S=this._hash.words,O=S[0],A=S[1],F=S[2],P=S[3],k=S[4],L=S[5],m=S[6],T=S[7],j=O.high,U=O.low,N=A.high,g=A.low,b=F.high,u=F.low,l=P.high,w=P.low,I=k.high,B=k.low,C=L.high,y=L.low,E=m.high,_=m.low,$=T.high,V=T.low,R=j,W=U,z=N,q=g,H=b,M=u,K=l,Z=w,Y=I,J=B,Q=C,be=y,Se=E,de=_,Re=$,ge=V,ne=0;ne<80;ne++){var fe,he,se=p[ne];if(ne<16)he=se.high=x[D+ne*2]|0,fe=se.low=x[D+ne*2+1]|0;else{var le=p[ne-15],ue=le.high,re=le.low,xe=(ue>>>1|re<<31)^(ue>>>8|re<<24)^ue>>>7,_e=(re>>>1|ue<<31)^(re>>>8|ue<<24)^(re>>>7|ue<<25),ie=p[ne-2],ve=ie.high,Ee=ie.low,ce=(ve>>>19|Ee<<13)^(ve<<3|Ee>>>29)^ve>>>6,Ce=(Ee>>>19|ve<<13)^(Ee<<3|ve>>>29)^(Ee>>>6|ve<<26),Me=p[ne-7],Pe=Me.high,Xe=Me.low,Je=p[ne-16],Ie=Je.high,Qe=Je.low;fe=_e+Xe,he=xe+Pe+(fe>>>0<_e>>>0?1:0),fe=fe+Ce,he=he+ce+(fe>>>0<Ce>>>0?1:0),fe=fe+Qe,he=he+Ie+(fe>>>0<Qe>>>0?1:0),se.high=he,se.low=fe}var rt=Y&Q^~Y&Se,Oe=J&be^~J&de,ke=R&z^R&H^z&H,Te=W&q^W&M^q&M,ye=(R>>>28|W<<4)^(R<<30|W>>>2)^(R<<25|W>>>7),$e=(W>>>28|R<<4)^(W<<30|R>>>2)^(W<<25|R>>>7),qe=(Y>>>14|J<<18)^(Y>>>18|J<<14)^(Y<<23|J>>>9),pe=(J>>>14|Y<<18)^(J>>>18|Y<<14)^(J<<23|Y>>>9),je=d[ne],He=je.high,we=je.low,Be=ge+pe,Fe=Re+qe+(Be>>>0<ge>>>0?1:0),Be=Be+Oe,Fe=Fe+rt+(Be>>>0<Oe>>>0?1:0),Be=Be+we,Fe=Fe+He+(Be>>>0<we>>>0?1:0),Be=Be+fe,Fe=Fe+he+(Be>>>0<fe>>>0?1:0),me=$e+Te,ze=ye+ke+(me>>>0<$e>>>0?1:0);Re=Se,ge=de,Se=Q,de=be,Q=Y,be=J,J=Z+Be|0,Y=K+Fe+(J>>>0<Z>>>0?1:0)|0,K=H,Z=M,H=z,M=q,z=R,q=W,W=Be+me|0,R=Fe+ze+(W>>>0<Be>>>0?1:0)|0}U=O.low=U+W,O.high=j+R+(U>>>0<W>>>0?1:0),g=A.low=g+q,A.high=N+z+(g>>>0<q>>>0?1:0),u=F.low=u+M,F.high=b+H+(u>>>0<M>>>0?1:0),w=P.low=w+Z,P.high=l+K+(w>>>0<Z>>>0?1:0),B=k.low=B+J,k.high=I+Y+(B>>>0<J>>>0?1:0),y=L.low=y+be,L.high=C+Q+(y>>>0<be>>>0?1:0),_=m.low=_+de,m.high=E+Se+(_>>>0<de>>>0?1:0),V=T.low=V+ge,T.high=$+Re+(V>>>0<ge>>>0?1:0)},_doFinalize:function(){var x=this._data,D=x.words,S=this._nDataBytes*8,O=x.sigBytes*8;D[O>>>5]|=128<<24-O%32,D[(O+128>>>10<<5)+30]=Math.floor(S/4294967296),D[(O+128>>>10<<5)+31]=S,x.sigBytes=D.length*4,this._process();var A=this._hash.toX32();return A},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});n.SHA512=s._createHelper(v),n.HmacSHA512=s._createHmacHelper(v)}(),r.SHA512})}(yf)),yf.exports}var mf={exports:{}},B1;function wP(){return B1||(B1=1,function(t,e){(function(r,n,i){t.exports=n(it(),dc(),oy())})(Le,function(r){return function(){var n=r,i=n.x64,s=i.Word,a=i.WordArray,o=n.algo,f=o.SHA512,c=o.SHA384=f.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var h=f._doFinalize.call(this);return h.sigBytes-=16,h}});n.SHA384=f._createHelper(c),n.HmacSHA384=f._createHmacHelper(c)}(),r.SHA384})}(mf)),mf.exports}var xf={exports:{}},P1;function _P(){return P1||(P1=1,function(t,e){(function(r,n,i){t.exports=n(it(),dc())})(Le,function(r){return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,f=i.x64,c=f.Word,h=i.algo,d=[],p=[],v=[];(function(){for(var S=1,O=0,A=0;A<24;A++){d[S+5*O]=(A+1)*(A+2)/2%64;var F=O%5,P=(2*S+3*O)%5;S=F,O=P}for(var S=0;S<5;S++)for(var O=0;O<5;O++)p[S+5*O]=O+(2*S+3*O)%5*5;for(var k=1,L=0;L<24;L++){for(var m=0,T=0,j=0;j<7;j++){if(k&1){var U=(1<<j)-1;U<32?T^=1<<U:m^=1<<U-32}k&128?k=k<<1^113:k<<=1}v[L]=c.create(m,T)}})();var x=[];(function(){for(var S=0;S<25;S++)x[S]=c.create()})();var D=h.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var S=this._state=[],O=0;O<25;O++)S[O]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(S,O){for(var A=this._state,F=this.blockSize/2,P=0;P<F;P++){var k=S[O+2*P],L=S[O+2*P+1];k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360;var m=A[P];m.high^=L,m.low^=k}for(var T=0;T<24;T++){for(var j=0;j<5;j++){for(var U=0,N=0,g=0;g<5;g++){var m=A[j+5*g];U^=m.high,N^=m.low}var b=x[j];b.high=U,b.low=N}for(var j=0;j<5;j++)for(var u=x[(j+4)%5],l=x[(j+1)%5],w=l.high,I=l.low,U=u.high^(w<<1|I>>>31),N=u.low^(I<<1|w>>>31),g=0;g<5;g++){var m=A[j+5*g];m.high^=U,m.low^=N}for(var B=1;B<25;B++){var U,N,m=A[B],C=m.high,y=m.low,E=d[B];E<32?(U=C<<E|y>>>32-E,N=y<<E|C>>>32-E):(U=y<<E-32|C>>>64-E,N=C<<E-32|y>>>64-E);var _=x[p[B]];_.high=U,_.low=N}var $=x[0],V=A[0];$.high=V.high,$.low=V.low;for(var j=0;j<5;j++)for(var g=0;g<5;g++){var B=j+5*g,m=A[B],R=x[B],W=x[(j+1)%5+5*g],z=x[(j+2)%5+5*g];m.high=R.high^~W.high&z.high,m.low=R.low^~W.low&z.low}var m=A[0],q=v[T];m.high^=q.high,m.low^=q.low}},_doFinalize:function(){var S=this._data,O=S.words;this._nDataBytes*8;var A=S.sigBytes*8,F=this.blockSize*32;O[A>>>5]|=1<<24-A%32,O[(n.ceil((A+1)/F)*F>>>5)-1]|=128,S.sigBytes=O.length*4,this._process();for(var P=this._state,k=this.cfg.outputLength/8,L=k/8,m=[],T=0;T<L;T++){var j=P[T],U=j.high,N=j.low;U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,m.push(N),m.push(U)}return new a.init(m,k)},clone:function(){for(var S=o.clone.call(this),O=S._state=this._state.slice(0),A=0;A<25;A++)O[A]=O[A].clone();return S}});i.SHA3=o._createHelper(D),i.HmacSHA3=o._createHmacHelper(D)}(Math),r.SHA3})}(xf)),xf.exports}var wf={exports:{}},F1;function EP(){return F1||(F1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,s=i.lib,a=s.WordArray,o=s.Hasher,f=i.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=a.create([0,1518500249,1859775393,2400959708,2840853838]),x=a.create([1352829926,1548603684,1836072691,2053994217,0]),D=f.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,m){for(var T=0;T<16;T++){var j=m+T,U=L[j];L[j]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}var N=this._hash.words,g=v.words,b=x.words,u=c.words,l=h.words,w=d.words,I=p.words,B,C,y,E,_,$,V,R,W,z;$=B=N[0],V=C=N[1],R=y=N[2],W=E=N[3],z=_=N[4];for(var q,T=0;T<80;T+=1)q=B+L[m+u[T]]|0,T<16?q+=S(C,y,E)+g[0]:T<32?q+=O(C,y,E)+g[1]:T<48?q+=A(C,y,E)+g[2]:T<64?q+=F(C,y,E)+g[3]:q+=P(C,y,E)+g[4],q=q|0,q=k(q,w[T]),q=q+_|0,B=_,_=E,E=k(y,10),y=C,C=q,q=$+L[m+l[T]]|0,T<16?q+=P(V,R,W)+b[0]:T<32?q+=F(V,R,W)+b[1]:T<48?q+=A(V,R,W)+b[2]:T<64?q+=O(V,R,W)+b[3]:q+=S(V,R,W)+b[4],q=q|0,q=k(q,I[T]),q=q+z|0,$=z,z=W,W=k(R,10),R=V,V=q;q=N[1]+y+W|0,N[1]=N[2]+E+z|0,N[2]=N[3]+_+$|0,N[3]=N[4]+B+V|0,N[4]=N[0]+C+R|0,N[0]=q},_doFinalize:function(){var L=this._data,m=L.words,T=this._nDataBytes*8,j=L.sigBytes*8;m[j>>>5]|=128<<24-j%32,m[(j+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,L.sigBytes=(m.length+1)*4,this._process();for(var U=this._hash,N=U.words,g=0;g<5;g++){var b=N[g];N[g]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return U},clone:function(){var L=o.clone.call(this);return L._hash=this._hash.clone(),L}});function S(L,m,T){return L^m^T}function O(L,m,T){return L&m|~L&T}function A(L,m,T){return(L|~m)^T}function F(L,m,T){return L&T|m&~T}function P(L,m,T){return L^(m|~T)}function k(L,m){return L<<m|L>>>32-m}i.RIPEMD160=o._createHelper(D),i.HmacRIPEMD160=o._createHmacHelper(D)}(),r.RIPEMD160})}(wf)),wf.exports}var _f={exports:{}},R1;function sd(){return R1||(R1=1,function(t,e){(function(r,n){t.exports=n(it())})(Le,function(r){(function(){var n=r,i=n.lib,s=i.Base,a=n.enc,o=a.Utf8,f=n.algo;f.HMAC=s.extend({init:function(c,h){c=this._hasher=new c.init,typeof h=="string"&&(h=o.parse(h));var d=c.blockSize,p=d*4;h.sigBytes>p&&(h=c.finalize(h)),h.clamp();for(var v=this._oKey=h.clone(),x=this._iKey=h.clone(),D=v.words,S=x.words,O=0;O<d;O++)D[O]^=1549556828,S[O]^=909522486;v.sigBytes=x.sigBytes=p,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var h=this._hasher,d=h.finalize(c);h.reset();var p=h.finalize(this._oKey.clone().concat(d));return p}})})()})}(_f)),_f.exports}var Ef={exports:{}},O1;function AP(){return O1||(O1=1,function(t,e){(function(r,n,i){t.exports=n(it(),id(),sd())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,f=o.SHA256,c=o.HMAC,h=o.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:f,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,p){for(var v=this.cfg,x=c.create(v.hasher,d),D=a.create(),S=a.create([1]),O=D.words,A=S.words,F=v.keySize,P=v.iterations;O.length<F;){var k=x.update(p).finalize(S);x.reset();for(var L=k.words,m=L.length,T=k,j=1;j<P;j++){T=x.finalize(T),x.reset();for(var U=T.words,N=0;N<m;N++)L[N]^=U[N]}D.concat(k),A[0]++}return D.sigBytes=F*4,D}});n.PBKDF2=function(d,p,v){return h.create(v).compute(d,p)}}(),r.PBKDF2})}(Ef)),Ef.exports}var Af={exports:{}},T1;function _i(){return T1||(T1=1,function(t,e){(function(r,n,i){t.exports=n(it(),ay(),sd())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,f=o.MD5,c=o.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:f,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var p,v=this.cfg,x=v.hasher.create(),D=a.create(),S=D.words,O=v.keySize,A=v.iterations;S.length<O;){p&&x.update(p),p=x.update(h).finalize(d),x.reset();for(var F=1;F<A;F++)p=x.finalize(p),x.reset();D.concat(p)}return D.sigBytes=O*4,D}});n.EvpKDF=function(h,d,p){return c.create(p).compute(h,d)}}(),r.EvpKDF})}(Af)),Af.exports}var Sf={exports:{}},N1;function Ut(){return N1||(N1=1,function(t,e){(function(r,n,i){t.exports=n(it(),_i())})(Le,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,a=s.Base,o=s.WordArray,f=s.BufferedBlockAlgorithm,c=i.enc;c.Utf8;var h=c.Base64,d=i.algo,p=d.EvpKDF,v=s.Cipher=f.extend({cfg:a.extend(),createEncryptor:function(U,N){return this.create(this._ENC_XFORM_MODE,U,N)},createDecryptor:function(U,N){return this.create(this._DEC_XFORM_MODE,U,N)},init:function(U,N,g){this.cfg=this.cfg.extend(g),this._xformMode=U,this._key=N,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(U){return this._append(U),this._process()},finalize:function(U){U&&this._append(U);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function U(N){return typeof N=="string"?j:L}return function(N){return{encrypt:function(g,b,u){return U(b).encrypt(N,g,b,u)},decrypt:function(g,b,u){return U(b).decrypt(N,g,b,u)}}}}()});s.StreamCipher=v.extend({_doFinalize:function(){var U=this._process(!0);return U},blockSize:1});var x=i.mode={},D=s.BlockCipherMode=a.extend({createEncryptor:function(U,N){return this.Encryptor.create(U,N)},createDecryptor:function(U,N){return this.Decryptor.create(U,N)},init:function(U,N){this._cipher=U,this._iv=N}}),S=x.CBC=function(){var U=D.extend();U.Encryptor=U.extend({processBlock:function(g,b){var u=this._cipher,l=u.blockSize;N.call(this,g,b,l),u.encryptBlock(g,b),this._prevBlock=g.slice(b,b+l)}}),U.Decryptor=U.extend({processBlock:function(g,b){var u=this._cipher,l=u.blockSize,w=g.slice(b,b+l);u.decryptBlock(g,b),N.call(this,g,b,l),this._prevBlock=w}});function N(g,b,u){var l,w=this._iv;w?(l=w,this._iv=n):l=this._prevBlock;for(var I=0;I<u;I++)g[b+I]^=l[I]}return U}(),O=i.pad={},A=O.Pkcs7={pad:function(U,N){for(var g=N*4,b=g-U.sigBytes%g,u=b<<24|b<<16|b<<8|b,l=[],w=0;w<b;w+=4)l.push(u);var I=o.create(l,b);U.concat(I)},unpad:function(U){var N=U.words[U.sigBytes-1>>>2]&255;U.sigBytes-=N}};s.BlockCipher=v.extend({cfg:v.cfg.extend({mode:S,padding:A}),reset:function(){var U;v.reset.call(this);var N=this.cfg,g=N.iv,b=N.mode;this._xformMode==this._ENC_XFORM_MODE?U=b.createEncryptor:(U=b.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==U?this._mode.init(this,g&&g.words):(this._mode=U.call(b,this,g&&g.words),this._mode.__creator=U)},_doProcessBlock:function(U,N){this._mode.processBlock(U,N)},_doFinalize:function(){var U,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),U=this._process(!0)):(U=this._process(!0),N.unpad(U)),U},blockSize:128/32});var F=s.CipherParams=a.extend({init:function(U){this.mixIn(U)},toString:function(U){return(U||this.formatter).stringify(this)}}),P=i.format={},k=P.OpenSSL={stringify:function(U){var N,g=U.ciphertext,b=U.salt;return b?N=o.create([1398893684,1701076831]).concat(b).concat(g):N=g,N.toString(h)},parse:function(U){var N,g=h.parse(U),b=g.words;return b[0]==1398893684&&b[1]==1701076831&&(N=o.create(b.slice(2,4)),b.splice(0,4),g.sigBytes-=16),F.create({ciphertext:g,salt:N})}},L=s.SerializableCipher=a.extend({cfg:a.extend({format:k}),encrypt:function(U,N,g,b){b=this.cfg.extend(b);var u=U.createEncryptor(g,b),l=u.finalize(N),w=u.cfg;return F.create({ciphertext:l,key:g,iv:w.iv,algorithm:U,mode:w.mode,padding:w.padding,blockSize:U.blockSize,formatter:b.format})},decrypt:function(U,N,g,b){b=this.cfg.extend(b),N=this._parse(N,b.format);var u=U.createDecryptor(g,b).finalize(N.ciphertext);return u},_parse:function(U,N){return typeof U=="string"?N.parse(U,this):U}}),m=i.kdf={},T=m.OpenSSL={execute:function(U,N,g,b,u){if(b||(b=o.random(64/8)),u)var l=p.create({keySize:N+g,hasher:u}).compute(U,b);else var l=p.create({keySize:N+g}).compute(U,b);var w=o.create(l.words.slice(N),g*4);return l.sigBytes=N*4,F.create({key:l,iv:w,salt:b})}},j=s.PasswordBasedCipher=L.extend({cfg:L.cfg.extend({kdf:T}),encrypt:function(U,N,g,b){b=this.cfg.extend(b);var u=b.kdf.execute(g,U.keySize,U.ivSize,b.salt,b.hasher);b.iv=u.iv;var l=L.encrypt.call(this,U,N,u.key,b);return l.mixIn(u),l},decrypt:function(U,N,g,b){b=this.cfg.extend(b),N=this._parse(N,b.format);var u=b.kdf.execute(g,U.keySize,U.ivSize,N.salt,b.hasher);b.iv=u.iv;var l=L.decrypt.call(this,U,N,u.key,b);return l}})}()})}(Sf)),Sf.exports}var Df={exports:{}},$1;function SP(){return $1||($1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,f=o.blockSize;i.call(this,s,a,f,o),this._prevBlock=s.slice(a,a+f)}}),n.Decryptor=n.extend({processBlock:function(s,a){var o=this._cipher,f=o.blockSize,c=s.slice(a,a+f);i.call(this,s,a,f,o),this._prevBlock=c}});function i(s,a,o,f){var c,h=this._iv;h?(c=h.slice(0),this._iv=void 0):c=this._prevBlock,f.encryptBlock(c,0);for(var d=0;d<o;d++)s[a+d]^=c[d]}return n}(),r.mode.CFB})}(Df)),Df.exports}var Mf={exports:{}},L1;function DP(){return L1||(L1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,f=o.blockSize,c=this._iv,h=this._counter;c&&(h=this._counter=c.slice(0),this._iv=void 0);var d=h.slice(0);o.encryptBlock(d,0),h[f-1]=h[f-1]+1|0;for(var p=0;p<f;p++)s[a+p]^=d[p]}});return n.Decryptor=i,n}(),r.mode.CTR})}(Mf)),Mf.exports}var Cf={exports:{}},k1;function MP(){return k1||(k1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(o){if((o>>24&255)===255){var f=o>>16&255,c=o>>8&255,h=o&255;f===255?(f=0,c===255?(c=0,h===255?h=0:++h):++c):++f,o=0,o+=f<<16,o+=c<<8,o+=h}else o+=1<<24;return o}function s(o){return(o[0]=i(o[0]))===0&&(o[1]=i(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,f){var c=this._cipher,h=c.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0),s(p);var v=p.slice(0);c.encryptBlock(v,0);for(var x=0;x<h;x++)o[f+x]^=v[x]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Cf)),Cf.exports}var If={exports:{}},q1;function CP(){return q1||(q1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,f=o.blockSize,c=this._iv,h=this._keystream;c&&(h=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(h,0);for(var d=0;d<f;d++)s[a+d]^=h[d]}});return n.Decryptor=i,n}(),r.mode.OFB})}(If)),If.exports}var Bf={exports:{}},z1;function IP(){return z1||(z1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(Bf)),Bf.exports}var Pf={exports:{}},U1;function BP(){return U1||(U1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,a=i*4,o=a-s%a,f=s+o-1;n.clamp(),n.words[f>>>2]|=o<<24-f%4*8,n.sigBytes+=o},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(Pf)),Pf.exports}var Ff={exports:{}},j1;function PP(){return j1||(j1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,a=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(Ff)),Ff.exports}var Rf={exports:{}},H1;function FP(){return H1||(H1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Rf)),Rf.exports}var Of={exports:{}},K1;function RP(){return K1||(K1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(Of)),Of.exports}var Tf={exports:{}},V1;function OP(){return V1||(V1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Tf)),Tf.exports}var Nf={exports:{}},G1;function TP(){return G1||(G1=1,function(t,e){(function(r,n,i){t.exports=n(it(),Ut())})(Le,function(r){return function(n){var i=r,s=i.lib,a=s.CipherParams,o=i.enc,f=o.Hex,c=i.format;c.Hex={stringify:function(h){return h.ciphertext.toString(f)},parse:function(h){var d=f.parse(h);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Nf)),Nf.exports}var $f={exports:{}},W1;function NP(){return W1||(W1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,a=n.algo,o=[],f=[],c=[],h=[],d=[],p=[],v=[],x=[],D=[],S=[];(function(){for(var F=[],P=0;P<256;P++)P<128?F[P]=P<<1:F[P]=P<<1^283;for(var k=0,L=0,P=0;P<256;P++){var m=L^L<<1^L<<2^L<<3^L<<4;m=m>>>8^m&255^99,o[k]=m,f[m]=k;var T=F[k],j=F[T],U=F[j],N=F[m]*257^m*16843008;c[k]=N<<24|N>>>8,h[k]=N<<16|N>>>16,d[k]=N<<8|N>>>24,p[k]=N;var N=U*16843009^j*65537^T*257^k*16843008;v[m]=N<<24|N>>>8,x[m]=N<<16|N>>>16,D[m]=N<<8|N>>>24,S[m]=N,k?(k=T^F[F[F[U^T]]],L^=F[F[L]]):k=L=1}})();var O=[0,1,2,4,8,16,32,64,128,27,54],A=a.AES=s.extend({_doReset:function(){var F;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var P=this._keyPriorReset=this._key,k=P.words,L=P.sigBytes/4,m=this._nRounds=L+6,T=(m+1)*4,j=this._keySchedule=[],U=0;U<T;U++)U<L?j[U]=k[U]:(F=j[U-1],U%L?L>6&&U%L==4&&(F=o[F>>>24]<<24|o[F>>>16&255]<<16|o[F>>>8&255]<<8|o[F&255]):(F=F<<8|F>>>24,F=o[F>>>24]<<24|o[F>>>16&255]<<16|o[F>>>8&255]<<8|o[F&255],F^=O[U/L|0]<<24),j[U]=j[U-L]^F);for(var N=this._invKeySchedule=[],g=0;g<T;g++){var U=T-g;if(g%4)var F=j[U];else var F=j[U-4];g<4||U<=4?N[g]=F:N[g]=v[o[F>>>24]]^x[o[F>>>16&255]]^D[o[F>>>8&255]]^S[o[F&255]]}}},encryptBlock:function(F,P){this._doCryptBlock(F,P,this._keySchedule,c,h,d,p,o)},decryptBlock:function(F,P){var k=F[P+1];F[P+1]=F[P+3],F[P+3]=k,this._doCryptBlock(F,P,this._invKeySchedule,v,x,D,S,f);var k=F[P+1];F[P+1]=F[P+3],F[P+3]=k},_doCryptBlock:function(F,P,k,L,m,T,j,U){for(var N=this._nRounds,g=F[P]^k[0],b=F[P+1]^k[1],u=F[P+2]^k[2],l=F[P+3]^k[3],w=4,I=1;I<N;I++){var B=L[g>>>24]^m[b>>>16&255]^T[u>>>8&255]^j[l&255]^k[w++],C=L[b>>>24]^m[u>>>16&255]^T[l>>>8&255]^j[g&255]^k[w++],y=L[u>>>24]^m[l>>>16&255]^T[g>>>8&255]^j[b&255]^k[w++],E=L[l>>>24]^m[g>>>16&255]^T[b>>>8&255]^j[u&255]^k[w++];g=B,b=C,u=y,l=E}var B=(U[g>>>24]<<24|U[b>>>16&255]<<16|U[u>>>8&255]<<8|U[l&255])^k[w++],C=(U[b>>>24]<<24|U[u>>>16&255]<<16|U[l>>>8&255]<<8|U[g&255])^k[w++],y=(U[u>>>24]<<24|U[l>>>16&255]<<16|U[g>>>8&255]<<8|U[b&255])^k[w++],E=(U[l>>>24]<<24|U[g>>>16&255]<<16|U[b>>>8&255]<<8|U[u&255])^k[w++];F[P]=B,F[P+1]=C,F[P+2]=y,F[P+3]=E},keySize:256/32});n.AES=s._createHelper(A)}(),r.AES})}($f)),$f.exports}var Lf={exports:{}},Z1;function $P(){return Z1||(Z1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,a=i.BlockCipher,o=n.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=o.DES=a.extend({_doReset:function(){for(var O=this._key,A=O.words,F=[],P=0;P<56;P++){var k=f[P]-1;F[P]=A[k>>>5]>>>31-k%32&1}for(var L=this._subKeys=[],m=0;m<16;m++){for(var T=L[m]=[],j=h[m],P=0;P<24;P++)T[P/6|0]|=F[(c[P]-1+j)%28]<<31-P%6,T[4+(P/6|0)]|=F[28+(c[P+24]-1+j)%28]<<31-P%6;T[0]=T[0]<<1|T[0]>>>31;for(var P=1;P<7;P++)T[P]=T[P]>>>(P-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var U=this._invSubKeys=[],P=0;P<16;P++)U[P]=L[15-P]},encryptBlock:function(O,A){this._doCryptBlock(O,A,this._subKeys)},decryptBlock:function(O,A){this._doCryptBlock(O,A,this._invSubKeys)},_doCryptBlock:function(O,A,F){this._lBlock=O[A],this._rBlock=O[A+1],x.call(this,4,252645135),x.call(this,16,65535),D.call(this,2,858993459),D.call(this,8,16711935),x.call(this,1,1431655765);for(var P=0;P<16;P++){for(var k=F[P],L=this._lBlock,m=this._rBlock,T=0,j=0;j<8;j++)T|=d[j][((m^k[j])&p[j])>>>0];this._lBlock=m,this._rBlock=L^T}var U=this._lBlock;this._lBlock=this._rBlock,this._rBlock=U,x.call(this,1,1431655765),D.call(this,8,16711935),D.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),O[A]=this._lBlock,O[A+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(O,A){var F=(this._lBlock>>>O^this._rBlock)&A;this._rBlock^=F,this._lBlock^=F<<O}function D(O,A){var F=(this._rBlock>>>O^this._lBlock)&A;this._lBlock^=F,this._rBlock^=F<<O}n.DES=a._createHelper(v);var S=o.TripleDES=a.extend({_doReset:function(){var O=this._key,A=O.words;if(A.length!==2&&A.length!==4&&A.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var F=A.slice(0,2),P=A.length<4?A.slice(0,2):A.slice(2,4),k=A.length<6?A.slice(0,2):A.slice(4,6);this._des1=v.createEncryptor(s.create(F)),this._des2=v.createEncryptor(s.create(P)),this._des3=v.createEncryptor(s.create(k))},encryptBlock:function(O,A){this._des1.encryptBlock(O,A),this._des2.decryptBlock(O,A),this._des3.encryptBlock(O,A)},decryptBlock:function(O,A){this._des3.decryptBlock(O,A),this._des2.encryptBlock(O,A),this._des1.decryptBlock(O,A)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(S)}(),r.TripleDES})}(Lf)),Lf.exports}var kf={exports:{}},X1;function LP(){return X1||(X1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,a=n.algo,o=a.RC4=s.extend({_doReset:function(){for(var h=this._key,d=h.words,p=h.sigBytes,v=this._S=[],x=0;x<256;x++)v[x]=x;for(var x=0,D=0;x<256;x++){var S=x%p,O=d[S>>>2]>>>24-S%4*8&255;D=(D+v[x]+O)%256;var A=v[x];v[x]=v[D],v[D]=A}this._i=this._j=0},_doProcessBlock:function(h,d){h[d]^=f.call(this)},keySize:256/32,ivSize:0});function f(){for(var h=this._S,d=this._i,p=this._j,v=0,x=0;x<4;x++){d=(d+1)%256,p=(p+h[d])%256;var D=h[d];h[d]=h[p],h[p]=D,v|=h[(h[d]+h[p])%256]<<24-x*8}return this._i=d,this._j=p,v}n.RC4=s._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var h=this.cfg.drop;h>0;h--)f.call(this)}});n.RC4Drop=s._createHelper(c)}(),r.RC4})}(kf)),kf.exports}var qf={exports:{}},Y1;function kP(){return Y1||(Y1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],f=[],c=[],h=a.Rabbit=s.extend({_doReset:function(){for(var p=this._key.words,v=this.cfg.iv,x=0;x<4;x++)p[x]=(p[x]<<8|p[x]>>>24)&16711935|(p[x]<<24|p[x]>>>8)&4278255360;var D=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],S=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var x=0;x<4;x++)d.call(this);for(var x=0;x<8;x++)S[x]^=D[x+4&7];if(v){var O=v.words,A=O[0],F=O[1],P=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,k=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,L=P>>>16|k&4294901760,m=k<<16|P&65535;S[0]^=P,S[1]^=L,S[2]^=k,S[3]^=m,S[4]^=P,S[5]^=L,S[6]^=k,S[7]^=m;for(var x=0;x<4;x++)d.call(this)}},_doProcessBlock:function(p,v){var x=this._X;d.call(this),o[0]=x[0]^x[5]>>>16^x[3]<<16,o[1]=x[2]^x[7]>>>16^x[5]<<16,o[2]=x[4]^x[1]>>>16^x[7]<<16,o[3]=x[6]^x[3]>>>16^x[1]<<16;for(var D=0;D<4;D++)o[D]=(o[D]<<8|o[D]>>>24)&16711935|(o[D]<<24|o[D]>>>8)&4278255360,p[v+D]^=o[D]},blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,v=this._C,x=0;x<8;x++)f[x]=v[x];v[0]=v[0]+1295307597+this._b|0,v[1]=v[1]+3545052371+(v[0]>>>0<f[0]>>>0?1:0)|0,v[2]=v[2]+886263092+(v[1]>>>0<f[1]>>>0?1:0)|0,v[3]=v[3]+1295307597+(v[2]>>>0<f[2]>>>0?1:0)|0,v[4]=v[4]+3545052371+(v[3]>>>0<f[3]>>>0?1:0)|0,v[5]=v[5]+886263092+(v[4]>>>0<f[4]>>>0?1:0)|0,v[6]=v[6]+1295307597+(v[5]>>>0<f[5]>>>0?1:0)|0,v[7]=v[7]+3545052371+(v[6]>>>0<f[6]>>>0?1:0)|0,this._b=v[7]>>>0<f[7]>>>0?1:0;for(var x=0;x<8;x++){var D=p[x]+v[x],S=D&65535,O=D>>>16,A=((S*S>>>17)+S*O>>>15)+O*O,F=((D&4294901760)*D|0)+((D&65535)*D|0);c[x]=A^F}p[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,p[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,p[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,p[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,p[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,p[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,p[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,p[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=s._createHelper(h)}(),r.Rabbit})}(qf)),qf.exports}var zf={exports:{}},J1;function qP(){return J1||(J1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],f=[],c=[],h=a.RabbitLegacy=s.extend({_doReset:function(){var p=this._key.words,v=this.cfg.iv,x=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],D=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var S=0;S<4;S++)d.call(this);for(var S=0;S<8;S++)D[S]^=x[S+4&7];if(v){var O=v.words,A=O[0],F=O[1],P=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,k=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,L=P>>>16|k&4294901760,m=k<<16|P&65535;D[0]^=P,D[1]^=L,D[2]^=k,D[3]^=m,D[4]^=P,D[5]^=L,D[6]^=k,D[7]^=m;for(var S=0;S<4;S++)d.call(this)}},_doProcessBlock:function(p,v){var x=this._X;d.call(this),o[0]=x[0]^x[5]>>>16^x[3]<<16,o[1]=x[2]^x[7]>>>16^x[5]<<16,o[2]=x[4]^x[1]>>>16^x[7]<<16,o[3]=x[6]^x[3]>>>16^x[1]<<16;for(var D=0;D<4;D++)o[D]=(o[D]<<8|o[D]>>>24)&16711935|(o[D]<<24|o[D]>>>8)&4278255360,p[v+D]^=o[D]},blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,v=this._C,x=0;x<8;x++)f[x]=v[x];v[0]=v[0]+1295307597+this._b|0,v[1]=v[1]+3545052371+(v[0]>>>0<f[0]>>>0?1:0)|0,v[2]=v[2]+886263092+(v[1]>>>0<f[1]>>>0?1:0)|0,v[3]=v[3]+1295307597+(v[2]>>>0<f[2]>>>0?1:0)|0,v[4]=v[4]+3545052371+(v[3]>>>0<f[3]>>>0?1:0)|0,v[5]=v[5]+886263092+(v[4]>>>0<f[4]>>>0?1:0)|0,v[6]=v[6]+1295307597+(v[5]>>>0<f[5]>>>0?1:0)|0,v[7]=v[7]+3545052371+(v[6]>>>0<f[6]>>>0?1:0)|0,this._b=v[7]>>>0<f[7]>>>0?1:0;for(var x=0;x<8;x++){var D=p[x]+v[x],S=D&65535,O=D>>>16,A=((S*S>>>17)+S*O>>>15)+O*O,F=((D&4294901760)*D|0)+((D&65535)*D|0);c[x]=A^F}p[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,p[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,p[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,p[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,p[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,p[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,p[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,p[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=s._createHelper(h)}(),r.RabbitLegacy})}(zf)),zf.exports}var Uf={exports:{}},Q1;function zP(){return Q1||(Q1=1,function(t,e){(function(r,n,i){t.exports=n(it(),is(),ss(),_i(),Ut())})(Le,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,a=n.algo;const o=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var h={pbox:[],sbox:[]};function d(S,O){let A=O>>24&255,F=O>>16&255,P=O>>8&255,k=O&255,L=S.sbox[0][A]+S.sbox[1][F];return L=L^S.sbox[2][P],L=L+S.sbox[3][k],L}function p(S,O,A){let F=O,P=A,k;for(let L=0;L<o;++L)F=F^S.pbox[L],P=d(S,F)^P,k=F,F=P,P=k;return k=F,F=P,P=k,P=P^S.pbox[o],F=F^S.pbox[o+1],{left:F,right:P}}function v(S,O,A){let F=O,P=A,k;for(let L=o+1;L>1;--L)F=F^S.pbox[L],P=d(S,F)^P,k=F,F=P,P=k;return k=F,F=P,P=k,P=P^S.pbox[1],F=F^S.pbox[0],{left:F,right:P}}function x(S,O,A){for(let m=0;m<4;m++){S.sbox[m]=[];for(let T=0;T<256;T++)S.sbox[m][T]=c[m][T]}let F=0;for(let m=0;m<o+2;m++)S.pbox[m]=f[m]^O[F],F++,F>=A&&(F=0);let P=0,k=0,L=0;for(let m=0;m<o+2;m+=2)L=p(S,P,k),P=L.left,k=L.right,S.pbox[m]=P,S.pbox[m+1]=k;for(let m=0;m<4;m++)for(let T=0;T<256;T+=2)L=p(S,P,k),P=L.left,k=L.right,S.sbox[m][T]=P,S.sbox[m][T+1]=k;return!0}var D=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var S=this._keyPriorReset=this._key,O=S.words,A=S.sigBytes/4;x(h,O,A)}},encryptBlock:function(S,O){var A=p(h,S[O],S[O+1]);S[O]=A.left,S[O+1]=A.right},decryptBlock:function(S,O){var A=v(h,S[O],S[O+1]);S[O]=A.left,S[O+1]=A.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(D)}(),r.Blowfish})}(Uf)),Uf.exports}(function(t,e){(function(r,n,i){t.exports=n(it(),dc(),vP(),yP(),is(),mP(),ss(),ay(),id(),xP(),oy(),wP(),_P(),EP(),sd(),AP(),_i(),Ut(),SP(),DP(),MP(),CP(),IP(),BP(),PP(),FP(),RP(),OP(),TP(),NP(),$P(),LP(),kP(),qP(),zP())})(Le,function(r){return r})})(sy);var UP=sy.exports;const jf=Xi(UP);function jP(){const{subscribe:t,set:e,update:r}=Iy({data:null,error:null,loading:!1,pendingTransaction:null});let n=null;return Ht&&(Ht.on("session_proposal",async i=>{try{n=await HP(i)}catch(s){console.error("Session error:",s)}}),Ht.on("session_request",async i=>{if(n)try{await KP(i,n)}catch(s){console.error("Request error:",s)}}),Ht.core.relayer.on("relayer_connect",()=>{console.log("Connected to relay server")}),Ht.core.relayer.on("relayer_disconnect",()=>{console.log("Disconnected from relay server")}),Ht.on("session_request_expire",i=>{r(s=>({...s,pendingTransaction:s.pendingTransaction?.status==="processing"?{...s.pendingTransaction,status:"failed"}:s.pendingTransaction}))}),Ht.on("session_delete",()=>{n=null,r(i=>({...i,pendingTransaction:i.pendingTransaction?.status==="processing"?{...i.pendingTransaction,status:"failed"}:i.pendingTransaction}))})),{subscribe:t,async initiateReceive(i){if(!pc(t).data)throw new Error("No card data available");r(a=>({...a,pendingTransaction:{receiverCard:a.data.pub,amount:i,status:"waitingForPayer"}}))},async payerPresented(){const i=pc(t);if(!i.data||!i.pendingTransaction)throw new Error("No pending transaction or invalid state");if(i.pendingTransaction.status!=="waitingForPayer")throw new Error("Invalid transaction state");r(s=>({...s,pendingTransaction:{...s.pendingTransaction,payerCard:s.data.pub,status:"waitingForPin"}}))},async validateWithPin(i){const s=pc(t);if(!s.pendingTransaction?.payerCard)throw new Error("No transaction pending or invalid state");try{if(r(a=>({...a,pendingTransaction:{...a.pendingTransaction,status:"processing"}})),s.data?.encKey&&!await ZP(i,s.data.encKey))throw new Error("Invalid PIN");if(n&&Ht){const a=await Ht.request({topic:n.topic,request:{method:"eth_sendTransaction",params:[{from:s.pendingTransaction.payerCard,to:s.pendingTransaction.receiverCard,value:`0x${BigInt(s.pendingTransaction.amount).toString(16)}`}]}});return r(o=>({...o,pendingTransaction:{...o.pendingTransaction,status:"completed"}})),a}}catch(a){throw r(o=>({...o,pendingTransaction:{...o.pendingTransaction,status:"failed"},error:a instanceof Error?a.message:"Transaction failed"})),a}},cancelTransaction(){r(i=>({...i,pendingTransaction:null,error:null}))},async loadCard(i){r(s=>({...s,loading:!0}));try{const s=await VP(i);r(a=>({...a,data:s,loading:!1,error:null}))}catch(s){console.error("Error loading card:",s),r(a=>({...a,error:s instanceof Error?s.message:"Failed to load card",loading:!1}))}},clearCard(){localStorage.removeItem("cardData"),n=null,e({data:null,error:null,loading:!1,pendingTransaction:null})}}}async function HP(t){if(!Ht)throw new Error("WalletKit not initialized");const e={eip155:{chains:["eip155:137"],methods:["eth_sendTransaction","eth_signTransaction","personal_sign"],events:["chainChanged","accountsChanged"]}};return await Ht.approveSession({id:t.id,namespaces:e})}async function KP(t,e){if(!Ht)return;const{method:r,params:n}=t.request;if(r==="eth_sendTransaction")return await Ht.request({topic:e.topic,request:{method:"eth_sendTransaction",params:n}})}async function VP(t){const[e,r,n]=t.slice(1).split(":");if(!e||!n)throw new Error("Invalid card data");const i="0x"+GP(e),s=await WP(i);return{id:n,pub:i,balance:s,encKey:r}}function GP(t){const e=atob(t);let r="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n).toString(16);r+=i.length===2?i:"0"+i}return r.toLowerCase()}async function WP(t){if(!Ht)throw new Error("WalletKit not initialized");const e=await Ht.request({request:{method:"eth_getBalance",params:[t,"latest"]}});return M0(BigInt(e))}async function ZP(t,e){try{return(await XP(e,t)).toString().length>0}catch(r){return console.error("PIN validation error:",r),!1}}async function XP(t,e){const r=jf.enc.Hex.parse(t).toString(jf.enc.Base64);return jf.AES.decrypt(r,e).toString()}const DF=jP();export{te as B,va as H,Kn as a,hn as b,F0 as c,R6 as d,Ns as e,DF as f,Ju as g,oh as i,Nt as s,Ht as w};
